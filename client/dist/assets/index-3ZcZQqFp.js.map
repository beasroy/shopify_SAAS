{"version":3,"file":"index-3ZcZQqFp.js","sources":["../../src/lib/utils.ts","../../src/components/ui/input.tsx","../../src/components/ui/button.tsx","../../src/components/ui/label.tsx","../../src/hooks/use-toast.ts","../../src/store/slices/UserSlice.ts","../../src/data/constant.ts","../../src/Auth/AuthForm.tsx","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/store/slices/BrandSlice.ts","../../src/components/ui/tooltip.tsx","../../src/assets/messold-icon.png","../../src/components/ui/scroll-area.tsx","../../src/data/logo.tsx","../../src/components/ui/dialog.tsx","../../src/components/ui/skeleton.tsx","../../src/pages/Pricing/Pricing.tsx","../../src/components/dashboard_component/CollapsibleSidebar.tsx","../../src/components/ui/card.tsx","../../src/pages/AnalyticsDashboard/AdAccountsMetricsCard.tsx","../../src/components/ui/calendar.tsx","../../src/components/ui/popover.tsx","../../src/components/ui/checkbox.tsx","../../src/store/slices/DateSlice.ts","../../src/components/dashboard_component/DatePickerWithRange.tsx","../../src/store/slices/LocalSlice.ts","../../src/store/slices/NotificationSlice.ts","../../src/components/ui/badge.tsx","../../src/components/dashboard_component/HeaderNotificationDropdown.tsx","../../src/store/slices/ConversionFilterSlice.ts","../../src/store/slices/CampaignGroupSlice.ts","../../src/store/slices/campaignLabelsSlice.ts","../../src/store/slices/TutorialSlice.ts","../../src/store/slices/TokenSllice.ts","../../src/store/slices/interestFilterSlice.ts","../../src/store/slices/BrandFormSlice.ts","../../src/store/index.ts","../../src/services/socketService.ts","../../src/hooks/useSocketConnection.ts","../../src/components/dashboard_component/Header.tsx","../../src/components/dashboard_component/loader.tsx","../../src/pages/ConversionReportPage/components/axiosInstance.ts","../../src/components/dashboard_component/PlatformModal.tsx","../../src/pages/GeneralisedDashboard/dashboard.tsx","../../src/pages/AnalyticsDashboard/Components/ConnectAccountsPage.tsx","../../src/pages/AnalyticsDashboard/dashboard.tsx","../../src/components/dashboard_component/TicketForm.tsx","../../src/components/dashboard_component/HelpDeskModal.tsx","../../src/pages/LandingPage/components/Footer.tsx","../../src/pages/AnalyticsDashboard/AnalyticsDashboard.tsx","../../src/pages/GeneralisedDashboard/components/ShopifyModalContent.tsx","../../src/pages/GeneralisedDashboard/components/OtherPlatformModalContent.tsx","../../src/pages/GeneralisedDashboard/components/BrandForm.tsx","../../src/components/ui/separator.tsx","../../src/pages/GeneralisedDashboard/BrandSetUpDashboard.tsx","../../src/pages/GeneralisedDashboard/GeneralDashboard.tsx","../../src/pages/MonthlyAdMetrics/components/DataBuilding.tsx","../../src/utils/currency.ts","../../src/pages/MonthlyAdMetrics/ExcelMetrics.tsx","../../src/components/ui/table.tsx","../../src/components/ui/select.tsx","../../src/pages/BrandPerformanceDashboard/Dashboard.tsx","../../src/pages/BrandPerformanceDashboard/PerformanceDashboard.tsx","../../src/pages/SegmentDashboard/component/ProductTab.tsx","../../src/components/dashboard_component/TableSkeleton.tsx","../../src/pages/SegmentDashboard/component/SearchTermTable.tsx","../../src/pages/SegmentDashboard/Dashboard.tsx","../../src/pages/SegmentDashboard/SegmentDashboard.tsx","../../src/Auth/OauthSucces.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/components/dashboard_component/FilterReport.tsx","../../src/pages/ReportPage/component/NewReportTable.tsx","../../src/components/ui/sheet.tsx","../../src/pages/AnalyticsDashboard/Components/ColumnManagementSheet.tsx","../../src/pages/ReportPage/component/EcommerceMetricsPage.tsx","../../src/pages/ReportPage/ConnectPlatformPage.tsx","../../src/pages/ReportPage/component/DaywiseMetricsPage.tsx","../../src/pages/ConversionReportPage/components/CustomTabs.tsx","../../src/components/dashboard_component/Missing-Date-Waning.tsx","../../src/components/dashboard_component/NoAccessPage..tsx","../../src/pages/ReportPage/ReportsPage.tsx","../../src/context/TokenErrorContext.tsx","../../src/pages/ConversionReportPage/components/Table.tsx","../../src/pages/ConversionReportPage/components/Filter.tsx","../../src/pages/GoogleAdsHub/components/SearchTerm.tsx","../../src/pages/GoogleAdsHub/components/Age.tsx","../../src/pages/GoogleAdsHub/components/Gender.tsx","../../src/pages/GoogleAdsHub/components/Keyword.tsx","../../src/pages/GoogleAdsHub/components/Product.tsx","../../src/pages/GoogleAdsHub/Dashboard.tsx","../../src/pages/ConversionReportPage/components/PerformanceSummary.tsx","../../src/components/dashboard_component/NumberFormatSelector.tsx","../../src/pages/Meta/FbReports/component/AudienceFbReport.tsx","../../src/pages/Meta/FbReports/component/PlacementFbReport.tsx","../../src/pages/Meta/FbReports/component/PlatformFbReport.tsx","../../src/pages/Meta/FbReports/component/CountryFbReport.tsx","../../src/pages/Meta/FbReports/component/DeviceFbReport.tsx","../../src/pages/Meta/FbReports/component/GenderFbReport.tsx","../../src/pages/Meta/FbReports/component/AgeFbReport.tsx","../../src/pages/Meta/FbReports/FbReportPage.tsx","../../src/components/ui/tabs.tsx","../../src/pages/Profile Page/components/BrandIntegrationModal.tsx","../../src/pages/Profile Page/components/BrandCard.tsx","../../src/pages/Profile Page/ProfilePage.tsx","../../src/components/Tutorial/TutorialConfig.ts","../../src/components/Tutorial/TutorialManager.tsx","../../src/components/Tutorial/TutorialDriver.tsx","../../src/pages/LandingPage/components/CTA.tsx","../../src/pages/LandingPage/components/Features.tsx","../../src/pages/LandingPage/components/HeroSection.tsx","../../src/pages/LandingPage/components/Navbar.tsx","../../src/pages/LandingPage/page.tsx","../../src/pages/LandingPage/components/PrivacyPolicy.tsx","../../src/pages/LandingPage/components/TermsAndConditions.tsx","../../src/pages/ConversionReportPage/components/ExcelDownload.tsx","../../src/pages/ConversionReportPage/components/DeviceConversion.tsx","../../src/pages/ConversionReportPage/components/GenderConversion.tsx","../../src/pages/ConversionReportPage/components/AgeConversion.tsx","../../src/pages/ConversionReportPage/components/InterestConversion.tsx","../../src/pages/ConversionReportPage/components/OperatingSystemConversion.tsx","../../src/pages/ConversionReportPage/components/BrowserConversion.tsx","../../src/pages/ConversionReportPage/components/SourceConversion.tsx","../../src/pages/ConversionReportPage/components/PageTitleConversion.tsx","../../src/pages/ConversionReportPage/components/PagePathConversion.tsx","../../src/pages/ConversionReportPage/components/LandingPageConversion.tsx","../../src/pages/ConversionReportPage/components/RegionConversion.tsx","../../src/pages/ConversionReportPage/components/CityConversion.tsx","../../src/pages/ConversionReportPage/components/CountryConversion.tsx","../../src/pages/ConversionReportPage/components/CampaignConversion.tsx","../../src/pages/ConversionReportPage/components/ChannelConversion.tsx","../../src/pages/ConversionReportPage/ConversionLens.tsx","../../src/pages/Meta/Campaign Reports/components/MetaCampaignTable.tsx","../../src/pages/Meta/Campaign Reports/CampaignPage.tsx","../../src/pages/Meta/Interest Reports/components/InterestFilter.tsx","../../src/pages/Meta/Interest Reports/components/InterestTable.tsx","../../src/pages/Meta/Interest Reports/InterestReportPage.tsx","../../src/Auth/Shopify.tsx","../../src/Auth/PricingSuccess.tsx","../../src/pages/GeneralisedDashboard/AddBrandDashboard.tsx","../../src/hooks/useTokenExpire.ts","../../src/components/dashboard_component/AutoLogout.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-black text-white shadow hover:bg-white hover:text-black\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface User {\n  id: string;\n  username: string;\n  email: string;\n  brands: string[];\n  isClient: boolean;\n  isAdmin: boolean;\n  metgod: string;\n  loginCount: number;\n}\n\ninterface UserState {\n  user: User | null;\n}\n\nconst initialState: UserState = {\n  user: null,\n};\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    setUser: (state, action: PayloadAction<User | null>) => {\n      state.user = action.payload;\n    },\n\n    clearUser: (state) => {\n      state.user = null;\n    },\n\n    removeBrandFromUser: (state, action: PayloadAction<string>) => {\n      if (state.user) {\n        state.user.brands = state.user.brands.filter(brandId => brandId !== action.payload);\n      }\n    },\n\n    addBrandToUser: (state, action: PayloadAction<string>) => {\n      if (state.user && !state.user.brands.includes(action.payload)) {\n        state.user.brands.push(action.payload);\n      }\n    },\n  },\n});\n\nexport const { setUser, clearUser, removeBrandFromUser, addBrandToUser } = userSlice.actions;\nexport default userSlice.reducer;\n","import { LayoutDashboard, Settings } from \"lucide-react\";\n\nexport const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\n\nexport const apphandle = import.meta.env.VITE_APP_HANDLE ;\n\nexport const COLORS = {\n  primary: {\n    main: \"#0EA5E9\", // Vivid sky blue\n    light: \"#7DD3FC\", // Light sky blue\n    dark: \"#0369A1\", // Deep sky blue\n    bg: \"#F0F9FF\", // Very light sky blue\n  },\n  secondary: {\n    main: \"#475569\", // Slate gray\n    light: \"#94A3B8\", // Light slate\n    dark: \"#334155\", // Dark slate\n    bg: \"#F8FAFC\", // Very light slate\n  },\n  success: {\n    main: \"#10B981\", // Emerald green\n    dark: \"#047857\", // Deep emerald\n    bg: \"#D7FFDF\", // Very light emerald\n  },\n  danger: {\n    main: \"#F43F5E\", // Rose red\n    dark: \"#BE123C\", // Deep rose\n    bg: \"#FFF1F2\", // Very light rose\n  },\n  warning: {\n    main: \"#1E40AF\", // Deep navy blue\n    dark: \"#1E3A8A\", // Darker navy blue\n    bg: \"#EFF6FF\", // Very light blue\n  },\n  neutral: {\n\n    main: \"#F59E0B\", // Amber\n    dark: \"#B45309\", // Deep amber\n    bg: \"#FFFBEB\", // Very light amber\n  },\n  text: {\n    primary: \"#0F172A\", // Very dark slate\n    secondary: \"#334155\", // Dark slate\n    muted: \"#64748B\", // Medium slate\n  },\n  border: {\n    main: \"#CBD5E1\", // Light slate\n    dark: \"#94A3B8\", // Medium slate\n  },\n  background: {\n    headerGradient: \"linear-gradient(to bottom, #F1F5F9, #E2E8F0)\",\n  },\n};\n\n\nexport const pricingPlans = [\n  {\n      id: \"FREE\",\n      title: \"Free Plan\",\n      price: \"Free\",\n      description: \"Perfect for getting started with analytics\",\n      features: [\n          \"Basic Analytics Dashboard\",\n          \"Shopify Integration\",\n          \"Daily Data Updates\",\n          \"Basic Reports\",\n          \"Email Support\",\n      ],\n      buttonText: \"Get Started\",\n  },\n  {\n      id: \"STARTUP\",\n      title: \"Startup Plan\",\n      price: \"$10\",\n      period: \"/month\",\n      description: \"Ideal for growing businesses\",\n      features: [\n          \"Everything in Free Plan\",\n          \"Real-time Analytics\",\n          \"Custom Dashboards\",\n          \"Advanced Reports\",\n          \"Priority Email Support\",\n      ],\n      isPopular: true,\n      buttonText: \"Subscribe Now\",\n  },\n  {\n      id: \"GROWTH\",\n      title: \"Growth Plan\",\n      price: \"$50\",\n      period: \"/month\",\n      description: \"For businesses ready to scale\",\n      features: [\n          \"Everything in Startup Plan\",\n          \"AI-Powered Insights\",\n          \"White-label Reports\",\n          \"Custom Integrations\",\n          \"Team Collaboration\",\n      ],\n      buttonText: \"Subscribe Now\",\n  },\n]\n\nexport const setupSteps = [\n  {\n    id: 1,\n    title: \"Brand Setup\",\n    description: \"Configure your brand details and identity\",\n    icon: Settings,\n  },\n  {\n    id: 2,\n    title: \"Connect Platforms\",\n    description: \"Link your marketing and analytics accounts\",\n    icon: LayoutDashboard,\n  }\n]\n\n\n\nexport const privacyPolicySections = [\n  {\n    title: \"1. Introduction\",\n    content: [\n      \"Welcome to Messold (\\\"we,\\\" \\\"our,\\\" or \\\"us\\\"). Your privacy is important to us. This Privacy Policy explains how we collect, use, share, and protect your information when you use our Parallels application.\"\n    ]\n  },\n  {\n    title: \"2. Information We Collect\",\n    content: [\n      \"Our application accesses and processes the following user data from Google and Meta:\",\n      [\n        \"Google Ads Data: We access advertising campaign performance and spend data.\",\n        \"Google Analytics Data: We access read-only analytics data and may edit settings.\",\n        \"Meta Ads Data: We access ad account data, campaign insights, and interest-based targeting information.\",\n      ]\n    ]\n  },\n  {\n    title: \"3. How We Use Google and Meta User Data\",\n    content: [\n      [\n        \"To provide analytics and advertising insights.\",\n        \"To display relevant reports and campaign performance data.\",\n        \"To personalize the user experience.\",\n        \"To enhance and improve our services through data analysis.\"\n      ]\n    ]\n  },\n  {\n    title: \"4. Data Sharing & Disclosure\",\n    content: [\n      \"We do not sell, rent, or trade your personal information. However, we may share your data:\",\n      [\n        \"With authorized service providers assisting in hosting, analytics, or customer support.\",\n        \"For legal compliance if required by law.\",\n        \"With your consent.\"\n      ]\n    ]\n  },\n  {\n    title: \"5. Data Retention & Deletion\",\n    content: [\n      \"Users can request:\",\n      [\n        \"Deletion of their data by contacting us at info@messold.com.\",\n        \"Access to stored data via email.\",\n        \"Revocation of Meta data access via Facebook's security settings.\"\n      ]\n    ]\n  },\n  {\n    title: \"6. Data Security\",\n    content: [\n      \"We take appropriate security measures including encryption, access control, and regular security audits.\"\n    ]\n  },\n  {\n    title: \"7. User Rights & Control\",\n    content: [\n      \"You have the right to:\",\n      [\n        \"Revoke our application's access via Google Security Settings.\",\n        \"Revoke our application's access via Meta App Settings.\",\n        \"Request access, correction, or deletion of your data.\",\n        \"Opt-out of non-essential data collection.\"\n      ]\n    ]\n  },\n  {\n    title: \"8. Compliance with Google API Services Policy & Meta Platform Terms\",\n    content: [\n      \"We comply with the Google API Services User Data Policy, including the Limited Use requirements.\",\n      \"We comply with Meta's Platform Terms and ensure that we process Platform Data only as described in this policy and in accordance with applicable laws.\"\n    ]\n  },\n  {\n    title: \"9. GDPR/CCPA Compliance\",\n    content: [\n      \"Residents of the EEA or California have additional rights, including:\",\n      [\n        \"The right to access, correct, or delete your data.\",\n        \"The right to data portability.\",\n        \"The right to restrict or object to data processing.\"\n      ]\n    ]\n  },\n  {\n    title: \"10. Updates to This Privacy Policy\",\n    content: [\n      \"We may update this Privacy Policy periodically. Any significant changes will be communicated via email or within the application.\"\n    ]\n  },\n  {\n    title: \"11. Contact Us\",\n    content: [\n      \"If you have any questions, contact us at:\",\n      \"Email: info@messold.com\"\n    ]\n  }\n];\n\nexport const termsAndConditionsSections = [\n  {\n    title: \"1. Terms\",\n    content: [\n      \"By accessing this web site, you are agreeing to be bound by these web site Terms and Conditions of Use, applicable laws and regulations and their compliance. If you disagree with any of the stated terms and conditions, you are prohibited from using or accessing this site. The materials contained in this site are secured by relevant copyright and trade mark law.\"\n    ]\n  },\n  {\n    title: \"2. Use License\",\n    content: [\n      \"Permission is allowed to temporarily download one duplicate of the materials (data or programming) on Messold Technologies's site for individual and non-business use only. This is the just a permit of license and not an exchange of title, and under this permit you may not:\",\n      [\n        \"modify or copy the materials;\",\n        \"use the materials for any commercial use, or for any public presentation (business or non-business);\",\n        \"attempt to decompile or rebuild any product or material contained on Messold Technologies's site;\",\n        \"remove any copyright or other restrictive documentations from the materials; or\",\n        \"transfer the materials to someone else or even \\\"mirror\\\" the materials on other server.\"\n      ],\n      \"This permit might consequently be terminated if you disregard any of these confinements and may be ended by Messold Technologies whenever deemed. After permit termination or when your viewing permit is terminated, you must destroy any downloaded materials in your ownership whether in electronic or printed form.\"\n    ]\n  },\n  {\n    title: \"3. Disclaimer\",\n    content: [\n      \"The materials on Messold Technologies's site are given \\\"as is\\\". Messold Technologies makes no guarantees, communicated or suggested, and thus renounces and nullifies every single other warranties, including without impediment, inferred guarantees or states of merchantability, fitness for a specific reason, or non-encroachment of licensed property or other infringement of rights. Further, Messold Technologies does not warrant or make any representations concerning the precision, likely results, or unwavering quality of the utilization of the materials on its Internet site or generally identifying with such materials or on any destinations connected to this website.\"\n    ]\n  },\n  {\n    title: \"4. Constraints\",\n    content: [\n      \"In no occasion should Messold Technologies or its suppliers subject for any harms (counting, without constraint, harms for loss of information or benefit, or because of business interference,) emerging out of the utilization or powerlessness to utilize the materials on Messold Technologies's Internet webpage, regardless of the possibility that Messold Technologies or a Messold Technologies approved agent has been told orally or in written of the likelihood of such harm. Since a few purviews don't permit constraints on inferred guarantees, or impediments of obligation for weighty or coincidental harms, these confinements may not make a difference to you.\"\n    ]\n  },\n  {\n    title: \"5. Amendments and Errata\",\n    content: [\n      \"The materials showing up on Messold Technologies's site could incorporate typographical, or photographic mistakes. Messold Technologies does not warrant that any of the materials on its site are exact, finished, or current. Messold Technologies may roll out improvements to the materials contained on its site whenever without notification. Messold Technologies does not, then again, make any dedication to update the materials.\"\n    ]\n  },\n  {\n    title: \"6. Links\",\n    content: [\n      \"Messold Technologies has not checked on the majority of the websites or links connected to its website and is not in charge of the substance of any such connected webpage. The incorporation of any connection does not infer support by Messold Technologies of the site. Utilization of any such connected site is at the user's own risk.\"\n    ]\n  },\n  {\n    title: \"7. Site Terms of Use Modifications\",\n    content: [\n      \"Messold Technologies may update these terms of utilization for its website whenever without notification. By utilizing this site you are consenting to be bound by the then current form of these Terms and Conditions of Use.\"\n    ]\n  },\n  {\n    title: \"8. Governing Law\",\n    content: [\n      \"Any case identifying with Messold Technologies's site should be administered by the laws of the country of India Messold Technologies State without respect to its contention of law provisions.\"\n    ]\n  },\n  {\n    title: \"9. Refunds\",\n    content: [\n      \"Any amount charged is non-refundable.\"\n    ]\n  },\n  {\n    title: \"10. Contact Us\",\n    content: [\n      \"If you have any questions about these Terms and Conditions, please contact us at:\",\n      \"Email: info@messold.com\"\n    ]\n  }\n];\n\nexport const metricConfigs = {\n    sessionsAndConversion: {\n      primary: {\n        key: 'Total Sessions',\n        name: 'Sessions'\n      },\n      secondary: {\n        key: 'Avg Conv. Rate',\n        name: 'Conversion'\n      }\n    },\n    spendAndRoas: {\n      primary: {\n        key: 'Total Spend',\n        name: 'Spend'\n      },\n      secondary: {\n        key: 'Total Purchase ROAS',\n        name: 'Purchase ROAS'\n      }\n    }\n  };\n\n\n\n  \n  \n  \n  \n\n","import type React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport { Eye, EyeOff, Mail, Lock, User, Store } from \"lucide-react\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { Label } from \"@/components/ui/label\"\nimport { useToast } from \"../hooks/use-toast\"\nimport { FcGoogle } from \"react-icons/fc\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport type { RootState } from \"@/store\"\nimport { setUser } from \"@/store/slices/UserSlice\"\nimport { baseURL } from \"@/data/constant\"\n\nexport default function AuthForm() {\n  const [isLogin, setIsLogin] = useState(true)\n  const [username, setUsername] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [showPassword, setShowPassword] = useState(false)\n  const [shop, setShop] = useState(\"\")\n  const [isShopifyLogin, setIsShopifyLogin] = useState(false)\n  const { toast } = useToast()\n  const navigate = useNavigate()\n  const [errors, setErrors] = useState({ username: \"\", email: \"\", password: \"\", shop: \"\" })\n  const user = useSelector((state: RootState) => state.user.user)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (user?.brands && user.brands.length > 0) {\n      navigate(\"/dashboard\")\n    }else if (user?.brands && user.brands.length === 0) {\n      navigate(\"/first-time-brand-setup\")\n    }\n  }, [user, navigate])\n\n  const toggleForm = () => {\n    setIsLogin(!isLogin)\n    setIsShopifyLogin(false)\n  }\n\n  const toggleShopifyLogin = () => {\n    setIsShopifyLogin(!isShopifyLogin)\n  }\n\n  const validateForm = () => {\n    const newErrors = { username: \"\", email: \"\", password: \"\", shop: \"\" }\n    let isValid = true\n\n    if (isShopifyLogin) {\n      if (!shop.trim()) {\n        newErrors.shop = \"Shop name is required\"\n        isValid = false\n      }\n      return isValid\n    }\n\n    if (!isLogin && !username.trim()) {\n      newErrors.username = \"Username is required\"\n      isValid = false\n    }\n\n    if (!email.trim()) {\n      newErrors.email = \"Email is required\"\n      isValid = false\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\n      newErrors.email = \"Email is invalid\"\n      isValid = false\n    }\n\n    if (!password) {\n      newErrors.password = \"Password is required\"\n      isValid = false\n    } else if (password.length < 8) {\n      newErrors.password = \"Password must be at least 8 characters\"\n      isValid = false\n    }\n\n    setErrors(newErrors)\n    return isValid\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!validateForm()) {\n      return\n    }\n\n    if (isShopifyLogin) {\n      handleShopifyLogin()\n      return\n    }\n\n    try {\n      let response\n\n      if (isLogin) {\n        response = await axios.post(`${baseURL}/api/auth/login/normal`, { email, password }, { withCredentials: true })\n\n        if (response.data.success) {\n          // Set the user in the context with hasSeenLandingSlides flag\n          const userData = {\n            ...response.data.user,\n          }\n          dispatch(setUser(userData))\n\n          toast({\n            title: \"Login successful!\",\n            description: \"Welcome! Redirecting to your dashboard.\",\n            variant: \"default\",\n          })\n          console.log(user)\n          if (user?.brands && user.brands.length > 0) {\n            navigate(\"/dashboard\")\n          }else if (user?.brands && user.brands.length === 0) {\n            navigate(\"/first-time-brand-setup\")\n          }\n        }\n      } else {\n        response = await axios.post(\n          `${baseURL}/api/auth/signup`,\n          { username, email, password },\n          { withCredentials: true },\n        )\n\n        if (response.data.success) {\n          toast({\n            title: \"Registration successful!\",\n            description: \"Please log in with your new account.\",\n            variant: \"default\",\n          })\n          setIsLogin(true)\n        }\n      }\n    } catch (error) {\n      if (axios.isAxiosError(error) && error.response) {\n        toast({\n          title: \"Error\",\n          description: error.response.data.message || \"An error occurred\",\n          variant: \"destructive\",\n        })\n      } else {\n        toast({\n          title: \"Unexpected Error\",\n          description: \"An unexpected error occurred\",\n          variant: \"destructive\",\n        })\n      }\n    }\n  }\n\n  const handleGoogleLogin = async () => {\n    try {\n      const response = await axios.get(`${baseURL}/api/auth/google?context=userLogin`)\n      const { authUrl } = response.data\n\n      window.location.href = authUrl\n    } catch (error) {\n      console.error(\"Error getting Google Auth URL:\", error)\n    }\n  }\n\n  const handleShopifyLogin = async () => {\n    try {\n      if (!shop.trim()) {\n        setErrors((prev) => ({ ...prev, shop: \"Shop name is required\" }))\n        return\n      }\n\n      const response = await axios.post(`${baseURL}/api/auth/shopify`, { shop , flowType: \"login\" })\n      const { authUrl } = response.data\n      window.location.href = authUrl\n    } catch (error) {\n      console.error(\"Error getting Shopify Auth URL:\", error)\n      toast({\n        title: \"Error\",\n        description: \"Failed to connect to Shopify\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  return (\n    <div className=\"flex h-screen\">\n      <div\n        className=\"hidden md:flex md:w-1/2 bg-cover bg-center\"\n        style={{\n          backgroundImage:\n            \"url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2015&q=80')\",\n        }}\n      >\n        <div className=\"flex items-center justify-center w-full h-full bg-black bg-opacity-40\">\n          <div className=\"text-white text-center p-8\">\n            <h3 className=\"text-4xl font-bold mb-6\">Unified Marketing Analytics</h3>\n            <p className=\"text-xl\">View your Shopify, Facebook, and Google Ads data all in one place.</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"w-full md:w-1/2 flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-8\">\n        <div className=\"w-full max-w-md\">\n          <h2 className=\"text-3xl font-bold mb-3\">\n            {isShopifyLogin ? \"Connect Your Shopify Store\" : isLogin ? \"Welcome Back\" : \"Create an Account\"}\n          </h2>\n          <p className=\"mb-8\">\n            {isShopifyLogin\n              ? \"Enter your Shopify store name to connect\"\n              : isLogin\n                ? \"Sign in to access your marketing dashboard\"\n                : \"Join us to view all your marketing data in one place\"}\n          </p>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {isShopifyLogin ? (\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"shop\">Shopify Store Name</Label>\n                <div className=\"relative\">\n                  <Store className=\"absolute left-3 top-3 h-5 w-5\" />\n                  <Input\n                    id=\"shop\"\n                    type=\"text\"\n                    value={shop}\n                    onChange={(e) => setShop(e.target.value)}\n                    placeholder=\"your-store-name\"\n                    required\n                    className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\n                  />\n                </div>\n                {errors.shop && <p className=\"text-red-500 text-sm\">{errors.shop}</p>}\n                <p className=\"text-sm text-gray-500 mt-1\">Enter only the store name without .myshopify.com</p>\n              </div>\n            ) : (\n              <>\n                {!isLogin && (\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"username\">Username</Label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-3 h-5 w-5\" />\n                      <Input\n                        id=\"username\"\n                        type=\"text\"\n                        value={username}\n                        onChange={(e) => setUsername(e.target.value)}\n                        placeholder=\"Enter your username\"\n                        required={!isLogin}\n                        className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\n                      />\n                    </div>\n                    {errors.username && <p className=\"text-red-500 text-sm\">{errors.username}</p>}\n                  </div>\n                )}\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\">Email</Label>\n                  <div className=\"relative\">\n                    <Mail className=\"absolute left-3 top-3 h-5 w-5\" />\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      placeholder=\"Enter your email\"\n                      required\n                      className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\n                    />\n                  </div>\n                  {errors.email && <p className=\"text-red-500 text-sm\">{errors.email}</p>}\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <div className=\"relative\">\n                    <Lock className=\"absolute left-3 top-3 h-5 w-5\" />\n                    <Input\n                      id=\"password\"\n                      type={showPassword ? \"text\" : \"password\"}\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      placeholder=\"Enter your password\"\n                      required\n                      className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      className=\"absolute right-3 top-3\"\n                    >\n                      {showPassword ? <Eye className=\"h-5 w-5\" /> : <EyeOff className=\"h-5 w-5\" />}\n                    </button>\n                  </div>\n                  {errors.password && <p className=\"text-red-500 text-sm\">{errors.password}</p>}\n                </div>\n              </>\n            )}\n            <Button type=\"submit\" className=\"w-full text-white\">\n              {isShopifyLogin ? \"Connect Shopify Store\" : isLogin ? \"Sign In\" : \"Sign Up\"}\n            </Button>\n          </form>\n\n          {!isShopifyLogin && (\n            <div className=\"flex flex-col md:flex-row gap-3 items-center justify-center mt-6 w-full \">\n              <div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full flex items-center justify-center space-x-2\"\n                  onClick={handleGoogleLogin}\n                >\n                  <FcGoogle className=\"h-5 w-5\" />\n                  <span>Continue with Google</span>\n                </Button>\n              </div>\n              <div>\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full flex items-center justify-center space-x-2\"\n                  onClick={toggleShopifyLogin}\n                >\n                  <Store className=\"h-5 w-5 text-[#95BF47]\" />\n                  <span>Continue with Shopify</span>\n                </Button>\n              </div>\n            </div>\n          )}\n\n          <p className=\"mt-6 text-center text-sm\">\n            {isShopifyLogin ? (\n              <>\n                <button onClick={toggleShopifyLogin} className=\"font-semibold hover:underline\">\n                  Back to {isLogin ? \"Sign In\" : \"Sign Up\"}\n                </button>\n              </>\n            ) : (\n              <>\n                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\n                <button onClick={toggleForm} className=\"font-semibold hover:underline\">\n                  {isLogin ? \"Sign Up\" : \"Sign In\"}\n                </button>\n              </>\n            )}\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import * as React from \"react\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <Cross2Icon className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { IBrand, IBrandState } from '@/interfaces';\n\nconst initialState: IBrandState = {\n  selectedBrandId: null,\n  brands: [],\n};\n\nconst brandSlice = createSlice({\n  name: 'brand',\n  initialState,\n  reducers: {\n    setSelectedBrandId: (state, action: PayloadAction<string | null>) => {\n      state.selectedBrandId = action.payload;\n    },\n    setBrands: (state, action: PayloadAction<IBrand[]>) => {\n      state.brands = action.payload;\n    },\n    deleteBrand: (state, action: PayloadAction<string>) => {\n      state.brands = state.brands.filter(brand => brand._id !== action.payload);\n      // If the deleted brand was selected, clear the selection\n      if (state.selectedBrandId === action.payload) {\n        state.selectedBrandId = null;\n      }\n    },\n    resetBrand: (state) => {\n      state.selectedBrandId = null;\n      state.brands = [];\n    },\n  },\n});\n\nexport const { setSelectedBrandId, setBrands, deleteBrand, resetBrand } = brandSlice.actions;\nexport default brandSlice.reducer;\n","import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-black px-3 py-1.5 text-xs text-white animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","export default \"__VITE_ASSET__B1Hq7QXN__\"","import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","import { ILogoProps } from \"@/interfaces\";\n\nexport const Ga4Logo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\n        <rect x=\"17\" y=\"2\" width=\"2rem\" height=\"2rem\" rx=\"2.5\" fill=\"#F9AB00\"></rect>\n        <path d=\"M9.5 13.5C9.5 12.1193 10.6193 11 12 11C13.3807 11 14.5 12.1193 14.5 13.5V19.5C14.5 20.8807 13.3807 22 12 22C10.6193 22 9.5 20.8807 9.5 19.5V13.5Z\" fill=\"#E37400\"></path>\n        <path d=\"M2 19.5C2 18.1193 3.11929 17 4.5 17C5.88071 17 7 18.1193 7 19.5C7 20.8807 5.88071 22 4.5 22C3.11929 22 2 20.8807 2 19.5Z\" fill=\"#E37400\"></path><path d=\"M6.92162 10C6.36184 10 5.95724 9.68838 5.95724 9.05977V8.55474H3.2304C2.49881 8.55474 2 8.1088 2 7.45332C2 7.07723 2.12193 6.70651 2.40459 6.22297C2.93666 5.29349 3.57403 4.31565 4.31116 3.23573C4.92637 2.31162 5.39747 2 6.20111 2C7.2209 2 7.88044 2.54265 7.88044 3.38617V7.02351H8.19082C8.72842 7.02351 9 7.34587 9 7.79181C9 8.23774 8.72288 8.55474 8.19082 8.55474H7.88044V9.05977C7.88044 9.68838 7.47585 10 6.92162 10ZM6.01267 7.09335V3.48287H5.97387C5.0095 4.8368 4.34996 5.83076 3.7015 7.03962V7.09335H6.01267Z\" fill=\"#E37400\"></path>\n    </svg>\n);\n\nexport const ShopifyLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg viewBox=\"0 0 64 64\" style={{ height, width }}\n        xmlns=\"http://www.w3.org/2000/svg\" ><g>\n            <g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-11.703,9.951-12.889,15.008    c-3.078,0.956-5.266,1.638-5.542,1.728C9.943,18.42,9.89,18.474,9.667,20.1C9.495,21.331,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#95C675\" /></g><g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-9.873,9.951-11.059,15.008    c-3.078,0.956-5.44,6.219-5.719,6.307c-1.719,0.542-1.772,0.596-1.996,2.223C11.148,25.91,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#79B259\" /></g><path d=\"M40.022,62.857L59,58.731c0,0-6.661-45.261-6.703-45.572c-0.042-0.311-0.313-0.482-0.538-0.5   c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631c-0.192-0.194-0.479-0.249-0.75-0.251   c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839L40.022,62.857z\" fill=\"#55932C\" /><path d=\"M33.583,2.977c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844   c-7.887,0-11.674,9.873-12.875,14.947l2.447-0.759c1.354-4.609,4.545-12.053,10.209-12.053c0.346,0,0.688,0.116,1.018,0.345   c-2.532,1.195-5.244,4.209-6.398,10.213l2.43-0.75c1.182-4.541,3.381-6.739,5.307-7.569c0.484,1.227,0.803,2.988,0.803,5.363   c0,0.108,0,0.211-0.002,0.314l2.078-0.643c0-0.2,0.002-0.4,0.002-0.617c0-1.966-0.273-3.551-0.709-4.807   c1.746,0.218,2.912,2.213,3.662,4.508l1.938-0.601C38.906,5.876,36.976,2.977,33.583,2.977z\" fill=\"#4A7A2B\" /><path d=\"M47.611,12.348c-0.474-0.037-0.793-0.06-0.793-0.06s-3.28-3.271-3.639-3.631   c-0.192-0.194-0.479-0.249-0.75-0.251c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839l0.396,0.075l10.098-2.196L47.611,12.348z\" fill=\"#4C822A\" />\n        </g></svg>\n);\n\nexport const FacebookLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg style={{ height, width }} fill=\"#1877F2\" viewBox=\"0 0 24 24\">\n        <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n    </svg>\n);\n\nexport const GoogleLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\n        <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\n        <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\n        <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\n    </svg>\n)\nexport const WhiteGa4Logo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 256 256\"\n      style={{ width, height }}\n      fill=\"#ffffff\"\n    >\n      <g\n        fill=\"#ffffff\"\n        fillRule=\"nonzero\"\n        stroke=\"none\"\n        strokeWidth=\"1\"\n        strokeLinecap=\"butt\"\n        strokeLinejoin=\"miter\"\n        strokeMiterlimit=\"10\"\n        fontFamily=\"none\"\n        fontWeight=\"none\"\n        fontSize=\"none\"\n        textAnchor=\"none\"\n        style={{ mixBlendMode: 'normal' }}\n      >\n        <g transform=\"scale(5.12,5.12)\">\n          <path d=\"M35,3c-2.206,0 -4,1.794 -4,4v10h-10c-2.19733,0 -4,1.80267 -4,4v10h-10c-2.19733,0 -4,1.80267 -4,4v8c0,2.19733 1.80267,4 4,4h24h1h11c2.206,0 4,-1.794 4,-4v-36c0,-2.206 -1.794,-4 -4,-4zM21,19h10v26h-24c-1.11667,0 -2,-0.88333 -2,-2v-8c0,-1.11667 0.88333,-2 2,-2h11c0.55226,-0.00006 0.99994,-0.44774 1,-1v-11c0,-1.11667 0.88333,-2 2,-2z\" />\n        </g>\n      </g>\n    </svg>\n  );\n\n  export const WhiteGoogleAdsLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 50 50\"\n      style={{ width, height }}\n      fill=\"#ffffff\"\n    >\n      <path d=\"M 25.167969 5.0058594 C 24.781877 4.9968865 24.394532 5.014912 24.007812 5.0625 C 22.976561 5.1894012 21.954004 5.5214624 21 6.0722656 C 19.738126 6.8008205 18.867614 7.8795934 18.189453 9.0625 L 18.074219 8.9960938 L 4.0742188 32.996094 L 4.1894531 33.0625 C 3.5013617 34.243015 3 35.539748 3 37 C 3 41.406432 6.5935644 45 11 45 C 13.946182 45 16.422265 43.319288 17.810547 40.9375 L 17.925781 41.003906 L 25 28.876953 L 32.074219 41.003906 C 34.278505 44.817 39.185255 46.130214 43 43.927734 C 46.816027 41.724515 48.130947 36.816015 45.927734 33 L 45.927734 32.998047 L 31.927734 9 C 30.481872 6.4957324 27.870611 5.0686695 25.167969 5.0058594 z M 25.130859 6.9960938 C 27.155284 7.0392142 29.104113 8.1100176 30.195312 10 L 30.197266 10.001953 L 30.197266 10.003906 L 44.197266 34.003906 C 45.856861 36.883192 44.878669 40.533286 42 42.195312 C 39.120015 43.8581 35.467467 42.879973 33.804688 40 L 33.802734 39.998047 L 19.804688 16 L 19.804688 15.998047 L 19.802734 15.996094 C 18.143139 13.116808 19.121331 9.4667144 22 7.8046875 C 22.719996 7.3889907 23.488252 7.1380832 24.261719 7.0410156 C 24.551769 7.0046153 24.841656 6.9899337 25.130859 6.9960938 z M 17.212891 14.441406 C 17.372969 15.315284 17.603702 16.188437 18.072266 17 L 18.072266 17.001953 L 23.841797 26.892578 L 18.728516 35.658203 C 18.065728 31.912371 14.931107 29 11 29 C 10.084587 29 9.236334 29.238188 8.4160156 29.523438 L 17.212891 14.441406 z M 11 31 C 14.325556 31 17 33.674446 17 37 C 17 40.325554 14.325556 43 11 43 C 7.6744439 43 5 40.325554 5 37 C 5 33.674446 7.6744439 31 11 31 z\" />\n    </svg>\n  );","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { cn } from \"@/lib/utils\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <Cross2Icon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","import { Check, Star, Calendar, Clock } from \"lucide-react\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport type { RootState } from \"@/store\"\nimport { useSelector } from \"react-redux\"\nimport { pricingPlans, apphandle, baseURL } from \"@/data/constant\"\nimport { useEffect, useState } from \"react\"\nimport axios from \"axios\"\nimport { format } from \"date-fns\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\n// import { Alert, AlertDescription } from \"@/components/ui/alert\"\n\n\ninterface PricingModalProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\ninterface Subscription {\n  id: string\n  planName: string\n  price: number\n  status: string\n  chargeId: string\n  trialEndsOn: string\n  trialDaysRemaining: number\n  billingOn: string\n  daysUntilBilling: number\n  createdAt: string\n}\n\nexport default function PricingModal({ open, onOpenChange }: PricingModalProps) {\n  const { selectedBrandId, brands } = useSelector((state: RootState) => state.brand)\n  const [subscription, setSubscription] = useState<Subscription | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  const selectedBrand = brands.find((brand) => brand._id === selectedBrandId)\n  const shopifyStoreName = selectedBrand?.shopifyAccount?.shopName.replace(\".myshopify.com\", \"\") || \"\"\n  const handle = apphandle || \"parallels\"\n\n  const brandId = useSelector((state:RootState)=>state.brand.selectedBrandId);\n\n  useEffect(() => {\n    if (open) {\n      fetchSubscriptionDetails()\n    }\n  }, [open])\n\n  const fetchSubscriptionDetails = async () => {\n    try {\n      setLoading(true)\n      const response = await axios.get(`${baseURL}/api/pricing/details/${brandId}`,{withCredentials: true })\n      setSubscription(response.data)\n    } catch (err) {\n      console.error(\"Error fetching subscription details:\", err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n\n  const getPlanIdFromName = (planName: string): string => {\n    const planMap: Record<string, string> = {\n      \"Free Plan\": \"FREE\",\n      \"Startup Plan\": \"STARTUP\",\n      \"Growth Plan\": \"GROWTH\",\n    }\n    return planMap[planName] || \"FREE\"\n  }\n\n  const currentPlanId = subscription ? getPlanIdFromName(subscription.planName) : null\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-5xl p-0 overflow-auto max-h-[90vh]\">\n        <DialogHeader className=\"p-6 border-b\">\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"text-2xl font-bold text-center\">Find Your Perfect Plan</DialogTitle>\n          </div>\n        </DialogHeader>\n\n        {loading ? (\n          <div className=\"px-6 pt-6\">\n            <Skeleton className=\"h-24 w-full rounded-lg\" />\n          </div>\n        ) : subscription ? (\n          <div className=\"px-6\">\n            <div className=\"bg-slate-50 rounded-lg p-4 border border-slate-200\">\n              <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-slate-800 flex items-center\">\n                    Current Plan:{\" \"}\n                    <span\n                      className={`ml-2 ${\n                        currentPlanId === \"FREE\"\n                          ? \"text-teal-600\"\n                          : currentPlanId === \"STARTUP\"\n                            ? \"text-violet-600\"\n                            : \"text-rose-600\"\n                      }`}\n                    >\n                      {subscription.planName}\n                    </span>\n                  </h3>\n                  <p className=\"text-slate-600 mt-1\">\n                    Status: <span className=\"font-medium text-green-600 capitalize\">{subscription.status}</span>\n                  </p>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-4\">\n                  {subscription.trialDaysRemaining > 0 && (\n                    <div className=\"flex items-center bg-amber-50 text-amber-700 px-4 py-2 rounded-md border border-amber-200\">\n                      <Clock className=\"h-4 w-4 mr-2\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Trial ends in {subscription.trialDaysRemaining} days</p>\n                        <p className=\"text-xs\">{format(new Date(subscription.trialEndsOn), \"MMM dd, yyyy\")}</p>\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center bg-blue-50 text-blue-700 px-4 py-2 rounded-md border border-blue-200\">\n                    <Calendar className=\"h-4 w-4 mr-2\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Next billing in {subscription.daysUntilBilling} days</p>\n                      <p className=\"text-xs\">{format(new Date(subscription.billingOn), \"MMM dd, yyyy\")}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          // <div className=\"px-6 pt-6\">\n          //   <Alert variant=\"destructive\">\n          //     <AlertCircle className=\"h-4 w-4\" />\n          //     <AlertDescription>Unable to load subscription information. Please try again later.</AlertDescription>\n          //   </Alert>\n          // </div>\n          <></>\n        )}\n\n        <div className=\"p-6\">\n          <div className=\"grid lg:grid-cols-3 gap-6\">\n            {pricingPlans.map((plan) => {\n              const isCurrentPlan = currentPlanId === plan.id\n\n              return (\n                <div\n                  key={plan.id}\n                  className={`relative bg-white rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg ${\n                    isCurrentPlan\n                      ? \"border-2 border-blue-500 shadow-md\"\n                      : plan.isPopular && !isCurrentPlan\n                        ? \"border-slate-200 shadow-md hover:scale-105\"\n                        : \"border-slate-100 hover:scale-105\"\n                  }`}\n                >\n                  {/* Current Plan Badge */}\n                  {isCurrentPlan && (\n                    <div className=\"absolute top-0 right-0 bg-blue-500 text-white text-xs font-semibold py-1 px-3 rounded-bl-lg\">\n                      CURRENT PLAN\n                    </div>\n                  )}\n\n                  {plan.isPopular && !isCurrentPlan && (\n                    <div className=\"absolute top-0 left-0 bg-amber-500 text-white text-xs font-semibold py-1 px-3 rounded-br-lg\">\n                      <Star className=\"h-3.5 w-3.5 fill-white inline-block mr-1\" /> POPULAR\n                    </div>\n                  )}\n\n                  <div\n                    className={`p-6 flex flex-col items-center ${\n                      plan.id === \"FREE\"\n                        ? \"bg-gradient-to-b from-teal-50 to-white\"\n                        : plan.id === \"STARTUP\"\n                          ? \"bg-gradient-to-b from-violet-50 to-white\"\n                          : \"bg-gradient-to-b from-rose-50 to-white\"\n                    }`}\n                  >\n\n                    <h3 className=\"text-xl font-bold text-slate-800\">{plan.title}</h3>\n\n                    <div className=\"flex items-baseline mt-4\">\n                      <span\n                        className={`text-4xl font-bold ${\n                          plan.id === \"FREE\"\n                            ? \"text-teal-600\"\n                            : plan.id === \"STARTUP\"\n                              ? \"text-violet-600\"\n                              : \"text-rose-600\"\n                        }`}\n                      >\n                        {plan.price}\n                      </span>\n                      {plan.period && <span className=\"text-slate-500 ml-1\">{plan.period}</span>}\n                    </div>\n\n                    <p className=\"mt-3 text-slate-600 text-sm text-center\">{plan.description}</p>\n                  </div>\n\n                  <div className=\"w-full h-px bg-slate-100\"></div>\n\n                  <div className=\"p-6 bg-white\">\n                    <ul className=\"space-y-4\">\n                      {plan.features.map((feature, index) => (\n                        <li key={index} className=\"flex items-start\">\n                          <div\n                            className={`flex-shrink-0 rounded-full p-0.5 mt-0.5 ${\n                              plan.id === \"FREE\"\n                                ? \"bg-teal-100 text-teal-600\"\n                                : plan.id === \"STARTUP\"\n                                  ? \"bg-violet-100 text-violet-600\"\n                                  : \"bg-rose-100 text-rose-600\"\n                            }`}\n                          >\n                            <Check className=\"h-4 w-4\" />\n                          </div>\n                          <span className=\"ml-3 text-slate-700 text-sm\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n\n                    <div className=\"mt-8\">\n                      <a href={`https://admin.shopify.com/store/${shopifyStoreName}/charges/${handle}/pricing_plans`}>\n                        <button\n                          className={`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${\n                            isCurrentPlan\n                              ? \"bg-slate-200 text-slate-700 cursor-default\"\n                              : plan.id === \"FREE\"\n                                ? \"bg-teal-600 hover:bg-teal-700 text-white\"\n                                : plan.id === \"STARTUP\"\n                                  ? \"bg-violet-600 hover:bg-violet-700 text-white\"\n                                  : \"bg-rose-600 hover:bg-rose-700 text-white\"\n                          }`}\n                          disabled={isCurrentPlan}\n                        >\n                          {isCurrentPlan ? \"Current Plan\" : plan.buttonText}\n                        </button>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import React, { useState, useEffect, useRef, useCallback } from \"react\"\nimport {\n  ChevronLeft,\n  ChevronRight,\n  ChevronUp,\n  ChevronDown,\n  Blend,\n  LogOut,\n  User2Icon,\n  Store,\n  CalendarRange,\n  LineChart,\n  Target,\n  Plus,\n} from \"lucide-react\"\nimport { NavLink, useLocation, useNavigate } from \"react-router-dom\"\nimport { setSelectedBrandId, setBrands, resetBrand } from \"@/store/slices/BrandSlice.ts\"\nimport axios from \"axios\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport Logo from \"@/assets/messold-icon.png\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport type { RootState } from \"@/store/index.ts\"\nimport { clearUser } from \"@/store/slices/UserSlice.ts\"\nimport { baseURL } from \"@/data/constant.ts\"\nimport type { IBrand } from \"@/interfaces\"\nimport { WhiteGa4Logo, WhiteGoogleAdsLogo } from \"@/data/logo.tsx\"\nimport { FaMeta } from \"react-icons/fa6\"\nimport { Crown } from 'lucide-react';\nimport PricingModal from \"../../pages/Pricing/Pricing.tsx\"\n\ninterface DashboardItem {\n  name: string;\n  path: string;\n  icon?: React.ReactNode;\n  subItems?: Array<{\n    name: string;\n    path: string;\n  }>;\n}\n\ninterface SubItem {\n  name: string;\n  path: string;\n}\n\nexport default function CollapsibleSidebar() {\n  const [isExpanded, setIsExpanded] = useState(true)\n  const [isPricingOpen, setIsPricingOpen] = useState(false)\n  const [isInitialLoad, setIsInitialLoad] = useState(false)\n  const location = useLocation()\n  const navigate = useNavigate()\n  const sidebarRef = useRef<HTMLDivElement>(null)\n\n  const dispatch = useDispatch()\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId)\n  const brands = useSelector((state: RootState) => state.brand.brands)\n  const user = useSelector((state: RootState) => state.user.user)\n\n  // Fetch brands\n  const fetchBrands = useCallback(async () => {\n    try {\n      if (!user?.brands || user.brands.length === 0) {\n        console.warn(\"No brand IDs found in user context.\")\n        return\n      }\n\n      const response = await axios.post(\n        `${baseURL}/api/brands/filter`,\n        { brandIds: user.brands },\n        { withCredentials: true },\n      )\n\n      dispatch(setBrands(response.data))\n\n      if (!selectedBrandId && response.data.length > 0) {\n        dispatch(setSelectedBrandId(response.data[0]._id))\n        // For first load after login, navigate to dashboard\n        if (isInitialLoad) {\n          navigate('/dashboard')\n          setIsInitialLoad(false)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching brands:\", error)\n    }\n  }, [user?.brands, dispatch, selectedBrandId, isInitialLoad, navigate])\n\n  useEffect(() => {\n    fetchBrands()\n  }, [fetchBrands]) // Will only run when dependencies change\n\n  const toggleSidebar = () => setIsExpanded((prev) => !prev)\n\n  const handleLogout = async () => {\n    try {\n      const response = await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true })\n      if (response.status === 200) {\n        dispatch(clearUser())\n        dispatch(resetBrand())\n        navigate(\"/\")\n        // Reset initial load state for next login\n        setIsInitialLoad(true)\n      }\n    } catch (error) {\n      console.error(\"Error logging out:\", error)\n    }\n  }\n\n  useEffect(() => {\n    const pathParts = location.pathname.split(\"/\")\n    if (pathParts[2]) {\n      dispatch(setSelectedBrandId(pathParts[2]))\n    }\n  }, [location.pathname, dispatch])\n\n  // Helper function to get current path type\n  const getCurrentPathType = () => {\n    const pathParts = location.pathname.split(\"/\")\n    if (pathParts.length >= 2) {\n      return pathParts[1] // Returns the path type (e.g., 'ad-metrics', 'analytics-dashboard', etc.)\n    }\n    return 'dashboard' // Default\n  }\n\n  // Function to handle brand change navigation\n  const handleBrandChange = (brandId: string) => {\n    dispatch(setSelectedBrandId(brandId))\n\n    // If it's initial load, we'll navigate to dashboard (this is handled in fetchBrands)\n    // For subsequent brand changes, stay on current dashboard type but with new brand ID\n    if (!isInitialLoad) {\n      const currentPathType = getCurrentPathType()\n\n      // Special case for main dashboard that doesn't have brandId in URL\n      if (currentPathType === 'dashboard') {\n        navigate('/dashboard')\n        return\n      }\n\n      // For pages with brand ID in URL path, replace the old brand ID with the new one\n      const pathParts = location.pathname.split(\"/\")\n      if (pathParts.length >= 3) {\n        pathParts[2] = brandId\n        navigate(pathParts.join('/'))\n      } else {\n        // Fallback - navigate to the same dashboard type with new brandId\n        navigate(`/${currentPathType}/${brandId}`)\n      }\n    }\n  }\n\n  const handlePricing = () => {\n    setIsPricingOpen(true);\n  }\n\n  // Define base dashboards that all users can see\n  const allDashboards = [\n    { name: \"Business Overview\", path: `/dashboard`, icon: <Blend size={20} /> },\n    { name: \"Marketing Insights Tracker\", path: `/marketing-insights/${selectedBrandId}`, icon: <CalendarRange size={20} /> },\n    { name: \"Ad Metrics Hub\", path: `/admetrics/${selectedBrandId}`, icon: <LineChart size={20} /> },\n    {\n      name: \"GA4 Analytics\",\n      path: `#`,\n      icon: <WhiteGa4Logo />,\n      subItems: [\n        { name: \"E-Commerce Insights\", path: `/ecommerce-reports/${selectedBrandId}` },\n        { name: \"Conversion Lens\", path: `/conversion-reports/${selectedBrandId}` },\n      ],\n    },\n    {\n      name: \"Meta\",\n      path: `#`,\n      icon: <FaMeta />,\n      subItems: [\n        { name: \"Campaign Analysis\", path: `/meta-campaigns/${selectedBrandId}` },\n        { name: \"Interest 360\", path: `/meta-interest/${selectedBrandId}` },\n        { name: \"Meta Reports\", path: `/meta-reports/${selectedBrandId}` },\n      ],\n    },\n\n    { name: \"Google Reports\", path: `/google-reports/${selectedBrandId}`, icon: <WhiteGoogleAdsLogo /> },\n\n    { name: \"Brands Targets\", path: `/performance-metrics`, icon: <Target size={20} /> },\n  ]\n\n  const isItemDisabled = (item: DashboardItem | SubItem) => {\n    if (!selectedBrandId) return true\n\n    const currentBrand = brands.find((b: IBrand) => b._id === selectedBrandId)\n    if (\n      (item.name === \"Analytics Dashboard\" || item.name === \"Campaign Metrics\") &&\n      !currentBrand?.fbAdAccounts &&\n      !currentBrand?.googleAdAccount\n    ) {\n      return true\n    }\n    return false\n  }\n\n  return (\n    <TooltipProvider>\n      <div\n        ref={sidebarRef}\n        className={`bg-[rgb(4,16,33)] text-white transition-all duration-500 ease-in-out flex flex-col ${isExpanded ? \"w-56\" : \"w-16\"}`}\n        style={{ height: \"100vh\" }}\n      >\n        <div className={`flex justify-between items-center p-4 relative`}>\n          <div className=\"flex items-center cursor-pointer\" onClick={() => navigate(\"/dashboard\")}>\n            <img src={Logo || \"/placeholder.svg\"} alt=\"Messold Logo\" className=\"h-8 w-8\" />\n            {isExpanded ? <span className=\"text-sm ml-2\">Messold</span> : null}\n          </div>\n          <span\n            className={`transition-all duration-300 ease-in-out bg-[rgb(4,16,33)] rounded-full flex items-center justify-center`}\n            style={{\n              width: \"25px\",\n              height: \"25px\",\n              position: \"absolute\",\n              right: \"-10px\",\n              top: \"50%\",\n              transform: \"translateY(-50%)\",\n              zIndex: 50,\n            }}\n            onClick={toggleSidebar}\n          >\n            {isExpanded ? <ChevronLeft size={15} /> : <ChevronRight size={15} />}\n          </span>\n        </div>\n\n        <div className={`flex-1 overflow-y-auto ${isExpanded ? \"h-[calc(100vh-64px)]\" : \"h-[calc(100vh-16px)]\"}`}>\n          <ScrollArea className=\"h-full\">\n            <nav className=\"mt-3\">\n              {/* Brand selector - Modified to use handleBrandChange */}\n              <SidebarItem\n                icon={<Store size={24} />}\n                text={\n                  selectedBrandId\n                    ? brands.find((b: IBrand) => b._id === selectedBrandId)?.name.replace(/_/g, \" \") || \"Unknown Brand\"\n                    : \"Your Brands\"\n                }\n                isExpanded={isExpanded}\n                openIcon={<ChevronUp />}\n                closeIcon={<ChevronDown />}\n                isSelected={!!selectedBrandId}\n                tooltipContent=\"Your Brands\"\n                autoOpenOnSelect={false}\n              >\n                {brands.map((brand: IBrand) => (\n                  <SidebarChild\n                    key={brand._id}\n                    path={`#`} // Changed to # to prevent default navigation\n                    text={brand.name.replace(/_/g, \" \")}\n                    onClick={() => handleBrandChange(brand._id)} // Use our new handler\n                    isSelected={selectedBrandId === brand._id}\n                  />\n                ))}\n                {/* Add Brand button, outside the map to avoid left border highlight */}\n                <div className=\"flex items-center text-xs  p-2 transition-colors duration-200 text-gray-300 hover:bg-gray-700 hover:text-white cursor-pointer border border-dashed border-gray-500 rounded-md mx-2 mb-2\">\n                  <Plus size={16} className=\"mr-2\" />\n                  <span>Add Brand</span>\n                </div>\n              </SidebarItem>\n\n              {/* Dashboard items - all open by default */}\n              {allDashboards.map((item: DashboardItem, index: number) => {\n                const isAnySubItemSelected = item.subItems?.some((subItem: { name: string; path: string }) => location.pathname === subItem.path)\n\n                const isMainItemActive =\n                  (location.pathname.startsWith(item.path) && item.path !== \"#\") || isAnySubItemSelected\n\n                // Main heading with tooltip when collapsed\n                const dashboardItemContent = (\n                  <div\n                    className={`flex items-center px-4 py-1.5 mb-1 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 ${item.subItems ? \"cursor-auto\" : \"cursor-pointer\"}\n                      ${isMainItemActive ? \"text-white font-semibold relative\" : \"text-gray-100\"\n                      } ${isItemDisabled(item) ? \"cursor-not-allowed opacity-50\" : \"\"}`}\n                    onClick={() => {\n                      if (!isItemDisabled(item) && item.path && item.path !== \"#\" && !item.subItems) {\n                        navigate(item.path)\n                      }\n                    }}\n                  >\n                    <span className=\"mr-2\">{item.icon}</span>\n                    {isExpanded && <span className=\"text-xs\">{item.name}</span>}\n                    {isExpanded && item.subItems && <span className=\"ml-auto\"></span>}\n                  </div>\n                )\n\n                return (\n                  <div key={index}>\n                    {/* Main heading with tooltip when collapsed */}\n                    {!isExpanded ? (\n                      <Tooltip>\n                        <TooltipTrigger asChild>{dashboardItemContent}</TooltipTrigger>\n                        <TooltipContent side=\"right\">\n                          <p>{item.name}</p>\n                          {item.subItems && (\n                            <>\n                              <div className=\"h-[1px] w-full my-2 bg-gray-400\" />\n                              <div className=\"mt-1\">\n                                {item.subItems.map((subItem, subIndex) => {\n                                  const disabled = isItemDisabled(subItem);\n                                  return (\n                                    <div\n                                      key={subIndex}\n                                      className={`text-xs py-1.5 px-1 rounded transition-colors ${disabled ? \"cursor-not-allowed opacity-50\" : \"hover:bg-gray-700 cursor-pointer\"\n                                        }`}\n                                      onClick={(e) => {\n                                        e.stopPropagation();\n                                        if (!disabled) navigate(subItem.path);\n                                      }}\n                                    >\n                                      {subItem.name}\n                                    </div>\n                                  );\n                                })}\n                              </div>\n                            </>\n                          )}\n                        </TooltipContent>\n                      </Tooltip>\n                    ) : (\n                      dashboardItemContent\n                    )}\n\n                    {/* Subheadings with divider */}\n                    {isExpanded && item.subItems && (\n                      <div className=\"pl-8 mb-2\">\n                        <div className=\"h-[1px] w-2/3 my-2 bg-gray-400\" />\n                        {item.subItems.map((subItem, subIndex) => {\n                          const disabled = isItemDisabled(subItem);\n                          return (\n                            <div\n                              key={subIndex}\n                              className={`flex items-center text-xs w-full p-2 transition-colors duration-200 ${disabled\n                                  ? \"opacity-50\"\n                                  : \"cursor-pointer hover:bg-gray-700\"\n                                } ${location.pathname === subItem.path && !disabled\n                                  ? \"text-white font-semibold relative bg-gray-800\"\n                                  : \"text-gray-100\"\n                                }`}\n                              onClick={() => {\n                                if (!disabled) navigate(subItem.path);\n                              }}\n                            >\n                              <span>{subItem.name}</span>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </nav>\n          </ScrollArea>\n        </div>\n\n        <div className=\"flex flex-col\">\n          <PricingButton isExpanded={isExpanded} handlePricing={handlePricing} />\n          <UserProfile isExpanded={isExpanded} user={user} />\n          <LogoutButton handleLogout={handleLogout} isExpanded={isExpanded} />\n        </div>\n      </div>\n      <PricingModal open={isPricingOpen} onOpenChange={setIsPricingOpen} />\n    </TooltipProvider>\n  )\n}\n\n// Keep these components for the brand section which should remain the same\ninterface SidebarChildProps {\n  path: string\n  text: string\n  onClick?: () => void\n  disabled?: boolean\n  isSelected?: boolean\n  children?: React.ReactNode\n}\n\nfunction SidebarChild({\n  path,\n  text,\n  onClick,\n  disabled = false,\n  isSelected = false,\n  children,\n}: SidebarChildProps): JSX.Element {\n  const [isOpen, setIsOpen] = useState(false)\n  const hasChildren = React.Children.count(children) > 0\n\n  const handleToggle = () => {\n    if (hasChildren) {\n      setIsOpen((prev) => !prev)\n    }\n  }\n\n  const isChildSelected = React.Children.toArray(children).some((child: any) => child?.props?.isSelected)\n  const isActive = isSelected || isChildSelected\n\n  useEffect(() => {\n    if (isActive) {\n      setIsOpen(true)\n    }\n  }, [isActive])\n\n  const baseClasses = `flex items-center text-xs w-full p-2 transition-colors duration-200 \n      ${isActive ? \"text-white font-semibold relative bg-gray-800\" : \"text-gray-100\"} \n      ${disabled ? \"cursor-not-allowed text-gray-400\" : \"hover:bg-gray-700\"}`\n\n  const content = (\n    <>\n      <div className=\"flex items-center justify-between w-full\">\n        <span>{text}</span>\n        {hasChildren && <span className=\"ml-2\">{isOpen ? <ChevronUp /> : <ChevronDown />}</span>}\n      </div>\n      {isActive && <div className=\"absolute left-0 top-0 w-1 h-full bg-white\" />}\n    </>\n  )\n\n  const childItem = disabled ? (\n    <div className={baseClasses}>{content}</div>\n  ) : (\n    <NavLink\n      to={path}\n      className={baseClasses}\n      onClick={(e) => {\n        // Stop default navigation for items that are just containers\n        if (path === \"/#\" || !path || path === \"#\") {\n          e.preventDefault()\n        }\n\n        // Always toggle if there are children\n        if (hasChildren) {\n          handleToggle()\n        }\n\n        // External onClick handler\n        if (onClick) {\n          onClick()\n        }\n      }}\n    >\n      {content}\n    </NavLink>\n  )\n\n  return (\n    <div>\n      {childItem}\n      {isOpen && hasChildren && (\n        <div className=\"relative pl-4\">\n          <div className=\"absolute top-0 left-4 w-1 h-full bg-gray-500\" />\n          {children}\n        </div>\n      )}\n    </div>\n  )\n}\n\ninterface SidebarItemProps {\n  icon?: React.ReactNode\n  text: string\n  isExpanded: boolean\n  openIcon?: React.ReactNode\n  closeIcon?: React.ReactNode\n  children?: React.ReactNode\n  isSelected: boolean\n  tooltipContent: string\n  onClick?: () => void\n  disabled?: boolean\n  autoOpenOnSelect?: boolean\n}\n\nfunction SidebarItem({\n  icon,\n  text,\n  isExpanded,\n  openIcon,\n  closeIcon,\n  children,\n  isSelected,\n  tooltipContent,\n  onClick,\n  disabled,\n  autoOpenOnSelect = true,\n}: SidebarItemProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const hasChildren = React.Children.count(children) > 0\n\n  const handleToggle = () => {\n    if (hasChildren) {\n      setIsOpen((prev) => !prev)\n    }\n  }\n\n  // Enhanced recursive check for nested selections\n  const isChildSelected = React.Children.toArray(children).some((child: any) => {\n    if (child?.props?.isSelected) return true\n    // Check if any of this child's children are selected\n    if (child?.props?.children) {\n      return React.Children.toArray(child.props.children).some((grandchild: any) => grandchild?.props?.isSelected)\n    }\n    return false\n  })\n\n  const isActive = isSelected || isChildSelected\n\n  useEffect(() => {\n    if (autoOpenOnSelect && isActive) {\n      setIsOpen(true)\n    }\n  }, [isActive, autoOpenOnSelect])\n\n  const content = (\n    <div\n      onClick={() => {\n        // Always toggle if it has children\n        if (hasChildren) {\n          handleToggle()\n        }\n\n        // Then handle navigation via onClick if provided\n        if (!disabled && onClick) {\n          onClick()\n        }\n      }}\n      className={`flex items-center px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer ${isActive ? \"text-white font-semibold relative\" : \"text-gray-100\"\n        } ${disabled ? \"cursor-not-allowed opacity-50\" : \"\"}`}\n    >\n      <span className=\"mr-2\">{icon}</span>\n      {isExpanded && <span className=\"text-xs\">{text}</span>}\n      {isExpanded && <span className=\"ml-auto\">{isOpen ? openIcon : closeIcon}</span>}\n    </div>\n  )\n\n  return (\n    <div>\n      {!isExpanded ? (\n        <Tooltip>\n          <TooltipTrigger asChild>{content}</TooltipTrigger>\n          <TooltipContent side=\"right\">\n            <p className={React.Children.count(children) > 0 ? \"mb-4\" : \"\"}>{tooltipContent}</p>\n            {React.Children.map(children, (child) => (\n              <div className=\"relative\">\n                  {/* <div className=\"absolute top-0 w-1 h-full bg-gray-500\" /> */}\n                {child}\n              </div>\n            ))}\n          </TooltipContent>\n        </Tooltip>\n      ) : (\n        content\n      )}\n      {isOpen && isExpanded && (\n        <div className=\"relative pl-8\">\n          {/* <div className=\"absolute top-0 w-1 h-full bg-gray-500\" /> */}\n          {React.Children.map(children, (child) => (\n            <div>{child}</div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\ninterface UserProfileProps {\n  isExpanded: boolean\n  user: any\n}\n\nfunction UserProfile({ isExpanded, user }: UserProfileProps) {\n  const navigate = useNavigate()\n  const userProfileContent = (\n    <div\n      onClick={() => navigate(\"/profile\")}\n      className={\n        \"flex items-center gap-3 px-3 py-1.5 mb-1 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer\"\n      }\n    >\n      <span className=\"text-gray-300 hover:text-white\">\n        <User2Icon size={24} />\n      </span>\n      {isExpanded && <span className=\"text-sm mr-2\">{user?.username || \"user\"}</span>}\n    </div>\n  )\n\n  return (\n    <div>\n      {!isExpanded ? (\n        <Tooltip>\n          <TooltipTrigger asChild>{userProfileContent}</TooltipTrigger>\n          <TooltipContent side=\"right\">\n            <p>{user?.username || \"user\"}</p>\n          </TooltipContent>\n        </Tooltip>\n      ) : (\n        userProfileContent\n      )}\n    </div>\n  )\n}\n\ninterface LogoutButtonProps {\n  handleLogout: () => void\n  isExpanded: boolean\n}\n\nfunction LogoutButton({ handleLogout, isExpanded }: LogoutButtonProps) {\n  const logoutContent = (\n    <div\n      onClick={handleLogout}\n      className={\n        \"flex items-center gap-3 px-3 py-1.5 mb-1 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer\"\n      }\n    >\n      <span className=\"text-gray-300 hover:text-white\">\n        <LogOut size={24} />\n      </span>\n      {isExpanded && <span className=\"hidden sm:inline\">Logout</span>}\n    </div>\n  )\n\n  return (\n    <div>\n      {!isExpanded ? (\n        <Tooltip>\n          <TooltipTrigger asChild>{logoutContent}</TooltipTrigger>\n          <TooltipContent side=\"right\">\n            <p>Logout</p>\n          </TooltipContent>\n        </Tooltip>\n      ) : (\n        logoutContent\n      )}\n    </div>\n  )\n}\n\ninterface pricingButtonProps {\n  handlePricing: () => void\n  isExpanded: boolean\n}\n\nfunction PricingButton({ handlePricing, isExpanded }: pricingButtonProps) {\n  const pricingContent = (\n    <div\n      onClick={handlePricing}\n      className={\n        \"flex items-center gap-3 px-3 py-1.5 mb-1 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer\"\n      }\n    >\n      <span className=\"text-gray-300 hover:text-white\">\n        <Crown size={24} />\n      </span>\n      {isExpanded && <span className=\"hidden sm:inline\">Pricing</span>}\n    </div>\n  )\n\n  return (\n    <div>\n      {!isExpanded ? (\n        <Tooltip>\n          <TooltipTrigger asChild>{pricingContent}</TooltipTrigger>\n          <TooltipContent side=\"right\">\n            <p>Pricing</p>\n          </TooltipContent>\n        </Tooltip>\n      ) : (\n        pricingContent\n      )}\n    </div>\n  )\n}","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-3\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-4 pt-3\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","// AdAccountMetrics.js\nimport React from 'react';\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {  HelpCircle } from 'lucide-react';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Campaign, GoogleCampaign } from '../Dashboard/interfaces';\nimport { FacebookLogo, GoogleLogo } from '@/data/logo';\n\n\n// Define the type for each metric\nexport interface Metric {\n  label: string;\n  value: string | number;\n  tooltipContent?: string\n\n}\n\n// Define the props for the AdAccountMetrics component\ninterface AdAccountMetricsProps {\n  title?: string;\n  metrics: Metric[];\n  date: DateRange;\n  isLoading: boolean;\n  icon?: 'Facebook' | 'Google' | '';\n  tooltipContent?: string\n  errorMessage?: string;\n}\n\nexport interface DateRange {\n  from?: Date;\n  to?: Date;\n}\n\ninterface MetricCardProps extends Metric {\n  date: DateRange;\n  icon?: 'Facebook' | 'Google' | ''\n\n}\n\n\n\n\nconst MetricCardSkeleton: React.FC = () => {\n  return (\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\n      <CardHeader className='flex flex-col items-start justify-start'>\n        <div className=\"flex flex-row items-center gap-2\">\n          <Skeleton className=\"w-4 h-4 rounded-full\" />\n          <Skeleton className=\"h-6 w-24\" />\n        </div>\n        <Skeleton className=\"h-4 w-32 mt-2\" />\n      </CardHeader>\n      <CardContent>\n        <Skeleton className=\"h-8 w-20 mt-2\" />\n      </CardContent>\n    </Card>\n  )\n}\n\n\n// MetricCard component to render each metric using ShadCN Card\nconst MetricCard: React.FC<MetricCardProps> = ({ label, value, date, icon, tooltipContent }) => {\n  const formatDate = (dateValue: Date | undefined) => {\n    if (!dateValue) return \"\";\n    if (typeof dateValue === \"string\") {\n      dateValue = new Date(dateValue); // Convert string to Date\n    }\n    return dateValue.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  return (\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\n      <CardHeader className='flex flex-col items-start justify-start'>\n        <div className=\"flex flex-row items-center gap-2\">\n          {icon === 'Facebook' ? (\n            <FacebookLogo width=\"1rem\" height=\"1rem\" />\n          ) : icon === 'Google' ? (\n            <GoogleLogo width=\"1rem\" height=\"1rem\" />\n          ) : null}\n\n          <div className=\"text-base font-medium\">{label}</div>\n\n          {tooltipContent && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <button className=\"p-0 m-0\" aria-label={`Info about ${label}`}>\n                    <HelpCircle className=\"w-3 h-3 text-gray-400\" />\n                  </button>\n                </TooltipTrigger>\n                <TooltipContent className=\"w-64 p-0 bg-white text-black border shadow-sm\">\n                  <div className=\"p-2 font-semibold border-black\">{label}</div>\n                  <div className=\"w-full h-[0.5px] bg-black\" />\n                  <div className=\"p-2\">{tooltipContent}</div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n        </div>\n\n        <div className=\"text-xs text-gray-500 font-bold\">\n          {formatDate(date.from)}\n          {date.from && date.to ? ' - ' : ''}\n          {formatDate(date.to)}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <p className=\"text-lg lg:text-xl 2xl:text-2xl font-bold text-teal-800\">{value}</p>\n      </CardContent>\n    </Card>\n  )\n};\n\n\nconst AdAccountMetricsCard: React.FC<AdAccountMetricsProps> = ({ title, metrics = [], date, isLoading = false, icon, errorMessage }) => {\n  if (errorMessage && !isLoading) {\n    return (\n      <section className={title ? 'mt-10' : ''}>\n        <Card className=\"p-4\">\n          <CardHeader><h2 className=\"text-xl font-semibold flex items-center space-x-2\">\n            {title && (\n              <>\n                {icon === 'Facebook' ? (\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n                  </svg>\n                ) : (\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\n                  </svg>\n                )}\n                <span>{title}</span>\n              </>\n            )}\n          </h2>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-red-600 text-sm\">{errorMessage}</p>\n          </CardContent>\n        </Card>\n      </section>\n    );\n  }\n  return (\n    <section className={title ? 'mt-10' : ''}>\n      <h2 className=\"text-xl font-semibold mb-4 flex items-center space-x-2\">\n        {title && (\n          <>\n            {icon === 'Facebook' ? (\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n              </svg>\n            ) : (\n              <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\n                <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\n                <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\n                <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\n              </svg>\n            )}\n            <span>{title}</span>\n          </>\n        )}\n      </h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\">\n        {isLoading\n          ? Array(metrics.length).fill(0).map((_, index) => <MetricCardSkeleton key={index} />)\n          : metrics.map((metric, index) => (\n            <>\n              <MetricCard key={index} label={metric.label} value={metric.value} date={date} icon={icon} tooltipContent={metric.tooltipContent} />\n            </>\n          ))\n        }\n      </div>\n    </section>\n  )\n}\n\nexport default AdAccountMetricsCard;\n\nexport const CampaignGrid = ({ campaigns, isLoading, icon }: { campaigns: (Campaign | GoogleCampaign)[], isLoading: boolean, icon: string }) => {\n  return isLoading ? (\n    <div>Loading...</div>\n  ) : (\n    <Card className=\" p-4 my-4  hover:border hover:border-blue-600\">\n      <div className='flex items-center space-x-2 mb-3'>\n        {icon === 'Facebook' ? (\n          <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n            <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n          </svg>\n        ) : (\n          <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\n            <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\n            <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\n            <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\n          </svg>\n        )}\n        <h3 className=\"text-lg font-semibold\">Campaign Performance</h3>\n      </div>\n\n      {/* Wrapper for scrolling */}\n      <div className=\"overflow-x-auto max-h-[280px] overflow-y-auto\">\n        <table className=\"min-w-full table-auto border-collapse bg-white shadow-md rounded-lg\">\n          <thead>\n            <tr className=\"bg-gray-100 text-left text-sm font-medium text-gray-700 sticky top-0\">\n              <th className=\"px-6 py-3\">Campaign Name</th>\n              <th className=\"px-6 py-3 text-center\">Spend (₹)</th>\n              <th className=\"px-6 py-3 text-center\">ROAS</th>\n            </tr>\n          </thead>\n          <tbody>\n            {campaigns.map((campaign: Campaign | GoogleCampaign, index) => {\n              const spendValue = parseFloat(String(campaign.spend));\n              let roas = null;\n              if (typeof campaign.purchase_roas === 'string') {\n                roas = campaign.purchase_roas;\n              } else if (Array.isArray(campaign.purchase_roas)) {\n                roas = campaign.purchase_roas[0]?.value;\n              }\n              const roasValue = roas ? parseFloat(String(roas)) : null;\n\n              return (\n                <tr\n                  key={index}\n                  className={`border-t text-sm ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n                    }`}\n                >\n                  <td className=\"px-6 py-3 line-clamp-2\" title={String(campaign.campaign_name)}>\n                    {campaign.campaign_name}\n                  </td>\n                  <td className=\"px-6 py-3 text-center text-gray-700 font-semibold\">\n                  ₹{spendValue.toFixed(2)}\n                  </td>\n                  <td className=\"px-6 py-3 text-center\">\n                    {roasValue !== null ? (\n                      <span className=\"inline-flex items-center rounded-full font-medium\">\n                        {roasValue.toFixed(2)}\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-500\">N/A</span>\n                    )}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </Card>\n  );\n};\n\n","import * as React from \"react\"\nimport { ChevronLeftIcon, ChevronRightIcon } from \"@radix-ui/react-icons\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"px-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-xs font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell: \"text-muted-foreground rounded-md w-7 font-normal text-[0.6rem]\",\n        row: \"flex w-full mt-2\",\n        cell: cn(\n          \"relative p-0 text-center text-[0.7rem] focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\n          props.mode === \"range\"\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\n            : \"[&:has([aria-selected])]:rounded-md\",\n        ),\n        day: cn(buttonVariants({ variant: \"ghost\" }), \"h-7 w-7 p-0 font-normal aria-selected:opacity-100 text-[0.7rem]\"),\n        day_range_start: \"day-range-start\",\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-black text-white hover:bg-black hover:text-white focus:bg-black focus:text-white\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-gray-400 opacity-50  aria-selected:bg-gray-400/50 aria-selected:text-accent-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-accent-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-gray-100 aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: () => <ChevronLeftIcon className=\"h-4 w-4\" />,\n        IconRight: () => <ChevronRightIcon className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"start\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { cn } from \"@/lib/utils\"\nimport { CheckIcon } from \"@radix-ui/react-icons\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <CheckIcon className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface DateRange {\n  from?: string; // Primary date range start\n  to?: string;  // Primary date range end\n  compareFrom?: string; // Optional comparison date range start\n  compareTo?: string;   // Optional comparison date range end\n}\n\nconst initialState: DateRange = {\n  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString(),\n  to: new Date().toISOString(),\n};\n\n// Create the Redux slice\nconst dateSlice = createSlice({\n  name: \"date\",\n  initialState,\n  reducers: {\n    setDate: (state, action: PayloadAction<{\n      from?: string; \n      to?: string; \n      compareFrom?: string; \n      compareTo?: string;\n    }>) => {\n      // Update primary date range\n      state.from = action.payload.from;\n      state.to = action.payload.to;\n\n      // Update comparison date range\n      state.compareFrom = action.payload.compareFrom;\n      state.compareTo = action.payload.compareTo;\n    },\n    clearDate: (state) => {\n      // Reset to initial state\n      state.from = undefined;\n      state.to = undefined;\n      state.compareFrom = undefined;\n      state.compareTo = undefined;\n    },\n  },\n});\n\n// Export actions and reducer\nexport const { setDate, clearDate } = dateSlice.actions;\nexport default dateSlice.reducer;","import { useState, useMemo, useCallback } from \"react\"\nimport { createSelector } from \"@reduxjs/toolkit\"\nimport { CalendarIcon } from \"lucide-react\"\nimport { addDays, endOfYear, format, startOfYear, subDays, subMonths, subYears, parse } from \"date-fns\"\nimport type { DateRange } from \"react-day-picker\"\nimport { Button } from \"@/components/ui/button\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\nimport { Input } from \"@/components/ui/input\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { cn } from \"@/lib/utils\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { setDate, clearDate } from \"@/store/slices/DateSlice\"\nimport type { RootState } from \"@/store\"\n\ntype DatePickerWithRangeProps = {\n  defaultDate?: DateRange\n  resetToFirstPage?: () => void\n}\n\n// Memoized selector\nconst selectDateRange = createSelector(\n  (state: RootState) => state.date.from,\n  (state: RootState) => state.date.to,\n  (from, to) => ({\n    from,\n    to,\n  }),\n)\n\nexport function DatePickerWithRange({ defaultDate, resetToFirstPage }: DatePickerWithRangeProps) {\n  const dispatch = useDispatch()\n  const dateRange = useSelector(selectDateRange)\n\n  // Memoize the initial date\n  const initialDate = useMemo(() => {\n    if (dateRange) {\n      return {\n        from: dateRange.from ? new Date(dateRange.from) : undefined,\n        to: dateRange.to ? new Date(dateRange.to) : undefined,\n      }\n    }\n    return defaultDate\n      ? {\n          from: defaultDate.from ? new Date(defaultDate.from) : undefined,\n          to: defaultDate.to ? new Date(defaultDate.to) : undefined,\n        }\n      : undefined\n  }, [dateRange, defaultDate])\n\n  const [tempDate, setTempDate] = useState<DateRange | undefined>(initialDate)\n  const [compareDate, setCompareDate] = useState<DateRange | undefined>()\n  const [open, setOpen] = useState(false)\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null)\n  const [isCompareEnabled, setIsCompareEnabled] = useState(false)\n  const [calendarMode, setCalendarMode] = useState<'primary' | 'comparison'>('primary')\n\n  // Manual date input states\n  const [manualFromDate, setManualFromDate] = useState(\n    tempDate?.from ? format(tempDate.from, \"yyyy-MM-dd\") : \"\"\n  )\n  const [manualToDate, setManualToDate] = useState(\n    tempDate?.to ? format(tempDate.to, \"yyyy-MM-dd\") : \"\"\n  )\n  const [manualCompareFromDate, setManualCompareFromDate] = useState(\"\")\n  const [manualCompareToDate, setManualCompareToDate] = useState(\"\")\n\n  // Dates calculation\n  const dates = useMemo(() => {\n    const today = new Date()\n    const daysSinceSunday = today.getDay()\n    const startOfThisWeek = subDays(today, daysSinceSunday)\n    const endOfThisWeek = addDays(startOfThisWeek, 6)\n    const startOfThisMonth = new Date(today.getFullYear(), today.getMonth(), 1)\n    const endOfThisMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0)\n    const startOfLastWeek = subDays(startOfThisWeek, 7)\n    const endOfLastWeek = subDays(startOfThisWeek, 1)\n    const quarter = Math.floor(today.getMonth() / 3)\n    const startOfThisQuarter = new Date(today.getFullYear(), quarter * 3, 1)\n    const endOfThisQuarter = new Date(today.getFullYear(), (quarter + 1) * 3, 0)\n\n    const lastQuarter = today.getMonth() < 3 ? 3 : Math.floor((today.getMonth() - 3) / 3)\n    const lastQuarterYear = today.getMonth() < 3 ? today.getFullYear() - 1 : today.getFullYear()\n    const startOfLastQuarter = new Date(lastQuarterYear, lastQuarter * 3, 1)\n    const endOfLastQuarter = new Date(lastQuarterYear, (lastQuarter + 1) * 3, 0)\n\n    return {\n      today,\n      startOfThisWeek,\n      endOfThisWeek,\n      startOfThisMonth,\n      endOfThisMonth,\n      startOfLastWeek,\n      endOfLastWeek,\n      startOfThisQuarter,\n      endOfThisQuarter,\n      startOfLastQuarter,\n      endOfLastQuarter,\n    }\n  }, [])\n\n  // Date parsing utility\n  const parseManualDate = useCallback((dateString: string): Date | undefined => {\n    try {\n      const parsedDate = parse(dateString, \"yyyy-MM-dd\", new Date())\n      return !isNaN(parsedDate.getTime()) ? parsedDate : undefined\n    } catch {\n      return undefined\n    }\n  }, [])\n\n  // Handle manual date input for primary range\n  const handleManualDateInput = useCallback(() => {\n    const fromDate = parseManualDate(manualFromDate)\n    const toDate = parseManualDate(manualToDate)\n\n    if (fromDate && toDate) {\n      setTempDate({ from: fromDate, to: toDate })\n      setSelectedPreset(null)\n    }\n  }, [manualFromDate, manualToDate, parseManualDate])\n\n  // Handle manual date input for compare range\n  const handleManualCompareDateInput = useCallback(() => {\n    const fromDate = parseManualDate(manualCompareFromDate)\n    const toDate = parseManualDate(manualCompareToDate)\n\n    if (fromDate && toDate) {\n      setCompareDate({ from: fromDate, to: toDate })\n    }\n  }, [manualCompareFromDate, manualCompareToDate, parseManualDate])\n\n\n  // Preset range setter\n  const setPresetRange = useCallback((from: Date, to: Date) => {\n    if (calendarMode === 'primary') {\n      const newRange = { from, to }\n      setTempDate(newRange)\n      \n      // Update manual date inputs \n      setManualFromDate(format(from, \"yyyy-MM-dd\"))\n      setManualToDate(format(to, \"yyyy-MM-dd\"))\n    } else if (calendarMode === 'comparison') {\n      const newCompareRange = { from, to }\n      setCompareDate(newCompareRange)\n      \n      // Update comparison manual date inputs\n      setManualCompareFromDate(format(from, \"yyyy-MM-dd\"))\n      setManualCompareToDate(format(to, \"yyyy-MM-dd\"))\n    }\n    \n    setSelectedPreset(null)\n  }, [calendarMode])\n\n  // Presets\n  const presets = useMemo(\n    () => [\n      { label: \"Today\", fn: () => setPresetRange(dates.today, dates.today) },\n      { label: \"Yesterday\", fn: () => setPresetRange(subDays(dates.today, 1), subDays(dates.today, 1)) },\n      { label: \"This Week\", fn: () => setPresetRange(dates.startOfThisWeek, dates.endOfThisWeek) },\n      { label: \"Last 7 Days\", fn: () => setPresetRange(subDays(dates.today, 6), dates.today) },\n      { label: \"Last week\", fn: () => setPresetRange(dates.startOfLastWeek, dates.endOfLastWeek) },\n      { label: \"Last 30 Days\", fn: () => setPresetRange(subDays(dates.today, 29), dates.today) },\n      { label: \"This Month\", fn: () => setPresetRange(dates.startOfThisMonth, dates.today) },\n      { label: \"Last 3 Months\", fn: () => setPresetRange(subMonths(dates.today, 3), dates.today) },\n      { label: \"Last 6 Months\", fn: () => setPresetRange(subMonths(dates.today, 6), dates.today) },\n      { label: \"This Quarter\", fn: () => setPresetRange(dates.startOfThisQuarter, dates.endOfThisQuarter) },\n      { label: \"Last Quarter\", fn: () => setPresetRange(dates.startOfLastQuarter, dates.endOfLastQuarter) },\n      { label: \"This Year\", fn: () => setPresetRange(new Date(new Date().getFullYear(), 0, 1), dates.today) },\n      { label: \"Last 365 Days\", fn: () => setPresetRange(subDays(dates.today, 365), dates.today) },\n      {\n        label: \"Last Year\",\n        fn: () => setPresetRange(subYears(startOfYear(new Date()), 1), subYears(endOfYear(new Date()), 1)),\n      },\n    ],\n    [dates, setPresetRange],\n  )\n\n  // Calendar select handler\n  const handleCalendarSelect = useCallback((range: DateRange | undefined) => {\n    if (calendarMode === 'primary') {\n      if (range?.from && !range.to) {\n        setTempDate({ from: range.from, to: range.from })\n        // Update manual input for single date\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\n      } else if (range?.from && range?.to && range.from > range.to) {\n        setTempDate({ from: range.from, to: range.from })\n        // Update manual input for single date\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\n      } else if (range?.from && range?.to) {\n        setTempDate(range)\n        // Update manual inputs for range\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualToDate(format(range.to, \"yyyy-MM-dd\"))\n      } else {\n        setTempDate(undefined)\n        // Clear manual inputs\n        setManualFromDate(\"\")\n        setManualToDate(\"\")\n      }\n      setSelectedPreset(null)\n    } else {\n      // Comparison date range handling\n      if (range?.from && !range.to) {\n        setCompareDate({ from: range.from, to: range.from })\n        // Update manual input for single date\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\n      } else if (range?.from && range?.to && range.from > range.to) {\n        setCompareDate({ from: range.from, to: range.from })\n        // Update manual input for single date\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\n      } else if (range?.from && range?.to) {\n        setCompareDate(range)\n        // Update manual inputs for range\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\n        setManualCompareToDate(format(range.to, \"yyyy-MM-dd\"))\n      } else {\n        setCompareDate(undefined)\n        // Clear manual inputs\n        setManualCompareFromDate(\"\")\n        setManualCompareToDate(\"\")\n      }\n    }\n  }, [calendarMode])\n\n  // Date range formatter\n  const formatDateRange = useCallback(\n    (range: DateRange | undefined) => {\n      if (!range) {\n        return defaultDate && defaultDate.from && defaultDate.to\n          ? `${format(defaultDate.from, \"LLL dd, y\")} - ${format(defaultDate.to, \"LLL dd, y\")}`\n          : \"Pick a date\"\n      }\n      if (range.from) {\n        if (range.to) {\n          return `${format(range.from, \"LLL dd, y\")} - ${format(range.to, \"LLL dd, y\")}`\n        }\n        return format(range.from, \"LLL dd, y\")\n      }\n      return \"Pick a date\"\n    },\n    [defaultDate],\n  )\n\n  // Clear date range\n  const clearDateRange = useCallback(() => {\n    setTempDate(undefined)\n    setCompareDate(undefined)\n    setSelectedPreset(null)\n    setIsCompareEnabled(false)\n    setManualFromDate(\"\")\n    setManualToDate(\"\")\n    setManualCompareFromDate(\"\")\n    setManualCompareToDate(\"\")\n    dispatch(clearDate())\n    if (resetToFirstPage) {\n      resetToFirstPage()\n    }\n    setOpen(false)\n  }, [dispatch, resetToFirstPage])\n\n  // Update handler\n  const handleUpdate = useCallback(() => {\n    if (tempDate) {\n      dispatch(\n        setDate({\n          from: tempDate.from ? tempDate.from.toISOString() : undefined,\n          to: tempDate.to ? tempDate.to.toISOString() : undefined,\n          compareFrom: isCompareEnabled && compareDate?.from ? compareDate.from.toISOString() : undefined,\n          compareTo: isCompareEnabled && compareDate?.to ? compareDate.to.toISOString() : undefined,\n        }),\n      )\n    }\n    if (resetToFirstPage) {\n      resetToFirstPage()\n    }\n    setOpen(false)\n  }, [dispatch, resetToFirstPage, tempDate, compareDate, isCompareEnabled])\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          className={cn(\n            \"w-[250px] justify-start text-left font-normal\",\n            !tempDate && !defaultDate && \"text-muted-foreground\",\n            \"hover:bg-muted/50 transition-colors rounded-lg border-muted-foreground/20\"\n          )}\n        >\n          <CalendarIcon className=\"mr-2 h-4 w-4 text-primary\" />\n          {formatDateRange(tempDate)}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-auto p-0 max-w-[650px]\" align=\"start\">\n        <div className=\"flex flex-col md:flex-row\">\n          {/* Preset selection column */}\n          <div className=\"border-r p-3 w-full md:w-[150px] overflow-y-auto bg-gradient-to-b from-muted/50 to-muted/10\" style={{ maxHeight: \"400px\" }}>\n            <div className=\"space-y-1.5\">\n              <h1 className=\"text-sm pb-2 font-medium border-b border-border/50 text-primary\">Presets</h1>\n              <div className=\"grid grid-cols-2 md:grid-cols-1 gap-1\">\n                {presets.map((preset) => (\n                  <Button\n                    key={preset.label}\n                    size=\"sm\"\n                    variant={selectedPreset === preset.label ? \"default\" : \"ghost\"}\n                    className={cn(\n                      \"w-full justify-start text-xs font-normal h-8 rounded-md\",\n                      selectedPreset === preset.label \n                        ? \"bg-primary text-primary-foreground\" \n                        : \"hover:bg-muted text-muted-foreground hover:text-foreground\",\n                    )}\n                    onClick={() => {\n                      preset.fn()\n                      setSelectedPreset(preset.label)\n                    }}\n                  >\n                    {preset.label}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Calendar and input section */}\n          <div className=\"p-3 flex-grow\">\n            <div className=\"flex items-center space-x-2 mb-3\">\n              <Checkbox \n                id=\"compare-toggle\"\n                checked={isCompareEnabled}\n                onCheckedChange={() => setIsCompareEnabled(!isCompareEnabled)}\n                className=\"text-primary\"\n              />\n              <label htmlFor=\"compare-toggle\" className=\"text-sm font-medium\">Compare with another period</label>\n            </div>\n\n            {/* Date Range Inputs */}\n            <div className=\"grid gap-3 mb-3\">\n              <div className=\"space-y-2\">\n                <h2 className=\"text-xs font-medium text-muted-foreground\">Primary Range</h2>\n                <div className=\"flex space-x-2\">\n                  <div className=\"flex-1 relative\">\n                    <Input \n                      placeholder=\"YYYY-MM-DD\" \n                      value={manualFromDate}\n                      onChange={(e) => setManualFromDate(e.target.value)}\n                      onBlur={handleManualDateInput}\n                      onClick={() => {\n                        setCalendarMode('primary')\n                      }}\n                      className=\"h-8 pl-10 text-xs rounded-md\"\n                    />\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\n                  </div>\n                  <div className=\"flex-1 relative\">\n                    <Input \n                      placeholder=\"YYYY-MM-DD\" \n                      value={manualToDate}\n                      onChange={(e) => setManualToDate(e.target.value)}\n                      onBlur={handleManualDateInput}\n                      onClick={() => {\n                        setCalendarMode('primary')\n                      }}\n                      className=\"h-8 pl-10 text-xs rounded-md\"\n                    />\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Compare Date Range Inputs */}\n              {isCompareEnabled && (\n                <div className=\"space-y-2\">\n                  <h2 className=\"text-xs font-medium text-muted-foreground\">Comparison Range</h2>\n                  <div className=\"flex space-x-2\">\n                    <div className=\"flex-1 relative\">\n                      <Input \n                        placeholder=\"YYYY-MM-DD\" \n                        value={manualCompareFromDate}\n                        onChange={(e) => setManualCompareFromDate(e.target.value)}\n                        onBlur={handleManualCompareDateInput}\n                        onClick={() => {\n                          setCalendarMode('comparison')\n                        }}\n                        className=\"h-8 pl-10 text-xs rounded-md\"\n                      />\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\n                    </div>\n                    <div className=\"flex-1 relative\">\n                      <Input \n                        placeholder=\"YYYY-MM-DD\" \n                        value={manualCompareToDate}\n                        onChange={(e) => setManualCompareToDate(e.target.value)}\n                        onBlur={handleManualCompareDateInput}\n                        onClick={() => {\n                          setCalendarMode('comparison')\n                        }}\n                        className=\"h-8 pl-10 text-xs rounded-md\"\n                      />\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n\n            {/* Calendar */}\n            <div className=\"border rounded-lg p-2 bg-background/80 shadow-sm\">\n              <Calendar\n                initialFocus\n                mode=\"range\"\n                defaultMonth={\n                  calendarMode === 'primary' \n                    ? (tempDate?.from || defaultDate?.from || dates.today)\n                    : (compareDate?.from || dates.today)\n                }\n                selected={calendarMode === 'primary' ? tempDate : compareDate}\n                onSelect={handleCalendarSelect}\n                numberOfMonths={2}\n                disabled={(date) =>\n                  date > new Date() || date < new Date(\"2023-01-01\")\n                }\n                className=\"rounded-md\"\n              />\n            </div>\n          </div>\n        </div>\n        \n        {/* Action Buttons */}\n        <div className=\"border-t p-2 flex justify-end gap-2 bg-muted/10\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={clearDateRange}\n            className=\"rounded-md h-8 text-xs\"\n          >\n            Clear\n          </Button>\n          <Button \n            size=\"sm\" \n            onClick={handleUpdate}\n            className=\"rounded-md h-8 text-xs bg-primary hover:bg-primary/90\"\n          >\n            Apply\n          </Button>\n        </div>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type LocaleType = \"en-IN\" | \"en-US\";\n\n\ninterface LocaleState {\n  locale: LocaleType;\n}\n\n\nconst initialState: LocaleState = {\n  locale: \"en-IN\"\n};\n\n// Create the slice\nconst localeSlice = createSlice({\n  name: 'locale',\n  initialState,\n  reducers: {\n    setLocale: (state, action: PayloadAction<LocaleType>) => {\n      state.locale = action.payload;\n    }\n  }\n});\n\nexport const { setLocale } = localeSlice.actions;\n\nexport default localeSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface Notification {\n  id: string;\n  type: 'success' | 'error' | 'info' | 'warning';\n  title: string;\n  message: string;\n  brandId?: string;\n  timestamp: string;\n  isRead: boolean;\n  actionUrl?: string;\n}\n\ninterface NotificationState {\n  notifications: Notification[];\n  unreadCount: number;\n  isSoundEnabled: boolean;\n}\n\nconst initialState: NotificationState = {\n  notifications: [],\n  unreadCount: 0,\n  isSoundEnabled: true,\n};\n\nconst notificationSlice = createSlice({\n  name: 'notifications',\n  initialState,\n  reducers: {\n    addNotification: (state, action: PayloadAction<Omit<Notification, 'id' | 'timestamp' | 'isRead'>>) => {\n      const newNotification: Notification = {\n        ...action.payload,\n        id: Date.now().toString(),\n        timestamp: new Date().toISOString(),\n        isRead: false,\n      };\n      \n      state.notifications.unshift(newNotification); \n      state.unreadCount += 1;\n      \n\n      if (state.notifications.length > 50) {\n        state.notifications = state.notifications.slice(0, 50);\n      }\n    },\n    \n    markAsRead: (state, action: PayloadAction<string>) => {\n      const notification = state.notifications.find(n => n.id === action.payload);\n      if (notification && !notification.isRead) {\n        notification.isRead = true;\n        state.unreadCount = Math.max(0, state.unreadCount - 1);\n      }\n    },\n    \n    markAllAsRead: (state) => {\n      state.notifications.forEach(notification => {\n        notification.isRead = true;\n      });\n      state.unreadCount = 0;\n    },\n    \n    removeNotification: (state, action: PayloadAction<string>) => {\n      const notification = state.notifications.find(n => n.id === action.payload);\n      if (notification && !notification.isRead) {\n        state.unreadCount = Math.max(0, state.unreadCount - 1);\n      }\n      state.notifications = state.notifications.filter(n => n.id !== action.payload);\n    },\n    \n    clearAllNotifications: (state) => {\n      state.notifications = [];\n      state.unreadCount = 0;\n    },\n    \n    toggleSound: (state) => {\n      state.isSoundEnabled = !state.isSoundEnabled;\n    },\n    \n    setSoundEnabled: (state, action: PayloadAction<boolean>) => {\n      state.isSoundEnabled = action.payload;\n    },\n  },\n});\n\nexport const {\n  addNotification,\n  markAsRead,\n  markAllAsRead,\n  removeNotification,\n  clearAllNotifications,\n  toggleSound,\n  setSoundEnabled,\n} = notificationSlice.actions;\n\nexport default notificationSlice.reducer; ","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '../../store';\nimport { \n  markAsRead, \n  markAllAsRead, \n  removeNotification, \n  clearAllNotifications,\n  toggleSound \n} from '../../store/slices/NotificationSlice';\nimport { Bell, X, Volume2, VolumeX} from 'lucide-react';\nimport { Button } from '../ui/button';\nimport { Badge } from '../ui/badge';\nimport { ScrollArea } from '../ui/scroll-area';\nimport { formatDistanceToNow } from 'date-fns';\n\nconst HeaderNotificationDropdown: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const dispatch = useDispatch();\n  \n  const { notifications, unreadCount, isSoundEnabled } = useSelector(\n    (state: RootState) => state.notifications\n  );\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleNotificationClick = (notificationId: string) => {\n    dispatch(markAsRead(notificationId));\n  };\n\n  const handleRemoveNotification = (e: React.MouseEvent, notificationId: string) => {\n    e.stopPropagation();\n    dispatch(removeNotification(notificationId));\n  };\n\n  const handleMarkAllAsRead = () => {\n    dispatch(markAllAsRead());\n  };\n\n  const handleClearAll = () => {\n    dispatch(clearAllNotifications());\n  };\n\n  const handleToggleSound = () => {\n    dispatch(toggleSound());\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'success':\n        return '✅';\n      case 'error':\n        return '❌';\n      case 'warning':\n        return '⚠️';\n      default:\n        return 'ℹ️';\n    }\n  };\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case 'success':\n        return 'border-green-200 bg-green-50';\n      case 'error':\n        return 'border-red-200 bg-red-50';\n      case 'warning':\n        return 'border-yellow-200 bg-yellow-50';\n      default:\n        return 'border-blue-200 bg-blue-50';\n    }\n  };\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      {/* Notification Bell Button */}\n      <Button\n        variant=\"outline\"\n        size=\"icon\"\n        className=\"relative transition-transform duration-300 ease-in-out hover:scale-105\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        <Bell className=\"h-4 w-4\" />\n        {unreadCount > 0 && (\n          <Badge \n            variant=\"destructive\" \n            className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center\"\n          >\n            {unreadCount > 99 ? '99+' : unreadCount}\n          </Badge>\n        )}\n      </Button>\n\n      {/* Dropdown */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n            <h3 className=\"font-semibold text-gray-900\">Notifications</h3>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={handleToggleSound}\n                className=\"h-8 w-8\"\n              >\n                {isSoundEnabled ? (\n                  <Volume2 className=\"h-4 w-4\" />\n                ) : (\n                  <VolumeX className=\"h-4 w-4\" />\n                )}\n              </Button>\n              {unreadCount > 0 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={handleMarkAllAsRead}\n                  className=\"text-xs\"\n                >\n                  Mark all read\n                </Button>\n              )}\n            </div>\n          </div>\n\n          {/* Notifications List */}\n          <ScrollArea className=\"max-h-96\">\n            {notifications.length === 0 ? (\n              <div className=\"p-4 text-center text-gray-500\">\n                No notifications\n              </div>\n            ) : (\n              <div className=\"p-2\">\n                {notifications.map((notification) => (\n                  <div\n                    key={notification.id}\n                    className={`p-3 rounded-lg border mb-2 cursor-pointer transition-colors hover:bg-gray-50 group ${\n                      notification.isRead ? 'opacity-75' : ''\n                    } ${getNotificationColor(notification.type)}`}\n                    onClick={() => handleNotificationClick(notification.id)}\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start gap-3 flex-1\">\n                        <span className=\"text-lg\">\n                          {getNotificationIcon(notification.type)}\n                        </span>\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className={`font-medium text-sm ${\n                            notification.isRead ? 'text-gray-600' : 'text-gray-900'\n                          }`}>\n                            {notification.title}\n                          </h4>\n                          <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">\n                            {notification.message}\n                          </p>\n                          <p className=\"text-xs text-gray-400 mt-2\">\n                            {formatDistanceToNow(new Date(notification.timestamp), { \n                              addSuffix: true \n                            })}\n                          </p>\n                        </div>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={(e) => handleRemoveNotification(e, notification.id)}\n                        className=\"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </ScrollArea>\n\n          {/* Footer */}\n          {notifications.length > 0 && (\n            <div className=\"flex items-center justify-between p-3 border-t border-gray-200\">\n              <span className=\"text-xs text-gray-500\">\n                {notifications.length} notification{notifications.length !== 1 ? 's' : ''}\n              </span>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleClearAll}\n                className=\"text-xs text-red-600 hover:text-red-700\"\n              >\n                Clear all\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HeaderNotificationDropdown; ","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface FilterValue {\n  value: number;\n  operator: string;\n}\n\ninterface ConversionFiltersState {\n  [componentId: string]: {\n    [key: string]: FilterValue | null;\n  };\n}\n\nconst initialState: ConversionFiltersState = {};\n\nconst conversionFiltersSlice = createSlice({\n  name: 'conversionFilters',\n  initialState,\n  reducers: {\n    setFilter: (\n      state,\n      action: PayloadAction<{\n        componentId: string;\n        column: string;\n        filter: FilterValue | null;\n      }>\n    ) => {\n      const { componentId, column, filter } = action.payload;\n      \n      // Only create new reference if needed\n      if (!state[componentId]) {\n        state[componentId] = {};\n      }\n      \n      // Only update if value actually changed\n      if (JSON.stringify(state[componentId][column]) !== JSON.stringify(filter)) {\n        state[componentId][column] = filter;\n      }\n    },\n    \n    clearFilters: (state, action: PayloadAction<string>) => {\n      const componentId = action.payload;\n      // Only delete if filters exist\n      if (Object.keys(state[componentId] || {}).length > 0) {\n        state[componentId] = {};\n      }\n    },\n  },\n});\n\nexport const { setFilter, clearFilters } = conversionFiltersSlice.actions;\nexport default conversionFiltersSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface CampaignGroup {\n  id: string;\n  name: string;\n  campaigns: string[];\n  color: string;\n}\n\ninterface AccountCampaignGroups {\n  [accountId: string]: {\n    groups: CampaignGroup[];\n    selectedCampaigns: string[];\n    editingGroupId: string | null;\n    expandedGroups: string[];\n    isCreatingGroup: boolean;\n  };\n}\n\ninterface CampaignGroupsState {\n  accounts: AccountCampaignGroups;\n}\n\nconst defaultAccountState = {\n  groups: [],\n  selectedCampaigns: [],\n  editingGroupId: null,\n  expandedGroups: [],\n  isCreatingGroup: false\n};\n\n// Initialize account state if it doesn't exist\nconst initializeAccountState = (state: CampaignGroupsState, accountId: string) => {\n  if (!state.accounts) {\n    state.accounts = {};\n  }\n  if (!state.accounts[accountId]) {\n    state.accounts[accountId] = { ...defaultAccountState };\n  }\n};\n\nconst campaignGroupsSlice = createSlice({\n  name: 'campaignGroups',\n  initialState: { accounts: {} } as CampaignGroupsState,\n  reducers: {\n    createGroup: (state, action: PayloadAction<{ accountId: string; name: string; campaigns: string[]; color: string }>) => {\n      const { accountId, name, campaigns, color } = action.payload;\n      initializeAccountState(state, accountId);\n      \n      const newGroup: CampaignGroup = {\n        id: Date.now().toString(),\n        name,\n        campaigns,\n        color\n      };\n      state.accounts[accountId].groups.push(newGroup);\n      state.accounts[accountId].selectedCampaigns = [];\n      state.accounts[accountId].isCreatingGroup = false;\n    },\n    deleteGroup: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\n      const { accountId, groupId } = action.payload;\n      initializeAccountState(state, accountId);\n      state.accounts[accountId].groups = state.accounts[accountId].groups.filter(group => group.id !== groupId);\n      if (state.accounts[accountId].editingGroupId === groupId) {\n        state.accounts[accountId].editingGroupId = null;\n      }\n    },\n    addCampaignToGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\n      const { accountId, groupId, campaignName } = action.payload;\n      initializeAccountState(state, accountId);\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\n      if (group && !group.campaigns.includes(campaignName)) {\n        group.campaigns.push(campaignName);\n      }\n    },\n    removeCampaignFromGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\n      const { accountId, groupId, campaignName } = action.payload;\n      initializeAccountState(state, accountId);\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\n      if (group) {\n        group.campaigns = group.campaigns.filter(c => c !== campaignName);\n      }\n    },\n    setSelectedCampaigns: (state, action: PayloadAction<{ accountId: string; campaigns: string[] }>) => {\n      const { accountId, campaigns } = action.payload;\n      initializeAccountState(state, accountId);\n      state.accounts[accountId].selectedCampaigns = campaigns;\n    },\n    toggleEditingGroup: (state, action: PayloadAction<{ accountId: string; groupId: string | null }>) => {\n      const { accountId, groupId } = action.payload;\n      initializeAccountState(state, accountId);\n      state.accounts[accountId].editingGroupId = groupId;\n    },\n    toggleGroupExpansion: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\n      const { accountId, groupId } = action.payload;\n      initializeAccountState(state, accountId);\n      const expandedGroups = state.accounts[accountId].expandedGroups;\n      if (expandedGroups.includes(groupId)) {\n        state.accounts[accountId].expandedGroups = expandedGroups.filter(id => id !== groupId);\n      } else {\n        state.accounts[accountId].expandedGroups.push(groupId);\n      }\n    },\n    setIsCreatingGroup: (state, action: PayloadAction<{ accountId: string; isCreating: boolean }>) => {\n      const { accountId, isCreating } = action.payload;\n      initializeAccountState(state, accountId);\n      state.accounts[accountId].isCreatingGroup = isCreating;\n      if (!isCreating) {\n        state.accounts[accountId].selectedCampaigns = [];\n      }\n    }\n  }\n});\n\nexport const {\n  createGroup,\n  deleteGroup,\n  addCampaignToGroup,\n  removeCampaignFromGroup,\n  setSelectedCampaigns,\n  toggleEditingGroup,\n  toggleGroupExpansion,\n  setIsCreatingGroup\n} = campaignGroupsSlice.actions;\n\nexport default campaignGroupsSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface CampaignLabelsState {\n  labels: {\n    [accountId: string]: {\n      [campaignId: string]: string[];\n    }\n  };\n  isAddingLabel: boolean;\n}\n\nconst initialState: CampaignLabelsState = {\n  labels: {},\n  isAddingLabel: false,\n};\n\nconst campaignLabelsSlice = createSlice({\n  name: 'campaignLabels',\n  initialState,\n  reducers: {\n    addLabelToCampaign: (\n      state, \n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\n    ) => {\n      const { accountId, campaignId, label } = action.payload;\n      \n      // Initialize account if it doesn't exist\n      if (!state.labels[accountId]) {\n        state.labels[accountId] = {};\n      }\n      \n      // Initialize campaign if it doesn't exist\n      if (!state.labels[accountId][campaignId]) {\n        state.labels[accountId][campaignId] = [];\n      }\n      \n      // Add label if it doesn't already exist\n      if (!state.labels[accountId][campaignId].includes(label)) {\n        state.labels[accountId][campaignId].push(label);\n      }\n    },\n    \n    removeLabelFromCampaign: (\n      state, \n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\n    ) => {\n      const { accountId, campaignId, label } = action.payload;\n      \n      if (state.labels[accountId] && state.labels[accountId][campaignId]) {\n        state.labels[accountId][campaignId] = state.labels[accountId][campaignId]\n          .filter(l => l !== label);\n      }\n    },\n    \n    toggleAddingLabel: (state, action: PayloadAction<boolean>) => {\n      state.isAddingLabel = action.payload;\n    },\n    \n    // Optional: Add utility actions for account-level operations\n    clearAccountLabels: (state, action: PayloadAction<string>) => {\n      const accountId = action.payload;\n      if (state.labels[accountId]) {\n        state.labels[accountId] = {};\n      }\n    },\n    deleteLabel: (state, action: PayloadAction<{ accountId: string; label: string }>) => {\n      const { accountId, label } = action.payload;\n      \n      if (state.labels[accountId]) {\n        Object.keys(state.labels[accountId]).forEach((campaignId) => {\n          state.labels[accountId][campaignId] = state.labels[accountId][campaignId].filter(\n            (l) => l !== label\n          );\n          \n          // If the campaign has no more labels after deletion, remove it from the object\n          if (state.labels[accountId][campaignId].length === 0) {\n            delete state.labels[accountId][campaignId];\n          }\n        });\n    \n        // If the account has no more campaigns with labels, remove the account entry\n        if (Object.keys(state.labels[accountId]).length === 0) {\n          delete state.labels[accountId];\n        }\n      }\n    }\n,    \n    \n    // Optional: Copy labels between campaigns in the same account\n    copyLabels: (\n      state,\n      action: PayloadAction<{ \n        accountId: string; \n        sourceCampaignId: string; \n        targetCampaignId: string \n      }>\n    ) => {\n      const { accountId, sourceCampaignId, targetCampaignId } = action.payload;\n      \n      if (state.labels[accountId] && \n          state.labels[accountId][sourceCampaignId]) {\n        \n        if (!state.labels[accountId][targetCampaignId]) {\n          state.labels[accountId][targetCampaignId] = [];\n        }\n        \n        // Copy labels from source to target (avoiding duplicates)\n        state.labels[accountId][sourceCampaignId].forEach(label => {\n          if (!state.labels[accountId][targetCampaignId].includes(label)) {\n            state.labels[accountId][targetCampaignId].push(label);\n          }\n        });\n      }\n    }\n  }\n});\n\nexport const { \n  addLabelToCampaign, \n  removeLabelFromCampaign, \n  toggleAddingLabel,\n  clearAccountLabels,\n  copyLabels,deleteLabel\n} = campaignLabelsSlice.actions;\n\nexport default campaignLabelsSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface TutorialState {\n  isFirstTimeLogin: boolean;\n  activeTutorial: string | null;\n  isTutorialActive: boolean;\n  activeTutorialStep: number;\n  tutorialQueue: string[]; // Array of tutorial IDs to play in sequence\n  completedTutorials: Record<string, boolean>;\n}\n\nconst initialState: TutorialState = {\n  isFirstTimeLogin: false,\n  activeTutorial: null,\n  isTutorialActive: false,\n  activeTutorialStep: 0,\n  tutorialQueue: [],\n  completedTutorials: {}\n};\n\nconst tutorialSlice = createSlice({\n  name: 'tutorial',\n  initialState,\n  reducers: {\n    // Set first-time login status\n    setFirstTimeLogin: (state, action: PayloadAction<boolean>) => {\n      state.isFirstTimeLogin = action.payload;\n    },\n\n    // Queue multiple tutorials to play in sequence\n    queueTutorials: (state, action: PayloadAction<string[]>) => {\n      // Filter out tutorials that are already in the queue or are the active tutorial\n      const newTutorials = action.payload.filter(id => \n        !state.tutorialQueue.includes(id) && id !== state.activeTutorial\n      );\n      \n      if (newTutorials.length === 0) {\n        console.log('No new tutorials to queue');\n        return;\n      }\n      \n      // Add new tutorials to the beginning of the queue\n      state.tutorialQueue = [...newTutorials, ...state.tutorialQueue];\n      console.log(`Queued tutorials: ${newTutorials.join(', ')}, Queue is now: ${state.tutorialQueue.join(', ')}`);\n      \n      // If no tutorial is active, start the first one in queue\n      if (!state.isTutorialActive && state.tutorialQueue.length > 0) {\n        state.activeTutorial = state.tutorialQueue[0];\n        state.tutorialQueue = state.tutorialQueue.slice(1);\n        state.isTutorialActive = true;\n        state.activeTutorialStep = 0;\n        console.log(`Auto-starting tutorial: ${state.activeTutorial}`);\n      }\n    },\n\n    // Start a specific tutorial\n    startTutorial: (state, action: PayloadAction<string>) => {\n      state.activeTutorial = action.payload;\n      state.isTutorialActive = true;\n      state.activeTutorialStep = 0;\n      console.log(`Manually starting tutorial: ${action.payload}`);\n    },\n\n    // Move to the next tutorial in queue\n    nextTutorial: (state) => {\n      // Mark current tutorial as completed if one is active\n      if (state.activeTutorial) {\n        state.completedTutorials[state.activeTutorial] = true;\n        console.log(`Completed tutorial: ${state.activeTutorial}`);\n      }\n      \n      console.log(`nextTutorial called, queue length: ${state.tutorialQueue.length}, queue: [${state.tutorialQueue.join(', ')}]`);\n      \n      // Check if there are more tutorials in queue\n      if (state.tutorialQueue.length > 0) {\n        state.activeTutorial = state.tutorialQueue[0];\n        state.tutorialQueue = state.tutorialQueue.slice(1);\n        state.activeTutorialStep = 0;\n        state.isTutorialActive = true;\n        \n        console.log(`Starting next tutorial: ${state.activeTutorial}, remaining queue: [${state.tutorialQueue.join(', ')}]`);\n      } else {\n        // No more tutorials, stop the tutorial mode\n        state.activeTutorial = null;\n        state.isTutorialActive = false;\n        \n        console.log('No more tutorials in queue, stopping tutorial mode');\n      }\n    },\n\n    // Update current step in the active tutorial\n    setTutorialStep: (state, action: PayloadAction<number>) => {\n      state.activeTutorialStep = action.payload;\n    },\n\n    // Stop current tutorial and clear queue\n    stopTutorial: (state) => {\n      // Mark current tutorial as completed if there is one active\n      if (state.activeTutorial) {\n        state.completedTutorials[state.activeTutorial] = true;\n        console.log(`Tutorial stopped, marking ${state.activeTutorial} as completed`);\n      }\n      \n      state.isTutorialActive = false;\n      state.activeTutorial = null;\n      state.tutorialQueue = [];\n      state.activeTutorialStep = 0;\n      \n      console.log('Tutorial stopped, queue cleared');\n    },\n\n    // Complete first-time login\n    completeFirstTimeLogin: (state) => {\n      state.isFirstTimeLogin = false;\n    },\n    \n    // Reset tutorial for a specific ID\n    resetTutorial: (state, action: PayloadAction<string>) => {\n      if (state.completedTutorials[action.payload]) {\n        state.completedTutorials[action.payload] = false;\n      }\n    },\n    \n    // Reset all tutorials\n    resetAllTutorials: (state) => {\n      state.completedTutorials = {};\n    }\n  }\n});\n\n// Export actions\nexport const { \n  setFirstTimeLogin, \n  queueTutorials,\n  startTutorial, \n  nextTutorial,\n  setTutorialStep,\n  stopTutorial, \n  completeFirstTimeLogin,\n  resetTutorial,\n  resetAllTutorials\n} = tutorialSlice.actions;\n\nexport default tutorialSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '..';\n\ninterface TokenErrorState {\n  fbToken: boolean;\n  googleAnalyticsToken: boolean;\n  googleAdsToken: boolean;\n}\n\nconst initialState: TokenErrorState = {\n  fbToken: false,\n  googleAnalyticsToken: false,\n  googleAdsToken: false,\n};\n\n\nconst tokenErrorSlice = createSlice({\n  name: 'tokenError',\n  initialState,\n  reducers: {\n    setFbTokenError: (state, action: PayloadAction<boolean>) => {\n      state.fbToken = action.payload;\n    },\n    \n    setGoogleAnalyticsTokenError: (state, action: PayloadAction<boolean>) => {\n      state.googleAnalyticsToken = action.payload;\n    },\n    \n    setGoogleAdsTokenError: (state, action: PayloadAction<boolean>) => {\n      state.googleAdsToken = action.payload;\n    },\n    \n    resetAllTokenErrors: (state) => {\n      state.fbToken = false;\n      state.googleAnalyticsToken = false;\n      state.googleAdsToken = false;\n    },\n  },\n});\n\n\nexport const {\n  setFbTokenError,\n  setGoogleAnalyticsTokenError,\n  setGoogleAdsTokenError,\n  resetAllTokenErrors,\n} = tokenErrorSlice.actions;\n\n\nexport const selectFbTokenError = (state: RootState) => state.tokenError.fbToken;\nexport const selectGoogleAnalyticsTokenError = (state: RootState) => state.tokenError.googleAnalyticsToken;\nexport const selectGoogleAdsTokenError = (state: RootState) => state.tokenError.googleAdsToken;\nexport const selectAnyTokenError = (state: RootState) => \n  state.tokenError.fbToken || \n  state.tokenError.googleAnalyticsToken || \n  state.tokenError.googleAdsToken;\n\nexport default tokenErrorSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface FilterCondition {\n  column: string;\n  operator: '>' | '<' | '=' | '>=' | '<=';\n  value: string | number;\n}\n\ninterface InterestFilterState {\n  filters: {\n    [tableId: string]: FilterCondition[];\n  };\n}\n\nconst initialState: InterestFilterState = {\n  filters: {}\n};\n\nconst interestFilterSlice = createSlice({\n  name: 'interestFilter',\n  initialState,\n  reducers: {\n    addFilter: (state, action: PayloadAction<{ tableId: string; filter: FilterCondition }>) => {\n      const { tableId, filter } = action.payload;\n      const currentFilters = state.filters[tableId] || [];\n      state.filters = {\n        ...state.filters,\n        [tableId]: [...currentFilters, filter]\n      };\n    },\n    removeFilter: (state, action: PayloadAction<{ tableId: string; index: number }>) => {\n      const { tableId, index } = action.payload;\n      const currentFilters = state.filters[tableId] || [];\n      state.filters = {\n        ...state.filters,\n        [tableId]: currentFilters.filter((_, i) => i !== index)\n      };\n    },\n    updateFilter: (state, action: PayloadAction<{ tableId: string; index: number; filter: FilterCondition }>) => {\n      const { tableId, index, filter } = action.payload;\n      const currentFilters = state.filters[tableId] || [];\n      state.filters = {\n        ...state.filters,\n        [tableId]: currentFilters.map((f, i) => i === index ? filter : f)\n      };\n    },\n    clearFilters: (state, action: PayloadAction<{ tableId: string }>) => {\n      const { tableId } = action.payload;\n      state.filters = {\n        ...state.filters,\n        [tableId]: []\n      };\n    },\n  },\n});\n\nexport const { addFilter, removeFilter, updateFilter, clearFilters } = interestFilterSlice.actions;\nexport default interestFilterSlice.reducer; ","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ninterface BrandFormState {\n  brandName: string;\n  connectedAccounts: Record<string, string[]>;\n  googleAdsConnections: {\n    clientId: string;\n    managerId?: string;\n  }[];\n  ga4Id: string;\n  fbAdId: string[];\n  shop: string;\n  shopifyAccessToken: string;\n}\n\nconst initialState: BrandFormState = {\n  brandName: '',\n  connectedAccounts: {},\n  googleAdsConnections: [],\n  ga4Id: '',\n  fbAdId: [],\n  shop: '',\n  shopifyAccessToken: ''\n};\n\nconst brandFormSlice = createSlice({\n  name: 'brandForm',\n  initialState,\n  reducers: {\n    setBrandFormData: (state, action: PayloadAction<BrandFormState>) => {\n      return { ...state, ...action.payload };\n    },\n    clearBrandFormData: () => {\n      return initialState;\n    }\n  }\n});\n\nexport const { setBrandFormData, clearBrandFormData } = brandFormSlice.actions;\nexport default brandFormSlice.reducer; ","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport conversionFiltersReducer from \"./slices/ConversionFilterSlice\";\nimport brandReducer from \"./slices/BrandSlice.ts\"\nimport userReducer from \"./slices/UserSlice.ts\"\nimport dateReducer from \"./slices/DateSlice.ts\"\nimport campaignGroupsReducer from './slices/CampaignGroupSlice.ts';\nimport campaignLabelsReducer from './slices/campaignLabelsSlice.ts';\nimport tutorialsReducer from \"./slices/TutorialSlice.ts\"\nimport localReducer from \"./slices/LocalSlice.ts\"\nimport tokenReducer from \"./slices/TokenSllice.ts\"\nimport interestFilterReducer from './slices/interestFilterSlice';\nimport brandFormReducer from './slices/BrandFormSlice';\nimport notificationReducer from './slices/NotificationSlice';\n\n\n\nconst rootReducer = combineReducers({\n  conversionFilters: conversionFiltersReducer,\n  brand: brandReducer, \n  user: userReducer, \n  date: dateReducer,\n  campaignGroups: campaignGroupsReducer,\n  campaignLabels: campaignLabelsReducer,\n  tutorials: tutorialsReducer,\n  locale: localReducer,\n  tokenError: tokenReducer,\n  interestFilter: interestFilterReducer,\n  brandForm: brandFormReducer,\n  notifications: notificationReducer,\n});\n\n\nconst persistConfig = {\n  key: \"root\",\n  storage,\n  whitelist: [\"tokenError\", \"conversionFilters\", \"brand\", \"user\", \"date\" , \"campaignGroups\", \"campaignLabels\", \"tutorials\",\"locale\",\"interestFilter\", \"brandForm\", \"notifications\"], // Added notifications to persist\n  transforms: [\n    // Custom transform for notifications to limit storage size\n    {\n      in: (state: any) => {\n        if (state.notifications && state.notifications.notifications) {\n          // Keep only last 50 notifications and filter out old ones (older than 7 days)\n          const oneWeekAgo = new Date();\n          oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n          \n          const filteredNotifications = state.notifications.notifications\n            .filter((notification: any) => new Date(notification.timestamp) > oneWeekAgo)\n            .slice(0, 50);\n          \n          return {\n            ...state,\n            notifications: {\n              ...state.notifications,\n              notifications: filteredNotifications,\n              unreadCount: filteredNotifications.filter((n: any) => !n.isRead).length\n            }\n          };\n        }\n        return state;\n      },\n      out: (state: any) => state\n    }\n  ]\n};\n\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\n\nexport const store = configureStore({\n  reducer: persistedReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [\"persist/PERSIST\", \"persist/REHYDRATE\", \"persist/REGISTER\"],\n      },\n    }),\n});\n\nexport const persistor = persistStore(store);\n\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import { io, Socket } from 'socket.io-client';\nimport { store } from '../store';\nimport { addNotification } from '../store/slices/NotificationSlice';\n\n// Singleton socket instance\nlet socket: Socket | null = null;\nlet isConnecting = false;\nlet isConnected = false;\nlet currentUserId: string | null = null;\nlet currentBrandId: string | null = null;\nlet reconnectAttempts = 0;\nconst maxReconnectAttempts = 5;\nlet reconnectTimer: NodeJS.Timeout | null = null;\n\nconst baseURL = import.meta.env.PROD \n  ? import.meta.env.VITE_API_URL \n  : import.meta.env.VITE_LOCAL_API_URL;\n\nconsole.log('Socket Service Environment:', {\n  PROD: import.meta.env.PROD,\n  baseURL: baseURL\n});\n\n// Initialize socket connection\nexport const initializeSocket = (userId?: string, brandId?: string) => {\n  console.log('🔄 initializeSocket called with:', { userId, brandId, isConnecting, isConnected });\n  \n  // Prevent multiple simultaneous connections\n  if (isConnecting) {\n    console.log('⏳ Connection already in progress, skipping...');\n    return;\n  }\n\n  // Update current user and brand\n  if (userId) currentUserId = userId;\n  if (brandId) currentBrandId = brandId;\n  \n  // If already connected, just handle room changes\n  if (socket?.connected && isConnected) {\n    console.log('✅ Socket already connected, handling room changes...');\n    handleRoomChanges();\n    return;\n  }\n\n  // Clean up existing socket if any\n  if (socket && !socket.connected) {\n    console.log('🧹 Cleaning up disconnected socket...');\n    socket.removeAllListeners();\n    socket = null;\n    isConnected = false;\n  }\n\n  createSocketConnection();\n};\n\nconst createSocketConnection = () => {\n  console.log('🔌 Creating new socket connection to:', baseURL);\n  console.log('🔍 Connection details:', {\n    withCredentials: true,\n    transports: ['polling', 'websocket'],\n    timeout: 20000,\n    autoConnect: true,\n    reconnection: false,\n    forceNew: true\n  });\n  \n  isConnecting = true;\n  reconnectAttempts++;\n\n  // Clear any existing reconnect timer\n  if (reconnectTimer) {\n    clearTimeout(reconnectTimer);\n    reconnectTimer = null;\n  }\n\n  socket = io(baseURL, {\n    withCredentials: true,\n    transports: ['polling', 'websocket'], // Match server configuration\n    timeout: 20000,\n    autoConnect: true,\n    reconnection: false, // Handle reconnection manually\n    forceNew: true, // Force new connection\n    extraHeaders: {\n      // Ensure cookies are sent with the connection\n      'X-Requested-With': 'XMLHttpRequest'\n    }\n  });\n\n  // Connection successful\n  socket.on('connect', () => {\n    console.log('✅ Socket connected successfully:', socket?.id);\n    isConnecting = false;\n    isConnected = true;\n    reconnectAttempts = 0;\n    \n    handleRoomChanges();\n  });\n\n  // Connection failed\n  socket.on('connect_error', (error) => {\n    console.error('❌ Socket connection error:', error);\n    isConnecting = false;\n    isConnected = false;\n    \n    handleConnectionError(error);\n  });\n\n  // Disconnected\n  socket.on('disconnect', (reason) => {\n    console.log('🔌 Socket disconnected, reason:', reason);\n    isConnecting = false;\n    isConnected = false;\n    \n    // Only attempt reconnection for certain disconnect reasons\n    if (reason === 'io server disconnect') {\n      console.log('Server initiated disconnect, not reconnecting');\n      return;\n    }\n    \n    attemptReconnection();\n  });\n\n  // Socket errors\n  socket.on('error', (error) => {\n    console.error('🚨 Socket error:', error);\n  });\n\n  // Setup event listeners\n  setupEventListeners();\n};\n\nconst handleConnectionError = (error: any) => {\n  console.error('Connection error details:', {\n    message: error.message,\n    name: error.name,\n    type: error.type,\n    code: error.code\n  });\n  \n  // Check for authentication errors\n  if (error.message?.includes('Authentication') || error.message?.includes('Unauthorized')) {\n    console.error('🔐 Authentication failed for socket connection');\n    \n    // Show user-friendly notification\n    store.dispatch(addNotification({\n      type: 'error',\n      title: 'Connection Error',\n      message: 'Authentication failed. Please log in again.'\n    }));\n    \n    // Don't attempt reconnection for auth errors\n    return;\n  }\n  \n  // Check for server errors\n  if (error.message?.includes('server error')) {\n    console.error('🔥 Server error detected - check server logs');\n  }\n  \n  // Check for network errors\n  if (error.message?.includes('Network Error') || error.message?.includes('timeout')) {\n    console.error('🌐 Network error detected');\n  }\n  \n  attemptReconnection();\n};\n\nconst attemptReconnection = () => {\n  if (reconnectAttempts >= maxReconnectAttempts) {\n    console.error('🔄 Max reconnection attempts reached, giving up');\n    return;\n  }\n  \n  const delay = Math.min(1000 * Math.pow(2, reconnectAttempts), 30000); // Exponential backoff\n  console.log(`🔄 Attempting reconnection in ${delay}ms (attempt ${reconnectAttempts + 1}/${maxReconnectAttempts})`);\n  \n  reconnectTimer = setTimeout(() => {\n    if (!isConnected && !isConnecting) {\n      createSocketConnection();\n    }\n  }, delay);\n};\n\nconst handleRoomChanges = () => {\n  if (!socket?.connected) {\n    console.warn('⚠️ Socket not connected, cannot handle room changes');\n    return;\n  }\n\n  // Join user room if userId is provided\n  if (currentUserId) {\n    console.log('🏠 Joining user room:', currentUserId);\n    socket.emit('join-user-room', currentUserId);\n  }\n  \n  // Join brand room if brandId is provided\n  if (currentBrandId) {\n    console.log('🏢 Joining brand room:', currentBrandId);\n    socket.emit('join-brand-room', currentBrandId);\n  }\n};\n\nconst setupEventListeners = () => {\n  if (!socket) return;\n\n  // Listen for brand-specific notifications\n  socket.on('brand-notification', (data) => {\n    console.log('📢 Brand notification received:', data);\n    handleNotification(data);\n  });\n\n  // Listen for user-specific notifications\n  socket.on('notification', (data) => {\n    console.log('📬 User notification received:', data);\n    handleNotification(data);\n  });\n\n  // Ping-pong for connection health\n  socket.on('pong', (data) => {\n    console.log('🏓 Pong received:', data);\n  });\n};\n\n// Handle incoming notifications\nconst handleNotification = (data: any) => {\n  const { type, data: notificationData } = data;\n  \n  let notificationType: 'success' | 'error' | 'info' | 'warning' = 'info';\n  let title = 'Notification';\n  let message = 'You have a new notification';\n\n  // Map notification types to UI-friendly formats\n  switch (type) {\n    case 'metrics-calculation-complete':\n      notificationType = notificationData.success ? 'success' : 'error';\n      title = 'Metrics Calculation';\n      message = notificationData.success \n        ? 'Metrics calculation completed successfully!' \n        : `Calculation failed: ${notificationData.message}`;\n      break;\n      \n    case 'metrics-calculation-error':\n      notificationType = 'error';\n      title = 'Calculation Error';\n      message = `Error calculating metrics: ${notificationData.error}`;\n      break;\n      \n    default:\n      title = 'System Notification';\n      message = notificationData.message || 'You have a new notification';\n  }\n\n  // Add notification to Redux store\n  store.dispatch(addNotification({\n    type: notificationType,\n    title,\n    message,\n    brandId: notificationData.brandId,\n    actionUrl: notificationData.actionUrl,\n  }));\n\n  // Play notification sound if enabled\n  playNotificationSound();\n};\n\n// Play notification sound\nconst playNotificationSound = () => {\n  const { isSoundEnabled } = store.getState().notifications;\n  \n  if (isSoundEnabled) {\n    try {\n      const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      \n      oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n      oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);\n      \n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\n      \n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.2);\n    } catch (error) {\n      console.warn('🔇 Could not play notification sound:', error);\n    }\n  }\n};\n\n// Join brand room\nexport const joinBrandRoom = (brandId: string) => {\n  console.log('🏢 joinBrandRoom called with:', brandId);\n  \n  currentBrandId = brandId;\n  \n  if (socket?.connected && isConnected) {\n    console.log(`🏢 Emitting join-brand-room for brand: ${brandId}`);\n    socket.emit('join-brand-room', brandId);\n  } else {\n    console.warn('⚠️ Socket not connected, will join brand room after connection');\n  }\n};\n\n// Leave brand room\nexport const leaveBrandRoom = (brandId: string) => {\n  if (socket?.connected && isConnected) {\n    socket.emit('leave-brand-room', brandId);\n    console.log(`🚪 Left brand room: ${brandId}`);\n  }\n};\n\n// Disconnect socket\nexport const disconnectSocket = () => {\n  console.log('🔌 Disconnecting socket...');\n  \n  if (reconnectTimer) {\n    clearTimeout(reconnectTimer);\n    reconnectTimer = null;\n  }\n  \n  if (socket) {\n    socket.removeAllListeners();\n    socket.disconnect();\n    socket = null;\n  }\n  \n  isConnecting = false;\n  isConnected = false;\n  currentUserId = null;\n  currentBrandId = null;\n  reconnectAttempts = 0;\n};\n\n// Check if socket is connected\nexport const isSocketConnected = (): boolean => {\n  return !!(socket?.connected && isConnected);\n};\n\n// Send ping to test connection\nexport const pingSocket = () => {\n  if (socket?.connected && isConnected) {\n    socket.emit('ping');\n  }\n};\n\n// Get socket instance (for advanced usage)\nexport const getSocket = (): Socket | null => {\n  return socket;\n};\n\n// Get connection status\nexport const getConnectionStatus = () => {\n  return {\n    isConnected: isConnected,\n    isConnecting: isConnecting,\n    socketId: socket?.id || null,\n    currentUserId: currentUserId,\n    currentBrandId: currentBrandId,\n    reconnectAttempts: reconnectAttempts\n  };\n};","import { useEffect, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../store';\nimport { \n  initializeSocket, \n  joinBrandRoom, \n  leaveBrandRoom, \n  disconnectSocket, \n  isSocketConnected \n} from '../services/socketService';\n\nexport const useSocketConnection = () => {\n  const user = useSelector((state: RootState) => state.user.user);\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId);\n  \n  // Refs to track previous values and prevent multiple calls\n  const previousBrandId = useRef<string | null>(null);\n  const previousUserId = useRef<string | null>(null);\n  const isInitializedRef = useRef(false);\n  const isInitializingRef = useRef(false);\n\n  // Debug logging\n  console.log('useSocketConnection - Current state:', {\n    hasUser: !!user,\n    userId: user?.id,\n    selectedBrandId,\n    previousBrandId: previousBrandId.current,\n    isInitialized: isInitializedRef.current,\n    isInitializing: isInitializingRef.current,\n    isSocketConnected: isSocketConnected()\n  });\n\n  // Main socket initialization effect\n  useEffect(() => {\n    const currentUserId = user?.id;\n    \n    // If no user, cleanup and return\n    if (!currentUserId) {\n      console.log('🚫 No user ID available, cleaning up socket connection');\n      if (isInitializedRef.current) {\n        disconnectSocket();\n        isInitializedRef.current = false;\n        isInitializingRef.current = false;\n        previousUserId.current = null;\n        previousBrandId.current = null;\n      }\n      return;\n    }\n\n    // Check if user changed\n    const userChanged = previousUserId.current !== currentUserId;\n    const isFirstTime = !isInitializedRef.current;\n    const socketNotConnected = !isSocketConnected();\n\n    // Only initialize if:\n    // 1. First time with valid user\n    // 2. User changed  \n    // 3. Socket is not connected and not currently initializing\n    const shouldInitialize = (isFirstTime || userChanged || socketNotConnected) && !isInitializingRef.current;\n\n    if (shouldInitialize) {\n      console.log('🔄 Initializing socket connection for user:', currentUserId, 'brand:', selectedBrandId);\n      console.log('🔍 Initialization reason:', { isFirstTime, userChanged, socketNotConnected });\n      \n      isInitializingRef.current = true;\n      \n      try {\n        initializeSocket(currentUserId, selectedBrandId || undefined);\n        isInitializedRef.current = true;\n        previousUserId.current = currentUserId;\n        previousBrandId.current = selectedBrandId;\n      } catch (error) {\n        console.error('❌ Error initializing socket connection:', error);\n        isInitializingRef.current = false;\n      }\n    } else {\n      console.log('⏭️ Skipping socket initialization:', { \n        shouldInitialize, \n        isFirstTime, \n        userChanged, \n        socketNotConnected, \n        isInitializing: isInitializingRef.current \n      });\n    }\n\n    // Reset initializing flag after a short delay to allow connection to establish\n    const resetInitializingFlag = setTimeout(() => {\n      isInitializingRef.current = false;\n    }, 1000);\n\n    // Cleanup function\n    return () => {\n      clearTimeout(resetInitializingFlag);\n      // Only disconnect on unmount, not on re-renders\n    };\n  }, [user?.id]); // Only depend on user.id, not selectedBrandId\n\n  // Separate effect for brand changes\n  useEffect(() => {\n    const currentBrandId = selectedBrandId;\n    const brandChanged = previousBrandId.current !== currentBrandId;\n    \n    // Only handle brand changes if socket is connected and brand actually changed\n    if (brandChanged && isSocketConnected() && isInitializedRef.current) {\n      console.log('🏢 Brand changed from', previousBrandId.current, 'to', currentBrandId);\n      \n      try {\n        // Leave previous brand room if it exists\n        if (previousBrandId.current) {\n          console.log('🚪 Leaving previous brand room:', previousBrandId.current);\n          leaveBrandRoom(previousBrandId.current);\n        }\n        \n        // Join new brand room if it exists\n        if (currentBrandId) {\n          console.log('🏢 Joining new brand room:', currentBrandId);\n          joinBrandRoom(currentBrandId);\n        }\n        \n        // Update the ref\n        previousBrandId.current = currentBrandId;\n      } catch (error) {\n        console.error('❌ Error handling brand change:', error);\n      }\n    } else if (brandChanged) {\n      console.log('⏭️ Skipping brand change:', { \n        brandChanged, \n        isSocketConnected: isSocketConnected(), \n        isInitialized: isInitializedRef.current \n      });\n    }\n  }, [selectedBrandId]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      try {\n        console.log('🧹 Component unmounting, disconnecting socket');\n        disconnectSocket();\n        isInitializedRef.current = false;\n        isInitializingRef.current = false;\n        previousUserId.current = null;\n        previousBrandId.current = null;\n      } catch (error) {\n        console.error('❌ Error disconnecting socket on unmount:', error);\n      }\n    };\n  }, []); // Empty dependency array - only run on mount/unmount\n\n  return {\n    isConnected: isSocketConnected(),\n  };\n};","import { Settings, RefreshCw} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { DatePickerWithRange } from \"./DatePickerWithRange\";\nimport { Popover, PopoverTrigger, PopoverContent } from \"@/components/ui/popover\";\n// import HeaderTutorialButton from \"../Tutorial/HeaderTutorialButton\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setLocale } from \"@/store/slices/LocalSlice\";\nimport { RootState } from \"@/store\";\nimport HeaderNotificationDropdown from \"./HeaderNotificationDropdown\";\nimport { useSocketConnection } from \"../../hooks/useSocketConnection\";\n\ninterface HeaderProps {\n  title: string;\n  Icon: React.ComponentType<{ className?: string }>;\n  showDatePicker?: boolean;\n  showSettings?: boolean;\n  showRefresh?: boolean;\n  isLoading?: boolean;\n  handleManualRefresh?: () => void;\n}\n \nexport default function Header({\n  title,\n  Icon,\n  showDatePicker = false,\n  showSettings = false,\n  showRefresh = false,\n  isLoading = false,\n  handleManualRefresh,\n}: HeaderProps) {\n\n  const dispatch = useDispatch();\n  const locale = useSelector((state: RootState) => state.locale.locale);\n\n  // Initialize socket connection for notifications\n  useSocketConnection();\n\n  return (\n    <header className=\"sticky top-0 z-40 bg-white border-b px-6 py-3 transition-all duration-300\">\n      <div className=\"flex items-center justify-between\">\n        {/* Left Section */}\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"rounded-lg bg-secondary p-2 transition-transform duration-300 ease-in-out hover:scale-110\">\n            <Icon className=\"h-6 w-6 text-secondary-foreground\" />\n          </div>\n          <h1 className=\"text-2xl font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-secondary-foreground to-primary\">\n            {title}\n          </h1>\n        </div>\n\n        {/* Right Section */}\n        <div className=\"flex flex-row items-center space-x-2\">\n          {showDatePicker && (\n            <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n              <DatePickerWithRange\n                defaultDate={{\n                  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                  to: new Date()\n                }}\n              />\n            </div>\n          )}\n\n          {showRefresh && (\n            <div className=\"md:flex items-center hidden\">\n              <Button onClick={handleManualRefresh} disabled={isLoading} className=\"flex items-center\">\n                <RefreshCw className={`h-4 w-4 ${isLoading ? \"animate-spin\" : \"\"}`} />\n              </Button>\n            </div>\n          )}\n\n          {/* Notification Dropdown */}\n          <HeaderNotificationDropdown />\n\n\n          {/* Rest of the component remains the same */}\n          {showSettings && (\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button variant=\"outline\" size=\"icon\">\n                  <Settings className=\"h-4 w-4\" />\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent>\n                <div className=\"grid gap-2\">\n                  <h3 className=\"font-medium\">Locale Settings</h3>\n                  <div className=\"flex flex-col space-y-2\">\n                    <label className=\"cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"locale\"\n                        value=\"en-IN\"\n                        checked={locale === \"en-IN\"}\n                        onChange={() => dispatch(setLocale(\"en-IN\"))}\n                        className=\"mr-2\"\n                      />\n                      Indian Formatting\n                    </label>\n                    <label className=\"cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"locale\"\n                        value=\"en-US\"\n                        checked={locale === \"en-US\"}\n                        onChange={() => dispatch(setLocale(\"en-US\"))}\n                        className=\"mr-2\"\n                      />\n                      Western Formatting\n                    </label>\n                  </div>\n                </div>\n              </PopoverContent>\n            </Popover>\n          )}\n          {/* <HeaderTutorialButton /> */}\n        </div>\n      </div>\n    </header>\n  );\n}","import { useEffect, useState } from \"react\"\nimport { CheckCircle } from \"lucide-react\"\n\nexport default function Loader({ isLoading }: { isLoading: boolean }) {\n  const [progress, setProgress] = useState(0)\n  const [messageIndex, setMessageIndex] = useState(0)\n  const [isComplete, setIsComplete] = useState(false)\n\n  // Loading messages\n  const loadingMessages = [\n    \"Just a moment, we're getting things ready...\",\n    \"Almost there, hang tight!\",\n    \"Brewing some magic for you...\",\n    \"The best things are worth waiting for...\",\n    \"Gathering all the awesome stuff...\",\n    \"Just putting on the finishing touches...\",\n    \"We're working our digital magic...\",\n    \"Your experience is being crafted...\",\n    \"Just a few more seconds of patience...\",\n    \"You're going to love what's coming...\",\n  ]\n\n  useEffect(() => {\n    // Progress bar animation - stops at 95% until loading is complete\n    const progressInterval = setInterval(() => {\n      setProgress((prev) => {\n        // Cap at 95% during loading\n        if (isLoading && prev >= 95) {\n          return 95;\n        }\n        \n        // Jump to 100% when loading completes\n        if (!isLoading && prev < 100) {\n          clearInterval(progressInterval);\n          setProgress(100);\n          setTimeout(() => {\n            setIsComplete(true);\n          }, 300);\n          return 100;\n        }\n        \n        // Normal progress increase\n        if (prev < 95) {\n          return prev + 1;\n        }\n        \n        return prev;\n      });\n    }, 80);\n\n\n    // Message changing animation\n    const messageInterval = setInterval(() => {\n      if (!isComplete) {\n        setMessageIndex((prev) => (prev + 1) % loadingMessages.length);\n      }\n    }, 2500);\n\n    return () => {\n      clearInterval(progressInterval);\n      clearInterval(messageInterval);\n    };\n  }, [isLoading, isComplete]);\n\n  return (\n    <div className=\"flex flex-col items-center justify-center bg-white text-black text-center px-4 z-50 min-h-screen\">\n      {/* Animated Text */}\n      <div className=\"h-20 flex items-center justify-center mb-6 overflow-hidden\">\n        <h3 key={messageIndex} className=\"text-xl font-medium text-black/80 animate-fadeIn\">\n          {isComplete ? \"Ready!\" : loadingMessages[messageIndex]}\n        </h3>\n      </div>\n\n      {/* Progress Bar Container */}\n      <div className=\"relative w-full max-w-md mx-auto mb-4\">\n        <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\n          <div\n            className=\"h-full bg-primary rounded-full transition-all duration-300 ease-out\"\n            style={{ width: `${progress}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Progress Percentage */}\n      <div className=\"flex justify-between items-center text-sm text-gray-500 font-mono mb-8 w-full max-w-md\">\n        <span>Loading</span>\n        <span>{progress}%</span>\n      </div>\n\n      {/* Success Message */}\n      {isComplete && (\n        <div className=\"mt-6 animate-fadeIn\">\n          <div className=\"text-xl font-medium text-primary flex items-center justify-center gap-2\">\n            <CheckCircle className=\"w-5 h-5\" />\n            <span>You've arrived! Welcome.</span>\n          </div>\n        </div>\n      )}\n\n      {/* CSS for animations */}\n      <style>{`\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.5s ease-in forwards;\n        }\n      `}</style>\n    </div>\n  )\n}","import axios, { AxiosInstance, AxiosError } from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { \n  setFbTokenError, \n  setGoogleAdsTokenError, \n  setGoogleAnalyticsTokenError \n} from '@/store/slices/TokenSllice';\nimport { store } from '@/store';\nimport { clearUser } from '@/store/slices/UserSlice';\nimport { resetBrand } from '@/store/slices/BrandSlice';\nimport { baseURL } from '@/data/constant';\n\nconst createAxiosInstance = (): AxiosInstance => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  \n  const axiosInstance: AxiosInstance = axios.create({\n    baseURL: import.meta.env.PROD\n      ? import.meta.env.VITE_API_URL as string\n      : import.meta.env.VITE_LOCAL_API_URL as string,\n    withCredentials: true,\n  });\n  \n  // Response interceptor\n  axiosInstance.interceptors.response.use(\n    (response) => {\n      // Reset token errors on successful responses based on URL\n      if (response.config?.url?.includes('/meta')) {\n        dispatch(setFbTokenError(false));\n      } else if (response.config?.url?.includes('/analytics')) {\n        dispatch(setGoogleAnalyticsTokenError(false));\n      } else if (response.config?.url?.includes('/google')) {\n        dispatch(setGoogleAdsTokenError(false));\n      }\n      \n      return response;\n    },\n    (error: AxiosError) => {\n      if (error.response?.status === 401) {\n        console.log('401 Unauthorized - Token expired or invalid');\n        \n        // Clear Redux state\n        store.dispatch(clearUser());\n        store.dispatch(resetBrand());\n        \n        // Call logout API\n        axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true })\n          .catch(() => {\n            // Ignore logout API errors\n          });\n        \n        // Navigate to login page\n        navigate('/login');\n      } else if (error.response?.status === 403) {\n        if (error.config?.url?.includes('/meta')) {\n          dispatch(setFbTokenError(true));\n        } else if (error.config?.url?.includes('/analytics')) {\n          dispatch(setGoogleAnalyticsTokenError(true));\n        } else if (error.config?.url?.includes('/google')) {\n          dispatch(setGoogleAdsTokenError(true));\n        } else {\n          console.warn('Token error occurred but type could not be determined:', error);\n        }\n      }\n      return Promise.reject(error);\n    }\n  );\n  \n  return axiosInstance;\n};\n\nexport const useAxiosInstance = () => {\n  return createAxiosInstance();\n};\n\nexport default createAxiosInstance;","import { useState, useEffect } from 'react';\nimport axios, { AxiosError } from 'axios';\nimport { Search, Check } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { FacebookLogo, GoogleLogo, Ga4Logo } from \"@/data/logo\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport { setBrands } from '@/store/slices/BrandSlice';\n\n\ninterface PlatformModalProps {\n  platform: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  brandId: string;\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\n}\n\ninterface GoogleAdsAccount {\n  name: string;\n  clientId: string;\n  managerId?: string;\n  hidden?: boolean;\n}\n\n\ninterface GoogleAnalyticsAccount {\n  propertyName: string;\n  propertyId: string;\n}\n\ninterface FacebookAdsAccount {\n  adname: string;\n  id: string;\n}\n\nexport default function PlatformModal({\n  platform,\n  open,\n  onOpenChange,\n  brandId,\n  onSuccess\n}: PlatformModalProps) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\n  const [showLoginButton, setShowLoginButton] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [connectedAccounts, setConnectedAccounts] = useState<string[]>([]);\n  const [selectedAccounts, setSelectedAccounts] = useState<string[]>([]);\n\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\n  const user = useSelector((state: RootState) => state.user.user);\n  const userId = user?.id;\n  const dispatch = useDispatch();\n  const brands = useSelector((state: RootState) => state.brand.brands);\n\n  // Check URL parameters for modal opening\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const modalToOpen = params.get('openModal');\n    \n    if (modalToOpen && onOpenChange) {\n      switch (modalToOpen.toLowerCase()) {\n        case 'googleads':\n          if (platform.toLowerCase() === 'google ads') {\n            onOpenChange(true);\n          }\n          break;\n        case 'googleanalytics':\n          if (platform.toLowerCase() === 'google analytics') {\n            onOpenChange(true);\n          }\n          break;\n        case 'facebook':\n          if (platform.toLowerCase() === 'facebook') {\n            onOpenChange(true);\n          }\n          break;\n      }\n      \n      // Remove the modal parameter from URL\n      params.delete('openModal');\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\n      window.history.replaceState({}, '', newUrl);\n    }\n  }, [platform, onOpenChange]);\n\n  useEffect(() => {\n    const fetchConnectedAccounts = async () => {\n      try {\n        const response = await axios.get(`${baseURL}/api/brands/${brandId}`, {\n          withCredentials: true,\n        });\n        const brand = response.data;\n\n        const connectedIds: string[] = [];\n        if (brand.fbAdAccounts?.length) connectedIds.push(...brand.fbAdAccounts);\n        if (brand.googleAdAccount) connectedIds.push(brand.googleAdAccount);\n        if (brand.ga4Account?.PropertyID) connectedIds.push(brand.ga4Account.PropertyID);\n\n        setConnectedAccounts(connectedIds);\n      } catch (error) {\n        console.error('Error fetching connected accounts:', error);\n      }\n    };\n\n    if (open && brandId) {\n      fetchConnectedAccounts();\n    }\n  }, [brandId, open]);\n\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      if (!open) return;\n\n      setLoading(true);\n      try {\n        let endpoint = '';\n        let accountsSetter: any = null;\n\n        switch (platform.toLowerCase()) {\n          case 'google ads':\n            endpoint = '/api/setup/google-accounts';\n            accountsSetter = setGoogleAdsAccounts;\n            break;\n          case 'google analytics':\n            endpoint = '/api/setup/ga4-propertyIds';\n            accountsSetter = setGoogleAnalyticsAccounts;\n            break;\n          case 'facebook':\n            endpoint = '/api/setup/fb-ad-accounts';\n            accountsSetter = setFacebookAdsAccounts;\n            break;\n        }\n        console.log(`Calling API: ${baseURL}${endpoint} with userId: ${userId}`);\n\n        if (!endpoint) {\n          throw new Error('Invalid platform');\n        }\n        const response = await axios.post(\n          `${baseURL}${endpoint}`,{},\n          { withCredentials: true }\n        );\n\n        if (response.status === 200) {\n          setShowLoginButton(false);\n          if (platform.toLowerCase() === 'google ads') {\n            accountsSetter(response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden));\n          } else if (platform.toLowerCase() === 'google analytics') {\n            accountsSetter(response.data.propertiesList || []);\n          } else if (platform.toLowerCase() === 'facebook') {\n            accountsSetter(response.data.adAccounts || []);\n          }\n        }\n      } catch (error) {\n        handleError(error as AxiosError, setShowLoginButton);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAccounts();\n  }, [platform, userId, open]);\n\n  const handleError = (error: unknown, setShowLoginButton: (value: boolean) => void) => {\n    const axiosError = error as AxiosError;\n\n    if (axiosError.response) {\n      const { status, data } = axiosError.response;\n      const code = axiosError.code;\n      if (status === 400) {\n        setShowLoginButton(true);\n      } else if (status === 403) {\n        setShowLoginButton(true);\n      } else if (status === 401 || code === 'TOKEN_EXPIRED') {\n        alert('Your Google session has expired. Please log in again.');\n        setShowLoginButton(true);\n      } else {\n        console.error('Unhandled Error Status:', status);\n        console.error('Error Message:', data);\n      }\n    } else if (axiosError.request) {\n      console.error('No response received:', axiosError.request);\n    } else {\n      console.error('Unexpected Error:', axiosError.message);\n    }\n  };\n\n  const updateBrandWithAccount = async (accountIds: string[], accountNames: string[], managerIds: (string | undefined)[]) => {\n    try {\n      let updateData = {};\n      \n      switch (platform.toLowerCase()) {\n        case 'facebook':\n          // Get current brand to append to existing accounts\n          const currentBrand = brands.find(brand => brand._id === brandId);\n          const existingFbAccounts = currentBrand?.fbAdAccounts || [];\n          const newFbAccounts = [...new Set([...existingFbAccounts, ...accountIds])];\n          updateData = { fbAdAccounts: newFbAccounts };\n          break;\n        case 'google ads':\n          // Get current brand to append to existing accounts\n          const currentBrandForGoogle = brands.find(brand => brand._id === brandId);\n          const existingGoogleAccounts = currentBrandForGoogle?.googleAdAccount || [];\n          const newGoogleAccounts = accountIds.map((accountId, index) => ({\n            clientId: accountId,\n            managerId: managerIds[index] || ''\n          }));\n          // Merge existing and new accounts, avoiding duplicates\n          const mergedGoogleAccounts = [...existingGoogleAccounts];\n          newGoogleAccounts.forEach(newAccount => {\n            const exists = mergedGoogleAccounts.some(existing => \n              existing.clientId === newAccount.clientId && existing.managerId === newAccount.managerId\n            );\n            if (!exists) {\n              mergedGoogleAccounts.push({\n                clientId: newAccount.clientId,\n                managerId: newAccount.managerId || ''\n              });\n            }\n          });\n          updateData = { googleAdAccount: mergedGoogleAccounts };\n          break;\n        case 'google analytics':\n          // For GA4, we typically only have one account, but we can support multiple\n          const currentBrandForGA = brands.find(brand => brand._id === brandId);\n          const existingGAAccount = currentBrandForGA?.ga4Account?.PropertyID;\n          if (!existingGAAccount) {\n            updateData = { ga4Account: { PropertyID: accountIds[0] } };\n          } else {\n            // If GA4 account already exists, we might want to replace it or handle differently\n            updateData = { ga4Account: { PropertyID: accountIds[0] } };\n          }\n          break;\n      }\n  \n      const response = await axios.patch(\n        `${baseURL}/api/brands/update/${brandId}`,\n        updateData,\n        { withCredentials: true }\n      );\n  \n      if (response.status === 200) {\n        \n        const updatedBrand = response.data;\n        \n        \n        const updatedBrands = brands.map(brand => \n          brand._id === brandId ? updatedBrand : brand\n        );\n        \n        dispatch(setBrands(updatedBrands));\n        \n        // Call onSuccess for each account\n        accountIds.forEach((accountId, index) => {\n          onSuccess?.(platform, accountNames[index], accountId);\n        });\n        \n        // Don't automatically close modal - let handleConnectSelected handle it\n        // setSelectedAccounts([]);\n        // onOpenChange(false);\n      }\n    } catch (error) {\n      console.error('Error updating brand:', error);\n    }\n  };\n\n  // const handleConnect = async (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\n  //   let accountId: string;\n\n  //   if ('clientId' in account) {\n  //     accountId = account.clientId;\n  //   } else if ('propertyId' in account) {\n  //     accountId = account.propertyId;\n  //   } else if ('id' in account) {\n  //     accountId = account.id;\n  //   } else {\n  //     return;\n  //   }\n\n  //   // Instead of immediately connecting, add to selected accounts\n  //   setSelectedAccounts(prev => {\n  //     if (prev.includes(accountId)) {\n  //       return prev.filter(id => id !== accountId);\n  //     } else {\n  //       return [...prev, accountId];\n  //     }\n  //   });\n  // };\n\n  const handleAccountSelection = (accountId: string) => {\n    setSelectedAccounts(prev => {\n      if (prev.includes(accountId)) {\n        return prev.filter(id => id !== accountId);\n      } else {\n        return [...prev, accountId];\n      }\n    });\n  };\n\n  const handleConnectSelected = async () => {\n    if (selectedAccounts.length === 0) return;\n\n    const selectedAccountData = selectedAccounts.map(accountId => {\n      const account = filteredAccounts()?.find(acc => {\n        if (platform.toLowerCase() === 'google ads') {\n          return (acc as GoogleAdsAccount).clientId === accountId;\n        } else if (platform.toLowerCase() === 'facebook') {\n          return (acc as FacebookAdsAccount).id === accountId;\n        } else {\n          return (acc as GoogleAnalyticsAccount).propertyId === accountId;\n        }\n      });\n\n      if (!account) return null;\n\n      let displayName: string;\n      let managerId: string | undefined;\n\n      if ('clientId' in account) {\n        managerId = account.managerId;\n        displayName = managerId\n          ? `${account.name} (${account.clientId}/${managerId})`\n          : `${account.name} (${account.clientId})`;\n      } else if ('propertyId' in account) {\n        displayName = `${account.propertyName} (${account.propertyId})`;\n      } else if ('id' in account) {\n        displayName = `${account.adname}`;\n      } else {\n        return null;\n      }\n\n      return { accountId, displayName, managerId };\n    }).filter(Boolean);\n\n    if (selectedAccountData.length > 0) {\n      const accountIds = selectedAccountData.map(data => data!.accountId);\n      const accountNames = selectedAccountData.map(data => data!.displayName);\n      const managerIds = selectedAccountData.map(data => data!.managerId);\n\n      await updateBrandWithAccount(accountIds, accountNames, managerIds);\n      \n      // Show success message\n      console.log(`Successfully connected ${selectedAccountData.length} account(s)`);\n      \n      // Reset selected accounts and close modal\n      setSelectedAccounts([]);\n      onOpenChange(false);\n    }\n  };\n\n  const handleGoogleAdLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/google?context=googleAdSetup&source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      const { authUrl } = response.data;\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Error getting Google Auth URL:', error);\n    }\n  };\n\n  const handleGoogleAnalyticsLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/google?context=googleAnalyticsSetup&source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      const { authUrl } = response.data;\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Error getting Google Auth URL:', error);\n    }\n  };\n\n  const handleFbLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      if (response.data.success) {\n        window.location.href = response.data.authURL;\n      }\n    } catch (error) {\n      console.error('Error getting Facebook Auth URL:', error);\n    }\n  };\n\n  const filteredAccounts = () => {\n    if (platform.toLowerCase() === 'google ads') {\n      if (!googleAdsAccounts || googleAdsAccounts.length === 0) {\n        return null;\n      }\n      return googleAdsAccounts.filter((account) => {\n        const searchLower = searchTerm.toLowerCase();\n        return (\n          account.name.toLowerCase().includes(searchLower) ||\n          account.clientId.toLowerCase().includes(searchLower) ||\n          (account.managerId && account.managerId.toLowerCase().includes(searchLower))\n        );\n      });\n    } else if (platform.toLowerCase() === 'google analytics') {\n      if (!googleAnalyticsAccounts || googleAnalyticsAccounts.length === 0) {\n        return null;\n      }\n      return googleAnalyticsAccounts.filter((account) => {\n        const searchLower = searchTerm.toLowerCase();\n        return (\n          account.propertyName.toLowerCase().includes(searchLower) ||\n          account.propertyId.toLowerCase().includes(searchLower)\n        );\n      });\n    } else if (platform.toLowerCase() === 'facebook') {\n      if (!facebookAdsAccounts || facebookAdsAccounts.length === 0) {\n        return null; // Return null if there are no Facebook Ads accounts\n      }\n      return facebookAdsAccounts.filter((account) => {\n        const searchLower = searchTerm.toLowerCase();\n        return (\n          account.adname.toLowerCase().includes(searchLower) ||\n          account.id.toLowerCase().includes(searchLower)\n        );\n      });\n    } else {\n      return [];\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle>Connect {platform} Account</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {loading ? (\n            <div className=\"flex justify-center py-4\">Loading...</div>\n          ) : showLoginButton ? (\n            <Button\n              size=\"sm\"\n              onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : platform.toLowerCase()=== 'google ads' ? handleGoogleAdLogin : handleGoogleAnalyticsLogin}\n              className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\n            >\n              {platform.toLowerCase() === 'google ads' && (\n                <>\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\n                  Connect to your Google Ads account\n                </>\n              )}\n              {platform.toLowerCase() === 'google analytics' && (\n                <>\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\n                  Connect to your GA4 account\n                </>\n              )}\n              {platform.toLowerCase() === 'facebook' && (\n                <>\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\n                  Connect to your Facebook account\n                </>\n              )}\n            </Button>\n          ) : (\n            <>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search accounts...\"\n                  className=\"pl-10\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n              </div>\n              \n              {/* Selected accounts section - sticky at top */}\n              {selectedAccounts.length > 0 && (\n                <div className=\"sticky top-0 z-10 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-blue-800\">\n                      {selectedAccounts.length} account(s) selected\n                    </span>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setSelectedAccounts([]);\n                          onOpenChange(false);\n                        }}\n                        className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\n                      >\n                        Cancel\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        onClick={handleConnectSelected}\n                        className=\"bg-blue-600 hover:bg-blue-700\"\n                      >\n                        Save ({selectedAccounts.length})\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Scrollable accounts list */}\n              <div className=\"max-h-[50vh] overflow-auto\">\n                {(() => {\n                  const filtered = filteredAccounts();  \n                  if (!filtered || filtered.length === 0) {\n                    return (\n                      <div className=\"text-center py-4 text-gray-500\">\n                        {searchTerm ? 'No accounts found matching your search.' : 'No accounts available.'}\n                      </div>\n                    );\n                  }\n                  \n                  return filtered.map((account, _) => {\n                    const isGoogleAds = platform.toLowerCase() === 'google ads';\n                    const isFacebook = platform.toLowerCase() === 'facebook';\n\n                    const accountId = isGoogleAds\n                      ? (account as GoogleAdsAccount).clientId\n                      : isFacebook\n                        ? (account as FacebookAdsAccount).id\n                        : (account as GoogleAnalyticsAccount).propertyId;\n\n                    const managerId = isGoogleAds\n                      ? (account as GoogleAdsAccount).managerId\n                      : undefined;\n\n                    const accountName = isGoogleAds\n                      ? (account as GoogleAdsAccount).name\n                      : isFacebook\n                        ? (account as FacebookAdsAccount).adname\n                        : (account as GoogleAnalyticsAccount).propertyName;\n\n                    // Create unique key to prevent duplicates\n                    const uniqueKey = isGoogleAds && managerId \n                      ? `${accountId}-${managerId}`\n                      : accountId;\n\n                    const platformLogo = isGoogleAds ? (\n                      <GoogleLogo height=\"1rem\" width=\"1rem\" />\n                    ) : isFacebook ? (\n                      <FacebookLogo height=\"1rem\" width=\"1rem\" />\n                    ) : (\n                      <Ga4Logo height=\"1rem\" width=\"1rem\" />\n                    );\n\n                    const isConnected = connectedAccounts.includes(accountId);\n                    const isSelected = selectedAccounts.includes(accountId);\n\n                    const displayText = isGoogleAds && managerId\n                      ? `${accountName} (${accountId}/${managerId})`\n                      : isFacebook\n                        ? `${accountName}`\n                        : `${accountName} (${accountId})`;\n\n                    return (\n                      <div\n                        key={uniqueKey}\n                        className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\n                      >\n                        <div className=\"flex items-center gap-3\">\n                     \n                          <span>\n                            <div className=\"flex flex-row items-center gap-3\">\n                              {platformLogo}\n                              {displayText}\n                            </div>\n                          </span>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleAccountSelection(accountId)}\n                          disabled={isConnected}\n                          className={isConnected ? \"bg-gray-400\" : isSelected ? \"bg-green-600\" : \"bg-blue-600\"}\n                        >\n                          {isConnected && <Check className=\"h-4 w-4 mr-2\" />}\n                          {isConnected ? 'Connected' : isSelected ? 'Selected' : 'Select'}\n                        </Button>\n                      </div>\n                    );\n                  });\n                })()}\n              </div>\n            </>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  ArrowDownIcon,\n  ArrowUpIcon,\n  RefreshCw,\n  PlusCircle\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport createAxiosInstance from \"../ConversionReportPage/components/axiosInstance\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport { useSelector } from \"react-redux\";\nimport type { RootState } from \"@/store\";\nimport { FacebookLogo, GoogleLogo, Ga4Logo } from \"@/data/logo\";\nimport { useNavigate } from \"react-router-dom\";\nimport PlatformModal from \"@/components/dashboard_component/PlatformModal\";\n\nexport type Trend = \"up\" | \"down\" | \"neutral\";\nexport type Period = \"yesterday\" | \"last7Days\" | \"last30Days\";\nexport type Source = \"meta\" | \"google\" | \"analytics\";\nexport type Platform = \"Facebook\" | \"Google Ads\" | \"Google Analytics\";\n\nexport interface MetricData {\n  current: number;\n  previous: number;\n  change: number;\n  trend: Trend;\n}\n\nexport interface MetricsData {\n  [metric: string]: MetricData;\n}\n\nexport interface PerformanceSummary {\n  success: boolean;\n  periodData: {\n    [key in Period]: MetricsData;\n  };\n}\n\n// Styling constants for visual consistency\nconst METRIC_COLORS = {\n  // Meta metrics\n  \"metaspend\": \"bg-blue-500\",\n  \"metaroas\": \"bg-purple-500\",\n  \n  // Analytics metrics\n  \"sessions\": \"bg-cyan-500\",\n  \"addToCarts\": \"bg-orange-500\",\n  \"checkouts\": \"bg-teal-500\",\n  \"purchases\": \"bg-red-500\",\n  \"addToCartRate\": \"bg-pink-500\",\n  \"checkoutRate\": \"bg-emerald-500\",\n  \"purchaseRate\": \"bg-rose-500\",\n  \n  // Google metrics\n  \"spend\": \"bg-green-500\",\n  \"roas\": \"bg-indigo-500\",\n};\n\nconst METRIC_BG_COLORS = {\n  // Meta metrics\n  \"metaspend\": \"bg-blue-50 border-blue-100\",\n  \"metaroas\": \"bg-purple-50 border-purple-100\",\n  \n  // Analytics metrics\n  \"sessions\": \"bg-cyan-50 border-cyan-100\",\n  \"addToCarts\": \"bg-orange-50 border-orange-100\",\n  \"checkouts\": \"bg-teal-50 border-teal-100\",\n  \"purchases\": \"bg-red-50 border-red-100\",\n  \"addToCartRate\": \"bg-pink-50 border-pink-100\",\n  \"checkoutRate\": \"bg-emerald-50 border-emerald-100\",\n  \"purchaseRate\": \"bg-rose-50 border-rose-100\",\n  \n  // Google metrics\n  \"spend\": \"bg-green-50 border-green-100\",\n  \"roas\": \"bg-indigo-50 border-indigo-100\",\n};\n\nconst formatValue = (value: number, isRoas = false) => {\n  if (isRoas) return value.toFixed(2);\n  return value >= 1000 ? Math.round(value).toLocaleString() : value;\n};\n\ninterface MetricCardProps {\n  metric: keyof typeof METRIC_COLORS;\n  label: string;\n  value: number;\n  change: number;\n  trend: Trend;\n  source: Source;\n  prevValue: number;\n}\n\nfunction MetricCard({ \n  metric, \n  label,\n  value, \n  change, \n  trend,\n  prevValue,\n  source\n}: MetricCardProps) {\n  \n  return (\n    <div className={cn(\"p-3 rounded-md border shadow-sm flex flex-col\", METRIC_BG_COLORS[metric])}>\n      <div className=\"flex flex-row items-center justify-between\">\n        <div className=\"flex items-center mb-1\">\n          <div className={cn(\"h-2 w-2 rounded-full mr-1.5\", METRIC_COLORS[metric])}></div>\n          <span className=\"text-xs font-medium text-slate-700\">{label}</span>\n        </div>\n        {(() => {\n          switch (source) {\n            case \"analytics\":\n              return <Ga4Logo width={\"1rem\"} height={\"1rem\"} />;\n            case \"meta\":\n              return <FacebookLogo width={\"1rem\"} height={\"1rem\"} />;\n            default:\n              return <GoogleLogo width={\"1rem\"} height={\"1rem\"} />;\n          }\n        })()}\n      </div>\n      <div className=\"text-lg font-bold text-slate-800\">\n         {formatValue(Number(value))}\n      </div>\n      <div className=\"flex items-center mt-1 justify-between\">\n        <span className=\"text-xs text-slate-500\">vs {formatValue(Number(prevValue), false)}</span>\n        <div\n          className={cn(\n            \"flex items-center text-xs font-medium\",\n            trend === \"up\" ? \"text-green-600\" : \"text-red-600\"\n          )}\n        >\n          {trend === \"up\" ? <ArrowUpIcon className=\"h-3 w-3 mr-0.5\" /> : <ArrowDownIcon className=\"h-3 w-3 mr-0.5\" />}\n          {Math.abs(Number(change))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Component to display a card for connecting platforms\nexport function ConnectPlatformCard({ \n  platform, \n  onClick \n}: { \n  platform: Platform; \n  onClick: () => void;\n}) {\n  const getPlatformLogo = () => {\n    switch (platform) {\n      case \"Facebook\":\n        return <FacebookLogo width={\"2rem\"} height={\"2rem\"} />;\n      case \"Google Ads\":\n        return <GoogleLogo width={\"2rem\"} height={\"2rem\"} />;\n      case \"Google Analytics\":\n        return <Ga4Logo width={\"2rem\"} height={\"2rem\"} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center p-6 border rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer\" onClick={onClick}>\n      <div className=\"mb-3\">\n        {getPlatformLogo()}\n      </div>\n      <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">Connect {platform}</h3>\n      <p className=\"text-sm text-slate-500 text-center mb-4\">\n        Get better insights by connecting your {platform} account\n      </p>\n      <Button variant=\"outline\" className=\"gap-2\">\n        <PlusCircle className=\"h-4 w-4\" />\n        Connect\n      </Button>\n    </div>\n  );\n}\n\nfunction PerformanceCard({ \n  period,\n  performanceData,\n  apiStatus\n}: { \n  period: Period;\n  performanceData: {\n    meta?: PerformanceSummary['periodData'];\n    google?: PerformanceSummary['periodData'];\n    analytics?: PerformanceSummary['periodData'];\n  };\n  apiStatus: {\n    meta: boolean;\n    google: boolean;\n    analytics: boolean;\n  };\n}) {\n  // Combine metrics from all sources for the specified period\n  const combineMetrics = () => {\n    const allMetrics: { [source: string]: MetricsData } = {};\n    \n    if (performanceData.meta?.[period] && apiStatus.meta) {\n      allMetrics.meta = performanceData.meta[period];\n    }\n    if (performanceData.google?.[period] && apiStatus.google) {\n      allMetrics.google = performanceData.google[period];\n    }\n    if (performanceData.analytics?.[period] && apiStatus.analytics) {\n      allMetrics.analytics = performanceData.analytics[period];\n    }\n    \n    return allMetrics;\n  };\n\n  const combinedMetrics = combineMetrics();\n\n  const periodLabels = {\n    \"yesterday\": \"Yesterday\",\n    \"last7Days\": \"Last 7 Days\",\n    \"last30Days\": \"Last 30 Days\"\n  };\n\n  // Create cards for each data source, showing \"No Data Found\" for failed ones\n  const renderSourceCards = () => {\n    const cards = [];\n\n    // Check if we need to display \"No Data Found\" for Meta\n    if (!apiStatus.meta) {\n      cards.push(\n        <div key=\"meta-no-data\" className=\"col-span-1 p-3 rounded-md border shadow-sm flex flex-col justify-center items-center bg-gray-50 h-24\">\n          <FacebookLogo width={\"1.5rem\"} height={\"1.5rem\"}/>\n          <span className=\"text-sm text-slate-500\">No data found</span>\n        </div>\n      );\n    }\n\n    // Check if we need to display \"No Data Found\" for Google\n    if (!apiStatus.google) {\n      cards.push(\n        <div key=\"google-no-data\" className=\"col-span-1 p-3 rounded-md border shadow-sm flex flex-col justify-center items-center bg-gray-50 h-24\">\n          <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\n          <span className=\"text-sm text-slate-500\">No data found</span>\n        </div>\n      );\n    }\n\n    // Check if we need to display \"No Data Found\" for Analytics\n    if (!apiStatus.analytics) {\n      cards.push(\n        <div key=\"analytics-no-data\" className=\"col-span-1 p-3 rounded-md border shadow-sm flex flex-col justify-center items-center bg-gray-50 h-24\">\n          <Ga4Logo width={\"1.5rem\"} height={\"1.5rem\"}  />\n          <span className=\"text-sm text-slate-500\">No data found</span>\n        </div>\n      );\n    }\n\n    // Add actual metric cards for successful API calls\n    Object.entries(combinedMetrics).forEach(([source, sourceMetrics]) => \n      Object.entries(sourceMetrics).forEach(([key, metricData]) => {\n        cards.push(\n          <MetricCard\n            key={`${source}-${key}`}\n            metric={key as keyof typeof METRIC_COLORS}\n            label={\n              key === 'metaspend' ? 'Meta Spend' : \n              key === 'metaroas' ? 'Meta ROAS' : \n              key === 'spend' ? 'Google Spend' :\n              key === 'roas' ? 'Google ROAS' :\n              key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())\n            }\n            value={metricData.current}\n            change={metricData.change}\n            trend={metricData.trend}\n            prevValue={metricData.previous}\n            source={source as Source}\n          />\n        );\n      })\n    );\n\n    return cards;\n  };\n\n  return (\n    <div className=\"bg-white border rounded-lg shadow-md p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-xl font-bold text-slate-800\">\n          {periodLabels[period]} Performance Overview\n        </h2>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n        {renderSourceCards()}\n      </div>\n    </div>\n  );\n}\n\n// Main dashboard component\nconst SummaryDashboard: React.FC = () => {\n  const user = useSelector((state: RootState) => state.user.user);\n  const brandId = useSelector((state: RootState) => state.brand.selectedBrandId);\n\n  const userName = user?.username;\n  const [loading, setLoading] = useState(false);\n  const [performanceData, setPerformanceData] = useState<{\n    meta?: PerformanceSummary['periodData'];\n    google?: PerformanceSummary['periodData'];\n    analytics?: PerformanceSummary['periodData'];\n  }>({});\n\n  const navigate = useNavigate();\n  \n  // Track API call success/failure status\n  const [apiStatus, setApiStatus] = useState({\n    meta: true,\n    google: true,\n    analytics: true\n  });\n\n  // State for platform modal\n  const [platformModalOpen, setPlatformModalOpen] = useState(false);\n  const [selectedPlatform, setSelectedPlatform] = useState<Platform | null>(null);\n\n  // Check URL parameters for modal opening\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const modalToOpen = params.get('openModal');\n    \n    if (modalToOpen && brandId) {\n      let platformToOpen: Platform | null = null;\n      \n      switch (modalToOpen.toLowerCase()) {\n        case 'googleads':\n          platformToOpen = 'Google Ads';\n          break;\n        case 'googleanalytics':\n          platformToOpen = 'Google Analytics';\n          break;\n        case 'facebook':\n          platformToOpen = 'Facebook';\n          break;\n      }\n      \n      if (platformToOpen) {\n        setSelectedPlatform(platformToOpen);\n        setPlatformModalOpen(true);\n        \n        // Remove the modal parameter from URL\n        params.delete('openModal');\n        const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\n        window.history.replaceState({}, '', newUrl);\n      }\n    }\n  }, [brandId]);\n\n  const axiosInstance = createAxiosInstance();\n\n  const fetchPerformanceData = useCallback(async () => {\n    if (!brandId) {\n      console.log('No brand ID available, skipping API calls');\n      return;\n    }\n    \n    setLoading(true);\n    setPerformanceData({});\n    setApiStatus({\n      meta: true,\n      google: true,\n      analytics: true\n    });\n\n    try {\n      const metaPromise = axiosInstance.post(\n        `api/summary/facebook-ads/${brandId}`,\n        { withCredentials: true }\n      ).catch(error => {\n        console.error('Error fetching Meta data:', error);\n        setApiStatus(prev => ({ ...prev, meta: false }));\n        return { data: { success: false } };\n      });\n\n      const googlePromise = axiosInstance.post(\n        `api/summary/google-ads/${brandId}`,\n        { withCredentials: true }\n      ).catch(error => {\n        console.error('Error fetching Google data:', error);\n        setApiStatus(prev => ({ ...prev, google: false }));\n        return { data: { success: false } };\n      });\n\n      const analyticsPromise = axiosInstance.post(\n        `api/summary/analytics/${brandId}`,\n        { withCredentials: true }\n      ).catch(error => {\n        console.error('Error fetching Analytics data:', error);\n        setApiStatus(prev => ({ ...prev, analytics: false }));\n        return { data: { success: false } };\n      });\n      \n      const [metaResponse, googleResponse, analyticsResponse] = await Promise.all([\n        metaPromise,\n        googlePromise,\n        analyticsPromise\n      ]);\n\n      setPerformanceData({\n        meta: metaResponse.data.success ? metaResponse.data.periodData : undefined,\n        google: googleResponse.data.success ? googleResponse.data.periodData : undefined,\n        analytics: analyticsResponse.data.success ? analyticsResponse.data.periodData : undefined\n      });\n      \n      // Update API status based on response success property\n      setApiStatus({\n        meta: metaResponse.data.success,\n        google: googleResponse.data.success,\n        analytics: analyticsResponse.data.success\n      });\n    } catch (error) {\n      console.error('Error in fetchPerformanceData:', error);\n      // If we had an overall error, mark all APIs as failed\n      setApiStatus({\n        meta: false,\n        google: false,\n        analytics: false\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId]);\n\n  const handleConnectPlatform = (platform: Platform) => {\n    setSelectedPlatform(platform);\n    setPlatformModalOpen(true);\n  };\n\n  const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\n    console.log(`Successfully connected ${platform} - ${accountName} (${accountId})`);\n    // Refresh data to show the newly connected platform\n    fetchPerformanceData();\n  };\n\n  useEffect(() => {\n    fetchPerformanceData();\n  }, [fetchPerformanceData]);\n\n  useEffect(() => {\n    if(!user?.brands || user.brands.length === 0){\n      navigate(\"/brand-setup\");\n    }\n  }, [user, navigate]);\n\n  if (loading) {\n    return <Loader isLoading={loading} />;\n  }\n\n  // Check if any platform is not connected\n  const allConnected = apiStatus.meta && apiStatus.google && apiStatus.analytics;\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 text-slate-900\">\n      <div className=\"mx-auto p-6 max-w-7xl\">\n        <div className=\"mb-6 animate-fade-up\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"h-12 w-1 bg-blue-500 rounded-full\" />\n              <div>\n                <h1 className=\"text-2xl lg:text-3xl font-bold tracking-tight\">Welcome Back, {userName}</h1>\n                <p className=\"text-slate-500 mt-1\">Here's your performance overview</p>\n              </div>\n            </div>\n            <div className=\"flex flex-row items-center gap-3\">\n              {/* <HeaderTutorialButton /> */}\n              <Button\n                onClick={fetchPerformanceData}\n                disabled={loading}\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"hover:bg-slate-100\"\n              >\n                <RefreshCw className={cn(\"h-4 w-4 \", loading && \"animate-spin\")} />\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Missing Platforms Section */}\n        {!allConnected && (\n          <div className=\"mb-8 animate-fade-up\">\n            <div className=\"bg-white border rounded-lg shadow-md p-6 space-y-6\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-xl font-bold text-slate-800\">\n                  Connect Your Platforms\n                </h2>\n              </div>\n              <p className=\"text-slate-600\">\n                Connect your advertising and analytics platforms to see all your performance data in one place.\n              </p>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {!apiStatus.meta && (\n                  <ConnectPlatformCard \n                    platform=\"Facebook\" \n                    onClick={() => handleConnectPlatform(\"Facebook\")} \n                  />\n                )}\n                {!apiStatus.google && (\n                  <ConnectPlatformCard \n                    platform=\"Google Ads\" \n                    onClick={() => handleConnectPlatform(\"Google Ads\")} \n                  />\n                )}\n                {!apiStatus.analytics && (\n                  <ConnectPlatformCard \n                    platform=\"Google Analytics\" \n                    onClick={() => handleConnectPlatform(\"Google Analytics\")} \n                  />\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Performance Cards for All Periods */}\n        <div className=\"space-y-6\">\n          {(['yesterday', 'last7Days', 'last30Days'] as Period[]).map(period => (\n            <PerformanceCard \n              key={period}\n              period={period}\n              performanceData={performanceData}\n              apiStatus={apiStatus}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Platform Connection Modal */}\n      {selectedPlatform && brandId && (\n        <PlatformModal\n          platform={selectedPlatform}\n          open={platformModalOpen}\n          onOpenChange={setPlatformModalOpen}\n          brandId={brandId}\n          onSuccess={handlePlatformModalSuccess}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SummaryDashboard;","\nimport { ConnectPlatformCard } from '../../GeneralisedDashboard/dashboard';\nimport { useState } from 'react';\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\nimport { useParams } from 'react-router-dom';\nimport Header from '@/components/dashboard_component/Header';\nimport { LineChart } from 'lucide-react';\n\nexport default function ConnectAccountsPage() {\n  const [isPlatformModalOpen, setIsPlatformModalOpen] = useState(false);\n  const [selectedPlatform, setSelectedPlatform] = useState<'Facebook' | 'Google Ads' | null>(null);\n  const { brandId } = useParams();\n\n  const handleConnectPlatform = (platform: 'Facebook' | 'Google Ads') => {\n    setSelectedPlatform(platform);\n    setIsPlatformModalOpen(true);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Header\n        title=\"AdMetrics Dashboard\"\n        Icon={LineChart}\n        showDatePicker={false}\n        showSettings={false}\n        showRefresh={false}\n        isLoading={false}\n      />\n\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            Connect Your Advertising Accounts\n          </h1>\n          <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n            Connect your Facebook and Google Ads accounts to start tracking your advertising performance metrics in one place.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12\">\n          <div className=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:border-blue-500 transition-colors\">\n            <ConnectPlatformCard \n              platform=\"Facebook\" \n              onClick={() => handleConnectPlatform(\"Facebook\")} \n            />\n            <div className=\"mt-4 text-sm text-gray-600\">\n              <h3 className=\"font-semibold mb-2\">Facebook Ads Benefits:</h3>\n              <ul className=\"list-disc list-inside space-y-1\">\n                <li>Track ad spend and performance</li>\n                <li>Monitor ROAS and conversions</li>\n                <li>Analyze audience insights</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:border-blue-500 transition-colors\">\n            <ConnectPlatformCard \n              platform=\"Google Ads\" \n              onClick={() => handleConnectPlatform(\"Google Ads\")} \n            />\n            <div className=\"mt-4 text-sm text-gray-600\">\n              <h3 className=\"font-semibold mb-2\">Google Ads Benefits:</h3>\n              <ul className=\"list-disc list-inside space-y-1\">\n                <li>Track campaign performance</li>\n                <li>Monitor conversion rates</li>\n                <li>Analyze keyword performance</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"text-center\">\n          <div className=\"inline-flex items-center space-x-2 text-gray-500 mb-8\">\n            <div className=\"h-px w-16 bg-gray-300\"></div>\n            <span>or</span>\n            <div className=\"h-px w-16 bg-gray-300\"></div>\n          </div>\n          <p className=\"text-gray-600\">\n            Need help? Contact our support team for assistance with connecting your accounts.\n          </p>\n        </div>\n      </div>\n\n      <PlatformModal\n        open={isPlatformModalOpen}\n        onOpenChange={setIsPlatformModalOpen}\n        platform={selectedPlatform || 'Facebook'}\n        brandId={brandId || ''}\n      />\n    </div>\n  );\n} ","import { useState, useEffect, useCallback, useMemo } from 'react'\nimport { format } from \"date-fns\"\nimport { Blend, LineChart } from \"lucide-react\"\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from \"axios\"\nimport AdAccountMetricsCard from \"./AdAccountsMetricsCard.tsx\"\nimport { AdAccountData, GoogleAdAccountData } from '@/pages/Dashboard/interfaces.ts'\nimport Header from '@/components/dashboard_component/Header.tsx';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store/index.ts';\nimport Loader from '@/components/dashboard_component/loader.tsx';\nimport createAxiosInstance from '../ConversionReportPage/components/axiosInstance.ts';\nimport { GoogleLogo } from '@/data/logo.tsx';\nimport { ConnectPlatformCard } from '../GeneralisedDashboard/dashboard.tsx';\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\nimport ConnectAccountsPage from './Components/ConnectAccountsPage.tsx';\n\nexport default function Dashboard() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [fbAdAccountsMetrics, setFbAdAccountsMetrics] = useState<AdAccountData[]>([]);\n  const [googleAdMetrics, setGoogleAdMetrics] = useState<GoogleAdAccountData>();\n  const [isPlatformModalOpen, setIsPlatformModalOpen] = useState(false);\n  const [selectedPlatform, setSelectedPlatform] = useState<'Facebook' | 'Google Ads' | null>(null);\n  \n  const locale = useSelector((state:RootState) => state.locale.locale)\n  const { brandId } = useParams();\n  const navigate = useNavigate();\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const brands = useSelector((state: RootState) => state.brand.brands);\n  const user = useSelector((state: RootState) => state.user.user);\n  \n  const [rawMetrics, setRawMetrics] = useState({\n    totalSpent: 0,\n    totalRevenue: 0,\n    totalROAS: 0,\n    totalPurchases: 0,\n    totalCTR: 0,\n    totalCPC: 0,\n    totalCPM: 0,\n    totalCPP: 0,\n  });\n \n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const axiosInstance = createAxiosInstance();\n\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\n  const hasGoogleAdAccount = Boolean(selectedBrand?.googleAdAccount?.length);\n  const hasFbAdAccount = Boolean(selectedBrand?.fbAdAccounts?.length);\n  const hasAnyAdAccounts = hasGoogleAdAccount || hasFbAdAccount;\n  const userId = user?.id;\n\n  const fetchFacebookData = async (startDate: string, endDate: string) => {\n    try {\n      const fbAdResponse = await axiosInstance.post(\n        `/api/metrics/fbAd/${brandId}`,\n        { startDate, endDate, userId },\n        { withCredentials: true }\n      );\n      return fbAdResponse.data.data;\n    } catch (fbError) {\n      console.error('Error fetching Facebook ad data:', fbError);\n      return [];\n    }\n  };\n\n  const fetchGoogleData = async (startDate: string, endDate: string) => {\n    try {\n      const googleAdResponse = await axiosInstance.post(\n        `/api/metrics/googleAdAndCampaign/${brandId}`,\n        { startDate, endDate },\n        { withCredentials: true }\n      );\n      return googleAdResponse.data?.data || [];\n    } catch (googleError) {\n      console.error('Error fetching Google ad data:', googleError);\n      return [];\n    }\n  };\n\n  const fetchAdData = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n      const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n      const [fbData, googleData] = await Promise.all([\n        fetchFacebookData(startDate, endDate),\n        fetchGoogleData(startDate, endDate)\n      ]);\n\n      setFbAdAccountsMetrics(fbData);\n      setGoogleAdMetrics(googleData);\n      calculateAggregatedMetrics(fbData, googleData);\n\n    } catch (error) {\n      console.error('Error fetching ad data:', error);\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\n        alert('Your session has expired. Please log in again.');\n        navigate('/');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, date, brandId, userId]);\n\n  useEffect(() => {\n    fetchAdData();\n  }, [fetchAdData]);\n\n  useEffect(() => {\n    fetchAdData();\n    const intervalId = setInterval(fetchAdData, 3 * 60 * 60 * 1000); // 3 hours\n    return () => clearInterval(intervalId);\n}, [fetchAdData]);\n\n  const calculateFacebookMetrics = (fbData: AdAccountData[]) => {\n    let totalSpent = 0;\n    let totalRevenue = 0;\n    let totalPurchases = 0;\n    let totalClicks = 0;\n    let totalImpressions = 0;\n\n    if (fbData?.length) {\n      fbData.forEach(account => {\n        totalSpent += parseFloat(String(account.spend || '0'));\n        totalRevenue += parseFloat(String(account.Revenue?.value || '0'));\n        totalPurchases += parseFloat(String(account.purchases?.value || '0'));\n        totalClicks += parseFloat(String(account.clicks || '0'));\n        totalImpressions += parseFloat(String(account.impressions || '0'));\n      });\n    }\n\n    return { totalSpent, totalRevenue, totalPurchases, totalClicks, totalImpressions };\n  };\n\n  const calculateGoogleMetrics = (googleData: GoogleAdAccountData | undefined) => {\n    let totalSpent = 0;\n    let totalRevenue = 0;\n    let totalPurchases = 0;\n    let totalClicks = 0;\n    let totalImpressions = 0;\n\n    if (googleData?.adMetrics) {\n      totalSpent += parseFloat(googleData.adMetrics.totalSpend || '0');\n      totalRevenue += parseFloat(googleData.adMetrics.totalConversionsValue || '0');\n      totalPurchases += parseFloat(googleData.adMetrics.totalConversions || '0');\n      totalClicks += parseFloat(googleData.adMetrics.totalClicks || '0');\n      totalImpressions += parseFloat(googleData.adMetrics.totalImpressions || '0');\n    }\n\n    return { totalSpent, totalRevenue, totalPurchases, totalClicks, totalImpressions };\n  };\n\n  const calculateAggregatedMetrics = useCallback((fbData: AdAccountData[], googleData: GoogleAdAccountData | undefined) => {\n    const fbMetrics = calculateFacebookMetrics(fbData);\n    const googleMetrics = calculateGoogleMetrics(googleData);\n\n    const totalSpent = fbMetrics.totalSpent + googleMetrics.totalSpent;\n    const totalRevenue = fbMetrics.totalRevenue + googleMetrics.totalRevenue;\n    const totalPurchases = fbMetrics.totalPurchases + googleMetrics.totalPurchases;\n    const totalClicks = fbMetrics.totalClicks + googleMetrics.totalClicks;\n    const totalImpressions = fbMetrics.totalImpressions + googleMetrics.totalImpressions;\n\n    setRawMetrics({\n      totalSpent,\n      totalRevenue,\n      totalROAS: totalRevenue / totalSpent || 0,\n      totalPurchases,\n      totalCTR: (totalClicks / totalImpressions) * 100 || 0,\n      totalCPC: totalSpent / totalClicks || 0,\n      totalCPM: (totalSpent * 1000) / totalImpressions || 0,\n      totalCPP: totalPurchases > 0 ? (totalSpent / totalPurchases) : 0,\n    });\n  }, []);\n\n  const formattedMetrics = useMemo(() => {\n    return {\n      totalSpent: `₹ ${rawMetrics.totalSpent.toLocaleString(locale)}`,\n      totalRevenue: `₹ ${rawMetrics.totalRevenue.toLocaleString(locale)}`,\n      totalROAS: Number((rawMetrics.totalROAS).toFixed(2)).toLocaleString(locale),\n      totalPurchases: rawMetrics.totalPurchases.toLocaleString(locale),\n      totalCTR: `${Number((rawMetrics.totalCTR).toFixed(2)).toLocaleString(locale)} %`,\n      totalCPC: Number((rawMetrics.totalCPC).toFixed(2)).toLocaleString(locale),\n      totalCPM: Number((rawMetrics.totalCPM).toFixed(2)).toLocaleString(locale),\n      totalCPP: Number((rawMetrics.totalCPP).toFixed(2)).toLocaleString(locale),\n    };\n  }, [rawMetrics, locale]);\n\n  const metrics = [\n    {\n      label: 'Amount Spent',\n      value: formattedMetrics.totalSpent,\n      tooltipContent: 'The sum of ad spends for all advertising platforms',\n    },\n    {\n      label: 'Revenue',\n      value: formattedMetrics.totalRevenue,\n      tooltipContent: 'Revenue from Ads Purchases',\n    },\n    {\n      label: 'ROAS (Ads only)',\n      value: formattedMetrics.totalROAS,\n      tooltipContent: 'Blended ROAS = Ads Purchases value / Blended Ad Spend',\n    },\n    {\n      label: 'Ads Purchases',\n      value: formattedMetrics.totalPurchases,\n      tooltipContent: 'Ads Purchases = Fb Ads Purchase + Google Conversions',\n    },\n    {\n      label: 'CPC',\n      value: formattedMetrics.totalCPC,\n      tooltipContent:\n        'Average CPC from all advertising platforms = (Blended Ad Spend / Blended Clicks)',\n    },\n    {\n      label: 'CPM',\n      value: formattedMetrics.totalCPM,\n      tooltipContent:\n        'Average CPM from all advertising platforms = (Blended Ad Spend * 1000 / Blended Impressions)',\n    },\n    {\n      label: 'CTR',\n      value: formattedMetrics.totalCTR,\n      tooltipContent:\n        'Average CTR from all advertising platforms = (Blended Clicks / Blended Impressions)*100',\n    },\n    {\n      label: 'CPP',\n      value: formattedMetrics.totalCPP,\n      tooltipContent:\n        'Average CPP from all advertising platforms = (Blended Ad Spend / Blended Purchases)',\n    },\n  ];\n\n  const googleMetrics = [\n    {\n      label: 'Total Cost',\n      value: googleAdMetrics\n        ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalSpend || '0').toLocaleString(locale)}`\n        : '₹ 0',\n    },\n    {\n      label: 'Conversion Value',\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalConversionsValue).toLocaleString(locale)}` : ' 0',\n    },\n    {\n      label: 'ROAS',\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.roas).toLocaleString(locale) : '0.00',\n    },\n    {\n      label: 'Conversions',\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.totalConversions).toLocaleString(locale) : '0',\n    },\n    {\n      label: 'CPC',\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCPC).toLocaleString(locale)}` : ' 0',\n    },\n    {\n      label: 'CPM',\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCPM).toLocaleString(locale)}` : ' 0',\n    },\n    {\n      label: 'CTR',\n      value: googleAdMetrics ? `${parseFloat(googleAdMetrics?.adMetrics?.totalCTR).toLocaleString(locale)} %` : ' 0',\n    },\n    {\n      label: 'Cost Per Conversion',\n      value: googleAdMetrics ? `₹ ${parseFloat(googleAdMetrics?.adMetrics?.totalCostPerConversion).toLocaleString(locale)}` : ' 0',\n    },\n  ]\n\n  const handleConnectPlatform = (platform: 'Facebook' | 'Google Ads') => {\n    setSelectedPlatform(platform);\n    setIsPlatformModalOpen(true);\n  };\n\n  const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\n    console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n    // Refresh the page or refetch data to show the newly connected account\n    window.location.reload();\n  };\n\n  // If no accounts are connected, show the connect accounts page\n  if (!hasAnyAdAccounts) {\n    return <ConnectAccountsPage />;\n  }\n\n  if(isLoading){\n    return <Loader isLoading={isLoading} />\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Header\n        title=\"AdMetrics Dashboard\"\n        Icon={LineChart}\n        showDatePicker={true}\n        showSettings={true}\n        showRefresh={true}\n        isLoading={false}\n        handleManualRefresh={() => {\n          fetchAdData();\n        }}\n      />\n\n      {!hasAnyAdAccounts && (\n        <div className=\"p-4 md:p-6 lg:px-8 space-y-6\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-2\">Connect Your Ad Accounts</h2>\n            <p className=\"text-gray-600\">Connect your advertising accounts to start tracking your metrics</p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto\">\n            <ConnectPlatformCard \n              platform=\"Facebook\" \n              onClick={() => handleConnectPlatform(\"Facebook\")} \n            />\n            <ConnectPlatformCard \n              platform=\"Google Ads\" \n              onClick={() => handleConnectPlatform(\"Google Ads\")} \n            />\n          </div>\n\n          <div className=\"text-center mt-8\">\n            <div className=\"inline-flex items-center space-x-2 text-gray-500\">\n              <div className=\"h-px w-16 bg-gray-300\"></div>\n              <span>or</span>\n              <div className=\"h-px w-16 bg-gray-300\"></div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <PlatformModal\n        open={isPlatformModalOpen}\n        onOpenChange={setIsPlatformModalOpen}\n        platform={selectedPlatform || 'Facebook'}\n        brandId={brandId || ''}\n        onSuccess={handlePlatformModalSuccess}\n      />\n\n      {/* Main content */}\n      <main className=\"p-4 md:p-6 lg:px-8\">\n        {!hasAnyAdAccounts ? <></> : (\n          <div className=\"space-y-2\">\n            {/* Blended summary */}\n            <section id='all'>\n              <h2 className=\"text-xl font-semibold flex flex-row items-center justify-between\">\n                <div className='flex flex-row items-center space-x-2'>\n                  <Blend className=\"h-5 w-5\" />\n                  <span>Blended summary</span>\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n                  </svg>\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" >\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\n                  </svg>\n                </div>\n              </h2>\n              <AdAccountMetricsCard\n                metrics={metrics}\n                date={{\n                  from: date.from ? new Date(date.from) : undefined,\n                  to: date.to ? new Date(date.to) : undefined\n                }}\n                isLoading={isLoading}\n              />\n            </section>\n          </div>\n        )}\n\n        {fbAdAccountsMetrics?.length > 0 && fbAdAccountsMetrics.map((accountMetrics, index) => {\n          const fbmetrics = [\n            { label: 'Amount Spent', value: `₹ ${parseFloat(String(accountMetrics.spend || '0')).toLocaleString(locale)}` },\n            {\n              label: 'Revenue',\n              value: `₹ ${parseFloat(String(accountMetrics.Revenue?.value || '0')).toLocaleString(locale)}`\n            },\n            {\n              label: 'ROAS (Ads only)',\n              value: accountMetrics.purchase_roas && accountMetrics.purchase_roas.length > 0\n                ? parseFloat(String(accountMetrics.purchase_roas[0].value)).toLocaleString(locale, {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2\n                  })\n                : '0'\n            },\n            { label: 'Ads Purchases', value: accountMetrics.purchases?.value || '0' },\n            { label: 'CPC (All clicks)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpc || '0'))}` },\n            { label: 'CPM', value: `₹ ${new Intl.NumberFormat(locale, { minimumFractionDigits: 2 }).format(parseFloat(accountMetrics.cpm || '0'))}` },\n            { label: 'CTR', value: `${parseFloat(accountMetrics.ctr || '0').toFixed(2)} %` },\n            { label: 'Cost per Purchase (All)', value: `₹ ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpp || '0'))}` },\n          ];\n\n          return (\n            <div key={index} id=\"facebook\">\n              <AdAccountMetricsCard\n                icon=\"Facebook\"\n                title={`Facebook - ${accountMetrics.account_name}`}\n                metrics={fbmetrics}\n                date={{\n                  from: date.from ? new Date(date.from) : undefined,\n                  to: date.to ? new Date(date.to) : undefined\n                }}\n                isLoading={isLoading}\n                errorMessage={accountMetrics.message}\n              />\n            </div>\n          );\n        })}\n\n        {!hasFbAdAccount && (\n          <div className=\"space-y-2\">\n            <section className='mt-10' id=\"facebook\">\n              <div className='flex flex-row gap-2 items-center'>\n                <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\n                  <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n                </svg>\n                <h3 className=\"text-lg font-semibold\">Facebook Ad Metrics</h3>\n              </div>\n\n              <div className=\"text-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\n                <p className=\"mb-4\">No Facebook Ad Account connected for this brand.</p>\n                <button\n                  onClick={() => handleConnectPlatform('Facebook')}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n                >\n                  Connect Facebook Ads\n                </button>\n              </div>\n            </section>\n          </div>\n        )}\n\n        {hasFbAdAccount && !hasGoogleAdAccount && (\n          <div className=\"space-y-2\">\n            <section className='mt-10' id=\"google\">\n              <div className='flex flex-row gap-2 items-center'>\n                <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\n                <h3 className=\"text-lg font-semibold\">Google Ad Metrics</h3>\n              </div>\n\n              <div className=\"flex flex-col items-center justify-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\n                <p className=\"mb-4\">No Google Ad Account connected for this brand.</p>\n                <button\n                  onClick={() => handleConnectPlatform('Google Ads')}\n                  className=\"flex flex-row items-center justify-center gap-3 px-4 py-2 border-2 border-green-800 text-blackk rounded-md transition-colors\"\n                >\n                  <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\n                  Connect Google Ads\n                </button>\n              </div>\n            </section>\n          </div>\n        )}\n\n        {googleAdMetrics && Object.keys(googleAdMetrics).length > 0 && (\n          <div key=\"google\" id=\"google\">\n            <AdAccountMetricsCard\n              icon=\"Google\"\n              title={`Google Ads - ${googleAdMetrics?.adAccountName}`}\n              metrics={googleMetrics}\n              date={{\n                from: date.from ? new Date(date.from) : undefined,\n                to: date.to ? new Date(date.to) : undefined\n              }}\n              isLoading={isLoading}\n            />\n          </div>\n        )}\n\n        {!hasGoogleAdAccount && !hasFbAdAccount && (\n          <div className=\"space-y-2\">\n            <section className='mt-10' id=\"google\">\n              <div className='flex flex-row gap-2 items-center'>\n                <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\n                <h3 className=\"text-lg font-semibold\">Google Ad Metrics</h3>\n              </div>\n\n              <div className=\"text-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\n                <p className=\"mb-4\">No Google Ad Account connected for this brand.</p>\n                <button\n                  onClick={() => handleConnectPlatform('Google Ads')}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n                >\n                  Connect Google Ads\n                </button>\n              </div>\n            </section>\n          </div>\n        )}\n      </main>\n    </div>\n  )\n}\n\n\n\n\n\n\n\n\n","import type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { Loader2, Mail, User, Building, Briefcase, MessageSquare, Send, X, AlertCircle } from \"lucide-react\"\nimport { Card, CardContent } from \"../ui/card\"\nimport { Skeleton } from \"../ui/skeleton\"\n\nconst baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\n function TicketFormSkeleton() {\n  return (\n    <Card className=\"p-6 space-y-4\">\n      <CardContent className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-32\" />\n          <Skeleton className=\"h-10 w-full\" />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-32\" />\n          <Skeleton className=\"h-10 w-full\" />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-32\" />\n          <Skeleton className=\"h-10 w-full\" />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-32\" />\n          <Skeleton className=\"h-24 w-full\" />\n        </div>\n        \n        <div className=\"flex justify-end space-x-2\">\n          <Skeleton className=\"h-10 w-24\" />\n          <Skeleton className=\"h-10 w-24\" />\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface TicketFormProps {\n  onClose: () => void\n}\n\nfunction TicketForm({ onClose }: TicketFormProps) {\n  const [form, setForm] = useState({\n    subject: \"\",\n    description: \"\",\n    departmentId: \"\",\n    brand: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n  })\n\n  const [departments, setDepartments] = useState<Array<{ id: string; name: string }>>([])\n  const [loading, setLoading] = useState(false)\n  const [submitting, setSubmitting] = useState(false)\n  const [errors, setErrors] = useState<Record<string, string>>({})\n\n  useEffect(() => {\n    const fetchDepartments = async () => {\n      setLoading(true)\n      try {\n        const response = await axios.get(`${baseURL}/api/zoho/departments`,{withCredentials: true})\n        if (response.data && response.data.departments) {\n          setDepartments(response.data.departments)\n        }\n      } catch (error) {\n        console.error(\"Error fetching departments:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchDepartments()\n  }, [])\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target\n    setForm((prev) => ({ ...prev, [name]: value }))\n\n    // Clear error when field is updated\n    if (errors[name]) {\n      setErrors((prev) => {\n        const newErrors = { ...prev }\n        delete newErrors[name]\n        return newErrors\n      })\n    }\n  }\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {}\n\n    if (!form.subject.trim()) newErrors.subject = \"Subject is required\"\n    if (!form.brand.trim()) newErrors.brand = \"Brand name is required\"\n    if (!form.departmentId) newErrors.departmentId = \"Please select a department\"\n    if (!form.description.trim()) newErrors.description = \"Description is required\"\n    if (!form.firstName.trim()) newErrors.firstName = \"First Name is required\"\n    if (!form.email.trim()) {\n      newErrors.email = \"Email is required\"\n    } else if (!/\\S+@\\S+\\.\\S+/.test(form.email)) {\n      newErrors.email = \"Please enter a valid email address\"\n    }\n\n    setErrors(newErrors)\n    return Object.keys(newErrors).length === 0\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!validateForm()) {\n      return\n    }\n\n    setSubmitting(true)\n\n    try {\n      const response = await axios.post(`${baseURL}/api/zoho/create-ticket`, form,{withCredentials: true})\n\n      if (response.data.success) {\n        onClose()\n      }\n    } catch (error) {\n      console.error(\"Error submitting ticket:\", error)\n      setErrors({\n        form: \"There was an error submitting your tickets. Please try again.\",\n      })\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <TicketFormSkeleton />\n    )\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n      <div className=\"bg-slate-800 px-6 py-4 flex justify-between items-center\">\n        <h2 className=\"text-xl font-semibold text-white flex items-center\">\n          <MessageSquare className=\"mr-2 h-5 w-5\" />\n          Submit a Support Ticket\n        </h2>\n        <button onClick={onClose} className=\"text-slate-300 hover:text-white transition-colors\">\n          <X className=\"h-6 w-6\" />\n        </button>\n      </div>\n\n      {errors.form && (\n        <div className=\"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start\">\n          <AlertCircle className=\"h-5 w-5 text-red-500 mr-2 flex-shrink-0 mt-0.5\" />\n          <span className=\"text-red-700 text-sm\">{errors.form}</span>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n          {/* Left column - Essential information */}\n          <div className=\"space-y-5\">\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"subject\">\n                Subject <span className=\"text-red-500\">*</span>\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <MessageSquare className=\"h-5 w-5 text-slate-400\" />\n                </div>\n                <input\n                  id=\"subject\"\n                  name=\"subject\"\n                  type=\"text\"\n                  value={form.subject}\n                  onChange={handleChange}\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.subject ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\n                  placeholder=\"Brief description of your issue\"\n                />\n              </div>\n              {errors.subject && <p className=\"mt-1 text-sm text-red-600\">{errors.subject}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"brand\">\n                Brand Name <span className=\"text-red-500\">*</span>\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Building className=\"h-5 w-5 text-slate-400\" />\n                </div>\n                <input\n                  id=\"brand\"\n                  name=\"brand\"\n                  type=\"text\"\n                  value={form.brand}\n                  onChange={handleChange}\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.brand ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\n                  placeholder=\"Your brand name\"\n                />\n              </div>\n              {errors.brand && <p className=\"mt-1 text-sm text-red-600\">{errors.brand}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"departmentId\">\n                Department <span className=\"text-red-500\">*</span>\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Briefcase className=\"h-5 w-5 text-slate-400\" />\n                </div>\n                <select\n                  id=\"departmentId\"\n                  name=\"departmentId\"\n                  value={form.departmentId}\n                  onChange={handleChange}\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.departmentId ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 appearance-none bg-no-repeat bg-right`}\n                  style={{\n                    backgroundImage:\n                      \"url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' strokeLinecap='round' strokeLinejoin='round' strokeWidth='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\\\")\",\n                    backgroundPosition: \"right 0.5rem center\",\n                    backgroundSize: \"1.5em 1.5em\",\n                  }}\n                >\n                  <option value=\"\">Select an issue type</option>\n                  {departments.map((dept) => (\n                    <option key={dept.id} value={dept?.id}>\n                      {dept.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              {errors.departmentId && <p className=\"mt-1 text-sm text-red-600\">{errors.departmentId}</p>}\n            </div>\n          </div>\n\n          {/* Right column - Contact information */}\n          <div className=\"space-y-5\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"firstName\">\n                  First Name <span className=\"text-red-500\">*</span>\n                </label>\n                <div className=\"relative\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <User className=\"h-5 w-5 text-slate-400\" />\n                  </div>\n                  <input\n                    id=\"firstName\"\n                    name=\"firstName\"\n                    type=\"text\"\n                    value={form.firstName}\n                    onChange={handleChange}\n                    className=\"pl-10 block w-full px-3 py-2.5 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500\"\n                    placeholder=\"First name\"\n                  />\n               \n                </div>\n                {errors.firstName && <p className=\"mt-1 text-sm text-red-600\">{errors.firstName}</p>}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"lastName\">\n                  Last Name\n                </label>\n                <input\n                  id=\"lastName\"\n                  name=\"lastName\"\n                  type=\"text\"\n                  value={form.lastName}\n                  onChange={handleChange}\n                  className=\"block w-full px-3 py-2.5 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500\"\n                  placeholder=\"Last name\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"email\">\n                Email Address <span className=\"text-red-500\">*</span>\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Mail className=\"h-5 w-5 text-slate-400\" />\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  value={form.email}\n                  onChange={handleChange}\n                  className={`pl-10 block w-full px-3 py-2.5 border ${errors.email ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\n                  placeholder=\"your.email@example.com\"\n                />\n              </div>\n              {errors.email && <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>}\n              <div className=\"h-full flex items-end\">\n              <div className=\"text-xs text-slate-500 italic\">We'll use this email to contact you about your ticket</div>\n            </div>\n            </div>\n\n            \n          </div>\n        </div>\n\n        {/* Description - Full width */}\n        <div>\n          <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"description\">\n            Description <span className=\"text-red-500\">*</span>\n          </label>\n          <textarea\n            id=\"description\"\n            name=\"description\"\n            value={form.description}\n            onChange={handleChange}\n            rows={5}\n            className={`block w-full px-3 py-2.5 border ${errors.description ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\n            placeholder=\"Please provide detailed information about your issue to help us assist you better\"\n          />\n          {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n        </div>\n\n        {/* Action buttons */}\n        <div className=\"flex gap-4 pt-2\">\n          <button\n            type=\"submit\"\n            disabled={submitting}\n            className={`flex-1 bg-slate-700 text-white py-2.5 px-4 rounded-md hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors ${\n              submitting ? \"opacity-70 cursor-not-allowed\" : \"\"\n            }`}\n          >\n            {submitting ? (\n              <span className=\"flex items-center justify-center gap-2\">\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n                Submitting...\n              </span>\n            ) : (\n              <span className=\"flex items-center justify-center gap-2\">\n                <Send className=\"w-4 h-4\" />\n                Submit Ticket\n              </span>\n            )}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"flex-1 bg-white text-slate-700 py-2.5 px-4 border border-slate-300 rounded-md hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default TicketForm\n\n","import { useState } from 'react';\nimport { FaHeadset } from \"react-icons/fa\";\nimport TicketForm from './TicketForm'; \n\nconst HelpDeskModal = () => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  return (\n    <>\n      <button\n        onClick={() => setIsModalOpen(true)}\n        className=\"fixed bottom-8 right-8 z-30 flex items-center gap-2 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200 group\"\n      >\n        <FaHeadset className=\"w-5 h-5 group-hover:animate-pulse\" />\n      </button>\n      \n      {isModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n  \n              <TicketForm onClose={() => setIsModalOpen(false)} />\n\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default HelpDeskModal;","import Logo from \"@/assets/messold-icon.png\";\nimport { Link } from \"react-router-dom\"\n\n\nfunction Footer() {\n    return (\n      <footer className=\"w-full border-t bg-slate-900 text-white\">\n        <div className=\"container px-6 py-8 flex justify-center items-center\">\n          <div className=\"flex flex-col items-center space-y-3\">\n            {/* Logo & Brand Name */}\n            <div className=\"flex items-center gap-2 font-semibold text-2xl tracking-tight\">\n            <img src={Logo} alt=\"Messold Logo\" className=\"h-8 w-8\" />\n              <span className=\"text-slate-100\">Parallels</span>\n            </div>\n  \n            {/* Tagline */}\n            <p className=\"text-sm text-slate-400 text-center max-w-sm\">\n              The all-in-one marketing platform for growing businesses.\n            </p>\n  \n            {/* Navigation Links */}\n            <nav className=\"flex space-x-4 text-sm font-medium\">\n              <Link\n                to=\"/privacy-policy\"\n                className=\"text-slate-400 transition hover:text-blue-400\"\n              >\n                Privacy Policy\n              </Link>\n              <span className=\"text-slate-500\">|</span>\n              <Link\n                to=\"/terms-and-conditions\"\n                className=\"text-slate-400 transition hover:text-blue-400\"\n              >\n                Terms of Service\n              </Link>\n            </nav>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n  \n\nexport default Footer","import React from \"react\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar.tsx\";\nimport Dashboard from \"./dashboard.tsx\";\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal.tsx\";\nimport Footer from \"../LandingPage/components/Footer.tsx\";\n\nconst AnalyticsDashboard: React.FC = () => {\n  return (\n    <div className=\"flex h-screen\"> \n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        <Dashboard />\n        <Footer />\n     <HelpDeskModal />\n      </div>\n    </div>\n  );\n};\n\nexport default AnalyticsDashboard;\n","import { useState } from 'react'\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport axios from 'axios'\n\n\nexport default function ShopifyModalContent() {\n  const [storeName, setStoreName] = useState('')\n  const baseURL = import.meta.env.PROD? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\n\n  const handleShopifyLogin = async () => {\n    try {\n      const response = await axios.post(`${baseURL}/api/auth/shopify`, { shop: storeName }, { withCredentials: true });\n      if (response.data.success) {\n        const { authUrl } = response.data;\n        console.log('Generated Shopify Auth URL:', authUrl); // Log the URL to check if it's correct\n        window.location.href = authUrl;\n      } else {\n        console.error('Failed to get Shopify Auth URL');\n      }\n    } catch (error) {\n      console.error('Error getting Shopify Auth URL:', error);\n    }\n  };\n  \n\n  return (\n    <div className=\"mt-4 space-y-4\">\n      <Input\n        type=\"text\"\n        placeholder=\"Enter your Shopify store name\"\n        value={storeName}\n        onChange={(e) => setStoreName(e.target.value)}\n      />\n      <Button className=\"w-full\" onClick={handleShopifyLogin} disabled={!storeName}>\n        Login to Shopify\n      </Button>\n    </div>\n  )\n}\n\n","import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { Search, Check, X } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Ga4Logo, FacebookLogo, GoogleLogo } from '@/data/logo'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/store'\n\ninterface OtherPlatformModalContentProps {\n  platform: string;\n  onConnect: (\n    platform: string,\n    account: string,\n    accountId: string,\n    managerId?: string,\n  ) => void;\n  onRemove?: (platform: string, accountId: string, managerId?: string) => void;\n  connectedId: string;\n  onOpenChange?: (open: boolean) => void;\n}\n\ninterface GoogleAdsAccount {\n  name: string;\n  clientId: string;\n  managerId?: string;\n  hidden?: boolean;\n}\n\ninterface GoogleAnalyticsAccount {\n  propertyName: string\n  propertyId: string\n}\n\ninterface FacebookAdsAccount {\n  adname: string\n  id: string\n}\n\nexport default function OtherPlatformModalContent({\n  platform,\n  onConnect,\n  connectedId,\n  onRemove,\n  onOpenChange\n}: OtherPlatformModalContentProps) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\n  const [showLoginButton, setShowLoginButton] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\n\n  const user = useSelector((state: RootState) => state.user.user);\n\n  // Check URL parameters for modal opening\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const modalToOpen = params.get('openModal');\n    \n    if (modalToOpen && onOpenChange) {\n      switch (modalToOpen.toLowerCase()) {\n        case 'googleads':\n          if (platform.toLowerCase() === 'google ads') {\n            onOpenChange(true);\n          }\n          break;\n        case 'googleanalytics':\n          if (platform.toLowerCase() === 'google analytics') {\n            onOpenChange(true);\n          }\n          break;\n        case 'facebook':\n          if (platform.toLowerCase() === 'facebook') {\n            onOpenChange(true);\n          }\n          break;\n      }\n      \n      // Remove the modal parameter from URL\n      params.delete('openModal');\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\n      window.history.replaceState({}, '', newUrl);\n    }\n  }, [platform, onOpenChange]);\n\n  useEffect(() => {\n    const fetchGoogleAdsAccounts = async () => {\n      setLoading(true); // Start loading\n      try {\n        const userId = user?.id;\n        const response = await axios.post(\n          `${baseURL}/api/setup/google-accounts`,\n          { userId },\n          { withCredentials: true }\n        );\n\n        if (response.status === 200) {\n          setShowLoginButton(false);\n          setGoogleAdsAccounts(\n            response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden)\n          );\n        } else {\n          console.log('Unexpected status code:', response.status);\n        }\n      } catch (error) {\n        handleError(error);\n      } finally {\n        setLoading(false); // End loading\n      }\n    };\n\n    const fetchGoogleAnalyticsAccounts = async () => {\n      setLoading(true); // Start loading\n      try {\n        const userId = user?.id;\n        const response = await axios.post(\n          `${baseURL}/api/setup/ga4-propertyIds`,\n          { userId },\n          { withCredentials: true }\n        );\n\n        if (response.status === 200) {\n          setShowLoginButton(false);\n          setGoogleAnalyticsAccounts(response.data.propertiesList || []);\n        } else {\n          console.log('Unexpected status code:', response.status);\n        }\n      } catch (error) {\n        handleError(error);\n      } finally {\n        setLoading(false); // End loading\n      }\n    };\n\n    const fetchFacebookAdsAccounts = async () => {\n      setLoading(true); // Start loading\n      try {\n        const userId = user?.id;\n        const response = await axios.post(\n          `${baseURL}/api/setup/fb-ad-accounts`,\n          { userId },\n          { withCredentials: true }\n        );\n\n        setFacebookAdsAccounts(response.data.adAccounts || []);\n      } catch (error) {\n        handleError(error);\n      } finally {\n        setLoading(false); // End loading\n      }\n    };\n\n    if (platform.toLowerCase() === 'google ads') fetchGoogleAdsAccounts();\n    if (platform.toLowerCase() === 'google analytics') fetchGoogleAnalyticsAccounts();\n    if (platform.toLowerCase() === 'facebook') fetchFacebookAdsAccounts();\n  }, [platform, user]);\n\n  const handleError = (error: any) => {\n    // Axios error handling\n    if (axios.isAxiosError(error)) {\n      const axiosError = error;\n      const { response, request } = axiosError;\n\n      // If response received from server\n      if (response) {\n        const { status, data, config } = response;\n        const code = data?.error?.code || data?.code;\n\n        // Common authentication and authorization errors\n        const authErrors = [\n          401,  // Unauthorized\n          403,  // Forbidden\n          'UNAUTHENTICATED',\n          'TOKEN_EXPIRED',\n          'INVALID_CREDENTIALS'\n        ];\n\n        // Check if the error is related to authentication\n        const isAuthError = authErrors.some(\n          authCode => status === authCode || code === authCode\n        );\n\n        if (isAuthError) {\n          console.error('Authentication Error:', { status, code, message: data?.message });\n          setShowLoginButton(true);\n          return;\n        }\n\n        // Specific Google Ads API error handling\n        if (data?.errors && data.errors.length > 0) {\n          const googleAdsError = data.errors[0];\n          const googleAdsErrorMessage = googleAdsError.message || 'Google Ads API Error';\n\n          console.error('Google Ads API Error:', googleAdsErrorMessage);\n\n          // Common Google Ads authentication scenarios\n          const googleAuthErrors = [\n            'not associated with any Ads accounts',\n            'missing required authentication credential',\n            'OAuth access token invalid'\n          ];\n\n          const isGoogleAuthError = googleAdsErrorMessage &&\n            googleAuthErrors.some(errText =>\n              googleAdsErrorMessage.toLowerCase().includes(errText.toLowerCase())\n            );\n\n          if (isGoogleAuthError) {\n            setShowLoginButton(true);\n            return;\n          }\n        }\n\n        // General server error handling\n        console.error('Server Error:', {\n          status,\n          url: config?.url,\n          method: config?.method\n        });\n        setShowLoginButton(true);\n\n      }\n      // No response received\n      else if (request) {\n        console.error('No response received:', request);\n        setShowLoginButton(true);\n      }\n      // Network or other axios error\n      else {\n        console.error('Request Setup Error:', axiosError.message);\n        setShowLoginButton(true);\n      }\n    }\n    // Non-axios error handling\n    else {\n      console.error('Unexpected Error:', error);\n      setShowLoginButton(true);\n    }\n  };\n\n\n  const filteredAccounts = () => {\n    if (platform.toLowerCase() === 'google ads') {\n      if (!googleAdsAccounts || googleAdsAccounts.length === 0) {\n        return null;\n      }\n      return googleAdsAccounts.filter((account) =>\n        account.name.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    } else if (platform.toLowerCase() === 'google analytics') {\n      if (!googleAnalyticsAccounts || googleAnalyticsAccounts.length === 0) {\n        return null;\n      }\n      return googleAnalyticsAccounts.filter((account) =>\n        account.propertyName.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    } else if (platform.toLowerCase() === 'facebook') {\n      if (!facebookAdsAccounts || facebookAdsAccounts.length === 0) {\n        return null; // Return null if there are no Facebook Ads accounts\n      }\n      return facebookAdsAccounts.filter((account) =>\n        account.adname.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    } else {\n      return [];\n    }\n  };\n\n  const handleConnect = (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\n    let accountId: string;\n    let displayName: string;\n    let managerId: string | undefined;\n\n    if ('clientId' in account) {\n      accountId = account.clientId;\n      managerId = account.managerId;\n\n      // Include manager ID in the display name if available\n      displayName = managerId\n        ? `${account.name} (${accountId}/${managerId})`\n        : `${account.name} (${accountId})`;\n    } else if ('propertyId' in account) {\n      accountId = account.propertyId;\n      displayName = `${account.propertyName} (${accountId})`;\n    } else if ('id' in account) {\n      accountId = account.id;\n      displayName = `${account.adname}`;\n    } else { \n      accountId = '';\n      displayName = '';\n    }\n\n    onConnect(platform, displayName, accountId, managerId);\n  };\n\n  const handleGoogleAdLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/google?context=googleAdSetup&source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      const { authUrl } = response.data;\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Error getting Google Auth URL:', error);\n    }\n  };\n\n  const handleGoogleAnalyticsLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/google?context=googleAnalyticsSetup&source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      const { authUrl } = response.data;\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Error getting Google Auth URL:', error);\n    }\n  };\n\n  const handleFbLogin = async () => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \n        { withCredentials: true }\n      );\n      if (response.data.success) {\n        window.location.href = response.data.authURL;\n      } else {\n        console.error('Failed to get Facebook Auth URL');\n      }\n    } catch (error) {\n      console.error('Error getting Facebook Auth URL:', error);\n    }\n  }\n\n  return (\n    loading ? <div>Loading...</div> : (\n      <>\n        {showLoginButton ? (\n          <Button\n          size=\"sm\"\n          onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : platform.toLowerCase()=== 'google ads' ? handleGoogleAdLogin : handleGoogleAnalyticsLogin}\n          className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\n        >\n            {platform.toLowerCase() === 'google ads' && (\n              <>\n                <GoogleLogo height=\"1rem\" width=\"1rem\" />\n                Connect to your Google Ads account\n              </>\n            )}\n            {platform.toLowerCase() === 'google analytics' && (\n              <>\n                <Ga4Logo height=\"1rem\" width=\"1rem\" />\n                Connect to your GA4 account\n              </>\n            )}\n            {platform.toLowerCase() === 'facebook' && (\n              <>\n                <FacebookLogo height=\"1rem\" width=\"1rem\" />\n                Connect to your Facebook account\n              </>\n            )}\n          </Button>\n        ) : (\n          // Handle the case where the button is not shown\n          <>\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n              <Input\n                type=\"text\"\n                placeholder=\"Search accounts...\"\n                className=\"pl-10\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n            <div className=\"max-h-[50vh] overflow-auto\">\n              {filteredAccounts()?.map((account) => {\n                // Extract platform-specific details\n                const isGoogleAds = platform.toLowerCase() === 'google ads';\n                const isFacebook = platform.toLowerCase() === 'facebook';\n                // const isGoogleAnalytics = platform.toLowerCase() === 'google analytics';\n\n                const accountId = isGoogleAds\n                  ? (account as GoogleAdsAccount).clientId\n                  : isFacebook\n                    ? (account as FacebookAdsAccount).id\n                    : (account as GoogleAnalyticsAccount).propertyId;\n\n                const managerId = isGoogleAds\n                  ? (account as GoogleAdsAccount).managerId\n                  : undefined;\n\n                const accountName = isGoogleAds\n                  ? (account as GoogleAdsAccount).name\n                  : isFacebook\n                    ? (account as FacebookAdsAccount).adname\n                    : (account as GoogleAnalyticsAccount).propertyName;\n\n                const platformLogo = isGoogleAds ? (\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\n                ) : isFacebook ? (\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\n                ) : (\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\n                );\n\n                // Create display text based on account type\n                const displayText = isGoogleAds && managerId\n                  ? `${accountName} (${accountId}/${managerId})`\n                  : isFacebook\n                    ? `${accountName}`\n                    : `${accountName} (${accountId})`;\n\n                return (\n                  <div\n                    key={`${platform}-${accountId}-${managerId || \"\"}`}\n                    className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\n                  >\n                    <span>\n                      <div className=\"flex flex-row items-center gap-3\">\n                        {platformLogo}\n                        {displayText}\n                      </div>\n                    </span>\n                    <div className=\"flex items-center gap-2\">\n                      {connectedId && onRemove && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => onRemove(\n                            platform,\n                            accountId,\n                            platform.toLowerCase() === 'google ads' ? managerId : undefined\n                          )}\n                          className=\"flex items-center\"\n                        >\n                          <X className=\"h-4 w-4 mr-1\" /> Remove\n                        </Button>\n                      )}\n                      <Button\n                        size=\"sm\"\n                        onClick={() => handleConnect(account)}\n                        disabled={connectedId.includes(accountId)}\n                        className={connectedId.includes(accountId) ? \"bg-green-600\" : \"bg-blue-600\"}\n                      >\n                        {connectedId.includes(accountId) && <Check className=\"h-4 w-4 mr-2\" />}\n                        {connectedId.includes(accountId) ? 'Connected' : 'Connect'}\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </>\n        )}\n      </>\n    )\n  );\n}","import { useState, useEffect } from \"react\"\nimport { Check, ArrowRight, Building2, ChevronRight } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport ShopifyModalContent from \"./ShopifyModalContent\"\nimport OtherPlatformModalContent from \"./OtherPlatformModalContent\"\nimport { FacebookLogo, GoogleLogo, Ga4Logo, ShopifyLogo } from \"@/data/logo\"\nimport { baseURL } from \"@/data/constant\"\nimport axios from \"axios\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { RootState } from \"@/store\"\nimport { useNavigate } from \"react-router-dom\"\nimport { setUser } from \"@/store/slices/UserSlice\"\nimport { setBrandFormData, clearBrandFormData } from \"@/store/slices/BrandFormSlice\"\n\nconst platforms = [\n  {\n    name: \"Shopify\",\n    color: \"bg-emerald-50\",\n    icon: ShopifyLogo,\n    textColor: \"text-emerald-700\",\n    ringColor: \"ring-emerald-200\",\n    description: \"Connect your e-commerce store\",\n  },\n  {\n    name: \"Facebook\",\n    color: \"bg-blue-50\",\n    icon: FacebookLogo,\n    textColor: \"text-blue-700\",\n    ringColor: \"ring-blue-200\",\n    description: \"Link your ad accounts\",\n  },\n  {\n    name: \"Google Ads\",\n    color: \"bg-rose-50\",\n    icon: GoogleLogo,\n    textColor: \"text-rose-700\",\n    ringColor: \"ring-rose-200\",\n    description: \"Import campaign data\",\n  },\n  {\n    name: \"Google Analytics\",\n    color: \"bg-yellow-50\",\n    icon: Ga4Logo,\n    textColor: \"text-yellow-700\",\n    ringColor: \"ring-yellow-200\",\n    description: \"Track website metrics\",\n  },\n]\n\nexport default function BrandSetup() {\n  const [openModal, setOpenModal] = useState<string | null>(null)\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { toast } = useToast()\n  const user = useSelector((state: RootState) => state.user.user)\n  \n  const formData = useSelector((state: RootState) => state.brandForm)\n  const [brandName, setBrandName] = useState(formData.brandName || \"\")\n  const [connectedAccounts, setConnectedAccounts] = useState<Record<string, string[]>>(formData.connectedAccounts || {})\n  const [googleAdsConnections, setGoogleAdsConnections] = useState<{\n    clientId: string\n    managerId?: string\n  }[]>(formData.googleAdsConnections || [])\n  const [ga4Id, setGa4Id] = useState<string>(formData.ga4Id || \"\")\n  const [fbAdId, setFBAdId] = useState<string[]>(formData.fbAdId || [])\n  const [shop, setShop] = useState<string>(formData.shop || \"\")\n  const [shopifyAccessToken, setShopifyAccessToken] = useState(formData.shopifyAccessToken || \"\")\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search)\n    const accessToken = params.get(\"access_token\")\n    const shopName = params.get(\"shop_name\")\n\n    if (accessToken && shopName) {\n      setShopifyAccessToken(accessToken)\n      setShop(shopName)\n      setConnectedAccounts((prev) => ({\n        ...prev,\n        Shopify: [shopName],\n      }))\n    }\n  }, [])\n\n  \n  useEffect(() => {\n    dispatch(setBrandFormData({\n      brandName,\n      connectedAccounts,\n      googleAdsConnections,\n      ga4Id,\n      fbAdId,\n      shop,\n      shopifyAccessToken\n    }))\n  }, [brandName, connectedAccounts, googleAdsConnections, ga4Id, fbAdId, shop, shopifyAccessToken, dispatch])\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const modalToOpen = params.get('openModal');\n    \n    if (modalToOpen) {\n      switch (modalToOpen.toLowerCase()) {\n        case 'googleads':\n          setOpenModal('Google Ads');\n          break;\n        case 'googleanalytics':\n          setOpenModal('Google Analytics');\n          break;\n        case 'facebook':\n          setOpenModal('Facebook');\n          break;\n      }\n      \n      params.delete('openModal');\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\n      window.history.replaceState({}, '', newUrl);\n    }\n  }, []);\n\n  const handleConnect = (platform: string, account: string, accountId: string, managerId?: string) => {\n    setConnectedAccounts((prev) => ({\n      ...prev,\n      [platform]: [...(prev[platform] || []), account],\n    }))\n\n    if (platform.toLowerCase() === \"google ads\") {\n      setGoogleAdsConnections((prev) => [\n        ...prev,\n        {\n          clientId: accountId,\n          managerId: managerId,\n        },\n      ])\n    } else if (platform.toLowerCase() === \"google analytics\") {\n      setGa4Id(accountId)\n    } else if (platform.toLowerCase() === \"facebook\") {\n      setFBAdId((prev) => [...prev, accountId])\n    }\n\n    toast({ description: `Successfully connected ${account} to ${platform}`, variant: \"default\" })\n  }\n\n  const isConnected = (platform: string) => {\n    return (connectedAccounts[platform]?.length || 0) > 0\n  }\n\n  const getConnectedId = (platformName: string): string => {\n    switch (platformName.toLowerCase()) {\n      case \"google ads\":\n        return googleAdsConnections.map((conn) => conn.clientId).join(\",\")\n      case \"google analytics\":\n        return ga4Id\n      case \"facebook\":\n        return fbAdId.join(\",\")\n      default:\n        return \"\"\n    }\n  }\n\n  const canSubmit = () => {\n    return !!brandName && Object.keys(connectedAccounts).length > 0\n  }\n\n  const handleSubmit = async () => {\n    if (!brandName || Object.keys(connectedAccounts).length === 0) {\n      return toast({ description: 'Please complete all fields before submitting.', variant: \"destructive\" });\n    }\n\n    const payload = {\n      name: brandName,\n      googleAdAccount: googleAdsConnections.map(connection => ({\n        clientId: connection.clientId,\n        managerId: connection.managerId || ''\n      })),\n      ga4Account: { PropertyID: ga4Id || '' },\n      fbAdAccounts: fbAdId.map((accountId) => accountId),\n      shopifyAccount: { shopName: shop || '', shopifyAccessToken: shopifyAccessToken || '' }\n    };\n\n    try {\n      // First create the brand\n      const brandResponse = await axios.post(\n        `${baseURL}/api/brands/add`,\n        payload,\n        { withCredentials: true }\n      );\n\n      const newBrandId = brandResponse.data.brand._id;\n\n      // Then add the brand to user\n      if (user) {\n        await axios.post(\n          `${baseURL}/api/users/add-brand`,\n          {\n            userId: user?.id,\n            brandId: newBrandId\n          },\n          { withCredentials: true }\n        );\n      }\n      // Update local state\n      const updatedUser = user ? {\n        ...user,\n        brands: [...user.brands, newBrandId]\n      } : null;\n\n      if (updatedUser) {\n        dispatch(setUser(updatedUser));\n        // Clear form data from Redux after successful submission\n        dispatch(clearBrandFormData());\n        navigate('/dashboard');\n      }\n\n      toast({ description: 'Brand setup completed successfully!', variant: \"default\" });\n\n    } catch (error) {\n      console.error(error);\n      toast({ description: 'Error creating brand. Please try again.', variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Card className=\"mx-auto max-w-7xl shadow-lg\">\n      <CardContent className=\"p-6\">\n        <div className=\"mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"rounded-full bg-primary/10 p-2\">\n              <Building2 className=\"h-6 w-6 text-primary\" />\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">Brand Setup</h2>\n              <p className=\"text-gray-500\">Enter your brand details and connect your platforms</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Brand Name */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"brandName\" className=\"text-sm font-medium text-gray-700\">\n              Brand Name\n            </Label>\n            <Input\n              id=\"brandName\"\n              placeholder=\"Enter your brand name\"\n              value={brandName}\n              onChange={(e) => setBrandName(e.target.value)}\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Platform Connections */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-sm font-medium text-gray-700\">Connect Platforms</Label>\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n              {platforms.map((platform) => (\n                <Dialog\n                  key={platform.name}\n                  open={openModal === platform.name}\n                  onOpenChange={(isOpen) => setOpenModal(isOpen ? platform.name : null)}\n                >\n                  <DialogTrigger asChild>\n                    <button\n                      className={`relative group p-6 rounded-xl ${platform.color} ring-1 ${platform.ringColor} transition-all duration-200 hover:scale-[1.02] w-full text-left`}\n                    >\n                      <div className=\"flex items-start gap-4\">\n                        <platform.icon width=\"2rem\" height=\"2rem\" />\n                        <div className=\"flex-1\">\n                          <h3 className={`font-semibold ${platform.textColor}`}>{platform.name}</h3>\n                          <p className=\"text-sm text-gray-600 mt-1\">{platform.description}</p>\n                        </div>\n                        {isConnected(platform.name) ? (\n                          <Check className=\"h-5 w-5 text-green-500\" />\n                        ) : (\n                          <ChevronRight className=\"h-5 w-5 text-gray-400\" />\n                        )}\n                      </div>\n                    </button>\n                  </DialogTrigger>\n                  <DialogContent className=\"sm:max-w-[600px]\">\n                    <DialogHeader>\n                      <DialogTitle>Connect to {platform.name}</DialogTitle>\n                      <DialogDescription>\n                        {platform.name === \"Shopify\"\n                          ? \"Enter your Shopify store name and login to connect.\"\n                          : \"Select an account to connect with your brand.\"}\n                      </DialogDescription>\n                    </DialogHeader>\n                    {platform.name === \"Shopify\" ? (\n                      <ShopifyModalContent />\n                    ) : (\n                      <OtherPlatformModalContent\n                        platform={platform.name}\n                        onConnect={handleConnect}\n                        connectedId={getConnectedId(platform.name)}\n                      />\n                    )}\n                  </DialogContent>\n                </Dialog>\n              ))}\n            </div>\n          </div>\n\n          {/* Connected Accounts Summary */}\n          {Object.keys(connectedAccounts).length > 0 && (\n            <div className=\"rounded-lg bg-gray-50 p-4\">\n              <h3 className=\"font-medium text-gray-900 mb-3\">Connected Platforms</h3>\n              <div className=\"space-y-2\">\n                {Object.entries(connectedAccounts).map(([platform, accounts]) => (\n                  <div key={platform} className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">{platform}</span>\n                    <span className=\"font-medium\">{accounts.join(\", \")}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Submit Button */}\n          <Button className=\"w-full\" disabled={!canSubmit()} onClick={handleSubmit}>\n            Complete Setup\n            <ArrowRight className=\"ml-2 h-5 w-5\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n","import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","import { useSelector } from \"react-redux\"\nimport type { RootState } from \"@/store\"\nimport {  Sparkles , CircleCheckBig } from \"lucide-react\"\nimport { setupSteps } from \"@/data/constant\"\n\nimport CollapsibleSidebar from \"../../components/dashboard_component/CollapsibleSidebar\"\nimport BrandSetup from \"./components/BrandForm\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Separator } from \"@/components/ui/separator\"\n\nexport default function BrandSetupDashboard() {\n  const user = useSelector((state: RootState) => state.user.user)\n  const name = user?.username || \"user\"\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        <div className=\"container mx-auto p-4 max-w-7xl\">\n          <div className=\"mb-6 rounded-xl overflow-hidden shadow-lg relative\">\n            <div className=\"absolute inset-0\">\n              <img src=\"/abstract-layout.jpg\" alt=\"Background\" className=\"w-full h-full object-cover\" />\n              <div className=\"absolute inset-0 bg-black/60\"></div>\n            </div>\n            <div className=\"relative z-10 p-8 md:p-12\">\n              <div className=\"max-w-3xl\">\n                <div className=\"text-white\">\n                  <div className=\"flex items-center gap-2 mb-4\">\n                    <Sparkles className=\"h-5 w-5 text-yellow-300\" />\n                    <span className=\"font-medium\">Getting Started</span>\n                  </div>\n                  <h1 className=\"text-3xl md:text-4xl font-bold mb-3 tracking-tight\">Welcome to Parallels, {name}!</h1>\n                  <p className=\"text-white/90 text-lg max-w-2xl\">\n                    Set up your brand to start tracking analytics across your marketing platforms. Connect your accounts\n                    to get comprehensive insights all in one place.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n            <div className=\"lg:col-span-3\">\n              <BrandSetup />\n            </div>\n            <div className=\"lg:col-span-1 space-y-6\">\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg font-semibold\">Setup Steps</CardTitle>\n                  <CardDescription>Complete these steps to get started</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {setupSteps.map((step, index) => (\n                    <div key={step.id} className=\"group\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"rounded-full bg-gray-100 p-1.5 flex-shrink-0 text-gray-600 group-hover:bg-primary/10 group-hover:text-primary transition-colors\">\n                          <step.icon className=\"h-4 w-4\" />\n                        </div>\n                        <div className=\"space-y-1\">\n                          <h3 className=\"font-medium text-sm\">{step.title}</h3>\n                          <p className=\"text-xs text-gray-500\">{step.description}</p>\n                        </div>\n                      </div>\n                      {index < setupSteps.length - 1 && (\n                        <div className=\"ml-3 pl-3 border-l border-gray-200 h-4 my-1\"></div>\n                      )}\n                    </div>\n                  ))}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-lg font-semibold text-blue-800\">Pro Tips</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-3 text-sm\">\n                    <li className=\"flex items-start gap-2\">\n                      <div className=\"rounded-full bg-blue-100 p-1 text-blue-600 flex-shrink-0\">\n                      <CircleCheckBig width={14} height={14}/>\n                      </div>\n                      <span className=\"text-blue-700\">\n                        Connect multiple platforms for comprehensive analytics across all your marketing channels.\n                      </span>\n                    </li>\n                    <Separator className=\"my-2 bg-blue-100\" />\n                    <li className=\"flex items-start gap-2\">\n                      <div className=\"rounded-full bg-blue-100 p-1 text-blue-600 flex-shrink-0\">\n                      <CircleCheckBig width={14} height={14}/>\n                      </div>\n                      <span className=\"text-blue-700\">\n                        Your data will be automatically synced and updated every 3 hours.\n                      </span>\n                    </li>\n                  </ul>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\nimport { useSelector } from \"react-redux\";\nimport BrandSetupDashboard from \"./BrandSetUpDashboard\";\nimport SummaryDashboard from \"./dashboard\";\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\nimport { RootState } from \"@/store\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../LandingPage/components/Footer\";\n\nconst GeneralDashboard: React.FC = () => {\n    const user = useSelector((state: RootState) => state.user.user);\n    const navigate = useNavigate();\n\n    if (!user) {\n        navigate('/login');\n        return null;\n    }\n\n    return (\n        <>\n          {user.brands?.length === 0 ? (\n            <BrandSetupDashboard />\n          ) : (\n            <div className=\"flex h-screen relative\">\n              <CollapsibleSidebar />\n              <div className=\"flex-1 h-screen overflow-auto\">\n                <SummaryDashboard />\n                <Footer />\n              </div>\n    \n              <HelpDeskModal />\n            </div>\n          )}\n        </>\n      );\n}\n\nexport default GeneralDashboard;","import { useEffect, useState } from \"react\"\nimport { Link, useParams } from \"react-router-dom\"\nimport { ArrowRight, BarChart3, CalendarRange, LineChart, PieChart } from \"lucide-react\"\nimport Header from \"@/components/dashboard_component/Header\"\n\nexport default function DataBuilding() {\n  const { brandId } = useParams<{ brandId: string }>()\n  const [loadingText, setLoadingText] = useState(\"Fetching table data\")\n  const loadingMessages = [\n    \"Fetching table data\",\n    \"Processing sales records\",\n    \"Aggregating metrics\",\n    \"Organizing table columns\",\n    \"Calculating performance indicators\",\n    \"Preparing data tables\",\n  ]\n\n  // Cycle through loading messagesb\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setLoadingText((prev) => {\n        const currentIndex = loadingMessages.indexOf(prev)\n        const nextIndex = (currentIndex + 1) % loadingMessages.length\n        return loadingMessages[nextIndex]\n      })\n    }, 2500)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  return (\n    <div className=\"bg-slate-50 flex flex-col w-full min-h-screen\">\n        <Header title=\"Marketing Insights Tracker\" Icon={CalendarRange} showDatePicker={true} />\n        <main className=\"container max-w-6xl mx-auto px-4 py-8 flex flex-col h-screen justify-center\">\n        <div className=\"w-full text-center mb-12\">\n          <h1 className=\"text-xl md:text-4xl font-bold text-primary mb-3\">Preparing your dashboard...</h1>\n\n          {/* Animated loading text */}\n          <div className=\"h-8 my-8\">\n            <p className=\"text-base md:text-lg text-violet-600 font-medium animate-pulse\">{loadingText}...</p>\n          </div>\n\n          <p className=\"text-sm md:text-base text-gray-700 max-w-4xl mx-auto mb-2\">\n            We're loading data from the past two years up to yesterday. Going forward, new data will update daily.\n          </p>\n\n          <p className=\"text-sm md:text-base text-gray-500 max-w-4xl mx-auto mb-8\">\n            This process may take <span className=\"font-medium\">1-2 hours</span> to complete.\n          </p>\n\n          <p className=\"text-sm md:text-base text-gray-700 max-w-4xl mx-auto mb-10\">\n            In the meantime, you can explore these dashboards:\n          </p>\n\n          {/* Dashboard Links - Horizontal Layout */}\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center mt-6\">\n            {/* AdMetrics Hub Card */}\n            <Link\n              to={`/admetrics/${brandId}`}\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\n            >\n              <div className=\"p-5 flex flex-col items-center text-center\">\n                <div className=\"w-12 h-12 rounded-full bg-violet-100 flex items-center justify-center mb-3\">\n                  <BarChart3 className=\"w-6 h-6 text-violet-600\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">AdMetrics Hub</h3>\n                <div className=\"flex items-center text-violet-600 text-sm font-medium\">\n                  <span>View dashboard</span>\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\n                </div>\n              </div>\n            </Link>\n\n            {/* Ecommerce Insights Card */}\n            <Link\n              to={`/ecommerce-reports/${brandId}`}\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\n            >\n              <div className=\"p-5 flex flex-col items-center text-center\">\n                <div className=\"w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center mb-3\">\n                  <PieChart className=\"w-6 h-6 text-pink-600\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Ecommerce Insights</h3>\n                <div className=\"flex items-center text-pink-600 text-sm font-medium\">\n                  <span>View dashboard</span>\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\n                </div>\n              </div>\n            </Link>\n\n            {/* Campaign Analysis Card */}\n            <Link\n              to={`/meta-campaigns/${brandId}`}\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\n            >\n              <div className=\"p-5 flex flex-col items-center text-center\">\n                <div className=\"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3\">\n                  <LineChart className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Campaign Analysis</h3>\n                <div className=\"flex items-center text-blue-600 text-sm font-medium\">\n                  <span>View dashboard</span>\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\n                </div>\n              </div>\n            </Link>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","export const formatCurrency = (amount: number, currencyCode: string = 'USD'): string => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currencyCode,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  }).format(amount);\n};\n\n\nexport const formatPercentage = (value: number): string => {\n  return `${value.toFixed(2)}%`;\n}; ","import React, { useEffect, useMemo, useState } from \"react\"\nimport axios from \"axios\"\nimport { format } from \"date-fns\"\nimport { useParams } from \"react-router-dom\"\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\"\nimport { CalendarRange, ChevronDown, Download, Maximize, Minimize } from \"lucide-react\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@radix-ui/react-tooltip\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { FacebookLogo, GoogleLogo, ShopifyLogo } from \"@/data/logo.tsx\"\nimport { useSelector } from \"react-redux\"\nimport type { RootState } from \"@/store\"\nimport Header from \"@/components/dashboard_component/Header\"\nimport { Button } from \"@/components/ui/button\"\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\"\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\"\nimport type { ITooltipHeaderProps, IMonthlyAggregate } from \"@/interfaces/index\"\nimport Loader from \"@/components/dashboard_component/loader\"\nimport { baseURL } from \"@/data/constant\"\nimport DataBuilding from \"./components/DataBuilding\"\nimport { formatCurrency as formatCurrencyUtil } from '@/utils/currency'\nimport Footer from \"../LandingPage/components/Footer\"\n\nexport const formatCurrency = (amount: number, currencyCode: string = 'USD'): string => {\n  return formatCurrencyUtil(amount, currencyCode);\n};\n\nfunction TooltipHeader({\n  title,\n  tooltip,\n  colSpan = 1,\n  rowSpan,\n  isSubHeader = false,\n  isImportant = false,\n  isFirstInSection = false, // Add this new prop\n}: Readonly<ITooltipHeaderProps & { isImportant?: boolean; isFirstInSection?: boolean }>) {\n  return (\n    <th\n      className={`\n        ${isSubHeader ? \"text-xs font-medium\" : \"font-semibold text-sm\"}\n        text-center whitespace-nowrap p-2\n        ${isSubHeader ? \"bg-slate-100\" : \"bg-slate-200\"}\n        ${isImportant ? \"bg-blue-50 !font-bold text-blue-800\" : \"\"}\n        relative overflow-hidden\n        ${!isSubHeader ? \"sticky top-0 z-10\" : \"\"}\n        font-inter border-b border-r border-slate-300\n        ${isFirstInSection ? \"border-l-2 border-l-slate-300 shadow-sm\" : \"\"}\n      `}\n      colSpan={colSpan}\n      rowSpan={rowSpan}\n    >\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <span\n              className={`\n                flex items-center justify-center gap-1 cursor-help\n                ${isImportant ? \"text-blue-800\" : \"\"}\n              `}\n            >\n              {isImportant && <span className=\"text-blue-500\">●</span>}\n              {title}\n            </span>\n          </TooltipTrigger>\n          <TooltipContent className=\"mb-3 z-20 w-fit\">\n            <div className=\"text-gray-700 bg-white p-2 rounded-md text-sm border shadow-lg max-w-fit\">\n              {isImportant && <div className=\"font-semibold text-blue-600 mb-1\">Key Metric</div>}\n              {tooltip}\n            </div>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    </th>\n  )\n}\n\n// Excel-like cell component\nfunction Cell({\n  children,\n  isNumeric = false,\n  isHeader = false,\n  isSticky = false,\n  isExpanded = false,\n  isImportant = false,\n  isFirstInSection = false, // Add this new prop\n  className = \"\",\n}: {\n  children?: React.ReactNode\n  isNumeric?: boolean\n  isHeader?: boolean\n  isSticky?: boolean\n  isExpanded?: boolean\n  isImportant?: boolean\n  isFirstInSection?: boolean\n  className?: string\n}) {\n  return (\n    <td\n      className={`\n        border-b border-r border-slate-200\n        ${isNumeric ? \"text-right font-roboto tabular-nums\" : \"text-left\"} \n        ${isHeader ? \"font-medium font-dm-sans\" : \"\"}\n        ${isSticky ? \"sticky z-10\" : \"\"}\n        ${isExpanded ? \"bg-blue-50/30\" : \"bg-white hover:bg-slate-50/80\"}\n        ${isSticky && isExpanded ? \"bg-blue-50/30\" : \"\"}\n        ${isImportant ? \"font-semibold text-blue-700\" : \"\"}\n        ${isFirstInSection ? \"border-l-2 border-l-slate-300 shadow-sm\" : \"\"}\n        transition-colors\n        ${className}\n      `}\n    >\n      {children}\n    </td>\n  )\n}\n\nexport const ExcelMetricsPage: React.FC = () => {\n  const [metricsData, setMetricsData] = useState<IMonthlyAggregate[]>([])\n  const [loading, setLoading] = useState<boolean>(true)\n  const [error, setError] = useState<string | null>(null)\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false)\n  const [currency, setCurrency] = useState<string>('USD')\n  const dateFrom = useSelector((state: RootState) => state.date.from)\n  const dateTo = useSelector((state: RootState) => state.date.to)\n  const [expandedMonths, setExpandedMonths] = useState<string[]>([])\n  const { brandId } = useParams()\n\n  const date = useMemo(\n    () => ({\n      from: dateFrom,\n      to: dateTo,\n    }),\n    [dateFrom, dateTo],\n  )\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\"\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\"\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen)\n  }\n\n  const getTableHeight = () => {\n    if (isFullScreen) {\n      return \"max-h-[calc(100vh-120px)]\"\n    }\n    return \"max-h-[calc(100vh-230px)]\"\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true)\n      setError(null)\n      try {\n        const queryParams: Record<string, string> = {}\n\n        if (startDate) queryParams.startDate = startDate\n        if (endDate) queryParams.endDate = endDate\n\n        // Fetch currency first\n        const currencyResponse = await axios.get(`${baseURL}/api/brands/currency/${brandId}`, {\n          withCredentials: true,\n        })\n        setCurrency(currencyResponse.data)\n\n        // Then fetch metrics data\n        const reportResponse = await axios.get(`${baseURL}/api/report/${brandId}`, {\n          params: queryParams,\n          withCredentials: true,\n        })\n        const metricsData: IMonthlyAggregate[] = reportResponse.data.data\n        setMetricsData(metricsData)\n      } catch (err) {\n        console.error(err)\n        const message =\n          axios.isAxiosError(err) && err.response?.data?.message ? err.response.data.message : \"Something went wrong\"\n        setError(message)\n      } finally {\n        setLoading(false)\n      }\n    }\n    fetchData()\n  }, [brandId, startDate, endDate, baseURL])\n\n  const toggleMonth = (monthYear: string) => {\n    setExpandedMonths((prev) => (prev.includes(monthYear) ? prev.filter((m) => m !== monthYear) : [...prev, monthYear]))\n  }\n\n  const formatCurrency = (value: number) => {\n    return formatCurrencyUtil(value, currency);\n  }\n\n  const formatPercentage = (value: number) => {\n    return `${value.toFixed(2)}`\n  }\n\n  const processedData = useMemo(() => {\n    const safeDivide = (numerator: number, denominator: number) => (denominator ? numerator / denominator : 0)\n\n    return metricsData.map((monthData: IMonthlyAggregate) => {\n      const processedDailyMetrics = monthData.dailyMetrics.map((daily) => ({\n        ...daily,\n        metaSales: daily.metaSpend * (daily.metaROAS || 0),\n        googleSales: daily.googleSpend * (daily.googleROAS || 0),\n        adSales: daily.totalSpend * daily.grossROI || 0,\n        ROI: safeDivide(daily.totalSales, daily.totalSpend),\n      }))\n\n      const metaSales = processedDailyMetrics.reduce((sum, daily) => sum + daily.metaSales, 0)\n      const googleSales = processedDailyMetrics.reduce((sum, daily) => sum + daily.googleSales, 0)\n      const totalAdSales = metaSales + googleSales || 0\n\n      return {\n        ...monthData,\n        metaSales,\n        googleSales,\n        totalAdSales,\n        metaROAS: safeDivide(metaSales, monthData.metaSpend),\n        googleROAS: safeDivide(googleSales, monthData.googleSpend),\n        grossROI: safeDivide(totalAdSales, monthData.totalSpend),\n        netROI: safeDivide(monthData.shopifySales, monthData.totalSpend),\n        ROI: safeDivide(monthData.totalSales, monthData.totalSpend),\n        dailyMetrics: processedDailyMetrics,\n      }\n    })\n  }, [metricsData])\n\n  useMemo(() => {\n    if (!processedData.length) return null\n\n    const totalSales = processedData.reduce((sum, month) => sum + month.totalSales, 0)\n    const totalSpend = processedData.reduce((sum, month) => sum + month.totalSpend, 0)\n    const totalROI = totalSpend ? totalSales / totalSpend : 0\n    const metaSpend = processedData.reduce((sum, month) => sum + month.metaSpend, 0)\n    const googleSpend = processedData.reduce((sum, month) => sum + month.googleSpend, 0)\n    const metaSales = processedData.reduce((sum, month) => sum + month.metaSales, 0)\n    const googleSales = processedData.reduce((sum, month) => sum + month.googleSales, 0)\n    const metaROAS = metaSpend ? metaSales / metaSpend : 0\n    const googleROAS = googleSpend ? googleSales / googleSpend : 0\n\n    return {\n      totalSales,\n      totalSpend,\n      totalROI,\n      metaSpend,\n      googleSpend,\n      metaSales,\n      googleSales,\n      metaROAS,\n      googleROAS,\n    }\n  }, [processedData])\n\n  const renderTable = (): React.ReactNode => {\n    if (error) {\n      return <div className=\"rounded-lg bg-red-50 p-4 text-red-600 border border-red-200\">{error}</div>\n    }\n\n    return (\n      <div className=\"border rounded-lg shadow-sm overflow-hidden bg-white\">\n        <div className={`${getTableHeight()} overflow-auto`}>\n          <table className=\"w-full border-collapse font-inter\">\n            <thead className=\"sticky top-0 z-20\">\n              <tr>\n                <th className=\"w-10 sticky left-0 z-30 bg-slate-200 border-b border-r border-slate-300\" rowSpan={2} />\n                <th\n                  className=\"sticky left-[40px] z-20 text-center whitespace-nowrap p-2 font-semibold text-sm bg-slate-200 border-b border-r border-slate-300 border-l-2 border-l-slate-300 \"\n                  rowSpan={2}\n                >\n                  Date\n                </th>\n                <TooltipHeader\n                  title=\"Shopify (Actual Sales Data)\"\n                  tooltip=\"Shopify Metrics\"\n                  colSpan={5}\n                  isFirstInSection={true}\n                />\n                <TooltipHeader title=\"Meta + Google\" tooltip=\"Meta + Google\" colSpan={3} isFirstInSection={true} />\n                <TooltipHeader\n                  title=\"Meta (Facebook & Instagram Ads)\"\n                  tooltip=\"Meta Metrics\"\n                  colSpan={3}\n                  isFirstInSection={true}\n                />\n                <TooltipHeader title=\"Google Ads\" tooltip=\"Google Metrics\" colSpan={3} isFirstInSection={true} />\n              </tr>\n              <tr>\n                <TooltipHeader\n                  title=\"Net Sales\"\n                  tooltip=\"Net Sales = Gross Sales - Discount\"\n                  isSubHeader\n                  isFirstInSection={true}\n                />\n                <TooltipHeader\n                  title=\"Net ROI\"\n                  tooltip=\"Net ROI = Net Sales / Total Spend\"\n                  isSubHeader\n                  isImportant={true}\n                />\n                <TooltipHeader title=\"Total Returns\" tooltip=\"Net Returns + Shipping Returned + Return Fees + Taxes Returned\" isSubHeader />\n                <TooltipHeader title=\"Total Sales\" tooltip=\"Total Sales = Net Sales - Returns\" isSubHeader />\n                <TooltipHeader\n                  title=\"Final ROI\"\n                  tooltip=\"Final ROI = Total Sales / Total Spend\"\n                  isSubHeader\n                  isImportant={true}\n                />\n                <TooltipHeader\n                  title=\"Spend\"\n                  tooltip=\"Total Spent = Meta Spent + Google Spent\"\n                  isSubHeader\n                  isFirstInSection={true}\n                />\n                <TooltipHeader title=\"Sales\" tooltip=\"Sales = (MetaSales + GoogleSales)\" isSubHeader />\n                <TooltipHeader\n                  title=\"ROI\"\n                  tooltip=\"ROI = (MetaSales + GoogleSales)/ Total Spent\"\n                  isSubHeader\n                  isImportant={true}\n                />\n                <TooltipHeader title=\"Spend\" tooltip=\"Meta Spent\" isSubHeader isFirstInSection={true} />\n                <TooltipHeader title=\"Sales\" tooltip=\"Meta Sales = Meta Spent * Meta ROAS\" isSubHeader />\n                <TooltipHeader title=\"ROAS\" tooltip=\"Meta ROAS\" isSubHeader isImportant={true} />\n                <TooltipHeader title=\"Spend\" tooltip=\"Google Spent\" isSubHeader isFirstInSection={true} />\n                <TooltipHeader title=\"Sales\" tooltip=\"Google Sales = Google Spent * Google ROAS\" isSubHeader />\n                <TooltipHeader title=\"ROAS\" tooltip=\"Google ROAS\" isSubHeader isImportant={true} />\n              </tr>\n            </thead>\n            <tbody>\n              {processedData.map((monthData: any) => {\n                const monthYear = `${monthData.year}-${monthData.month.toString().padStart(2, \"0\")}`\n                const isExpanded = expandedMonths.includes(monthYear)\n                return (\n                  <React.Fragment key={monthYear}>\n                    <tr\n                      className={`\n                        ${isExpanded ? \"bg-blue-50/30\" : \"bg-white hover:bg-slate-50/80\"} \n                        cursor-pointer transition-colors \n                      `}\n                      onClick={() => toggleMonth(monthYear)}\n                    >\n                      <Cell isSticky isExpanded={isExpanded} className=\"w-10 px-2 py-2 sticky left-0\">\n                        <div\n                          className={`\n                            w-6 h-6 rounded-full flex items-center justify-center\n                            transition-all duration-300 transform\n                            ${isExpanded ? \"rotate-180 bg-blue-500\" : \"bg-blue-100 hover:bg-blue-200\"}\n                          `}\n                        >\n                          <ChevronDown className={`w-4 h-4 ${isExpanded ? \"text-white\" : \"text-blue-500\"}`} />\n                        </div>\n                      </Cell>\n                      <Cell\n                        isHeader\n                        isSticky\n                        isExpanded={isExpanded}\n                        className=\"sticky left-[40px] px-3 py-2.5 whitespace-nowrap bg-slate-50/80 text-sm border-l-2 border-l-slate-300 \"\n                      >\n                        {format(new Date(monthData.year, monthData.month - 1), \"MMM yyyy\")}\n                      </Cell>\n                      <Cell\n                        isNumeric\n                        isExpanded={isExpanded}\n                        className=\"px-3 py-2.5 font-medium text-sm\"\n                        isFirstInSection={true}\n                      >\n                        {formatCurrency(monthData.shopifySales)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\n                        {formatPercentage(monthData.netROI)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\n                        {formatCurrency(monthData.refundAmount)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 font-medium text-sm\">\n                        {formatCurrency(monthData.totalSales)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\n                        {formatPercentage(monthData.ROI)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\n                        {formatCurrency(monthData.totalSpend)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\n                        {formatCurrency(monthData.totalAdSales)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\n                        {formatPercentage(monthData.grossROI)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\n                        {formatCurrency(monthData.metaSpend)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\n                        {formatCurrency(monthData.metaSales)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\n                        {formatPercentage(monthData.metaROAS)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\n                        {formatCurrency(monthData.googleSpend)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\n                        {formatCurrency(monthData.googleSales)}\n                      </Cell>\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\n                        {formatPercentage(monthData.googleROAS)}\n                      </Cell>\n                    </tr>\n                    {isExpanded &&\n                      monthData.dailyMetrics.map((daily: any) => (\n                        <tr key={daily._id} className=\"bg-slate-50/50 hover:bg-slate-100/50 transition-colors\">\n                          <Cell isSticky className=\"w-10 px-2 py-1.5 sticky left-0 bg-slate-50/50\" />\n                          <Cell\n                            isSticky\n                            className=\"sticky left-[40px] px-3 py-1.5 text-xs text-gray-600 bg-slate-50/80 border-l-2 border-l-slate-300 \"\n                          >\n                            {format(new Date(daily.date), \"dd/MM/yyyy\")}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\n                            {formatCurrency(daily.shopifySales)}\n                          </Cell>\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\n                            {formatPercentage(daily.netROI)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\n                            {formatCurrency(daily.refundAmount)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\n                            {formatCurrency(daily.totalSales)}\n                          </Cell>\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\n                            {formatPercentage(daily.ROI)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\n                            {formatCurrency(daily.totalSpend)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\n                            {formatCurrency(daily.adSales)}\n                          </Cell>\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\n                            {formatPercentage(daily.grossROI)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\n                            {formatCurrency(daily.metaSpend)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\n                            {formatCurrency(daily.metaSales)}\n                          </Cell>\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\n                            {formatPercentage(daily.metaROAS)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\n                            {formatCurrency(daily.googleSpend)}\n                          </Cell>\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\n                            {formatCurrency(daily.googleSales)}\n                          </Cell>\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\n                            {formatPercentage(daily.googleROAS)}\n                          </Cell>\n                        </tr>\n                      ))}\n                  </React.Fragment>\n                )\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n\n  const renderContent = () => {\n    if (loading) return <Loader isLoading={loading} />\n    if (error === \"No metrics data available yet. Please try again later.\") return <DataBuilding />\n    return (\n      <div className=\"flex-1 h-screen overflow-hidden bg-slate-100\">\n        <Header title=\"Marketing Insights Tracker\" Icon={CalendarRange} showDatePicker={true} />\n        <Card\n          id=\"metrics-table\"\n          className={`${isFullScreen ? \"fixed inset-0 z-50 m-0 rounded-none\" : \"m-6\"} shadow-md`}\n        >\n          <CardContent className=\"p-4 md:p-6\">\n            <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 gap-4\">\n              <div className=\"flex flex-col md:flex-row items-start md:items-center gap-4\">\n                <h2 className=\"text-xl font-semibold text-slate-800\">Key Performance Metrics</h2>\n                <div className=\"flex flex-row gap-3 items-center\">\n                  <FacebookLogo width={20} height={20} />\n                  <GoogleLogo width={20} height={20} />\n                  <ShopifyLogo width={20} height={20} />\n                </div>\n              </div>\n              <div className=\"flex flex-row items-center gap-3\">\n                {isFullScreen && (\n                  <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                    <DatePickerWithRange\n                      defaultDate={{\n                        from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                        to: new Date(),\n                      }}\n                    />\n                  </div>\n                )}\n                <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\" className=\"bg-white\">\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" className=\"gap-2 bg-white\">\n                  <Download className=\"h-4 w-4\" />\n                  Export\n                </Button>\n              </div>\n            </div>\n            {renderTable()}\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">{renderContent()}\n        <Footer />\n      </div>\n      <HelpDeskModal />\n    </div>\n  )\n}\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { cn } from \"@/lib/utils\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"@radix-ui/react-icons\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDownIcon className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUpIcon className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDownIcon className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <CheckIcon className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","import { useState, useEffect, useCallback } from 'react'\nimport { PlusCircle, Edit2, X, Trash2 } from 'lucide-react'\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport { format, endOfMonth } from \"date-fns\"\nimport { Bar, BarChart, ResponsiveContainer, XAxis, YAxis, Tooltip } from 'recharts'\nimport { cn } from \"@/lib/utils\"\nimport axios from 'axios'\nimport { useNavigate } from 'react-router-dom'\nimport { baseURL } from '@/data/constant'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/store'\n\n\n\n// Define types for better type safety\ninterface MetricsData {\n  spend: number;\n  Revenue: number;\n  purchase_roas: string;\n  individualAccounts?: Array<{\n    accountId: string;\n    spend: number;\n    purchase_roas: string;\n    Revenue: string | number;\n  }>;\n}\n\ninterface BrandTarget {\n  brandId: string;\n  name: string;\n  source: string;\n  targetSales: number;\n  targetSpend: number;\n  targetROAS: number;\n  targetDate: Date;\n}\n\nexport default function BrandPerformanceDashboard() {\n  const brands = useSelector((state: RootState) => state.brand.brands)\n  const [selectedBrands, setSelectedBrands] = useState<Array<BrandTarget>>([])\n  const [newBrand, setNewBrand] = useState<BrandTarget>({\n    brandId: '',\n    name: '',\n    source: '',\n    targetSales: 0,\n    targetSpend: 0,\n    targetROAS: 0,\n    targetDate: endOfMonth(new Date())\n  })\n  const [editingBrand, setEditingBrand] = useState<string | null>(null)\n  const [editData, setEditData] = useState<BrandTarget | null>(null)\n  const [achievedMetrics, setAchievedMetrics] = useState<{ [key: string]: { meta: MetricsData, google: MetricsData } }>({})\n  const [isLoading, setIsLoading] = useState(false);\n\n  const navigate = useNavigate()\n\n  const getMetaMetrics = useCallback(async (brandId: string) => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/performance/metaMetrics/${brandId}`,\n        { withCredentials: true }\n      );\n      \n      return response.data;\n    } catch (error) {\n      console.error('Error fetching Meta metrics data:', error);\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\n        alert('Your session has expired. Please log in again.');\n        navigate('/');\n      }\n      return { success: false, data: { spend: 0, Revenue: 0, purchase_roas: \"0.00\" } };\n    }\n  }, [baseURL, navigate]);\n\n  const getGoogleAdMetrics = useCallback(async (brandId: string) => {\n    try {\n      const response = await axios.get(\n        `${baseURL}/api/performance/googleAdMetrics/${brandId}`,\n        { withCredentials: true }\n      );\n      \n      return response.data;\n    } catch (error) {\n      console.error('Error fetching Google metrics data:', error);\n      return { success: false, data: { spend: 0, Revenue: 0, purchase_roas: \"0.00\" } };\n    }\n  }, [baseURL]);\n  \n  \n  const fetchMetricsData = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const metricsData: { [key: string]: { meta: MetricsData, google: MetricsData } } = {};\n      await Promise.all(\n        selectedBrands.map(async (brand) => {\n          const [metaResponse, googleResponse] = await Promise.all([\n            getMetaMetrics(brand.brandId),\n            getGoogleAdMetrics(brand.brandId)\n          ]);\n          \n          metricsData[brand.brandId] = {\n            meta: metaResponse.success ? metaResponse.data : { spend: 0, Revenue: 0, purchase_roas: \"0.00\" },\n            google: googleResponse.success ? googleResponse.data : { spend: 0, Revenue: 0, purchase_roas: \"0.00\" }\n          };\n        })\n      );\n      setAchievedMetrics(metricsData);\n    } catch (error) {\n      console.error('Error fetching metrics data:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [selectedBrands, getMetaMetrics, getGoogleAdMetrics]);\n  \n  useEffect(() => {\n    if (selectedBrands.length > 0) {\n      fetchMetricsData();\n    }\n  }, [fetchMetricsData, selectedBrands]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setNewBrand(prev => ({ ...prev, [name]: ['brandId', 'name'].includes(name) ? value : Number(value) }))\n  }\n\n  const handleSourceChange = (value: string) => {\n    setNewBrand(prev => ({ ...prev, source: value }))\n  }\n\n  const handleAddBrand = async () => {\n    const brandToAdd = brands.find(b => String(b._id) === String(newBrand.brandId));\n\n    if (brandToAdd) {\n      try {\n        const newBrandTarget = {\n          brandId: brandToAdd._id,\n          name: brandToAdd.name,\n          source: newBrand.source,\n          targetSales: newBrand.targetSales,\n          targetSpend: newBrand.targetSpend,\n          targetROAS: newBrand.targetROAS,\n          targetDate: newBrand.targetDate,\n        };\n\n        const response = await axios.post(`${baseURL}/api/performance/addTarget`, newBrandTarget, { withCredentials: true });\n\n        setSelectedBrands(prev => [...prev, response.data]);\n        setNewBrand({\n          brandId: '',\n          name: '',\n          source: '',\n          targetSales: 0,\n          targetSpend: 0,\n          targetROAS: 0,\n          targetDate: endOfMonth(new Date())\n        });\n\n      } catch (error) {\n        console.error('Error adding brand:', error);\n      }\n    } else {\n      console.log(\"Brand not found\");\n    }\n  };\n\n  const handleEdit = (brandId: string) => {\n    const brandToEdit = selectedBrands.find(b => b.brandId === brandId)\n    if (brandToEdit) {\n      setEditingBrand(brandId)\n      setEditData({ ...brandToEdit, targetDate: new Date(brandToEdit.targetDate) })\n    }\n  }\n\n  const handleSaveEdit = async (brandId: string) => {\n    if (editData) {\n      try {\n        const response = await axios.patch(`${baseURL}/api/performance/updateTarget/${brandId}`, editData, { withCredentials: true });\n        setSelectedBrands(prev => prev.map(brand =>\n          brand.brandId === brandId ? { ...brand, ...response.data } : brand\n        ));\n\n        setEditingBrand(null);\n        setEditData(null);\n\n        alert('Brand updated successfully!');\n      } catch (error) {\n        console.error('Error saving brand edit:', error);\n        alert('Failed to update brand');\n      }\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditingBrand(null)\n    setEditData(null)\n  }\n\n  const handleDelete = async (brandId: string) => {\n    try {\n      await axios.delete(`${baseURL}/api/performance/deleteTarget/${brandId}`, { withCredentials: true });\n      setSelectedBrands(prev => prev.filter(brand => brand.brandId !== brandId));\n      console.log('Brand deleted successfully');\n    } catch (error) {\n      console.error('Error deleting brand:', error);\n    }\n  };\n\n  const Loader = () => (\n    <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-blue-500\"></div>\n  )\n\n  const calculateMetrics = (brand: BrandTarget, source: 'meta' | 'google') => {\n    const metrics = achievedMetrics[brand.brandId]?.[source] || { spend: 0, Revenue: 0, purchase_roas: \"0.00\" }; \n    // Calculate spent metrics\n    const achievedSpend = metrics.spend || 0;\n    // Calculate sales metrics\n    const achievedSales = Number(metrics.Revenue) || 0;\n    const remainingSales = Math.max(brand.targetSales - achievedSales, 0).toFixed(2);\n    \n    // Calculate ROAS\n    const achievedROAS = parseFloat(metrics.purchase_roas) || 0;\n    \n    // Calculate days and per-day requirements\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const targetDate = new Date(brand.targetDate);\n    targetDate.setHours(0, 0, 0, 0);\n    const remainingDays = Math.max(Math.ceil((targetDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)), 0);\n    \n    const requiredSalesPerDay = remainingDays > 0 ? parseFloat(remainingSales) / remainingDays : 0;\n\n    return {\n      achievedSales,\n      remainingSales,\n      achievedSpend,\n      achievedROAS,\n      remainingDays,\n      requiredSalesPerDay,\n    }\n  }\n\n  const chartData = selectedBrands.map(brand => {\n    const metaMetrics = calculateMetrics(brand, 'meta');\n    const googleMetrics = calculateMetrics(brand, 'google');\n    return {\n      name: brand.name,\n      'Meta Achieved': metaMetrics.achievedSales,\n      'Meta Remaining': metaMetrics.remainingSales,\n      'Google Achieved': googleMetrics.achievedSales,\n      'Google Remaining': googleMetrics.remainingSales\n    }\n  });\n\n  // Filter brands by source\n  const metaBrands = selectedBrands.filter(brand => brand.source === 'Meta');\n  const googleBrands = selectedBrands.filter(brand => brand.source === 'Google');\n\n  useEffect(() => {\n    const fetchBrandTargets = async () => {\n      try {\n        const response = await axios.get(`${baseURL}/api/performance/brandTarget`, { withCredentials: true });\n        // Ensure targetDate is a Date object\n        const brands = response.data.map((brand: any) => ({\n          ...brand,\n          targetDate: new Date(brand.targetDate)\n        }));\n        setSelectedBrands(brands);\n      } catch (error) {\n        console.error('Error fetching brands:', error);\n      }\n    };\n\n    fetchBrandTargets();\n  }, [baseURL]);\n\n  const renderTable = (brands: BrandTarget[], source: 'meta' | 'google', title: string) => (\n    <Card className='mb-4'>\n      <CardHeader>\n        <CardTitle>{title} Performance Table</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Brand</TableHead>\n                <TableHead>Month</TableHead>\n                <TableHead>Target Spend</TableHead>\n                <TableHead>Target Sales</TableHead>\n                <TableHead>Target ROAS</TableHead>\n                <TableHead>Achieved Spend</TableHead>\n                <TableHead>Achieved Sales</TableHead>\n                <TableHead>Achieved ROAS</TableHead>\n                <TableHead>Remaining Sales</TableHead>\n                <TableHead>Remaining Days</TableHead>\n                <TableHead>Required Sales/Day</TableHead>\n                <TableHead>Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {brands.map(brand => {\n                const { \n                  achievedSales, \n                  remainingSales, \n                  achievedSpend, \n                  achievedROAS, \n                  remainingDays, \n                  requiredSalesPerDay \n                } = calculateMetrics(brand, source);\n                \n                const isEditing = editingBrand === brand.brandId;\n                \n                return (\n                  <TableRow key={brand.brandId}>\n                    <TableCell className=\"font-bold text-sm\">{brand.name}</TableCell>\n                    <TableCell>\n                      {isEditing ? (\n                        <Popover>\n                          <PopoverTrigger asChild>\n                            <Button variant={\"outline\"}>\n                              {editData?.targetDate ? format(editData.targetDate, \"PPP\") : <span>Pick a date</span>}\n                            </Button>\n                          </PopoverTrigger>\n                          <PopoverContent className=\"w-auto p-0\">\n                            <Calendar\n                              mode=\"single\"\n                              selected={editData?.targetDate}\n                              onSelect={(date) => date && setEditData(prev => prev ? { ...prev, targetDate: date } : null)}\n                              initialFocus\n                            />\n                          </PopoverContent>\n                        </Popover>\n                      ) : (\n                        format(new Date(brand.targetDate), \"MMM yyyy\") \n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {isEditing ? (\n                        <Input\n                          type=\"number\"\n                          value={editData?.targetSpend}\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetSpend: Number(e.target.value) } : null)}\n                        />\n                      ) : (\n                        `₹${brand.targetSpend.toLocaleString()}`\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {isEditing ? (\n                        <Input\n                          type=\"number\"\n                          value={editData?.targetSales}\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetSales: Number(e.target.value) } : null)}\n                        />\n                      ) : (\n                        `₹${brand.targetSales.toLocaleString()}`\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {isEditing ? (\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={editData?.targetROAS}\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetROAS: Number(e.target.value) } : null)}\n                        />\n                      ) : (\n                        brand.targetROAS.toFixed(2)\n                      )}\n                    </TableCell>\n                   \n                    <TableCell>{isLoading ? <Loader /> : `₹${achievedSpend.toLocaleString('en-IN')}`}</TableCell>\n                    <TableCell>{isLoading ? <Loader /> : `₹${achievedSales.toLocaleString('en-IN')}`}</TableCell>\n                    <TableCell>{isLoading ? <Loader /> : achievedROAS.toFixed(2)}</TableCell>\n                    <TableCell>{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(Number(remainingSales))}</TableCell>\n                    <TableCell>{remainingDays}</TableCell>\n                    <TableCell>₹{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(requiredSalesPerDay)}</TableCell>\n                    <TableCell>\n                      {isEditing ? (\n                        <>\n                          <Button onClick={() => handleSaveEdit(brand.brandId)} className=\"mr-2\">Save</Button>\n                          <Button onClick={handleCancelEdit} variant=\"outline\"><X className=\"h-4 w-4\" /></Button>\n                        </>\n                      ) : (\n                        <div className='flex flex-row gap-1'>\n                          <Button size={\"sm\"} onClick={() => handleEdit(brand.brandId)} ><Edit2 className=\"h-2 w-2\" /></Button>\n                          <Button size={\"sm\"} onClick={() => handleDelete(brand.brandId)} variant=\"destructive\"><Trash2 className=\"h-2 w-2\" /></Button>\n                        </div>\n                      )}\n                    </TableCell>\n                  </TableRow>\n                )\n              })}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <div className=\"bg-gray-100 min-h-screen\">\n      <nav className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\n          <h1 className=\"text-2xl font-bold\">Brands Performance Metrics</h1>\n        </div>\n      </nav>\n      <div className='container mx-auto p-4'>\n        <Card className=\"mb-4\">\n          <CardHeader>\n            <CardTitle>Add New Brand Target</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\n              <div>\n                <Label htmlFor=\"brandName\">Brand Name</Label>\n                <Select onValueChange={(value) => {\n                  const brand = brands.find(b => b._id === value);\n                  setNewBrand(prev => ({ \n                    ...prev, \n                    brandId: value,\n                    name: brand?.name || ''\n                  }));\n                }}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select brand\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {brands.map(brand => (\n                      <SelectItem key={brand._id} value={brand._id}>\n                        {brand.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"source\">Source</Label>\n                <Select onValueChange={handleSourceChange} value={newBrand.source}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select source\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Meta\">Meta</SelectItem>\n                    <SelectItem value=\"Google\">Google</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"targetSales\">Target Sales</Label>\n                <Input \n                  id=\"targetSales\" \n                  name=\"targetSales\" \n                  type=\"number\"\n                  value={newBrand.targetSales} \n                  onChange={handleInputChange} \n                  placeholder=\"Enter target sales\" \n                />\n              </div>\n              <div>\n                <Label htmlFor=\"targetSpend\">Target Spend</Label>\n                <Input \n                  id=\"targetSpend\" \n                  name=\"targetSpend\" \n                  type=\"number\"\n                  value={newBrand.targetSpend} \n                  onChange={handleInputChange} \n                  placeholder=\"Enter target spend\" \n                />\n              </div>\n              <div>\n                <Label htmlFor=\"targetROAS\">Target ROAS</Label>\n                <Input \n                  id=\"targetROAS\" \n                  name=\"targetROAS\" \n                  type=\"number\"\n                  value={newBrand.targetROAS} \n                  onChange={handleInputChange} \n                  placeholder=\"Enter target ROAS\" \n                  step=\"0.01\"\n                />\n              </div>\n              <div className=\"flex items-end\">\n                <Button onClick={handleAddBrand} className=\"w-full\">\n                  <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Brand Target\n                </Button>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <Label>Target Date</Label>\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant={\"outline\"}\n                    className={cn(\n                      \"w-full justify-start text-left font-normal mt-2\",\n                      !newBrand.targetDate && \"text-muted-foreground\"\n                    )}\n                  >\n                    {newBrand.targetDate ? format(newBrand.targetDate, \"PPP\") : <span>Pick a date</span>}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\">\n                  <Calendar\n                    mode=\"single\"\n                    selected={newBrand.targetDate}\n                    onSelect={(date) => date && setNewBrand(prev => ({ ...prev, targetDate: date }))}\n                    initialFocus\n                  />\n                </PopoverContent>\n              </Popover>\n            </div>\n          </CardContent>\n        </Card>\n\n        {renderTable(metaBrands, 'meta', 'Meta')}\n        {renderTable(googleBrands, 'google', 'Google')}\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Sales Progress</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={chartData}>\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip formatter={(value) => `₹${Number(value).toLocaleString()}`} />\n                <Bar dataKey=\"Meta Achieved\" stackId=\"meta\" fill=\"#4ade80\" />\n                <Bar dataKey=\"Meta Remaining\" stackId=\"meta\" fill=\"#f87171\" />\n                <Bar dataKey=\"Google Achieved\" stackId=\"google\" fill=\"#60a5fa\" />\n                <Bar dataKey=\"Google Remaining\" stackId=\"google\" fill=\"#fbbf24\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}","import React from \"react\";\nimport BrandPerformanceDashboard from \"./Dashboard\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\n const PerformanceDashboard : React.FC=()=>{\n    return (\n        <div className=\"flex h-screen\"> \n        <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        <BrandPerformanceDashboard />\n      </div>\n    </div>\n    );\n}\nexport default PerformanceDashboard;","import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react'\nimport { ArrowUp, ArrowDown, ArrowUpDown, Filter, ChevronLeft, X, CheckCircle, AlertCircle, RefreshCw, BarChart2, Tag, Layers, Package, ChevronDown, ChevronRight } from 'lucide-react';\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@radix-ui/react-tooltip'\nimport {GoogleLogo} from \"@/data/logo.tsx\"\nimport { Button } from '@/components/ui/button'\nimport { format } from \"date-fns\"\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\n\ntype Metrics = {\n    products: number\n    totalCost: number\n    ROAS: number,\n    conversions: number,\n    ConversionValue: number,\n    ConversionRate: number,\n    totalClicks: number,\n    ctr: number,\n    AvgCPC: number,\n}\n\ntype Category = {\n    name: string\n    metrics: Metrics\n    subcategories: Category[]\n}\n\ntype ColumnDef = {\n    id: string\n    header: string\n    accessorKey: string\n    cell: (value: any) => React.ReactNode\n}\n\ntype TabConfig = {\n    id: string\n    label: string\n    apiEndpoint: string\n    columns: ColumnDef[]\n    data: any[]\n    lastUpdated: number | null,\n}\n\nexport default function ProductTab() {\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\n    const { brandId } = useParams()\n\n    const [tabs, setTabs] = useState<TabConfig[]>([\n        { id: 'products', label: 'Products', apiEndpoint: `${baseURL}/api/segment/productMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\n        { id: 'categories', label: 'Categories', apiEndpoint: `${baseURL}/api/segment/categoryMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\n        { id: 'brands', label: 'Brands', apiEndpoint: `${baseURL}/api/segment/brandMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\n        { id: 'productTypes', label: 'Product types', apiEndpoint: `${baseURL}/api/segment/typeMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\n    ])\n    const [activeTab, setActiveTab] = useState(tabs[0].id)\n    const [currentPage, setCurrentPage] = useState(1)\n    const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set())\n    const [loading, setLoading] = useState(false)\n    const [filterApplied, setFilterApplied] = useState(false);\n    const rowsPerPage = 100\n    const [filterData, setFilterData] = useState<any>({});\n    const cacheRef = useRef<{ [key: string]: { data: any; timestamp: number } }>({});\n    const POLL_INTERVAL = 5 * 60 * 1000;\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    // Sorting state\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\n    const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\n\n    const handleTabChange = (newTabId: string) => {\n        setActiveTab(newTabId);\n        setCurrentPage(1);\n        setExpandedCategories(new Set());\n    };\n\n    const fetchTabData = useCallback(\n        async (tabId: string, body: Record<string, any> = {}, isFilterApplied: boolean = false) => {\n            if (loading) return;\n\n            setLoading(true);\n\n            const tab = tabs.find(t => t.id === tabId);\n            if (!tab) {\n                console.warn(`Tab not found for ID: ${tabId}`);\n                setLoading(false);\n                return;\n            }\n\n            const updatedBody = {\n                ...body,\n                ...(startDate && { startDate }),\n                ...(endDate && { endDate }),\n            };\n\n            const cacheKey = `${tabId}-${startDate || \"default\"}-${endDate || \"default\"}`;\n            const cachedData = cacheRef.current[cacheKey];\n            const now = Date.now();\n\n            if (!isFilterApplied && tabId === 'products') {\n                delete cacheRef.current[cacheKey];\n            }\n\n            if (!isFilterApplied && cachedData && now - cachedData.timestamp < POLL_INTERVAL) {\n                setTabs(prevTabs =>\n                    prevTabs.map(t =>\n                        t.id === tabId ? { ...t, data: cachedData.data, lastUpdated: cachedData.timestamp } : t\n                    )\n                );\n                setLoading(false);\n                return;\n            }\n\n            try {\n                const response = await axios.post(tab.apiEndpoint, updatedBody, { withCredentials: true });\n\n                if (response.data.success) {\n                    const result = response.data;\n                    const data = result[`${tabId}Data`] || [];\n                    console.log(\"New Data for Tab:\", tabId, data);\n\n                    const columns: ColumnDef[] = Object.keys(data[0] || {}).map(key => ({\n                        id: key,\n                        header: key.charAt(0).toUpperCase() + key.slice(1),\n                        accessorKey: key,\n                        cell: (value: any) => {\n                            if (key === 'issues' && Array.isArray(value)) {\n                                return value.length > 0 ? value[0].description : 'No issues';\n                            }\n                            return String(value);\n                        },\n                    }));\n\n                    console.log(\"Columns for Tab:\", columns);\n\n                    setTabs(prevTabs =>\n                        prevTabs.map(t =>\n                            t.id === tabId ? { ...t, columns, data, lastUpdated: now } : t\n                        )\n                    );\n\n                    cacheRef.current[cacheKey] = { data, timestamp: now };\n                } else {\n                    console.error(`Failed to fetch data for ${tabId}`);\n                }\n            } catch (error) {\n                console.error(`Error fetching data for ${tabId}:`, error);\n            } finally {\n                setLoading(false);\n            }\n        },\n        [tabs, loading, cacheRef, startDate, endDate]\n    );\n\n    useEffect(() => {\n        const requestBody = {\n            ...filterData,\n            ...(startDate && { startDate }),\n            ...(endDate && { endDate }),\n        };\n\n        fetchTabData(activeTab, filterApplied ? requestBody : {}, filterApplied ? true : false);\n    }, [activeTab, date, filterApplied, filterData]);\n\n    const handleRowClick = (currentTab: string, rowData: Record<string, any>) => {\n        const tabColumnMapping: Record<string, string> = {\n            brands: 'Brand', // Column name to fetch value when on Brand tab\n            productTypes: 'Type', // Column name to fetch value when on Product types tab\n            categories: 'name', // Column name to fetch value when on Categories tab\n            products: 'status'\n        };\n\n        const bodyKeyMapping: Record<string, string> = {\n            brands: 'brands', // Key to send in the API request body when on Brand tab\n            productTypes: 'productType', // Key to send in the API request body when on Product types tab\n            categories: 'categoryName', // Key to send in the API request body when on Categories tab\n            products: 'status'\n        };\n\n        const columnToFetch = tabColumnMapping[currentTab];\n        const bodyKey = bodyKeyMapping[currentTab];\n\n        if (columnToFetch && bodyKey) {\n            const valueToSend = rowData[columnToFetch]; // Get value from the row based on the column name\n\n            if (valueToSend) {\n                const filterPayload: Record<string, any> = {\n                    [bodyKey]: valueToSend, // Add the main key-value pair\n                };\n\n                // Add the additional key for the 'categories' tab\n                if (currentTab === 'categories' && rowData.level) {\n                    filterPayload['categoryLevel'] = rowData.level; // Add the additional key\n                }\n\n                // Set filter state\n                setFilterData(filterPayload); // Set custom filter data\n                setFilterApplied(true); // Mark filter as applied\n                setActiveTab('products'); // Switch to the Products tab\n            } else {\n                console.warn(`No value found for column \"${columnToFetch}\" in row`, rowData);\n            }\n        } else {\n            console.warn(`No column or body key mapping found for tab: ${currentTab}`);\n        }\n    };\n\n    const toggleCategory = (categoryPath: string) => {\n        setExpandedCategories(prev => {\n            const newSet = new Set(prev)\n            if (newSet.has(categoryPath)) {\n                newSet.delete(categoryPath)\n            } else {\n                newSet.add(categoryPath)\n            }\n            return newSet\n        })\n    }\n\n    const renderCategoryRow = (category: Category, depth: number = 0, path: string = '') => {\n        const currentPath = path ? `${path}.${category.name}` : category.name\n        const isExpanded = expandedCategories.has(currentPath)\n\n        return (\n            <React.Fragment key={currentPath}>\n                <tr className={`${isExpanded ? 'bg-gray-100' : 'bg-white'}`}>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm flex items-center\">\n                        <div style={{ marginLeft: `${depth * 20}px` }} onClick={() => toggleCategory(currentPath)} className=\"flex items-center cursor-pointer\">\n                            {category.subcategories.length > 0 && (\n                                <button className=\"mr-2\">\n                                    {isExpanded ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\n                                </button>\n                            )}\n                            {category.name}\n                        </div>\n                    </td>\n                    <td\n                        className=\"px-4 py-2 whitespace-nowrap text-sm cursor-pointer text-blue-500 underline\"\n                        onClick={() => handleRowClick(activeTab, category)} // Adding handleRowClick to the Products column\n                    >\n                        {category.metrics.products}\n                    </td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalCost}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ROAS}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.conversions}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionValue}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionRate}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalClicks}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ctr}</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.AvgCPC}</td>\n                </tr>\n                {isExpanded &&\n                    category.subcategories.map(subCategory =>\n                        renderCategoryRow(subCategory, depth + 1, currentPath)\n                    )}\n            </React.Fragment>\n        )\n    }\n    const handleSort = (columnId: string) => {\n        if (sortColumn === columnId) {\n            setSortOrder(prevOrder => (prevOrder === 'asc' ? 'desc' : 'asc'));\n        } else {\n            setSortColumn(columnId);\n            setSortOrder('asc');\n        }\n    };\n    const getCurrentTabData = () => {\n        const currentTab = tabs.find(tab => tab.id === activeTab)\n        if (!currentTab || currentTab.id === 'categories') return { columns: [], data: [] }\n\n        let sortedData = currentTab.data;\n\n        if (sortColumn) {\n            sortedData = [...sortedData].sort((a, b) => {\n                const aValue = a[sortColumn];\n                const bValue = b[sortColumn];\n\n                if (typeof aValue === 'number' && typeof bValue === 'number') {\n                    return sortOrder === 'asc' ? aValue - bValue : bValue - aValue;\n                }\n\n                const stringA = String(aValue || '').toLowerCase();\n                const stringB = String(bValue || '').toLowerCase();\n\n                if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\n                if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\n                return 0;\n            });\n        }\n\n        const startIndex = (currentPage - 1) * rowsPerPage;\n        const endIndex = startIndex + rowsPerPage;\n        return {\n            columns: currentTab.columns,\n            data: sortedData.slice(startIndex, endIndex),\n        };\n    }\n\n    const { columns, data } = getCurrentTabData()\n    const totalPages = Math.ceil((tabs.find(tab => tab.id === activeTab)?.data.length || 0) / rowsPerPage)\n\n    const categoryColumns = [\n        { id: 'name', header: 'Name' },\n        { id: 'products', header: 'Products' },\n        { id: 'totalCost', header: 'Cost' },\n        { id: 'ROAS', header: 'ROAS' },\n        { id: 'conversions', header: 'Conversions' },\n        { id: 'ConversionValue', header: 'Conv. Value' },\n        { id: 'ConversionRate', header: 'Conv. Rate' },\n        { id: 'totalClicks', header: 'Clicks' },\n        { id: 'ctr', header: 'CTR' },\n        { id: 'AvgCPC', header: 'Avg CPC' },\n    ]\n\n    function TableSkeleton() {\n        return (\n            <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full table-auto border-collapse\">\n                    <thead>\n                        <tr>\n                            {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, index) => (\n                                <th key={index} className=\"px-4 py-2 border-b\">\n                                    <Skeleton className={`h-4 ${width}`} />\n                                </th>\n                            ))}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {Array.from({ length: 8 }).map((_, index) => (\n                            <tr key={index}>\n                                {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, idx) => (\n                                    <td key={idx} className=\"px-4 py-2 border-b\">\n                                        <Skeleton className={`h-4 ${width}`} />\n                                    </td>\n                                ))}\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n    return (\n    <div className='w-full'>\n        <div className='flex flex-row gap-2 items-center mb-4'>\n            <GoogleLogo />\n            <h1 className='text-xl font-bold text-gray-800'>Google Ads Product Insights</h1>\n        </div>\n        <div className='bg-white p-6 rounded-xl shadow-lg border border-gray-200'>\n            <div className=\"flex items-center justify-between border-b border-gray-200 pb-2 mb-2\">\n                <div className=\"flex space-x-2\" role=\"tablist\">\n                    {tabs.map(tab => (\n                        <Button\n                            key={tab.id}\n                            variant={activeTab === tab.id ? \"default\" : \"ghost\"}\n                            onClick={() => handleTabChange(tab.id)}\n                            className=\"relative\"\n                        >\n                            {tab.id === 'products' && <Package className=\"w-4 h-4 mr-2\" />}\n                            {tab.id === 'categories' && <Layers className=\"w-4 h-4 mr-2\" />}\n                            {tab.id === 'brands' && <Tag className=\"w-4 h-4 mr-2\" />}\n                            {tab.id === 'productTypes' && <BarChart2 className=\"w-4 h-4 mr-2\" />}\n                            {tab.label}\n                            {activeTab === tab.id && (\n                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\" />\n                            )}\n                        </Button>\n                    ))}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                    <DatePickerWithRange\n                      \n                    />\n                    <Button variant=\"outline\" size=\"icon\">\n                        <Filter className={`h-4 w-4 ${filterApplied ? 'text-blue-600' : 'text-gray-600'}`} />\n                    </Button>\n                    <TooltipProvider>\n                        <Tooltip>\n                            <TooltipTrigger asChild>\n                                <Button variant=\"outline\" size=\"icon\" onClick={() => fetchTabData(activeTab, {}, false)}>\n                                    <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                </Button>\n                            </TooltipTrigger>\n                            {tabs.find(t => t.id === activeTab)?.lastUpdated && (\n                                <TooltipContent>\n                                    <p>Last updated: {new Date(tabs.find(t => t.id === activeTab)?.lastUpdated || 0).toLocaleString()}</p>\n                                </TooltipContent>\n                            )}\n                        </Tooltip>\n                    </TooltipProvider>\n                </div>\n            </div>\n\n            <div className='space-y-4'>\n                {filterApplied && (\n                    <div className=\"flex items-center gap-2 w-fit p-2 bg-blue-50 rounded-full\">\n                        <span className=\"text-xs font-medium text-blue-700\">{Object.entries(filterData).map(([key, value]) => `${key}: ${value}`).join(', ')}</span>\n                        <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => {\n                                setFilterApplied(false);\n                                setFilterData({});\n                                setActiveTab('products');\n                                cacheRef.current['products'] = null as any;\n                                fetchTabData('products', {}, false);\n                            }}\n                            className=\"text-blue-700 hover:text-blue-800 hover:bg-blue-100 p-1 h-auto\"\n                        >\n                            <X className=\"h-3 w-3\" />\n                        </Button>\n                    </div>\n                )}\n                <div className=\"rounded-md border border-gray-200 overflow-hidden\">\n                    <div className=\"max-h-[350px] overflow-auto\">\n                        {loading ? <TableSkeleton /> : (\n                            <table className=\"w-full\">\n                                <thead className=\"sticky top-0 z-10 bg-[#4A628A]\">\n                                    <tr>\n                                        {(activeTab === 'categories' ? categoryColumns : columns).map(column => (\n                                            <th key={column.id} className=\"px-4 py-3 text-left text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[150px] cursor-pointer\" onClick={() => handleSort(column.id)}>\n                                            <div className=\"flex items-center gap-1\">\n                                                {column.header}\n                                                {sortColumn === column.id ? (\n                                                    sortOrder === 'asc' ? <ArrowUp className=\"h-4 w-4\" /> : <ArrowDown className=\"h-4 w-4\" />\n                                                ) : (\n                                                    <ArrowUpDown className=\"h-4 w-4\" />\n                                                )}\n                                            </div>\n                                        </th>\n                                        ))}\n                                    </tr>\n                                </thead>\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\n                                    {activeTab === 'categories' ? (\n                                        tabs.find(tab => tab.id === 'categories')?.data.map((category: Category) =>\n                                            renderCategoryRow(category)\n                                        )\n                                    ) : (\n                                        data.map((row, i) => (\n                                            <tr key={i} className=\"hover:bg-gray-50\">\n                                                {columns.map((column) => {\n                                                    const value = column.cell(row[column.accessorKey]);\n                                                    const isIssuesColumn = column.id === 'issues';\n                                                    const isProductColumn = column.id === 'Products';\n                                                    const isStatusColumn = column.id === 'status';\n                                                    const isNoIssues = typeof value === 'string' && value.trim().toLowerCase() === 'no issues';\n\n                                                    const getStatusColor = (status: string) => {\n                                                        switch (status.trim().toUpperCase()) {\n                                                            case \"UNSPECIFIED\": return 'bg-gray-100 text-gray-800';\n                                                            case \"UNKNOWN\": return 'bg-yellow-100 text-yellow-800';\n                                                            case \"NOT_ELIGIBLE\": return 'bg-red-100 text-red-800';\n                                                            case \"ELIGIBLE_LIMITED\": return 'bg-orange-100 text-orange-800';\n                                                            case \"ELIGIBLE\": return 'bg-green-100 text-green-800';\n                                                            default: return 'bg-gray-100 text-gray-700';\n                                                        }\n                                                    };\n\n                                                    const renderCell = () => {\n                                                        if (isIssuesColumn) {\n                                                            return (\n                                                                <div className={`flex items-center ${isNoIssues ? 'text-green-600' : 'text-red-600'}`}>\n                                                                    {isNoIssues ? <CheckCircle className=\"w-4 h-4 mr-2\" /> : <AlertCircle className=\"w-4 h-4 mr-2\" />}\n                                                                    {value}\n                                                                </div>\n                                                            );\n                                                        }\n\n                                                        if (isStatusColumn) {\n                                                            const statusValue = value ? String(value) : '';\n                                                            const colorClass = getStatusColor(statusValue);\n                                                            return (\n                                                                <div className={`px-2 py-1.5 rounded-full text-xs font-medium w-full ${colorClass} cursor-pointer`} onClick={() => handleRowClick(activeTab, row)}>\n                                                                    {statusValue}\n                                                                </div>\n                                                            );\n                                                        }\n                                                        return column.cell ? column.cell(value) : value;\n                                                    };\n\n                                                    return (\n                                                        <td\n                                                            key={column.id}\n                                                            className={`px-4 py-2.5 text-sm whitespace-nowrap min-w-[150px] ${isProductColumn ? 'cursor-pointer text-blue-600 hover:text-blue-800' : ''}`}\n                                                            onClick={() => isProductColumn && handleRowClick(activeTab, row)}\n                                                        >\n                                                            {renderCell()}\n                                                        </td>\n                                                    );\n                                                })}\n                                            </tr>\n                                        ))\n                                    )}\n                                    {(activeTab === 'categories' ? tabs.find(tab => tab.id === 'categories')?.data.length === 0 : data.length === 0) && (\n                                        <tr>\n                                            <td\n                                                colSpan={(activeTab === 'categories' ? categoryColumns : columns).length}\n                                                className=\"px-4 py-2 text-sm text-gray-500 text-center\"\n                                            >\n                                                No data available\n                                            </td>\n                                        </tr>\n                                    )}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n                    <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 border-t border-gray-200\">\n                        <div className=\"text-sm text-gray-700\">\n                            Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, tabs.find(t => t.id === activeTab)?.data.length || 0)} of {tabs.find(t => t.id === activeTab)?.data.length || 0} entries\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                                disabled={currentPage === 1}\n                            >\n                                <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                                Previous\n                            </Button>\n                            <div className=\"text-sm text-gray-700\">\n                                Page {currentPage} of {totalPages}\n                            </div>\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n                                disabled={currentPage === totalPages}\n                            >\n                                Next\n                                <ChevronRight className=\"h-4 w-4 ml-1\" />\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    );\n};      ","import { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nexport const TableSkeleton = () => (\n    <Table className=\"text-center min-w-full\">\n      <TableHeader className=\"bg-gray-200 sticky top-0 z-10\">\n        <TableRow>\n          {Array(8).fill(0).map((_, index) => (\n            <TableCell key={index} className=\"font-bold px-4 text-black min-w-[150px]\">\n              <Skeleton className=\"h-6 w-full\" />\n            </TableCell>\n          ))}\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {Array(10).fill(0).map((_, rowIndex) => (\n          <TableRow key={rowIndex}>\n            {Array(8).fill(0).map((_, cellIndex) => (\n              <TableCell key={cellIndex} className=\"px-4 py-2 max-w-[200px]\">\n                <Skeleton className=\"h-6 w-full\" />\n              </TableCell>\n            ))}\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  )","import { GoogleLogo } from '@/data/logo';\nimport { useState, useEffect, useCallback, useMemo } from 'react'\nimport axios from 'axios'\nimport { useParams } from \"react-router-dom\";\nimport { ChevronLeft, ChevronRight, Search, Filter, RefreshCw, Zap, DollarSign, Percent, MousePointer, CreditCard, TrendingUp, Target, Users, Megaphone, ArrowUp, ArrowDown, ArrowUpDown } from 'lucide-react';\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { format } from \"date-fns\"\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\n\ninterface SearchTerm {\n  id: string;\n  searchTerm: string\n  matchType: string\n  status: string\n  campaignName: string\n  adGroup: string\n  impressions: number\n  clicks: number\n  ctr: string\n  cost: string\n  performance: string\n}\n\ninterface CampaignAdGroupPair {\n  campaignName: string;\n  adGroups: string[];\n}\n\nexport default function SearchTermTable() {\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\n  const { brandId } = useParams();\n  const [searchTerms, setSearchTerms] = useState<SearchTerm[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMoreData, setHasMoreData] = useState(true);\n  const [totalRecords, setTotalRecords] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const [campaignAdGroupPairs, setCampaignAdGroupPairs] = useState<CampaignAdGroupPair[]>([]);\n  const [selectedCampaign, setSelectedCampaign] = useState<string>('all');\n  const [statusOptions, setStatusOptions] = useState<[]>([]);\n  const [selectedAdGroup, setSelectedAdGroup] = useState<string>('all');\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const rowsPerPage = 100;\n\n  const columns = [\n    { id: 'searchTerm', header: 'Search Term', icon: <Search className=\"w-4 h-4\" /> },\n    { id: 'matchType', header: 'Match Type', icon: <Zap className=\"w-4 h-4\" /> },\n    { id: 'status', header: 'Status', icon: <Filter className=\"w-4 h-4\" /> },\n    { id: 'campaignName', header: 'Campaign Name', icon: <Megaphone className=\"w-4 h-4\" /> },\n    { id: 'adGroupName', header: 'Ad Group', icon: <Users className=\"w-4 h-4\" /> },\n    { id: 'cost', header: 'Cost', icon: <DollarSign className=\"w-4 h-4\" /> },\n    { id: 'conversions', header: 'Conversions', icon: <Target className=\"w-4 h-4\" /> },\n    { id: 'conversionsValue', header: 'Conv. Value', icon: <TrendingUp className=\"w-4 h-4\" /> },\n    { id: 'conversionsRate', header: 'Conv. Rate', icon: <Percent className=\"w-4 h-4\" /> },\n    { id: 'clicks', header: 'Clicks', icon: <MousePointer className=\"w-4 h-4\" /> },\n    { id: 'ctr', header: 'CTR', icon: <Percent className=\"w-4 h-4\" /> },\n    { id: 'avg_cpc', header: 'Avg. CPC', icon: <CreditCard className=\"w-4 h-4\" /> },\n  ]\n\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\n\n  const handleSort = (column: string) => {\n    if (sortColumn === column) {\n      setSortOrder(prevOrder => prevOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortOrder('asc');\n    }\n  };\n\n  const sortedSearchTerms = useMemo(() => {\n    if (!sortColumn) return searchTerms;\n\n    return [...searchTerms].sort((a, b) => {\n      const aValue = a[sortColumn as keyof SearchTerm];\n      const bValue = b[sortColumn as keyof SearchTerm];\n\n      // Handle numeric comparisons\n      if (typeof aValue === 'number' && typeof bValue === 'number') {\n        return sortOrder === 'asc' \n          ? aValue - bValue \n          : bValue - aValue;\n      }\n\n      // String comparison (case-insensitive)\n      const stringA = String(aValue).toLowerCase();\n      const stringB = String(bValue).toLowerCase();\n\n      if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\n      if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [searchTerms, sortColumn, sortOrder]);\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n      // Prepare request body\n      const requestBody = {\n        limit: rowsPerPage,\n        page: currentPage,\n        startDate,\n        endDate,\n        ...(selectedCampaign && selectedCampaign !== 'all' && { campaign: selectedCampaign }),\n        ...(selectedAdGroup && selectedAdGroup !== 'all' && { adGroup: selectedAdGroup }),\n        ...(selectedStatus && selectedStatus !== 'all' && { status: selectedStatus }),\n      };\n\n      // Make API request\n      const { data: response } = await axios.post(\n        `${baseURL}/api/segment/searchTermMetrics/${brandId}`,\n        requestBody,\n        { withCredentials: true }\n      );\n\n      if (response.success) {\n        // Set data in state\n        setSearchTerms(response.data);\n        setTotalRecords(response.totalRecords);\n        setTotalPages(response.totalPages);\n        setHasMoreData(currentPage * rowsPerPage < response.totalRecords);\n        setCampaignAdGroupPairs(response.campaignAdGroupPairs);\n        setStatusOptions(response.statusOptions)\n      } else {\n        console.error('Failed to fetch search term metrics:', response.message);\n      }\n\n    } catch (error) {\n      console.error('Error fetching search term metrics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [\n    baseURL,\n    brandId,\n    currentPage,\n    rowsPerPage,\n    selectedCampaign,\n    selectedAdGroup,\n    selectedStatus,\n    startDate,\n    endDate\n  ]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 300000);\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  const handleCampaignChange = (value: string) => {\n    setSelectedCampaign(value);\n    setSelectedAdGroup('all');\n    setCurrentPage(1)\n  };\n\n  const handleAdGroupChange = (value: string) => {\n    setSelectedAdGroup(value);\n    setCurrentPage(1)\n  };\n\n  const handleStatusChange = (value: string) => {\n    setSelectedStatus(value);\n    setCurrentPage(1)\n  };\n\n  const filteredAdGroups = selectedCampaign !== 'all'\n    ? campaignAdGroupPairs?.find(pair => pair.campaignName === selectedCampaign)?.adGroups || []\n    : [];\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"flex flex-row gap-2 items-center mb-4\">\n        <GoogleLogo />\n        <h1 className=\"text-xl font-bold text-gray-800\">Google Ads Search Term Insights</h1>\n      </div>\n      <div className=\"bg-white rounded-xl overflow-hidden border border-gray-200 shadow-md\">\n        <div className=\"p-4\">\n          <div className=\"flex justify-between mb-4\">\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button variant=\"outline\" className=\"bg-white border-gray-300 hover:bg-gray-50 transition-colors duration-200\">\n                  <Filter className=\"w-4 h-4 mr-2\" />\n                  Filter\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-80\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"font-medium mb-2\">Status</h3>\n                    <Select onValueChange={handleStatusChange} value={selectedStatus}>\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Select Status\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">All Status</SelectItem>\n                        {statusOptions.map((status) => (\n                          <SelectItem key={status} value={status}>{status}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <h3 className=\"font-medium mb-2\">Campaign</h3>\n                    <Select onValueChange={handleCampaignChange} value={selectedCampaign}>\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Select Campaign\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">All Campaigns</SelectItem>\n                        {campaignAdGroupPairs.map((pair) => (\n                          <SelectItem key={pair.campaignName} value={pair.campaignName}>{pair.campaignName}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  {selectedCampaign !== 'all' && (\n                    <div>\n                      <h3 className=\"font-medium mb-2\">Ad Group</h3>\n                      <Select\n                        disabled={selectedCampaign === 'all'}\n                        onValueChange={handleAdGroupChange}\n                        value={selectedAdGroup}\n                      >\n                        <SelectTrigger className=\"w-full\">\n                          <SelectValue placeholder=\"Select Ad Group\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"all\">All Ad Groups</SelectItem>\n                          {filteredAdGroups.map((adGroup) => (\n                            <SelectItem key={adGroup} value={adGroup}>{adGroup}</SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  )}\n                </div>\n              </PopoverContent>\n            </Popover>\n            <div className=\"flex items-center space-x-4\">\n              <DatePickerWithRange\n              \n              />\n              <Button\n                variant=\"outline\"\n                className=\"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100\"\n                onClick={fetchData}\n              >\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                Refresh\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"rounded-md border border-gray-200 overflow-hidden\">\n            <div className=\"max-h-[380px] overflow-auto rounded-lg\">\n              {loading ? (\n                <TableSkeleton />\n              ) : (\n                <table className=\"w-full text-center\">\n                  <thead className=\"sticky top-0 z-10 bg-[#4A628A] rounded-t-lg\">\n                    <tr>\n                      {columns.map((column) => (\n                        <th\n                          key={column.id}\n                          className=\"px-4 py-3 text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[200px] cursor-pointer\"\n                          onClick={() => handleSort(column.id)}\n                        >\n                          <div className=\"flex items-center justify-center gap-1\">\n                            {column.icon}\n                            {column.header}\n                            {sortColumn === column.id ? (\n                              sortOrder === 'asc' ? <ArrowUp className=\"ml-1 w-4 h-6 text-[#ffffff]\" /> : <ArrowDown className=\"ml-1 w-4 h-6 text-[#ffffff]\" />\n                            ) : (\n                              <ArrowUpDown className=\"ml-1 w-4 h-6 text-gray-300\" />\n                            )}\n                          </div>\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {sortedSearchTerms.map((row, i) => (\n                      <tr key={i} className=\"hover:bg-gray-50 transition-colors duration-150\">\n                        {columns.map((column) => {\n                          const value = row[column.id as keyof SearchTerm];\n                          const isStatusColumn = column.id === 'status';\n                          const isSearchTermColumn = column.id === 'searchTerm'\n\n                          const renderCell = () => {\n                            if (isStatusColumn) {\n                              const statusValue = value ? String(value) : '';\n                              const getStatusColor = (status: string) => {\n                                switch (status.trim().toUpperCase()) {\n                                  case 'ADDED':\n                                    return 'bg-green-100 text-green-800';\n                                  case 'NONE':\n                                    return 'bg-yellow-100 text-yellow-800';\n                                  default:\n                                    return 'bg-gray-100 text-gray-800';\n                                }\n                              };\n                              const colorClass = getStatusColor(statusValue);\n\n                              return (\n                                <div className={`px-2 py-1 rounded-full text-xs font-medium ${colorClass}`}>\n                                  {statusValue}\n                                </div>\n                              );\n                            }\n\n                            if (isSearchTermColumn) {\n                              const searchTermValue = value ? String(value) : '';\n                              const performance = row.performance;\n                              const isPerformingWell = performance === 'Best Performing Keyword';\n\n                              return (\n                                <div className=\"px-2 py-1 rounded-full font-medium flex flex-col items-center\">\n                                  <span className={`text-xs ${isPerformingWell ? 'text-green-600' : 'text-red-600'}`}>\n                                    {performance}\n                                  </span>\n                                  <span className=\"text-sm mt-1\">{searchTermValue}</span>\n                                </div>\n                              );\n                            }\n\n                            return value;\n                          };\n\n                          return (\n                            <td\n                              key={column.id}\n                              className=\"px-4 py-2.5 text-sm min-w-[200px]\"\n                            >\n                              {renderCell()}\n                            </td>\n                          );\n                        })}\n                      </tr>\n                    ))}\n                    {searchTerms.length === 0 && (\n                      <tr>\n                        <td\n                          colSpan={columns.length}\n                          className=\"px-4 py-2 text-sm text-gray-500 text-center\"\n                        >\n                          No data available\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              )}\n            </div>\n            <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50\">\n              <div className=\"text-sm text-gray-600\">\n                Showing {((currentPage - 1) * rowsPerPage) + 1} to{' '}\n                {Math.min(currentPage * rowsPerPage, totalRecords || 0)} of{' '}\n                {totalRecords || 0} entries\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\n                  disabled={currentPage === 1}\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\n                >\n                  <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                  Previous\n                </Button>\n                <div className=\"text-sm text-gray-600\">\n                  Page {currentPage} of {totalPages}\n                </div>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage((prev) => prev + 1)}\n                  disabled={!hasMoreData}\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\n                >\n                  Next\n                  <ChevronRight className=\"h-4 w-4 ml-1\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import ProductTab from \"./component/ProductTab\";\nimport SearchTermTable from \"./component/SearchTermTable\";\nimport { useParams } from 'react-router-dom'\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\n\n\nexport default function Dashboard() {\n  const { brandId } = useParams()\n    if (!brandId) {\n        console.error(\"Brand ID is not defined\");\n        return <div>Error: Brand ID is missing</div>;\n    }\n\n  return (\n    <div className=\"bg-gray-100 min-h-screen overflow-hidden\">\n       <nav className=\"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\n          <h1 className=\"text-2xl font-bold\">Segment Dashboard</h1>\n      \n        <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                  \n                    \n                  />\n                </div>\n                </div>\n      </nav>\n      <div className=\"flex flex-col p-6 gap-6 overflow-auto\">\n      <ProductTab />\n      <SearchTermTable />\n  </div>\n  \n    </div>\n  )\n}","import React from \"react\";\nimport Dashboard from \"./Dashboard\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\n const SegmentDashboard : React.FC=()=>{\n    return (\n        <div className=\"flex h-screen\"> \n        <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n       <Dashboard />\n      </div>\n    </div>\n    );\n}\nexport default SegmentDashboard;","import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useToast } from '../hooks/use-toast';\nimport { useDispatch } from 'react-redux';\nimport { setUser } from '@/store/slices/UserSlice'\nimport { setBrands , setSelectedBrandId } from '@/store/slices/BrandSlice'\nimport { resetAllTokenErrors } from '@/store/slices/TokenSllice'\n\nconst GoogleCallback = () => {\n    const navigate = useNavigate();\n    const { toast } = useToast();\n    const dispatch = useDispatch();\n    const baseURL = import.meta.env.PROD\n        ? import.meta.env.VITE_API_URL\n        : import.meta.env.VITE_LOCAL_API_URL;\n\n    useEffect(() => {\n        const handleOauthCallback = async () => {\n            try {\n                const queryParams = new URLSearchParams(window.location.search);\n                const googletoken = queryParams.get('token');\n                const fbToken = queryParams.get('fbToken');\n                const googleAdRefreshToken = queryParams.get('googleadRefreshToken');\n                const googleAnalyticsRefreshToken = queryParams.get('googleanalyticsRefreshToken');\n                const zohoRefreshToken = queryParams.get('zohoToken');\n                const userId = queryParams.get('userId');\n                const appToken = queryParams.get('shopify_token');\n                \n\n                // Helper function for token update\n                const updateToken = async (url: string, token: string, type: string) => {\n                    try {\n                        const response = await axios.put(\n                            `${baseURL}${url}/${type}`,\n                            {}, // Empty body since we're using query params\n                            { \n                                params: { [type]: token },\n                                withCredentials: true \n                            }\n                        );\n                        \n                        if (response.data.success) {\n                            console.log(`${type} token updated successfully`);\n                            // Reset all token errors when a token is successfully updated\n                            dispatch(resetAllTokenErrors());\n                            \n                            if (type === \"zohoToken\") {\n                                console.log(\"Zoho token updated, redirecting to /profile\");\n                                navigate('/profile');\n                            } else {\n                                const sourcePage = queryParams.get('source') || '/dashboard';\n                                let modalToOpen = '';\n                                \n                                // Determine which modal to open based on token type\n                                switch(type) {\n                                    case 'googleadRefreshToken':\n                                        modalToOpen = 'googleAds';\n                                        break;\n                                    case 'googleanalyticsRefreshToken':\n                                        modalToOpen = 'googleAnalytics';\n                                        break;\n                                    case 'fbToken':\n                                        modalToOpen = 'facebook';\n                                        break;\n                                }\n                                \n                                // Show success toast\n                                toast({\n                                    title: 'Success',\n                                    description: `${type} token updated successfully.`,\n                                    variant: 'default',\n                                });\n                                \n                                // Redirect to the source page with modal parameter if applicable\n                                if (modalToOpen) {\n                                    navigate(`${sourcePage}?openModal=${modalToOpen}`);\n                                } else {\n                                    navigate(sourcePage);\n                                }\n                                return true;\n                            }\n                            return true;\n                        } else {\n                            console.error(`Failed to update ${type} token`);\n                            toast({\n                                title: 'Update Failed',\n                                description: `Unable to update ${type} token.`,\n                                variant: 'destructive',\n                            });\n                            navigate('/dashboard');\n                            return false;\n                        }\n                    } catch (error: any) {\n                        console.error(`Error updating ${type} token:`, error);\n                        toast({\n                            title: 'Update Failed',\n                            description: error?.response?.data?.message || `Unable to update ${type} token.`,\n                            variant: 'destructive',\n                        });\n                        navigate('/');\n                        return false;\n                    }\n                };\n\n                if (googletoken) {\n                    console.log('Token found, proceeding with login');\n                    const login = await axios.post(`${baseURL}/api/auth/login/oauth?auth_token=${googletoken}`, { email: null, password: null });\n\n                    if (login.data.success) {\n                        console.log('Login successful');\n                        const user = login.data.user;\n\n                        dispatch(setUser(user));\n\n                        if (!user.brands || user.brands.length === 0) {\n                            console.log('No brands found, redirecting to /first-time-brand-setup');\n                            navigate('/first-time-brand-setup');\n                        } else {\n                            console.log('Brands found, redirecting to /dashboard');\n                            navigate('/dashboard');\n                        }\n                        return;\n                    } else {\n                        console.log('Login failed, redirecting to /');\n                        toast({\n                            title: 'Login Failed',\n                            description: 'Unable to authenticate with Google.',\n                            variant: 'destructive',\n                        });\n                        navigate('/');\n                        return;\n                    }\n                }\n\n\n                if (fbToken) {\n                    await updateToken('/api/auth/updateTokens', fbToken, 'fbToken');\n                    return;\n                }\n\n                if (googleAdRefreshToken) {\n                    await updateToken('/api/auth/updateTokens', googleAdRefreshToken, 'googleadRefreshToken');\n                    return;\n                }\n\n                if (googleAnalyticsRefreshToken) {\n                    await updateToken('/api/auth/updateTokens', googleAnalyticsRefreshToken, 'googleanalyticsRefreshToken');\n                    return;\n                }\n\n                if (zohoRefreshToken) {\n                    await updateToken('/api/auth/updateTokens/zoho', zohoRefreshToken, 'zohoToken');\n                    return;\n                }\n\n                if (userId && appToken) {\n                    console.log('Token found, proceeding with user saving');\n                    const getUser = await axios.get(`${baseURL}/api/users/getuser/${userId}?token=${appToken}`);\n\n                    if (getUser.data.success) {\n                        const user = getUser.data.user;\n                        const brands = getUser.data.brands;\n\n                        console.log(\"User brands:\", user.brands); \n                        console.log(\"Brands data:\", brands);\n\n                        dispatch(setUser(user));\n                        dispatch(setBrands(brands));\n                        dispatch(setSelectedBrandId(brands[0]._id));\n                        if (!user.brands || user.brands.length === 0) {\n                            console.log('No brands found, redirecting to /brand-setup');\n                            navigate('/brand-setup');\n                        } else {\n                            console.log('Brands found, redirecting to /dashboard');\n                            navigate('/dashboard');\n                        }\n                        return;\n                    } else {\n                        console.log('Login failed, redirecting to /login');\n                        toast({\n                            title: 'Login Failed',\n                            description: 'Unable to authenticate with Google.',\n                            variant: 'destructive',\n                        });\n                        navigate('/login');\n                        return;\n                    }\n                }\n\n                console.log('No token present, redirecting to /login');\n                navigate('/login');\n\n            } catch (error) {\n                console.error('Error during OAuth callback:', error);\n                toast({\n                    title: 'Error',\n                    description: 'An error occurred while handling the login callback.',\n                    variant: 'destructive',\n                });\n                navigate('/login');\n            }\n        };\n\n        handleOauthCallback();\n    }, [navigate, setUser, toast, baseURL]);\n\n\n    return null;\n};\n\nexport default GoogleCallback;","import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { cn } from \"@/lib/utils\"\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from \"@radix-ui/react-icons\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRightIcon className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <CheckIcon className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <DotFilledIcon className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","import { useState, useEffect } from 'react'\nimport { Filter } from 'lucide-react'\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\"\n\nexport interface FilterItem {\n  column: string\n  operator: '>' | '<' | '=' \n  value: string\n}\n\ninterface FilterComponentProps {\n  columns: string[],\n  filters: FilterItem[];\n  setFilters: (filters: FilterItem[]) => void;\n  onFiltersChange: (filters: FilterItem[]) => void\n}\n\nexport function FilterComponent({ columns, onFiltersChange,filters,setFilters }: FilterComponentProps) {\n  const [filterColumn, setFilterColumn] = useState<string>('')\n  const [filterOperator, setFilterOperator] = useState<FilterItem['operator']>('>')\n  const [filterValue, setFilterValue] = useState<string>('')\n\n  useEffect(() => {\n    onFiltersChange(filters)\n  }, [filters, onFiltersChange])\n\n  const addFilter = () => {\n    if (filterColumn && filterValue) {\n      setFilters([...filters, { column: filterColumn, operator: filterOperator, value: filterValue }])\n      setFilterColumn('')\n      setFilterValue('')\n    }\n  }\n\n  return (\n    <div>\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" size={\"icon\"}>\n            <Filter className=\"h-4 w-4\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent className=\"w-80 p-4\">\n          <div className=\"flex flex-col gap-4\">\n            <Select value={filterColumn} onValueChange={(value) => {\n              setFilterColumn(value)\n            }}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select column\" />\n              </SelectTrigger>\n              <SelectContent>\n                {columns.map((column) => (\n                  <SelectItem key={column} value={column}>{column}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={filterOperator} onValueChange={(value) => setFilterOperator(value as FilterItem['operator'])}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select operator\" />\n              </SelectTrigger>\n              <SelectContent>\n\n                    <SelectItem value=\">\">Greater than</SelectItem>\n                    <SelectItem value=\"<\">Less than</SelectItem>\n                    <SelectItem value=\"=\">Equal to</SelectItem>\n            \n            \n              </SelectContent>\n            </Select>\n            <Input\n              type=\"text\"\n              placeholder=\"Enter filter value\"\n              value={filterValue}\n              onChange={(e) => setFilterValue(e.target.value)}\n            />\n            <Button onClick={addFilter}>Add Filter</Button>\n          </div>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  )\n}","import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport { ArrowUp, ArrowDown, ChevronsLeft, ChevronRight, ChevronsRight, ChevronLeft, GripVertical } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface TableProps {\n  columns: string[];\n  data: any[];\n  isFullScreen?: boolean;\n}\n\nconst getConditionalColors = (value: number, average: number) => {\n  const epsilon = 0.0001;\n\n  if (value > average) return 'bg-green-100 text-green-800';\n  if (value < average) return 'bg-red-50 text-red-800';\n  if (Math.abs(value - average) < epsilon) return 'bg-yellow-100 text-yellow-700';\n\n  return 'bg-yellow-100 text-yellow-700';\n};\n\nconst NewReportTable: React.FC<TableProps> = ({\n  columns = [],\n  data = [],\n  isFullScreen,\n}) => {\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\n    const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\n    const [columnWidths, setColumnWidths] = useState<number[]>([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [loadedRows, setLoadedRows] = useState<any[]>([]);\n    const [columnOrder, setColumnOrder] = useState<string[]>(columns);\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n    \n  \n    const rowsPerChunk = 30;\n    const rowsPerPage = 9;\n    const minColumnWidth = isFullScreen ? 100 : 150;\n  \n    const tableRef = useRef<HTMLTableElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const widthsRef = useRef<number[]>([]);\n  \n    const comparisonColumns = ['Add To Cart Rate', 'Checkout Rate', 'Purchase Rate', 'Sessions'];\n\n    useEffect(() => {\n      setColumnOrder(columns);\n    }, [columns]);\n  \n    const handleDragStart = (e: React.DragEvent, column: string) => {\n      setDraggedColumn(column);\n      e.dataTransfer.effectAllowed = 'move';\n    };\n  \n    const handleDragOver = (e: React.DragEvent) => {\n      e.preventDefault();\n      e.dataTransfer.dropEffect = 'move';\n    };\n  \n    const handleDrop = (e: React.DragEvent, targetColumn: string) => {\n      e.preventDefault();\n      if (!draggedColumn || draggedColumn === targetColumn) return;\n  \n      const newOrder = [...columnOrder];\n      const draggedIdx = newOrder.indexOf(draggedColumn);\n      const targetIdx = newOrder.indexOf(targetColumn);\n  \n      newOrder.splice(draggedIdx, 1);\n      newOrder.splice(targetIdx, 0, draggedColumn);\n  \n      setColumnOrder(newOrder);\n      setDraggedColumn(null);\n    };\n\n    const parsePercentage = (value: string | number): number => {\n        // If value is already a number, return it\n        if (typeof value === 'number') return value;\n        \n        // If value is undefined or null, return 0\n        if (!value) return 0;\n        \n        // If value is string, remove % and convert to number\n        return parseFloat(value.replace('%', '').trim()) || 0;\n      };\n\n  useEffect(() => {\n    if (containerRef.current) {\n      const containerWidth = containerRef.current.clientWidth;\n      const totalColumns = columns.length;\n      \n      let initialWidths: number[];\n      if (isFullScreen) {\n        const equalWidth = Math.max(minColumnWidth, Math.floor(containerWidth / totalColumns));\n        initialWidths = columns.map(() => equalWidth);\n      } else {\n        initialWidths = columns.map((_, index) => \n          index === 0 ? 160 : 150\n        );\n      }\n      \n      setColumnWidths(initialWidths);\n      widthsRef.current = initialWidths;\n    }\n  }, [columns.length, isFullScreen]);\n\n \n\n\n\n  const averageValues = useMemo(() => {\n    const averages: Record<string, number> = {};\n    comparisonColumns.forEach((key) => {\n      const validData = data.filter(item => item[key] !== undefined && !isNaN(parsePercentage(item[key] || '0')));\n      const average = validData.length > 0\n        ? validData.reduce((sum, item) => sum + parsePercentage(item[key] || '0'), 0) / validData.length\n        : 0;\n\n      averages[key] = key === 'Sessions' ? Math.round(average) : parseFloat(average.toFixed(2));\n    });\n    return averages;\n  }, [data]);\n\n\n\n  const parsedData = useMemo(() =>\n    data.map((item) => ({\n      ...item,\n      Sessions: Number(item?.Sessions || 0),\n      'Add To Cart Rate': parsePercentage(item?.['Add To Cart Rate'] || '0'),\n      'Checkout Rate': parsePercentage(item?.['Checkout Rate'] || '0'),\n      'Purchase Rate': parsePercentage(item?.['Purchase Rate'] || '0'),\n    })), [data]);\n\n    const sortedData = useMemo(() => {\n        if (!sortColumn) return parsedData;\n      \n        return [...parsedData].sort((a, b) => {\n          const aValue = a[sortColumn];\n          const bValue = b[sortColumn];\n      \n          if (sortColumn === 'Date') {\n            const parseDateString = (dateStr: string) => {\n              const [day, month, year] = dateStr.split('-');\n              return new Date(`${year}-${month}-${day}`);\n            };\n      \n            const aDate = parseDateString(aValue);\n            const bDate = parseDateString(bValue);\n      \n            return sortDirection === 'asc'\n              ? aDate.getTime() - bDate.getTime()\n              : bDate.getTime() - aDate.getTime();\n          }\n      \n          // Handle numeric sorting for other columns\n          const aNum = typeof aValue === 'number'\n            ? aValue\n            : parseFloat((aValue || '0').toString().replace('%', '').trim());\n          const bNum = typeof bValue === 'number'\n            ? bValue\n            : parseFloat((bValue || '0').toString().replace('%', '').trim());\n      \n          if (aNum < bNum) return sortDirection === 'asc' ? -1 : 1;\n          if (aNum > bNum) return sortDirection === 'asc' ? 1 : -1;\n          return 0;\n        });\n      }, [parsedData, sortColumn, sortDirection]);\n\n  const isNumericColumn = (column: string) => {\n    return [\n      'Date',\n\n    ].includes(column);\n  };\n\n  const handleSort = (column: string) => {\n    if (!isNumericColumn(column)) return;\n  \n    if (sortColumn === column) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortDirection('asc');\n    } \n  };\n\n  useEffect(() => {\n    if (isFullScreen) {\n      setLoadedRows(sortedData.slice(0, rowsPerChunk));\n    }\n  }, [isFullScreen, sortedData, rowsPerChunk]);\n\n  const loadMoreRows = () => {\n    if (isFullScreen && loadedRows.length < sortedData.length) {\n      const nextChunk = sortedData.slice(\n        loadedRows.length,\n        loadedRows.length + rowsPerChunk\n      );\n      setLoadedRows(prev => [...prev, ...nextChunk]);\n    }\n  };\n\n  const handleScroll = (event: React.UIEvent<HTMLDivElement, UIEvent>) => {\n    const target = event.currentTarget;\n    if (target.scrollHeight - target.scrollTop <= target.clientHeight + 100) {\n      loadMoreRows();\n    }\n  };\n\n  const displayRows = useMemo(() => {\n    if (isFullScreen) {\n      return loadedRows;\n    }\n    return sortedData.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage);\n  }, [isFullScreen, loadedRows, sortedData, currentPage, rowsPerPage]);\n\n  const pageCount = Math.ceil(sortedData.length / rowsPerPage);\n\n  const goToPage = (page: number) => {\n    const pageNumber = Math.max(1, Math.min(page, pageCount));\n    setCurrentPage(pageNumber);\n  };\n\n  const columnPairs = {\n    'Add To Cart': 'Add To Cart Rate',\n    'Checkouts': 'Checkout Rate',\n    'Purchases': 'Purchase Rate'\n  };\n  const renderHeader = (column: string, colIndex: number) => {\n    const isComparisonCol = comparisonColumns.includes(column);\n\n    return (\n      <th\n        key={column}\n        className={`\n          relative font-bold p-1 text-gray-800 text-sm border-b-2\n          capitalize border-r border-gray-300\n          ${isNumericColumn(column) ? 'cursor-pointer' : ''}\n          ${colIndex === 0 && !isFullScreen ? 'sticky left-0 z-30 bg-gray-100' : ''}\n          ${draggedColumn === column ? 'opacity-50' : ''}\n          hover:bg-gray-200 transition-colors duration-200\n        `}\n        style={{\n          width: colIndex === 0 ? '180px' : `${columnWidths[colIndex]}px`,\n        }}\n        draggable\n        onDragStart={(e) => handleDragStart(e, column)}\n        onDragOver={handleDragOver}\n        onDrop={(e) => handleDrop(e, column)}\n      >\n        <div onClick={() => handleSort(column)} className=\"flex flex-col items-center\">\n          <div  className=\"flex items-center justify-center gap-2 mb-1\">\n            <GripVertical className=\"w-4 h-4 text-gray-400 cursor-grab\" />\n            <span >{column}</span>\n            {isNumericColumn(column) && (\n              <span className=\"ml-2\">\n                {sortColumn === column ? (\n                  sortDirection === 'asc' ? (\n                    <ArrowUp className=\"w-4 h-4 text-blue-600\" />\n                  ) : (\n                    <ArrowDown className=\"w-4 h-4 text-blue-600\" />\n                  )\n                ) : (\n                  \"\"\n                )}\n              </span>\n            )}\n          </div>\n          {isComparisonCol && averageValues[column] !== undefined && (\n            <span className=\"text-xs text-gray-500\">\n              avg: {column === 'Sessions'\n                ? Math.round(averageValues[column])\n                : averageValues[column]?.toFixed(2)}\n              {column !== 'Sessions' ? '%' : ''}\n            </span>\n          )}\n        </div>\n      </th>\n    );\n  };\n\n  return (\n    <>\n      <div\n        ref={containerRef}\n        className=\"rounded-md overflow-x-auto relative border\"\n        style={{\n          width: '100%',\n          maxHeight: isFullScreen ? 'calc(100vh - 105px)' : 'calc(100vh - 200px)',\n          overflowX: isFullScreen ? 'hidden' : 'auto',\n        }}\n        onScroll={isFullScreen ? handleScroll : undefined}\n      >\n        <table\n          ref={tableRef}\n          className=\"w-full text-center shadow-lg rounded-lg border border-gray-200\"\n          style={{\n            tableLayout: 'fixed',\n            width: isFullScreen ? '100%' : 'auto',\n            borderCollapse: 'separate',\n            borderSpacing: 0,\n          }}\n        >\n          <thead className=\"bg-gray-100\">\n            <tr>\n              {columnOrder.map((column, index) => renderHeader(column, index))}\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {displayRows.map((item, rowIndex) => (\n              <tr\n                key={rowIndex}\n                className={`${\n                  rowIndex % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n                } hover:bg-gray-100 transition-colors duration-200`}\n              >\n                {columnOrder.map((column, colIndex) => {\n                  const cellValue = item[column];\n                  const isComparisonColumn = comparisonColumns.includes(column);\n                  const isPairedColumn = column in columnPairs;\n\n                  let colorClass = 'text-gray-800';\n                  if (isComparisonColumn) {\n                    colorClass = getConditionalColors(cellValue as number, averageValues[column]);\n                  } else if (isPairedColumn) {\n                    const rateColumn = columnPairs[column as keyof typeof columnPairs];\n                    const rateValue = item[rateColumn] as number;\n                    colorClass = getConditionalColors(rateValue, averageValues[rateColumn]);\n                  }\n\n                  return (\n                    <td\n                      key={`${rowIndex}-${column}`}\n                      className={`p-3 text-sm font-normal border-r border-gray-300 ${colorClass} ${\n                        colIndex === 0 && !isFullScreen\n                          ? 'sticky left-0 z-20 bg-inherit'\n                          : ''\n                      }`}\n                      style={{\n                        width: colIndex === 0 ? '150px' : `${columnWidths[colIndex]}px`,\n                      }}\n                    >\n                      <div className=\"flex items-center justify-center gap-2\">\n                        {column.includes('Rate')\n                          ? `${(cellValue as number).toFixed(2)}%`\n                          : cellValue}\n                      </div>\n                    </td>\n                  );\n                })}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n      \n      {!isFullScreen && (\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4\">\n          <div className=\"text-sm text-muted-foreground\">\n          Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, sortedData.length)} of {sortedData.length} entries\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => goToPage(1)}\n              disabled={currentPage === 1}\n            >\n              <ChevronsLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => goToPage(currentPage - 1)}\n              disabled={currentPage === 1}\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex items-center justify-center text-sm font-medium\">\n              Page {currentPage} of {pageCount}\n            </div>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => goToPage(currentPage + 1)}\n              disabled={currentPage === pageCount}\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => goToPage(pageCount)}\n              disabled={currentPage === pageCount}\n            >\n              <ChevronsRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>)}\n    </>\n  );\n};\n\nexport default React.memo(NewReportTable);","import * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <Cross2Icon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","import React, { useState } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetTrigger } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Search, Settings2, GripVertical, Pin, PinOff } from \"lucide-react\";\n\ninterface ColumnManagementSheetProps {\n  visibleColumns: string[];\n  columnOrder: string[];\n  frozenColumns?: string[];\n  onVisibilityChange: (columns: string[]) => void;\n  onOrderChange: (order: string[]) => void;\n  onFrozenChange?: (columns: string[]) => void;\n}\n\nconst ColumnManagementSheet: React.FC<ColumnManagementSheetProps> = ({ \n  visibleColumns, \n  columnOrder,\n  frozenColumns = [],\n  onVisibilityChange,\n  onOrderChange,\n  onFrozenChange\n}) => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n  const [dropTargetColumn, setDropTargetColumn] = useState<string | null>(null);\n\n  const filteredColumns = columnOrder.filter(column =>\n    column.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleDragStart = (column: string) => {\n    setDraggedColumn(column);\n  };\n\n  const handleDragOver = (e: React.DragEvent, column: string) => {\n    e.preventDefault();\n    if (column !== draggedColumn) {\n      setDropTargetColumn(column);\n    }\n  };\n\n  const handleDrop = (targetColumn: string) => {\n    if (!draggedColumn || draggedColumn === targetColumn) return;\n\n    const newOrder = [...columnOrder];\n    const draggedIdx = newOrder.indexOf(draggedColumn);\n    const targetIdx = newOrder.indexOf(targetColumn);\n\n    newOrder.splice(draggedIdx, 1);\n    newOrder.splice(targetIdx, 0, draggedColumn);\n\n    onOrderChange(newOrder);\n    setDraggedColumn(null);\n    setDropTargetColumn(null);\n  };\n\n  const toggleColumnVisibility = (column: string) => {\n    const newVisibleColumns = visibleColumns.includes(column)\n      ? visibleColumns.filter(col => col !== column)\n      : [...visibleColumns, column];\n    onVisibilityChange(newVisibleColumns);\n  };\n\n  const toggleColumnFreeze = (column: string) => {\n    if (!onFrozenChange || column === 'Campaign') return; // Campaign column is always frozen\n    \n    const newFrozenColumns = frozenColumns.includes(column)\n      ? frozenColumns.filter(col => col !== column)\n      : [...frozenColumns, column];\n    onFrozenChange(newFrozenColumns);\n  };\n\n  return (\n    <Sheet>\n      <SheetTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"ml-2\">\n          <Settings2 className=\"w-4 h-4 mr-2\" />\n          Manage Columns\n        </Button>\n      </SheetTrigger>\n      <SheetContent className=\"w-[400px] sm:w-[540px]\">\n        <SheetHeader>\n          <SheetTitle>Column Management</SheetTitle>\n          <SheetDescription>\n            Select columns to display, drag to reorder, and pin columns to freeze them\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"mt-4 space-y-4\">\n          <div className=\"flex items-center space-x-2 px-1\">\n            <Search className=\"w-4 h-4 text-slate-400\" />\n            <Input\n              placeholder=\"Search columns...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"h-8\"\n            />\n          </div>\n          \n          <div className=\"max-h-[calc(100vh-200px)] overflow-y-auto\">\n            {filteredColumns.map(column => (\n              <div\n                key={column}\n                draggable\n                onDragStart={() => handleDragStart(column)}\n                onDragOver={(e) => handleDragOver(e, column)}\n                onDrop={() => handleDrop(column)}\n                className={`flex items-center space-x-3 p-3 border-b border-slate-200 hover:bg-slate-50 cursor-move\n                  ${dropTargetColumn === column ? 'bg-slate-100' : ''}`}\n              >\n                <GripVertical className=\"w-4 h-4 text-slate-400\" />\n                <Checkbox\n                  id={`col-${column}`}\n                  checked={visibleColumns.includes(column)}\n                  onCheckedChange={() => toggleColumnVisibility(column)}\n                />\n                <label\n                  htmlFor={`col-${column}`}\n                  className=\"flex-1 text-sm font-medium leading-none cursor-pointer\"\n                >\n                  {column}\n                </label>\n                {onFrozenChange && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={`px-2 ${column === 'Campaign' ? 'opacity-50 cursor-not-allowed' : ''}`}\n                    onClick={() => toggleColumnFreeze(column)}\n                    disabled={column === 'Campaign'}\n                  >\n                    {frozenColumns.includes(column) || column === 'Campaign' ? (\n                      <Pin className=\"w-4 h-4 text-blue-500\" />\n                    ) : (\n                      <PinOff className=\"w-4 h-4\" />\n                    )}\n                  </Button>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default ColumnManagementSheet;\n","import { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { useParams } from 'react-router-dom';\nimport { format } from \"date-fns\";\nimport { RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport { Button } from \"@/components/ui/button\";\n\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\"\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\"\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport NewReportTable from \"./NewReportTable\";\nimport ColumnManagementSheet from \"@/pages/AnalyticsDashboard/Components/ColumnManagementSheet\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ninterface EcommerceMetric {\n  \"Date\": string\n  \"Add To Carts\": string\n  \"Checkout\": string\n  \"Sessions\": string\n  \"Purchases\": string\n  \"Purchase Rate\": string\n  \"Add To Cart Rate\": string\n  \"Checkout Rate\": string\n}\n\ninterface EcommerceMetricsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst EcommerceMetricsPage: React.FC<EcommerceMetricsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const compareFrom = useSelector((state: RootState) => state.date.compareFrom);\n  const compareTo = useSelector((state: RootState) => state.date.compareTo);\n  \n  const [filteredData, setFilteredData] = useState<EcommerceMetric[]>([]);\n  const [data, setData] = useState<EcommerceMetric[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const { brandId } = useParams();\n\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const compareDate = useMemo(() => ({\n    from: compareFrom,\n    to: compareTo\n  }), [compareFrom, compareTo]);\n\n  const startDate = date?.from ? format(new Date(date.from), \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(new Date(date.to), \"yyyy-MM-dd\") : \"\";\n  const compareStartDate = compareDate?.from ? format(new Date(compareDate.from), \"yyyy-MM-dd\") : \"\";\n  const compareEndDate = compareDate?.to ? format(new Date(compareDate.to), \"yyyy-MM-dd\") : \"\";\n  \n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\n  const [filters, setFilters] = useState<FilterItem[]>([]);\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const dispatch = useDispatch();\n  const axiosInstance = createAxiosInstance();\n\n\n  // Consolidate date range effects\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\n      }));\n    }\n  }, [propDateRange, dispatch]);\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const fetchMetrics = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const dateRanges = [];\n\n      // Always add primary date range\n      if (startDate && endDate) {\n        dateRanges.push({ \n          startDate: startDate, \n          endDate: endDate \n        });\n      }\n\n      // Add comparison date range if available and compare is enabled\n      if (compareStartDate && compareEndDate) {\n        dateRanges.push({\n          startDate: compareStartDate,\n          endDate: compareEndDate\n        });\n      }\n\n      // Only fetch if we have at least one date range\n      if (dateRanges.length > 0) {\n        const DailyAnalyticsResponse = await axiosInstance.post(\n          `/api/analytics/atcreport/${brandId}`,\n          {\n            dateRanges: dateRanges,\n          },\n          { withCredentials: true }\n        );\n\n        const fetchedRanges = DailyAnalyticsResponse.data.ranges || [];\n    \n        // More flexible data handling\n        if (fetchedRanges.length > 0) {\n          // Check if the first range contains daily data or consolidated data\n          const isConsolidatedData = fetchedRanges[0].Date \n          \n          if (isConsolidatedData) {\n            // Consolidated data scenario\n            setData(fetchedRanges);\n            setFilteredData(fetchedRanges);\n          } else {\n            // Daily data scenario\n            setData(fetchedRanges[0]?.data || []);\n            setFilteredData(fetchedRanges[0]?.data || []);\n          }\n\n          // Update columns intelligently\n          const firstRangeData = isConsolidatedData ? fetchedRanges : (fetchedRanges[0]?.data || []);\n          if (firstRangeData.length > 0) {\n            const firstItem = firstRangeData[0];\n            const allColumns = Object.keys(firstItem);\n            \n            if (selectedColumns.length === 0) {\n              setSelectedColumns(allColumns);\n            } else {\n              setSelectedColumns((prevSelected) =>\n                prevSelected.filter((col) => allColumns.includes(col))\n              );\n            }\n          }\n        }\n      }\n\n    } catch (error) {\n      console.error('Error fetching e-commerce metrics data:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [startDate, endDate, compareStartDate, compareEndDate, brandId]);\n\n  // Consolidate to single useEffect for fetching metrics\n  useEffect(() => {\n    fetchMetrics();\n    const intervalId = setInterval(fetchMetrics, 15 * 60 * 1000);\n    return () => clearInterval(intervalId);\n  }, [fetchMetrics]);\n\n  const handleManualRefresh = () => {\n    fetchMetrics();\n  };\n\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(selectedColumns);\n  const [columnOrder, setColumnOrder] = useState<string[]>(selectedColumns);\n\n  const handleVisibilityChange = (columns: string[]) => {\n    setVisibleColumns(columns);\n  };\n  \n  const handleOrderChange = (newOrder: string[]) => {\n    setColumnOrder(newOrder);\n    setVisibleColumns(newOrder);\n  };\n  \n  useEffect(() => {\n    setVisibleColumns(selectedColumns);\n    setColumnOrder(selectedColumns);\n  }, [selectedColumns]);\n\n  const applyFilters = useCallback((filters: FilterItem[]) => {\n    let result = [...data];\n\n    filters.forEach(filter => {\n      result = result.filter(item => {\n        const value = item[filter.column as keyof EcommerceMetric] as string;\n        if (['>', '<', '='].includes(filter.operator)) {\n          const numValue = parseFloat(value);\n          const filterValue = parseFloat(filter.value);\n          switch (filter.operator) {\n            case '>': return numValue > filterValue;\n            case '<': return numValue < filterValue;\n            case '=': return numValue === filterValue;\n            default: return true;\n          }\n        }\n        return true; // Default case\n      });\n    });\n\n    setFilteredData(result);\n  }, [data]);\n\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\n\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\n  \n  const removeFilter = (index: number) => {\n    setFilters(filters.filter((_, i) => i !== index));\n  };\n\n  if(isLoading){\n    return <Loader isLoading={isLoading} />\n  }\n\n  return (\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n        <div className=\"space-y-4\">\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n            <div className=\"flex items-center gap-3\">\n              <h2 className=\"text-lg font-medium\">Daily E-Commerce Analytics</h2>\n              <Ga4Logo />\n            </div>\n            <div className=\"flex flex-wrap items-center gap-3\">\n              {isFullScreen && <DatePickerWithRange />}\n              <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\n                <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\n              </Button>\n              <ColumnManagementSheet\n                visibleColumns={visibleColumns}\n                columnOrder={columnOrder}\n                onVisibilityChange={handleVisibilityChange}\n                onOrderChange={handleOrderChange}\n              />\n              <FilterComponent\n                columns={numericColumns}\n                onFiltersChange={applyFilters}\n                filters={filters}\n                setFilters={setFilters}\n              />\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n          </div>\n\n          {filters.length > 0 && (\n            <div className=\"flex flex-wrap gap-2\">\n              {filters.map((filter, index) => (\n                <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\n                  <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\n                  <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n\n          <div className=\"rounded-md overflow-hidden\">\n            {isLoading ? (\n              <TableSkeleton />\n            ) : (\n              <NewReportTable columns={columnOrder} data={memoizedFilteredData} isFullScreen={isFullScreen} />\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EcommerceMetricsPage;","import { useState } from 'react';\nimport { AlertTriangle, BarChart3, LineChart, TrendingUp, ArrowRight, Facebook, PieChart } from 'lucide-react';\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\n\nconst platformConfigs = {\n  'google analytics': {\n    title: \"Google analytics\",\n    description: \"Unlock powerful insights for your store\",\n    icon: <PieChart className=\"h-16 w-16 text-blue-500 animate-bounce\" />,\n    benefits: [\n      {\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\n        title: \"Real-time Analytics\",\n        description: \"Track visitor behavior as it happens\"\n      },\n      {\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\n        title: \"Performance Metrics\",\n        description: \"Monitor your store's key metrics\"\n      },\n      {\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\n        title: \"Growth Insights\",\n        description: \"Make data-driven decisions\"\n      }\n    ],\n    buttonText: \"Connect GA4 Now\",\n    guideText: \"Need help setting up GA4?\"\n  },\n  'google ads': {\n    title: \"Google Ads\",\n    description: \"Supercharge your advertising performance\",\n    icon: <AlertTriangle className=\"h-16 w-16 text-red-500 animate-bounce\" />,\n    benefits: [\n      {\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\n        title: \"Campaign Tracking\",\n        description: \"Monitor ad performance in real-time\"\n      },\n      {\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\n        title: \"Conversion Analytics\",\n        description: \"Track ROI and conversions\"\n      },\n      {\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\n        title: \"Budget Optimization\",\n        description: \"Optimize spending across campaigns\"\n      }\n    ],\n    buttonText: \"Connect Google Ads\",\n    guideText: \"New to Google Ads?\"\n  },\n  facebook: {\n    title: \"Facebook Ads\",\n    description: \"Scale your social media advertising\",\n    icon: <Facebook className=\"h-16 w-16 text-blue-600 animate-bounce\" />,\n    benefits: [\n      {\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\n        title: \"Audience Insights\",\n        description: \"Understand your target audience\"\n      },\n      {\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\n        title: \"Ad Performance\",\n        description: \"Track engagement and reach\"\n      },\n      {\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\n        title: \"ROAS Tracking\",\n        description: \"Measure advertising return\"\n      }\n    ],\n    buttonText: \"Connect Facebook Ads\",\n    guideText: \"First time with Facebook Ads?\"\n  }\n};\n\ntype PlatformKeys = 'google analytics' | 'google ads' | 'facebook';\n\ninterface ConnectPlatformProps {\n  platform?: PlatformKeys;\n  brandId: string;\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\n}\n\nconst ConnectPlatform: React.FC<ConnectPlatformProps> = ({ \n  platform = 'google analytics',\n  brandId,\n  onSuccess \n}) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const config = platformConfigs[platform];\n\n  const handleConnect = () => {\n    setIsModalOpen(true);\n  };\n\n  return (\n    <>\n      <div className=\"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex items-center justify-center p-4\">\n        <div className=\"max-w-3xl mx-auto w-full space-y-8\">\n          {/* Header Section */}\n          <div className=\"text-center space-y-4\">\n            <div className=\"flex justify-center\">\n              {config.icon}\n            </div>\n            <h1 className=\"text-4xl font-bold tracking-tight\">Connect {config.title}</h1>\n            <p className=\"text-xl text-muted-foreground\">\n              {config.description}\n            </p>\n          </div>\n\n          {/* Main Content */}\n          <Card className=\"p-6 bg-card/50 backdrop-blur-sm\">\n            <div className=\"space-y-6\">\n              <p className=\"text-lg text-center\">\n                You haven't connected {config.title} yet. You're missing out on valuable insights about your store's performance!\n              </p>\n\n              {/* Benefits Grid */}\n              <div className=\"grid md:grid-cols-3 gap-4 my-8\">\n                {config.benefits.map((benefit, index) => (\n                  <div key={index} className=\"flex flex-col items-center text-center p-4 space-y-2\">\n                    {benefit.icon}\n                    <h3 className=\"font-semibold\">{benefit.title}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{benefit.description}</p>\n                  </div>\n                ))}\n              </div>\n\n              {/* CTA Button */}\n              <div className=\"flex justify-center\">\n                <Button \n                  size=\"lg\" \n                  className=\"group\"\n                  onClick={handleConnect}\n                >\n                  {config.buttonText}\n                  <ArrowRight className=\"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\n                </Button>\n              </div>\n            </div>\n          </Card>\n\n          {/* Footer Note */}\n          <p className=\"text-center text-sm text-muted-foreground\">\n            {config.guideText}{\" \"}\n            <a href=\"#\" className=\"text-primary hover:underline\">\n              Check out our guide\n            </a>\n          </p>\n        </div>\n      </div>\n\n      <PlatformModal\n        platform={platform}\n        open={isModalOpen}\n        onOpenChange={setIsModalOpen}\n        brandId={brandId}\n        onSuccess={onSuccess}\n      />\n    </>\n  );\n};\n\nexport default ConnectPlatform;","import { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { useParams } from 'react-router-dom';\nimport { format } from \"date-fns\";\nimport {  RefreshCw, X, Maximize, Minimize } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport { Button } from \"@/components/ui/button\";\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\"\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { FilterComponent, FilterItem } from \"@/components/dashboard_component/FilterReport\"\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport NewReportTable from \"./NewReportTable\";\nimport ColumnManagementSheet from \"@/pages/AnalyticsDashboard/Components/ColumnManagementSheet\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ninterface DaywiseMetric {\n  \"Day\": string\n  \"Add To Carts\": string\n  \"Checkout\": string\n  \"Sessions\": string\n  \"Purchases\": string\n  \"Purchase Rate\": string\n  \"Add To Cart Rate\": string\n  \"Checkout Rate\": string\n}\n\n  \ninterface DaywiseMetricProps {\n  dateRange: DateRange | undefined;\n}\n\nconst DaywiseMetricsPage: React.FC<DaywiseMetricProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const [filteredData, setFilteredData] = useState<DaywiseMetric[]>([]);\n  const [data, setData] = useState<DaywiseMetric[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const { brandId } = useParams();\n\n  \n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n  const [selectedColumns, setSelectedColumns] = useState<string[]>([]);\n  const [filters, setFilters] = useState<FilterItem[]>([]);\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  \n  const dispatch = useDispatch();\n  const axiosInstance = createAxiosInstance();\n \n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(selectedColumns);\n  const [columnOrder, setColumnOrder] = useState<string[]>(selectedColumns);\n\n  const handleVisibilityChange = (columns: string[]) => {\n    setVisibleColumns(columns);\n  };\n  \n  const handleOrderChange = (newOrder: string[]) => {\n    setColumnOrder(newOrder);\n    setVisibleColumns(newOrder); // Ensure visibleColumns is also updated\n  };\n  \n  useEffect(() => {\n    setVisibleColumns(selectedColumns);\n    setColumnOrder(selectedColumns);\n  }, [selectedColumns]);\n\n  const fetchMetrics = useCallback(async () => {\n    setIsLoading(true);\n    try {\n\n      const DailyAnalyticsResponse = await axiosInstance.post(\n        `/api/analytics/dayAtcReport/${brandId}`,\n        {\n          startDate: startDate,\n          endDate: endDate,\n        },\n        { withCredentials: true }\n      );\n\n      const fetchedData = DailyAnalyticsResponse.data.data || [];\n      setData(fetchedData);\n      setFilteredData(fetchedData);\n\n      if (fetchedData.length > 0) {\n        if (selectedColumns.length === 0) {\n          const allColumns = Object.keys(fetchedData[0]);\n          setSelectedColumns(allColumns);\n        } else {\n          const newColumns = Object.keys(fetchedData[0]);\n          setSelectedColumns((prevSelected) =>\n            prevSelected.filter((col) => newColumns.includes(col))\n          );\n        }\n      }\n\n    } catch (error) {\n      console.error('Error fetching day wise metrics data:', error);\n     \n    } finally {\n      setIsLoading(false);\n    }\n  }, [startDate, endDate, brandId]);\n\n  useEffect(() => {\n    fetchMetrics();\n    const intervalId = setInterval(fetchMetrics, 3* 60 * 60 * 1000);\n    return () => clearInterval(intervalId);\n  }, [fetchMetrics]);\n\n  const handleManualRefresh = () => {\n    fetchMetrics();\n  };\n\n\n  const applyFilters = useCallback((filters: FilterItem[]) => {\n    let result = [...data];\n    \n    filters.forEach(filter => {\n      result = result.filter(item => {\n        const value = item[filter.column as keyof DaywiseMetric] as string;\n        if (['>', '<', '='].includes(filter.operator)) {\n          const numValue = parseFloat(value);\n          const filterValue = parseFloat(filter.value);\n          switch (filter.operator) {\n            case '>': return numValue > filterValue;\n            case '<': return numValue < filterValue;\n            case '=': return numValue === filterValue;\n            default: return true;\n          }\n        }\n        return true; // Default case\n      });\n    });\n\n    setFilteredData(result); // Update filtered data\n  }, [data]);\n\n  const memoizedFilteredData = useMemo(() => filteredData, [filteredData]);\n\n  const numericColumns = ['Add To Cart', 'Checkouts', 'Sessions', 'Purchases', 'Purchase Rate', 'Add To Cart Rate', 'Checkout Rate'];\n  const removeFilter = (index: number) => {\n    setFilters(filters.filter((_, i) => i !== index));\n  };\n  if(isLoading){\n    return <Loader isLoading={isLoading} />\n  }\n  return (\n    <Card className={`mx-4 ${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n    <CardContent >\n      <div className=\"space-y-4\">\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Day wise E-Commerce Analytics</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n            \n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                   \n                  />\n                </div>}\n            <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\n            </Button>\n            <ColumnManagementSheet\n                visibleColumns={visibleColumns}\n                columnOrder={columnOrder}\n                onVisibilityChange={handleVisibilityChange}\n                onOrderChange={handleOrderChange}\n              />\n            <FilterComponent\n              columns={numericColumns}\n              onFiltersChange={applyFilters}\n              filters={filters}\n              setFilters={setFilters}\n            />\n             <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n\n          </div>\n        </div>\n\n        {filters.length > 0 && (\n          <div className=\"flex flex-wrap gap-2\">\n            {filters.map((filter, index) => (\n              <div key={index} className=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\n                <span>{`${filter.column} ${filter.operator} ${filter.value}`}</span>\n                <button onClick={() => removeFilter(index)} className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" aria-label=\"Remove filter\">\n                  <X className=\"h-3 w-3\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <div className=\"rounded-md overflow-hidden\">\n          {isLoading ? (\n            <TableSkeleton />\n          ) : (\n            <NewReportTable columns={columnOrder} data={memoizedFilteredData} isFullScreen={isFullScreen} />\n          )}\n        </div>\n      </div>\n    </CardContent>\n  </Card>\n  );\n};\n\nexport default DaywiseMetricsPage;","\"use client\"\n\nimport { useRef, useState, useEffect } from \"react\"\nimport { ChevronLeft, ChevronRight, Search, ChevronsUpDown, X } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { cn } from \"@/lib/utils\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\n\ninterface HorizontalTabsProps {\n  tabs: {\n    label: string\n    value: string\n  }[]\n  activeTab: string\n  onTabChange: (value: string) => void\n}\n\nexport function CustomTabs({ tabs, activeTab, onTabChange }: HorizontalTabsProps) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const [showLeftArrow, setShowLeftArrow] = useState(false)\n  const [showRightArrow, setShowRightArrow] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [isSearchOpen, setIsSearchOpen] = useState(false)\n\n  const filteredTabs = tabs.filter((tab) => tab.label.toLowerCase().includes(searchQuery.toLowerCase()))\n\n\n  const checkScrollPosition = () => {\n    if (!scrollContainerRef.current) return\n\n    const { scrollLeft, scrollWidth, clientWidth } = scrollContainerRef.current\n    setShowLeftArrow(scrollLeft > 0)\n    setShowRightArrow(scrollLeft < scrollWidth - clientWidth - 5) \n  }\n\n\n  useEffect(() => {\n    if (!scrollContainerRef.current) return\n\n    const activeTabElement = scrollContainerRef.current.querySelector(`[data-value=\"${activeTab}\"]`) as HTMLElement\n    if (activeTabElement) {\n      const container = scrollContainerRef.current\n      const containerRect = container.getBoundingClientRect()\n      const tabRect = activeTabElement.getBoundingClientRect()\n\n      const scrollLeft =\n        tabRect.left - containerRect.left - containerRect.width / 2 + tabRect.width / 2 + container.scrollLeft\n\n      container.scrollTo({\n        left: scrollLeft,\n        behavior: \"smooth\",\n      })\n    }\n\n    checkScrollPosition()\n  }, [activeTab])\n\n\n  useEffect(() => {\n    const container = scrollContainerRef.current\n    if (container) {\n      container.addEventListener(\"scroll\", checkScrollPosition)\n \n      checkScrollPosition()\n\n      return () => {\n        container.removeEventListener(\"scroll\", checkScrollPosition)\n      }\n    }\n  }, [])\n\n\n  const handleScroll = (direction: \"left\" | \"right\") => {\n    if (!scrollContainerRef.current) return\n\n    const container = scrollContainerRef.current\n    const scrollAmount = container.clientWidth * 0.8\n\n    container.scrollBy({\n      left: direction === \"left\" ? -scrollAmount : scrollAmount,\n      behavior: \"smooth\",\n    })\n  }\n\n  return (\n    <div className=\"relative w-full\">\n      <div className=\"flex items-center\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={cn(\n            \"flex-shrink-0 rounded-full h-8 w-8 bg-white shadow-sm transition-opacity\",\n            showLeftArrow ? \"opacity-100\" : \"opacity-0 pointer-events-none\",\n          )}\n          onClick={() => handleScroll(\"left\")}\n        >\n          <ChevronLeft className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Scroll left</span>\n        </Button>\n\n\n        <div\n          ref={scrollContainerRef}\n          className=\"flex-1 overflow-x-auto scrollbar-hide\"\n          style={{ scrollbarWidth: \"none\", msOverflowStyle: \"none\" }}\n        >\n          <div className=\"flex items-center justify-center gap-1 p-1 min-w-max\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.value}\n                data-value={tab.value}\n                className={cn(\n                  \"px-4 py-2 text-sm rounded-md whitespace-nowrap transition-colors\",\n                  tab.value === activeTab ? \"bg-blue-100 text-blue-700 font-medium\" : \"text-gray-700 hover:bg-gray-100\",\n                )}\n                onClick={() => onTabChange(tab.value)}\n              >\n                {tab.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Right scroll button */}\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={cn(\n            \"flex-shrink-0 rounded-full h-8 w-8 bg-white shadow-sm transition-opacity\",\n            showRightArrow ? \"opacity-100\" : \"opacity-0 pointer-events-none\",\n          )}\n          onClick={() => handleScroll(\"right\")}\n        >\n          <ChevronRight className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Scroll right</span>\n        </Button>\n\n        {/* Search popover */}\n        <Popover open={isSearchOpen} onOpenChange={setIsSearchOpen}>\n          <PopoverTrigger asChild>\n            <Button variant=\"outline\" size=\"icon\" className=\"ml-2 flex-shrink-0\">\n              <Search className=\"h-4 w-4\" />\n              <span className=\"sr-only\">Search tabs</span>\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-64 p-0\" align=\"end\">\n            <div className=\"p-2\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search tabs...\"\n                  className=\"pl-9 pr-8\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  autoFocus\n                />\n                {searchQuery && (\n                  <button\n                    className=\"absolute right-2.5 top-2.5 text-gray-400 hover:text-gray-600\"\n                    onClick={() => setSearchQuery(\"\")}\n                  >\n                    <X className=\"h-4 w-4\" />\n                    <span className=\"sr-only\">Clear search</span>\n                  </button>\n                )}\n              </div>\n            </div>\n            <div className=\"max-h-60 overflow-y-auto border-t\">\n              {filteredTabs.length > 0 ? (\n                filteredTabs.map((tab) => (\n                  <button\n                    key={tab.value}\n                    className={cn(\n                      \"w-full text-left px-4 py-2 text-sm transition-colors\",\n                      tab.value === activeTab ? \"bg-blue-50 text-blue-600 font-medium\" : \"hover:bg-gray-50\",\n                    )}\n                    onClick={() => {\n                      onTabChange(tab.value)\n                      setIsSearchOpen(false)\n                      setSearchQuery(\"\")\n                    }}\n                  >\n                    {tab.label}\n                  </button>\n                ))\n              ) : (\n                <div className=\"py-4 px-2 text-center text-sm text-gray-500\">No tabs match your search</div>\n              )}\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        {/* Dropdown for all tabs */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" size=\"icon\" className=\"ml-2 flex-shrink-0\">\n              <ChevronsUpDown className=\"h-4 w-4\" />\n              <span className=\"sr-only\">All tabs</span>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-56 max-h-80 overflow-y-auto\">\n            {tabs.map((tab) => (\n              <DropdownMenuItem\n                key={tab.value}\n                className={cn(tab.value === activeTab && \"bg-blue-50 text-blue-600 font-medium\")}\n                onClick={() => onTabChange(tab.value)}\n              >\n                {tab.label}\n              </DropdownMenuItem>\n            ))}\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </div>\n  )\n}\n","import { CalendarIcon, AlertTriangle, Clock } from \"lucide-react\"\nimport { DatePickerWithRange } from \"./DatePickerWithRange\"\n\nexport default function MissingDateWarning() {\n\n    return (\n        <div className=\"min-h-screen bg-slate-50 p-6 overflow-hidden relative  flex justify-center items-center\">\n\n            <div className=\"max-w-3xl mx-auto relative\">\n                {/* Warning header */}\n                <div className=\"mb-8 text-center\">\n                    <div className=\"inline-flex items-center justify-center gap-2 mb-4 bg-amber-100 px-4 py-2 rounded-full\">\n                        <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\n                        <span className=\"text-amber-700 font-semibold text-sm\">Action Required</span>\n                    </div>\n\n                    <h1 className=\"text-3xl md:text-4xl font-bold text-slate-800 mb-3\">\n                        Date Range <span className=\"text-amber-500\">Missing</span>\n                    </h1>\n\n                    <p className=\"text-slate-600 max-w-xl mx-auto\">\n                        Please select a date range to continue. We need this information to display your data correctly.\n                    </p>\n                </div>\n\n                {/* Main warning card */}\n                <div className=\"bg-white rounded-xl shadow-md border-l-4 border-amber-400 overflow-hidden\">\n                    <div className=\"p-6\">\n                        <div className=\"space-y-6\">\n                            {/* Date picker */}\n                            <div className=\"bg-slate-50 rounded-lg p-4 border border-slate-200\">\n                                <div className=\"flex items-center justify-between mb-4\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <CalendarIcon className=\"h-5 w-5 text-slate-500\" />\n                                        <h3 className=\"font-medium text-slate-700\">Select Dates</h3>\n                                    </div>\n\n                                    <div className=\"text-xs text-slate-500 flex items-center gap-1\">\n                                        <Clock className=\"h-3 w-3\" />\n                                        <span>Last 24 months available</span>\n                                    </div>\n                                </div>\n\n                                <DatePickerWithRange />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import { AlertCircle, Mail, ArrowRight } from 'lucide-react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport axios from 'axios';\n\n\ninterface NoAccessPageProps {\n  platform: string;\n  message: string;\n  icon?: React.ReactNode;\n  loginOptions: {\n    label: string;\n    context?: string;\n    provider: 'google' | 'facebook';\n  }[];\n}\n\nfunction NoAccessPage({ \n  platform, \n  message, \n  icon = <Mail className=\"w-8 h-8 text-red-600\" />,\n  loginOptions \n}: NoAccessPageProps) {\n  const user = useSelector((state: RootState) => state.user.user);\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\n  \n  const handleLogin = async (provider: string, context?: string) => {\n    try {\n      let response;\n      \n      if (provider === 'google') {\n        response = await axios.get(\n          `${baseURL}/api/auth/google${context ? `?context=${context}` : ''}&source=${encodeURIComponent(window.location.pathname)}`, \n          { withCredentials: true }\n        );\n        const { authUrl } = response.data;\n        window.location.href = authUrl;\n      } else if (provider === 'facebook') {\n        response = await axios.get(\n          `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \n          { withCredentials: true }\n        );\n        if (response.data.success) {\n          window.location.href = response.data.authURL;\n        }\n      }\n    } catch (error) {\n      console.error(`Error getting ${provider} Auth URL:`, error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8\">\n        {/* Header Section */}\n        <div className=\"text-center mb-8\">\n          <div className=\"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n            {icon}\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            Hey there!\n          </h1>\n          <p className=\"text-gray-600\">\n            {message}\n          </p>\n        </div>\n\n\n        {user?.email && (\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-amber-500 mt-0.5\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Currently signed in as:</p>\n                <p className=\"font-medium text-gray-900\">{user.email}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          <p className=\"text-sm text-gray-600\">\n            Just a quick update to your {platform} token is needed to continue.\n          </p>\n          \n          {loginOptions.map((option, index) => (\n            <button \n              key={index}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 group\"\n              onClick={() => handleLogin(option.provider, option.context)}\n            >\n              {option.label}\n              <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default NoAccessPage;","import React, { useEffect, useMemo, useState } from 'react';\nimport EcommerceMetricsPage from '@/pages/ReportPage/component/EcommerceMetricsPage';\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\nimport { TableSkeleton } from '@/components/dashboard_component/TableSkeleton';\nimport { useParams } from 'react-router-dom';\nimport { ChartBar, ShoppingCart } from 'lucide-react';\nimport { selectGoogleAnalyticsTokenError } from '@/store/slices/TokenSllice';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport ConnectPlatform from './ConnectPlatformPage';\nimport Header from '@/components/dashboard_component/Header';\nimport DaywiseMetricsPage from './component/DaywiseMetricsPage';\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs';\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\nimport { resetAllTokenErrors } from '@/store/slices/TokenSllice';\nimport { useDispatch } from 'react-redux';\nimport Footer from '../LandingPage/components/Footer';\n\nconst ReportsPage: React.FC = () => {\n  const isLoading = false;\n  const { brandId } = useParams<{ brandId: string }>();\n  const brands = useSelector((state: RootState) => state.brand.brands);\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  \n  const googleAnalyticsTokenError = useSelector(selectGoogleAnalyticsTokenError);\n  \n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const dateRange = {\n    from: date.from ? new Date(date.from) : undefined,\n    to: date.to ? new Date(date.to) : undefined\n  }\n  const [activeTab, setActiveTab] = useState('daily');\n\n  const tabs = [\n    { label: 'Daily Metrics', value: 'daily' },\n    { label: 'Day wise Metrics', value: 'day wise' },\n  ];\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n  };\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (hasGA4Account) {\n      googleAnalyticsTokenError && dispatch(resetAllTokenErrors());\n    }\n  }, [hasGA4Account]);\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        {googleAnalyticsTokenError ? (\n          <NoAccessPage\n            platform=\"Google Analytics\"\n            message=\"We need access to your Google Analytics account to show you amazing insights about your website performance.\"\n            icon={<ChartBar className=\"w-8 h-8 text-blue-600\" />}\n            loginOptions={[\n              {\n                label: \"Connect Google Analytics\",\n                context: \"googleAnalyticsSetup\",\n                provider: \"google\"\n              }\n            ]}\n          />\n        ) : !hasGA4Account ? (\n          <>\n            <ConnectPlatform\n              platform=\"google analytics\"\n              brandId={brandId ?? ''}\n              onSuccess={(platform, accountName, accountId) => {\n                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n              }} \n            /> \n          </>\n        ) : (!dateRange.from || !dateRange.to) ? (\n          <MissingDateWarning />\n        ) : (\n          <>\n            <Header title='E-Commerce Insights' Icon={ShoppingCart} showDatePicker={true} />\n            <div className=\"bg-white px-6 sticky top-0 z-10\">\n              <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\n            </div>\n            {isLoading ? (\n              <TableSkeleton />\n            ) : (\n              <section className=\"my-3\">\n                {activeTab === 'daily' && (\n                  <EcommerceMetricsPage dateRange={dateRange} />\n                )}\n                {activeTab === 'day wise' && (\n                  <DaywiseMetricsPage dateRange={dateRange} />\n                )}\n              </section>\n            )}\n          </>\n        )}\n        <Footer />\n      </div>\n      <HelpDeskModal />\n    </div>\n  );\n};\n\nexport default ReportsPage;","import React, { createContext, useContext, useState } from \"react\";\n\ninterface TokenErrorContextType {\n  tokenError: boolean;\n  setTokenError: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst TokenErrorContext = createContext<TokenErrorContextType>({\n  tokenError: false,\n  setTokenError: () => {}\n});\n\nexport const TokenErrorProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [tokenError, setTokenError] = useState(false);\n\n  return (\n    <TokenErrorContext.Provider value={{ tokenError, setTokenError }}>\n      {children}\n    </TokenErrorContext.Provider>\n  );\n};\n\nexport const useTokenError = () => useContext(TokenErrorContext);\n","import { Button } from \"@/components/ui/button\"\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from \"lucide-react\"\nimport { useMemo, useState, useEffect } from \"react\"\nimport { COLORS } from \"@/data/constant\"\n\nexport interface MonthlyData {\n  Month: string\n  [key: string]: number | string\n}\n\nexport interface RowData {\n  [key: string]: number | string | MonthlyData[]\n}\n\ninterface ConversionTableProps {\n  data: RowData[]\n  primaryColumn: string\n  secondaryColumns?: string[]\n  monthlyDataKey: string\n  monthlyMetrics: string[]\n  isFullScreen: boolean\n  rows?: number\n  isAdsTable?: boolean\n  locale: string\n  filter?: string[] // Add filter prop for filtering rows\n}\n\nexport default function ConversionTable({\n  data,\n  primaryColumn,\n  secondaryColumns,\n  monthlyDataKey,\n  monthlyMetrics,\n  isFullScreen,\n  rows,\n  isAdsTable, \n  locale,\n  filter,\n}: ConversionTableProps) {\n  const [currentPage, setCurrentPage] = useState(1)\n  const [loadedRows, setLoadedRows] = useState<Array<{ dataIndex: number; metricIndex: number }>>([])\n  const rowsPerPage = rows ? rows : 8\n  const rowsPerChunk = 30\n\n  const filteredData = useMemo(() => {\n    let dataToProcess = data;\n    if (filter && filter.length > 0) {\n      dataToProcess = data.filter(row => {\n        const primaryValue = String(row[primaryColumn]);\n        return filter.includes(primaryValue);\n      });\n    }\n    return dataToProcess;\n  }, [data, filter, primaryColumn]);\n\n  const getTableHeight = () => {\n    if (isFullScreen) {\n      if (isAdsTable) {\n        return \"max-h-[calc(100vh-90px)]\"\n      }\n      return \"max-h-[calc(100vh-130px)]\"\n    }\n    return \"max-h-[450px]\"\n  }\n\n  const months = useMemo(() => {\n    if (!Array.isArray(filteredData)) {\n      console.error(\"Data is not an array:\", filteredData)\n      return []\n    }\n\n    const getMonthName = (monthNumber: string): string => {\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n      return months[Number.parseInt(monthNumber) - 1]\n    }\n\n    const allMonths = new Set<string>()\n    filteredData.forEach((row) => {\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\n      if (Array.isArray(monthlyData)) {\n        monthlyData.forEach((month) => {\n          if (month?.Month) {\n            const year = month.Month.slice(0, 4)\n            const monthNum = month.Month.slice(4)\n            allMonths.add(`${getMonthName(monthNum)}-${year}`)\n          }\n        })\n      }\n    })\n    return Array.from(allMonths).reverse()\n  }, [filteredData, monthlyDataKey])\n\n  const allRows = useMemo(() => {\n    const rows: Array<{ dataIndex: number; metricIndex: number }> = []\n    filteredData.forEach((_, dataIndex) => {\n      monthlyMetrics.forEach((_, metricIndex) => {\n        rows.push({ dataIndex, metricIndex })\n      })\n    })\n    return rows\n  }, [filteredData, monthlyMetrics])\n\n  const loadMoreRows = () => {\n    setLoadedRows((prevRows) => [...prevRows, ...allRows.slice(prevRows.length, prevRows.length + rowsPerChunk)])\n  }\n\n  useEffect(() => {\n    if (isFullScreen) {\n      setLoadedRows(allRows.slice(0, rowsPerChunk))\n    }\n  }, [isFullScreen, allRows])\n\n  const handleScroll = (event: React.UIEvent<HTMLDivElement, UIEvent>) => {\n    const { scrollTop, scrollHeight, clientHeight } = event.currentTarget\n    if (scrollHeight - scrollTop <= clientHeight + 100) {\n      loadMoreRows()\n    }\n  }\n\n  const displayRows = useMemo(() => {\n    if (isFullScreen) {\n      return loadedRows\n    }\n    return allRows.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage)\n  }, [isFullScreen, allRows, loadedRows, currentPage, rowsPerPage])\n\n  const thresholds = useMemo(() => {\n    let totalSessions = 0,\n      totalConvRate = 0,\n      totalMonths = 0\n    let totalSpend = 0,\n      totalPurchaseROAS = 0,\n      spendMonths = 0\n    let totalCost = 0,\n      totalConvValuePerCost = 0,\n      costMonths = 0\n\n    data.forEach((row) => {\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\n      console.log(monthlyData)\n      \n      if (Array.isArray(monthlyData)) {\n        monthlyData.forEach((month) => {\n          // Sessions and Conversion Rate\n          if (typeof month[\"Sessions\"] === \"number\" && typeof month[\"Conv. Rate\"] === \"number\") {\n            totalSessions += Number(month[\"Sessions\"])\n            totalConvRate += Number(month[\"Conv. Rate\"])\n            totalMonths++\n          }\n\n          // Spend and Purchase ROAS\n          if (typeof month[\"Spend\"] === \"number\" && typeof month[\"Purchase ROAS\"] === \"number\") {\n            totalSpend += Number(month[\"Spend\"])\n            totalPurchaseROAS += Number(month[\"Purchase ROAS\"])\n            spendMonths++\n          }\n\n          // Cost and Conv. Value/Cost\n          if (typeof month[\"Cost\"] === \"number\" && typeof month[\"Conv. Value/ Cost\"] === \"number\") {\n            totalCost += Number(month[\"Cost\"])\n            totalConvValuePerCost += Number(month[\"Conv. Value/ Cost\"])\n            costMonths++\n          }\n        })\n      }\n    })\n\n    return {\n      avgSessions: totalMonths > 0 ? totalSessions / totalMonths : 0,\n      avgConvRate: totalMonths > 0 ? totalConvRate / totalMonths : 0,\n      avgSpend: spendMonths > 0 ? totalSpend / spendMonths : 0,\n      avgPurchaseROAS: spendMonths > 0 ? totalPurchaseROAS / spendMonths : 0,\n      avgCost: costMonths > 0 ? totalCost / costMonths : 0,\n      avgConvValuePerCost: costMonths > 0 ? totalConvValuePerCost / costMonths : 0,\n    }\n  }, [data, monthlyDataKey]) // Only depend on original data, not filteredData\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      setCurrentPage(1)\n    }\n  }, [isFullScreen])\n\n  // Reset pagination when filter changes\n  useEffect(() => {\n    setCurrentPage(1)\n    setLoadedRows([])\n  }, [filter])\n\n  const getMetricColor = ({\n    sessions,\n    convRate,\n    spend,\n    purchaseROAS,\n    cost,\n    convValuePerCost,\n  }: {\n    sessions?: number\n    convRate?: number\n    spend?: number\n    purchaseROAS?: number\n    cost?: number\n    convValuePerCost?: number\n  }) => {\n    const isHighSessions = sessions !== undefined && sessions >= thresholds.avgSessions\n    const isGoodConversion = convRate !== undefined && convRate >= thresholds.avgConvRate\n    const isHighSpent = spend !== undefined && spend >= thresholds.avgSpend\n    const isGoodROAS = purchaseROAS !== undefined && purchaseROAS >= thresholds.avgPurchaseROAS\n    const isHighCost = cost !== undefined && cost >= thresholds.avgCost\n    const isGoodConvValuePerCost = convValuePerCost !== undefined && convValuePerCost >= thresholds.avgConvValuePerCost\n\n    // Prioritizing Sessions & Conversion Rate\n    if (isHighSessions && isGoodConversion)\n      return {\n        bg: COLORS.success.bg,\n        text: COLORS.success.dark,\n        indicator: \"positive\",\n        sessionIndicator: \"up\",\n        conversionIndicator: \"up\",\n      }\n\n    if (isHighSpent && isGoodROAS)\n      return {\n        bg: COLORS.success.bg,\n        text: COLORS.success.dark,\n        indicator: \"positive\",\n        spendIndicator: \"up\",\n        roasIndicator: \"up\",\n      }\n\n    if (isHighCost && isGoodConvValuePerCost)\n      return {\n        bg: COLORS.success.bg,\n        text: COLORS.success.dark,\n        indicator: \"positive\",\n        costIndicator: \"up\",\n        valueIndicator: \"up\",\n      }\n\n    // Mixed positive/negative - more up than down\n    if (isHighSessions && !isGoodConversion)\n      return {\n        bg: COLORS.warning.bg,\n        text: COLORS.warning.dark,\n        indicator: \"neutral-up\",\n        sessionIndicator: \"up\",\n        conversionIndicator: \"down\",\n      }\n\n    if (isHighSpent && !isGoodROAS)\n      return {\n        bg: COLORS.warning.bg,\n        text: COLORS.warning.dark,\n        indicator: \"neutral-up\",\n        spendIndicator: \"up\",\n        roasIndicator: \"down\",\n      }\n\n    if (isHighCost && !isGoodConvValuePerCost)\n      return {\n        bg: COLORS.warning.bg,\n        text: COLORS.warning.dark,\n        indicator: \"neutral-up\",\n        costIndicator: \"up\",\n        valueIndicator: \"down\",\n      }\n\n    // Mixed positive/negative - more down than up\n    if (!isHighSessions && isGoodConversion)\n      return {\n        bg: COLORS.neutral.bg,\n        text: COLORS.neutral.dark,\n        indicator: \"neutral-down\",\n        sessionIndicator: \"down\",\n        conversionIndicator: \"up\",\n      }\n\n    if (!isHighSpent && isGoodROAS)\n      return {\n        bg: COLORS.neutral.bg,\n        text: COLORS.neutral.dark,\n        indicator: \"neutral-down\",\n        spendIndicator: \"down\",\n        roasIndicator: \"up\",\n      }\n\n    if (!isHighCost && isGoodConvValuePerCost)\n      return {\n        bg: COLORS.neutral.bg,\n        text: COLORS.neutral.dark,\n        indicator: \"neutral-down\",\n        costIndicator: \"down\",\n        valueIndicator: \"up\",\n      }\n\n    // Default case - all negative\n    return {\n      bg: COLORS.danger.bg,\n      text: COLORS.danger.dark,\n      indicator: \"negative\",\n      sessionIndicator: \"down\",\n      conversionIndicator: \"down\",\n      spendIndicator: \"down\",\n      roasIndicator: \"down\",\n      costIndicator: \"down\",\n      valueIndicator: \"down\",\n    }\n  }\n\n\n  const renderCell = (value: number | string, type?: \"spend\" | \"percentage\" | \"default\" | \"sessions\") => {\n    if (typeof value === \"number\") {\n      switch (type) {\n        case \"spend\":\n          return Math.round(value).toLocaleString(locale)\n        case \"percentage\":\n          return `${Number.parseFloat(value.toLocaleString(locale)).toFixed(2)}%`\n        case \"sessions\":\n          return Math.round(value).toLocaleString(locale)\n        default:\n          return Number.parseFloat(value.toLocaleString(locale)).toFixed(2)\n      }\n    }\n    return value\n  }\n\n  const renderMonthCell = (monthData: MonthlyData | undefined, metric: string) => {\n    if (!monthData) {\n      return (\n        <td\n          className=\"w-[100px] text-right whitespace-nowrap p-3 text-sm font-medium border-r border-b border-slate-300 bg-white\"\n          style={{ color: COLORS.text.muted }}\n        >\n          <span style={{ color: COLORS.text.muted }}>—</span>\n        </td>\n      )\n    }\n\n    const value = monthData[metric]\n    let colorStyle = { bg: \"white\", text: COLORS.text.primary, indicator: \"\" }\n\n    if (\n      (metric === \"Sessions\" || metric === \"Conv. Rate\") &&\n      typeof monthData[\"Sessions\"] === \"number\" &&\n      typeof monthData[\"Conv. Rate\"] === \"number\"\n    ) {\n      const metricStyle = getMetricColor({\n        sessions: Number(monthData[\"Sessions\"]),\n        convRate: Number(monthData[\"Conv. Rate\"]),\n      })\n      colorStyle = metricStyle\n\n    \n    }\n\n    if (\n      (metric === \"Spend\" || metric === \"Purchase ROAS\") &&\n      typeof monthData[\"Spend\"] === \"number\" &&\n      typeof monthData[\"Purchase ROAS\"] === \"number\"\n    ) {\n      const metricStyle = getMetricColor({\n        spend: Number(monthData[\"Spend\"]),\n        purchaseROAS: Number(monthData[\"Purchase ROAS\"]),\n      })\n      colorStyle = metricStyle\n    }\n\n    if (\n      (metric === \"Cost\" || metric === \"Conv. Value/ Cost\") &&\n      typeof monthData[\"Cost\"] === \"number\" &&\n      typeof monthData[\"Conv. Value/ Cost\"] === \"number\"\n    ) {\n      const metricStyle = getMetricColor({\n        cost: Number(monthData[\"Cost\"]),\n        convValuePerCost: Number(monthData[\"Conv. Value/ Cost\"]),\n      })\n      colorStyle = metricStyle\n    }\n\n    return (\n      <td\n        className=\"w-[100px] text-right whitespace-nowrap p-3 text-sm font-medium border-r border-b border-slate-300\"\n        style={{\n          backgroundColor: colorStyle.bg,\n          color: colorStyle.text,\n          transition: \"background-color 0.2s ease-in-out\",\n          lineHeight: \"1.4\",\n        }}\n      >\n        <div className=\"flex items-center justify-end gap-1.5\">\n          <span>\n            {renderCell(\n              value,\n              metric === \"Sessions\"\n                ? \"sessions\"\n                : metric.toLowerCase().includes(\"rate\")\n                  ? \"percentage\"\n                  : metric.toLowerCase().includes(\"spend\") || metric.toLowerCase().includes(\"cost\")\n                    ? \"spend\"\n                    : \"default\",\n            )}\n          </span>\n        </div>\n        {metric === \"Conv. Rate\" && monthData[\"Purchases\"] !== undefined && (\n          <div\n            className=\"text-xs mt-1\"\n            style={{ color: COLORS.text.secondary }}\n          >{`Purchases: ${monthData[\"Purchases\"].toLocaleString(locale) ?? 0}`}</div>\n        )}\n        {metric === \"Cost\" && monthData[\"Clicks\"] !== undefined && (\n          <div\n            className=\"text-xs mt-1\"\n            style={{ color: COLORS.text.secondary }}\n          >{`clicks: ${monthData[\"Clicks\"] ?? 0}`}</div>\n        )}\n        {metric === \"Conv. Value/ Cost\" && monthData[\"Conversion Rate\"] !== undefined && (\n          <div\n            className=\"text-xs mt-1\"\n            style={{ color: COLORS.text.secondary }}\n          >{`conv. rate: ${monthData[\"Conversion Rate\"].toLocaleString(locale) ?? 0}%`}</div>\n        )}\n        {metric === \"Purchase ROAS\" && monthData[\"Purchase Conversion Value\"] !== undefined && (\n          <div\n            className=\"text-xs mt-1\"\n            style={{ color: COLORS.text.secondary }}\n          >{`PCV: ${monthData[\"Purchase Conversion Value\"].toLocaleString(locale) ?? 0}`}</div>\n        )}\n      </td>\n    )\n  }\n\n\n  const renderMetricValue = (row: RowData, column: string, currentMetric: string, columnIndex: number) => {\n    const value = row[column]\n\n    if (typeof value !== \"number\") {\n      return (\n        <td\n          className=\"sticky top-0 min-w-[130px] p-3 text-sm font-medium border-r border-b border-slate-300 bg-white\"\n          style={{ left: `${130 + 100 + columnIndex * 130}px` }}\n        >\n          {\"\"}\n        </td>\n      )\n    }\n\n    let colorStyle = { bg: \"white\", text: COLORS.text.primary, indicator: \"\" }\n\n    // Check if the current metric and column match specific conditions for color\n    if (currentMetric && column) {\n      if (column.includes(\"Sessions\") || column.includes(\"Rate\")) {\n        const sessions = row[\"Total Sessions\"] as number\n        const convRate = row[\"Avg Conv. Rate\"] as number\n        const metricStyle = getMetricColor({ sessions, convRate })\n        colorStyle = metricStyle\n      }\n    }\n\n    if (currentMetric && column) {\n      if (column.includes(\"Spend\") || column.includes(\"ROAS\")) {\n        const spend = row[\"Total Spend\"] as number\n        const purchaseROAS = row[\"Total Purchase ROAS\"] as number\n        const metricStyle = getMetricColor({ spend, purchaseROAS })\n        colorStyle = metricStyle\n      }\n    }\n\n    if (currentMetric && column) {\n      if (column.includes(\"Cost\") || column.includes(\"Conv. Value / Cost\")) {\n        const cost = row[\"Total Cost\"] as number\n        const convValuePerCost = row[\"Conv. Value / Cost\"] as number\n        const metricStyle = getMetricColor({ cost, convValuePerCost })\n        colorStyle = metricStyle\n      }\n    }\n\n    const totalPurchases = typeof row[\"Total Purchases\"] === \"number\" ? row[\"Total Purchases\"].toLocaleString(locale) : null\n    const totalConvValue = typeof row[\"Total Conv. Value\"] === \"number\" ? row[\"Total Conv. Value\"].toLocaleString(locale) : null\n    const totalPCV = typeof row[\"Total PCV\"] === \"number\" ? row[\"Total PCV\"].toLocaleString(locale) : null\n\n    return (\n      <td\n        className=\"sticky top-0 min-w-[130px] p-3 text-sm font-medium border-r border-b border-slate-200\"\n        style={{\n          left: `${130 + 100 + columnIndex * 130}px`,\n          backgroundColor: colorStyle.bg,\n          color: colorStyle.text,\n          transition: \"background-color 0.2s ease-in-out\",\n        }}\n      >\n       {currentMetric.toLowerCase() === \"cost\" && column === \"Total Cost\" ? (\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-center gap-1.5\">\n              <span>{renderCell(value, \"spend\")}</span>\n            </div>\n          </div>\n        ) : currentMetric.toLowerCase() === \"conv. value/ cost\" && column === \"Conv. Value / Cost\" ? (\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-center gap-1.5\">\n              <span>{renderCell(value)}</span>\n            </div>\n            {totalConvValue && (\n              <span className=\"text-xs mt-0.5\" style={{ color: COLORS.text.muted }}>\n                Total Conv. Value: {totalConvValue}\n              </span>\n            )}\n          </div>\n        ) : currentMetric.toLowerCase() === \"sessions\" && column.includes(\"Sessions\") ? (\n          <div className=\"flex items-center gap-1.5\">\n            <span>{renderCell(value, \"sessions\")}</span>\n          </div>\n        ) : currentMetric.toLowerCase() === \"conv. rate\" && column.includes(\"Rate\") ? (\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-center gap-1.5\">\n       \n              <span>{renderCell(value, \"percentage\")}</span>\n            </div>\n            {totalPurchases && (\n              <span className=\"text-xs mt-0.5\" style={{ color: COLORS.text.muted }}>\n                Total Purchases: {totalPurchases}\n              </span>\n            )}\n          </div>\n        ) : currentMetric.toLowerCase() === \"spend\" && column.includes(\"Total Spend\") ? (\n          <div className=\"flex items-center gap-1.5\">\n        \n            <span>{renderCell(value, \"spend\")}</span>\n          </div>\n        ) : currentMetric.toLowerCase() === \"purchase roas\" && column.includes(\"Total Purchase ROAS\") ? (\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-center gap-1.5\">\n         \n              <span>{renderCell(value)}</span>\n            </div>\n            {totalPCV && (\n              <span className=\"text-xs mt-0.5\" style={{ color: COLORS.text.muted }}>\n                PCV: {totalPCV}\n              </span>\n            )}\n          </div>\n        ) : (\n          \"\"\n        )}\n      </td>\n    )\n  }\n\n  const renderMetricRow = (row: RowData, metricIndex: number) => {\n    const metric = monthlyMetrics[metricIndex]\n\n    // Determine the background color for both primary and metric columns\n    let colorStyle = { bg: \"white\", text: COLORS.text.primary, indicator: \"\" }\n\n    if (secondaryColumns) {\n      const sessions = row[\"Total Sessions\"] as number\n      const convRate = row[\"Avg Conv. Rate\"] as number\n      const spend = row[\"Total Spend\"] as number\n      const purchaseROAS = row[\"Total Purchase ROAS\"] as number\n      const cost = row[\"Total Cost\"] as number\n      const convValuePerCost = row[\"Conv. Value / Cost\"] as number\n\n      if (metric === \"Sessions\" || metric === \"Conv. Rate\") {\n        const metricStyle = getMetricColor({ sessions, convRate })\n        colorStyle = metricStyle\n      } else if (metric === \"Spend\" || metric === \"Purchase ROAS\") {\n        const metricStyle = getMetricColor({ spend, purchaseROAS })\n        colorStyle = metricStyle\n\n      } else if (metric === \"Cost\" || metric === \"Conv. Value/ Cost\") {\n        const metricStyle = getMetricColor({ cost, convValuePerCost })\n        colorStyle = metricStyle\n      }\n    }\n\n    return (\n      <tr \n        key={`${row[primaryColumn]}-${metric}`} \n        className=\"hover:bg-slate-50 transition-colors duration-150 border-b border-slate-300\"\n      >\n        <td\n          className=\"sticky left-0 min-w-[130px] max-w-[200px] p-3 text-sm font-medium border-r border-b border-slate-300\"\n          style={{\n            backgroundColor: colorStyle.bg,\n            color: colorStyle.text,\n            transition: \"background-color 0.2s ease-in-out\",\n            letterSpacing: \"-0.01em\",\n          }}\n        >\n          {metricIndex === 0\n            ? typeof row[primaryColumn] === \"string\" || typeof row[primaryColumn] === \"number\"\n              ? renderCell(row[primaryColumn])\n              : \"\"\n            : null}\n        </td>\n        <td\n          className=\"sticky left-[130px] min-w-[100px] whitespace-nowrap p-3 text-sm font-medium border-r border-b border-slate-300\"\n          style={{\n            backgroundColor: colorStyle.bg,\n            color: colorStyle.text,\n            transition: \"background-color 0.2s ease-in-out\",\n          }}\n        >\n          <div className=\"flex items-center gap-1.5\">\n            <span>{metric}</span>\n          </div>\n        </td>\n        {secondaryColumns?.map((column, index) => renderMetricValue(row, column, metric, index))}\n        {months.map((month) => {\n          const getMonthNumber = (monthName: string): number => {\n            const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n            return months.indexOf(monthName) + 1\n          }\n          const [monthName, year] = month.split(\"-\")\n          const monthNum = getMonthNumber(monthName)\n          const monthFormat = `${year}${monthNum.toString().padStart(2, \"0\")}`\n\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find((m) => m.Month === monthFormat)\n          return renderMonthCell(monthData, metric)\n        })}\n      </tr>\n    )\n  }\n\n  const totalRows = allRows.length\n  const totalPages = Math.ceil(totalRows / rowsPerPage)\n  const goToPage = (page: number) => {\n    const pageNumber = Math.max(1, Math.min(page, totalPages))\n    setCurrentPage(pageNumber)\n  }\n\n  const renderColumnHeader = (column: string, index: number) => {\n    let thresholdValue = \"\"\n    if (column === \"Total Sessions\") {\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSessions).toLocaleString()})`\n    } else if (column === \"Avg Conv. Rate\") {\n      thresholdValue = `(avg: ${thresholds.avgConvRate.toFixed(2)}%)`\n    } else if (column === \"Total Spend\") {\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSpend).toLocaleString()})`\n    } else if (column === \"Total Purchase ROAS\") {\n      thresholdValue = `(avg: ${thresholds.avgPurchaseROAS.toFixed(2)})`\n    } else if (column === \"Total Cost\") {\n      thresholdValue = `(avg: ${Math.round(thresholds.avgCost).toLocaleString()})`\n    } else if (column === \"Conv. Value / Cost\") {\n      thresholdValue = `(avg: ${thresholds.avgConvValuePerCost.toFixed(2)})`\n    }\n\n    return (\n      <th\n        key={column}\n        className=\"sticky top-0 min-w-[130px] w-[150px] z-20 px-3 py-3 text-left text-sm font-medium border-r border-b border-slate-300 shadow-sm\"\n        style={{\n          left: `${130 + 100 + index * 130}px`,\n          background: \"linear-gradient(to bottom, #F8FAFC, #F3F4F6)\",\n          color: COLORS.text.primary,\n          letterSpacing: \"-0.01em\",\n          borderBottom: `2px solid ${COLORS.border.dark}`,\n        }}\n      >\n        <div className=\"flex flex-col\">\n          <span>{column}</span>\n          {thresholdValue && (\n            <span className=\"text-xs font-normal mt-0.5\" style={{ color: COLORS.text.secondary }}>\n              {thresholdValue}\n            </span>\n          )}\n        </div>\n      </th>\n    )\n  }\n\n  return (\n    <div\n      id=\"age-report-table\"\n      className=\"w-full rounded-xl overflow-hidden border border-slate-300 shadow-lg bg-white flex flex-col\"\n      style={{\n        boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)\",\n      }}\n    >\n      <div\n        className={`relative overflow-x-auto ${getTableHeight()} scrollbar-thin`}\n        onScroll={isFullScreen ? handleScroll : undefined}\n      >\n        <table className=\"w-full table-auto\">\n          <thead>\n            <tr>\n              <th\n                className=\"sticky left-0 top-0 min-w-[130px] w-[150px] z-20 px-3 py-3 text-left text-sm font-medium border-r border-b border-slate-200 shadow-sm\"\n                style={{\n                  background: COLORS.background.headerGradient,\n                  color: COLORS.text.primary,\n                  letterSpacing: \"-0.01em\",\n                  borderBottom: `2px solid ${COLORS.border.dark}`,\n                }}\n              >\n                {primaryColumn}\n              </th>\n              <th\n                className=\"sticky left-[130px] top-0 min-w-[100px] w-[150px] z-20 px-3 py-3 text-left text-sm font-medium border-r border-b border-slate-200 shadow-sm\"\n                style={{\n                  background: COLORS.background.headerGradient,\n                  color: COLORS.text.primary,\n                  letterSpacing: \"-0.01em\",\n                  borderBottom: `2px solid ${COLORS.border.dark}`,\n                }}\n              >\n                Metric\n              </th>\n              {secondaryColumns?.map((column, index) => renderColumnHeader(column, index))}\n              {months.map((month) => (\n                <th\n                  key={month}\n                  className=\"sticky top-0 min-w-[100px] z-10 px-3 py-3 text-right text-sm font-medium whitespace-nowrap border-r border-b border-slate-200 shadow-sm\"\n                  style={{\n                    background: \"linear-gradient(to bottom, #F8FAFC, #F3F4F6)\",\n                    color: COLORS.text.primary,\n                    letterSpacing: \"-0.01em\",\n                    borderBottom: `2px solid ${COLORS.border.dark}`,\n                  }}\n                >\n                  {month}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-slate-300\">\n            {displayRows.length > 0 ? (\n              displayRows.map(({ dataIndex, metricIndex }) => {\n                if (dataIndex < filteredData.length && metricIndex < monthlyMetrics.length) {\n                  return renderMetricRow(filteredData[dataIndex], metricIndex)\n                }\n                return null\n              })\n            ) : (\n              <tr>\n                <td\n                  colSpan={2 + (secondaryColumns?.length || 0) + months.length}\n                  className=\"p-4 text-center text-gray-500\"\n                >\n                  {filter && filter.length > 0 ? \"No data matches the selected filter\" : \"No data to display\"}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {!isFullScreen && (\n        <div\n          className=\"border-t border-slate-200 px-3 py-2.5 flex items-center justify-between\"\n          style={{ background: \"linear-gradient(to bottom, white, #F4F4F4)\" }}\n        >\n          <div className=\"text-sm font-medium\" style={{ color: COLORS.text.secondary }}>\n            Showing {(currentPage - 1) * rowsPerPage + 1}-{Math.min(currentPage * rowsPerPage, totalRows)} of{\" \"}\n            {totalRows} rows\n            {(filter && filter.length > 0) ? (\n              <span className=\"ml-2 text-xs\">\n                (Filtered from {data.length} total rows)\n              </span>\n            ) : null}\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              style={{\n                borderColor: COLORS.border.main,\n                color: COLORS.primary.main,\n                background: \"white\",\n                boxShadow: \"0 1px 2px rgba(0,0,0,0.05)\",\n                borderRadius: \"6px\",\n                transition: \"all 0.15s ease\",\n              }}\n              onClick={() => goToPage(1)}\n              disabled={currentPage === 1}\n            >\n              <ChevronsLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              style={{\n                borderColor: COLORS.border.main,\n                color: COLORS.primary.main,\n                background: \"white\",\n                boxShadow: \"0 1px 2px rgba(0,0,0,0.05)\",\n                borderRadius: \"6px\",\n                transition: \"all 0.15s ease\",\n              }}\n              onClick={() => goToPage(currentPage - 1)}\n              disabled={currentPage === 1}\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <div\n              className=\"flex items-center justify-center text-sm font-medium px-2\"\n              style={{ color: COLORS.text.primary }}\n            >\n              Page {currentPage} of {totalPages}\n            </div>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              style={{\n                borderColor: COLORS.border.main,\n                color: COLORS.primary.main,\n                background: \"white\",\n                boxShadow: \"0 1px 2px rgba(0,0,0,0.05)\",\n                borderRadius: \"6px\",\n                transition: \"all 0.15s ease\",\n              }}\n              onClick={() => goToPage(currentPage + 1)}\n              disabled={currentPage === totalPages}\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              style={{\n                borderColor: COLORS.border.main,\n                color: COLORS.primary.main,\n                background: \"white\",\n                boxShadow: \"0 1px 2px rgba(0,0,0,0.05)\",\n                borderRadius: \"6px\",\n                transition: \"all 0.15s ease\",\n              }}\n              onClick={() => goToPage(totalPages)}\n              disabled={currentPage === totalPages}\n            >\n              <ChevronsRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}","import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState } from \"react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Filter } from \"lucide-react\";\nimport { Tooltip, TooltipContent, TooltipProvider } from \"@/components/ui/tooltip\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport { clearFilters, setFilter } from \"@/store/slices/ConversionFilterSlice\";\n// Define all possible filterable columns\nconst FILTERABLE_COLUMNS = [\n  \"Total Sessions\", \n  \"Avg Conv Rate\", \n  \"Total Cost\", \n  \"Conv. Value / Cost\"\n] as const;\n\ntype FilterableColumn = typeof FILTERABLE_COLUMNS[number];\n\ninterface FilterValue {\n  value: number;\n  operator: string;\n}\n\ninterface FilterConversionsProps {\n  componentId: string;\n  availableColumns?: readonly FilterableColumn[];\n}\n\nexport default function FilterConversions({ \n  componentId, \n  availableColumns = FILTERABLE_COLUMNS \n}: FilterConversionsProps) {\n  const dispatch = useDispatch();\n  \n  // Dynamic filter retrieval\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {}\n  );\n\n  const [selectedColumn, setSelectedColumn] = useState<FilterableColumn>(availableColumns[0]);\n  const [operator, setOperator] = useState<string>(\">\");\n  const [value, setValue] = useState<number | undefined>(undefined);\n  const [dropdownOpen, setDropdownOpen] = useState<boolean>(false);\n\n  const handleAddFilter = () => {\n    if (value === undefined || isNaN(value)) {\n      alert(\"Please enter a valid value\");\n      return;\n    }\n\n    const filterValue = { value, operator };\n\n    // Dispatch a generic filter action\n    dispatch(setFilter({ \n      componentId, \n      column: selectedColumn, \n      filter: filterValue \n    }));\n\n    setDropdownOpen(false);\n  };\n\n  const handleClearFilters = () => {\n    dispatch(clearFilters(componentId));\n    setSelectedColumn(availableColumns[0]);\n    setOperator(\">\");\n    setValue(undefined);\n    setDropdownOpen(false);\n  };\n\n  // Check if any filter is applied\n  const isFilterApplied = Object.values(filters).some(filter => filter !== null);\n\n  // Generate tooltip text for applied filters\n  const filterTooltip = Object.entries(filters)\n    .filter(([_, filter]) => filter !== null)\n    .map(([column, filter]) => \n      `${column}: ${filter?.operator} ${filter?.value}`\n    )\n    .join(\", \");\n\n  return (\n    <TooltipProvider>\n      <Tooltip open={isFilterApplied}>\n        <DropdownMenu open={dropdownOpen} onOpenChange={setDropdownOpen}>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"outline\" size=\"icon\" className=\"relative\">\n              <Filter className={`h-4 w-4 ${isFilterApplied ? 'text-blue-500' : ''}`} />\n              {Object.values(filters).filter(Boolean).length > 0 && (\n                <span className=\"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center\">\n                  {Object.values(filters).filter(Boolean).length}\n                </span>\n              )}\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent className=\"w-80 p-4 flex flex-col gap-4\">\n            <Select \n              onValueChange={(value) => setSelectedColumn(value as FilterableColumn)} \n              value={selectedColumn}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select Column\" />\n              </SelectTrigger>\n              <SelectContent id=\"metric-dropdown\">\n                {availableColumns.map(column => (\n                  <SelectItem key={column} value={column}>\n                    {column}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            <Select onValueChange={setOperator} value={operator}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select Operator\" />\n              </SelectTrigger>\n              <SelectContent  id=\"condition-dropdown\">\n                <SelectItem value=\">\">{'Greater Than ( > )'}</SelectItem>\n                <SelectItem value=\">=\">{'Greater Than or Equal To ( >= )'}</SelectItem>\n                <SelectItem value=\"<\">{'Less Than ( < )'}</SelectItem>\n                <SelectItem value=\"<=\">{'Less Than or Equal To ( <= )'}</SelectItem>\n                <SelectItem value=\"==\">{'Equal To ( == )'}</SelectItem>\n              </SelectContent>\n            </Select>\n\n            <Input\n            id=\"value-input\"\n              type=\"number\"\n              placeholder=\"Enter Value\"\n              value={value === undefined ? \"\" : value}\n              onChange={(e) => setValue(parseFloat(e.target.value))}\n              className=\"w-full\"\n            />\n\n            <div id=\"Apply the Filter\" className=\"flex flex-row gap-2 items-center justify-center w-full\">\n              <Button onClick={handleAddFilter} className=\"w-full\">\n                Add Filter\n              </Button>\n              <Button id=\"clear-button\" variant=\"destructive\" className=\"w-full\" onClick={handleClearFilters}>\n                Clear\n              </Button>\n            </div>\n\n            {Object.entries(filters).filter(([_, filter]) => filter !== null).length > 0 && (\n              <div className=\"mt-4 border-t pt-4\">\n                <h4 className=\"text-sm font-medium mb-2\">Active Filters:</h4>\n                <div className=\"space-y-2\">\n                  {Object.entries(filters)\n                    .filter(([_, filter]) => filter !== null)\n                    .map(([column, filter]) => (\n                      <div key={column} className=\"flex items-center justify-between text-sm bg-slate-50 p-2 rounded\">\n                        <span>{column}</span>\n                        <span className=\"text-slate-600\">{filter?.operator} {filter?.value}</span>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            )}\n          </DropdownMenuContent>\n        </DropdownMenu>\n\n        <TooltipContent>\n          {filterTooltip}\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n\n// Export the types for potential use in other components\nexport type { FilterableColumn, FilterValue };","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw, Target } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { GoogleLogo } from \"@/data/logo\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\n\ntype AdAccountData = {\n  accountId: string;\n  accountName: string;\n  searchTerms: Array<{\n    \"Search Term\": string;\n    \"Total Cost\": number;\n    \"Conv. Value / Cost\": number;\n    \"Total Conv. Value\": number;\n    MonthlyData?: Array<{ Month: string; [key: string]: any }>;\n    [key: string]: any;\n  }>;\n  error?: string;\n};\n\nexport type ApiResponse = {\n  reportType: string;\n  data: AdAccountData[];\n};\n\ninterface SearchtermBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst SearchTerm: React.FC<SearchtermBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const locale = useSelector((state:RootState)=>state.locale.locale)\n\n  const user = useSelector((state: RootState) => state.user.user, shallowEqual);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const componentId = 'google-ads-search-term'; // Add a unique component identifier\n\n  // Get filters from Redux\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {}, shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Cost\": \"costFilter\",\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\n        }[column] || column;\n  \n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]); // Only re-compute when filters change\n  \n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.post(`/api/google/searchTerm/${brandId}`, {\n        userId: user?.id,\n        startDate,\n        endDate,\n        ...transformedFilters, \n      });\n  \n      setApiResponse({\n        reportType: \"Search Term\",\n        data: response.data?.data || [],\n      });\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, user?.id, transformedFilters]);\n  \n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 15 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\n      }));\n    }\n  }, [propDateRange, dispatch]);\n\n  useEffect(() => {\n    if (!isFullScreen && propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\n      }));\n    }\n  }, [isFullScreen, propDateRange, dispatch]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Search Term\";\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Cost\", \"Conv. Value/ Cost\"];\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\n  console.log(googleAdsTokenError);\n\n  return (\n<>\n{googleAdsTokenError ? (\n           <NoAccessPage\n           platform=\"Google Ads\"\n           message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\n           icon={<Target className=\"w-8 h-8 text-red-500\" />}\n           loginOptions={[\n             {\n               label: \"Connect Google Ads\",\n               context: \"googleAdSetup\",\n               provider: \"google\"\n             }\n           ]}\n         />\n        ) : loading ? (\n      <Loader isLoading={loading}/>\n      ) : (\n        apiResponse?.data && apiResponse.data.map((account, _) => (\n          <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\n          <Card key={account.accountId} className=\"mb-4\">\n\n            <CardContent>\n                 \n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n            <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\n                <span className=\"mr-2\"><GoogleLogo /></span> \n                <span className=\"\">{account.accountName}</span>\n              </h3>\n              <div className=\"flex flex-wrap items-center gap-3\">\n              {isFullScreen && \n                <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange />\n                </div>\n              }\n              <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n              </Button>\n              <FilterConversions \n                componentId={componentId}\n                availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\n              />\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n            </div>\n              \n              {account.error ? (\n                <p className=\"text-red-500\">Error: {account.error}</p>\n              ) : account.searchTerms.length === 0 ? (\n                <p className=\"text-gray-500\">No search term data available for this account</p>\n              ) : (\n                <div className=\"rounded-md overflow-hidden\">\n                  <ConversionTable\n                    data={account.searchTerms}\n                    primaryColumn={primaryColumn}\n                    secondaryColumns={secondaryColumns}\n                    monthlyDataKey={monthlyDataKey}\n                    monthlyMetrics={monthlyMetrics}\n                    isFullScreen={isFullScreen}\n                    locale={locale}\n                  />\n                </div>\n              )}\n            </CardContent>\n          </Card>\n          </div>\n        ))\n      )}\n\n      {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\n        <Card>\n          <CardContent>\n            <p className=\"text-gray-500 text-center py-4\">No search term data available</p>\n          </CardContent>\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport default SearchTerm;","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw, Target } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { GoogleLogo } from \"@/data/logo\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectGoogleAdsTokenError } from '@/store/slices/TokenSllice';\n\ntype AdAccountData = {\n  accountId: string;\n  accountName: string;\n  ageRanges: Array<{\n    \"Age Range\": string,\n    \"Total Cost\": number;\n    \"Conv. Value / Cost\": number;\n    \"Total Conv. Value\": number;\n    MonthlyData?: Array<{ Month: string; [key: string]: any }>;\n\n    [key: string]: any;\n  }>;\n  error?: string;\n};\n\nexport type ApiResponse = {\n  reportType: string;\n  data: AdAccountData[];\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst Age: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const locale = useSelector((state:RootState)=>state.locale.locale)\n  const dispatch = useDispatch();\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\n  console.log(googleAdsTokenError);\n  \n  \n  const user = useSelector((state: RootState)=>state.user.user , shallowEqual)\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const componentId = 'google-ads-age';\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Cost\": \"costFilter\",\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\n        }[column] || column;\n  \n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]); // Only re-compute when filters change\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n\n      const response = await axiosInstance.post(`/api/google/age/${brandId}`, {\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\n      }, { withCredentials: true })\n\n      const fetchedData = response.data || [];\n\n      setApiResponse(fetchedData);\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate,transformedFilters, user?.id]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Age Range\";\n  const monthlyDataKey = \"MonthlyData\";\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\n\n  return (\n<>\n      {googleAdsTokenError ? (\n           <NoAccessPage\n           platform=\"Google Ads\"\n           message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\n           icon={<Target className=\"w-8 h-8 text-red-500\" />}\n           loginOptions={[\n             {\n               label: \"Connect Google Ads\",\n               context: \"googleAdSetup\",\n               provider: \"google\"\n             }\n           ]}\n         />\n        ) : loading ? (\n        <Loader isLoading={loading}/>\n      ) : (\n        apiResponse?.data && apiResponse.data.map((account, _) => (\n          <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\n          <Card key={account.accountId} className=\"mb-4\">\n\n            <CardContent>\n                 \n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n            <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\n                <span className=\"mr-2\"><GoogleLogo /></span> \n                <span className=\"\">{account.accountName}</span>\n              </h3>\n              <div className=\"flex flex-wrap items-center gap-3\">\n              {isFullScreen && \n                <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange />\n                </div>\n              }\n              <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n              </Button>\n              <FilterConversions \n                componentId={componentId}\n                availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\n              />\n              <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n            </div>\n              \n              {account.error ? (\n                <p className=\"text-red-500\">Error: {account.error}</p>\n              ) : account.ageRanges.length === 0 ? (\n                <p className=\"text-gray-500\">No Age data available for this account</p>\n              ) : (\n                <div className=\"rounded-md overflow-hidden\">\n                  <ConversionTable\n                    data={account.ageRanges}\n                    primaryColumn={primaryColumn}\n                    secondaryColumns={secondaryColumns}\n                    monthlyDataKey={monthlyDataKey}\n                    monthlyMetrics={monthlyMetrics}\n                    isFullScreen={isFullScreen}\n                    locale={locale}\n                  />\n                </div>\n              )}\n            </CardContent>\n          </Card>\n          </div>\n        ))\n      )}\n\n      {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\n        <Card>\n          <CardContent>\n            <p className=\"text-gray-500 text-center py-4\">No Age data available</p>\n          </CardContent>\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport default Age;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw, Target } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { GoogleLogo } from \"@/data/logo\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\n\n\ntype AdAccountData = {\n  accountId: string;\n  accountName: string;\n  genders: Array<{\n    \"Gender\": string;\n    \"Total Cost\": number;\n    \"Conv. Value / Cost\": number;\n    \"Total Conv. Value\": number;\n    MonthlyData?: Array<{ Month: string; [key: string]: any }>;\n    [key: string]: any;\n  }>;\n  error?: string;\n};\n\nexport type ApiResponse = {\n  reportType: string;\n  data: AdAccountData[];\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst Gender: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const dispatch = useDispatch();\n  \n  \n  const user = useSelector((state: RootState)=>state.user.user);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const componentId = \"google-ads-gender\";\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Cost\": \"costFilter\",\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\n        }[column] || column;\n  \n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]); // Only re-compute when filters change\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n\n      const response = await axiosInstance.post(`/api/google/gender/${brandId}`, {\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\n      }, { withCredentials: true })\n\n      const fetchedData = response.data || [];\n\n      setApiResponse(fetchedData);\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, transformedFilters , user?.id]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Gender\";\n  const monthlyDataKey = \"MonthlyData\";\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\n  const locale = useSelector((state:RootState)=>state.locale.locale)\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\n  console.log(googleAdsTokenError);\n\n  return (\n    <>\n    {googleAdsTokenError ? (\n           <NoAccessPage\n           platform=\"Google Ads\"\n           message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\n           icon={<Target className=\"w-8 h-8 text-red-500\" />}\n           loginOptions={[\n             {\n               label: \"Connect Google Ads\",\n               context: \"googleAdSetup\",\n               provider: \"google\"\n             }\n           ]}\n         />\n        ) :loading ? (\n      <Loader isLoading={loading}/>\n    ) : (\n      apiResponse?.data && apiResponse.data.map((account, _) => (\n        <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\n        <Card key={account.accountId} className=\"mb-4\">\n\n          <CardContent>\n               \n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\n              <span className=\"mr-2\"><GoogleLogo /></span> \n              <span className=\"\">{account.accountName}</span>\n            </h3>\n            <div className=\"flex flex-wrap items-center gap-3\">\n            {isFullScreen && \n              <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                <DatePickerWithRange />\n              </div>\n            }\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions \n              componentId={componentId}\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n          </div>\n            \n            {account.error ? (\n              <p className=\"text-red-500\">Error: {account.error}</p>\n            ) : account.genders.length === 0 ? (\n              <p className=\"text-gray-500\">No gender data available for this account</p>\n            ) : (\n              <div className=\"rounded-md overflow-hidden\">\n                <ConversionTable\n                  data={account.genders}\n                  primaryColumn={primaryColumn}\n                  secondaryColumns={secondaryColumns}\n                  monthlyDataKey={monthlyDataKey}\n                  monthlyMetrics={monthlyMetrics}\n                  isFullScreen={isFullScreen}\n                  locale={locale}\n                />\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        </div>\n      ))\n    )}\n\n    {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\n      <Card>\n        <CardContent>\n          <p className=\"text-gray-500 text-center py-4\">No gender data available</p>\n        </CardContent>\n      </Card>\n    )}\n  </>\n  );\n};\n\nexport default Gender;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw, Target } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { GoogleLogo } from \"@/data/logo\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\n\ntype AdAccountData = {\n  accountId: string;\n  accountName: string;\n  keywords: Array<{\n    \"Keyword\": string;\n    \"Total Cost\": number;\n    \"Conv. Value / Cost\": number;\n    \"Total Conv. Value\": number;\n    MonthlyData?: Array<{ Month: string; [key: string]: any }>;\n    [key: string]: any;\n  }>;\n  error?: string;\n};\n\nexport type ApiResponse = {\n  reportType: string;\n  data: AdAccountData[];\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst Keyword: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const dispatch = useDispatch();\n  \n  \n  const user = useSelector((state: RootState)=>state.user.user);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const componentId = \"google-ads-keyword\";\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Cost\": \"costFilter\",\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\n        }[column] || column;\n  \n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]); // Only re-compute when filters change\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n\n      const response = await axiosInstance.post(`/api/google/keyword/${brandId}`, {\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\n      }, { withCredentials: true })\n\n      const fetchedData = response.data || [];\n\n      setApiResponse(fetchedData);\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, transformedFilters , user?.id]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Keyword\";\n  const monthlyDataKey = \"MonthlyData\";\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\n  const locale = useSelector((state:RootState)=>state.locale.locale)\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\n  console.log(googleAdsTokenError);\n\n\n  return (\n    <>\n     {googleAdsTokenError ? (\n           <NoAccessPage\n           platform=\"Google Ads\"\n           message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\n           icon={<Target className=\"w-8 h-8 text-red-500\" />}\n           loginOptions={[\n             {\n               label: \"Connect Google Ads\",\n               context: \"googleAdSetup\",\n               provider: \"google\"\n             }\n           ]}\n         />\n        ) : loading ? (\n      <Loader isLoading={loading}/>\n    ) : (\n      apiResponse?.data && apiResponse.data.map((account, _) => (\n        <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\n        <Card key={account.accountId} className=\"mb-4\">\n\n          <CardContent>\n               \n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\n              <span className=\"mr-2\"><GoogleLogo /></span> \n              <span className=\"\">{account.accountName}</span>\n            </h3>\n            <div className=\"flex flex-wrap items-center gap-3\">\n            {isFullScreen && \n              <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                <DatePickerWithRange />\n              </div>\n            }\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions \n              componentId={componentId}\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n          </div>\n            \n            {account.error ? (\n              <p className=\"text-red-500\">Error: {account.error}</p>\n            ) : account.keywords.length === 0 ? (\n              <p className=\"text-gray-500\">No keyword data available for this account</p>\n            ) : (\n              <div className=\"rounded-md overflow-hidden\">\n                <ConversionTable\n                  data={account.keywords}\n                  primaryColumn={primaryColumn}\n                  secondaryColumns={secondaryColumns}\n                  monthlyDataKey={monthlyDataKey}\n                  monthlyMetrics={monthlyMetrics}\n                  isFullScreen={isFullScreen}\n                  locale={locale}\n                />\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        </div>\n      ))\n    )}\n\n    {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\n      <Card>\n        <CardContent>\n          <p className=\"text-gray-500 text-center py-4\">No keyword data available</p>\n        </CardContent>\n      </Card>\n    )}\n  </>\n  );\n};\n\nexport default Keyword;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw, Target } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { GoogleLogo } from \"@/data/logo\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport FilterConversions from \"@/pages/ConversionReportPage/components/Filter\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\n\n\ntype AdAccountData = {\n  accountId: string;\n  accountName: string;\n  products: Array<{\n    \"Product\": string;\n    \"Total Cost\": number;\n    \"Conv. Value / Cost\": number;\n    \"Total Conv. Value\": number;\n    MonthlyData?: Array<{ Month: string; [key: string]: any }>;\n    [key: string]: any;\n  }>;\n  error?: string;\n};\n\nexport type ApiResponse = {\n  reportType: string;\n  data: AdAccountData[];\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst Product: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  \n  \n  const user = useSelector((state: RootState)=>state.user.user);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n\n      const response = await axiosInstance.post(`/api/google/product/${brandId}`, {\n        userId: user?.id, startDate: startDate, endDate: endDate, \n      }, { withCredentials: true })\n\n      const fetchedData = response.data || [];\n\n      setApiResponse(fetchedData);\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate,]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    setDate(propDateRange);\n  }, [propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Product\";\n  const monthlyDataKey = \"MonthlyData\";\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\n  const monthlyMetrics = [\"Cost\",\"Conv. Value/ Cost\"];\n\n  const componentId = \"google-ads-product\";\n  const locale = useSelector((state:RootState)=>state.locale.locale)\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\n  console.log(googleAdsTokenError);\n\n  return (\n    <>\n    {googleAdsTokenError ? (\n           <NoAccessPage\n           platform=\"Google Ads\"\n           message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\n           icon={<Target className=\"w-8 h-8 text-red-500\" />}\n           loginOptions={[\n             {\n               label: \"Connect Google Ads\",\n               context: \"googleAdSetup\",\n               provider: \"google\"\n             }\n           ]}\n         />\n        ) : loading ? (\n     <Loader isLoading={loading}/>\n    ) : (\n      apiResponse?.data && apiResponse.data.map((account, _) => (\n        <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\n        <Card key={account.accountId} className=\"mb-4\">\n\n          <CardContent>\n               \n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\n              <span className=\"mr-2\"><GoogleLogo /></span> \n              <span className=\"\">{account.accountName}</span>\n            </h3>\n            <div className=\"flex flex-wrap items-center gap-3\">\n            {isFullScreen && \n              <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                <DatePickerWithRange />\n              </div>\n            }\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions \n              componentId={componentId}\n              availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n          </div>\n            \n            {account.error ? (\n              <p className=\"text-red-500\">Error: {account.error}</p>\n            ) : account.products.length === 0 ? (\n              <p className=\"text-gray-500\">No product data available for this account</p>\n            ) : (\n              <div className=\"rounded-md overflow-hidden\">\n                <ConversionTable\n                  data={account.products}\n                  primaryColumn={primaryColumn}\n                  secondaryColumns={secondaryColumns}\n                  monthlyDataKey={monthlyDataKey}\n                  monthlyMetrics={monthlyMetrics}\n                  isFullScreen={isFullScreen}\n                  locale={locale}\n                />\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        </div>\n      ))\n    )}\n\n    {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\n      <Card>\n        <CardContent>\n          <p className=\"text-gray-500 text-center py-4\">No product data available</p>\n        </CardContent>\n      </Card>\n    )}\n  </>\n  );\n};\n\nexport default Product;\n","import React, { useState, useRef, useMemo } from 'react';\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\nimport { SquareChartGantt } from 'lucide-react';\nimport SearchTerm from './components/SearchTerm';\nimport { CustomTabs } from '../ConversionReportPage/components/CustomTabs';\nimport Age from './components/Age';\nimport Gender from './components/Gender';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport Header from '@/components/dashboard_component/Header';\nimport { useParams } from 'react-router-dom';\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\nimport Keyword from './components/Keyword';\nimport Product from './components/Product';\nimport Footer from '../LandingPage/components/Footer';\n\n\n\nconst GoogleAdsDashboard: React.FC = () => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const [activeTab, setActiveTab] = useState('searchterm');\n  const containerRef = useRef<HTMLDivElement>(null);\n  const brands = useSelector((state: RootState) => state.brand.brands);\n  const { brandId } = useParams<{ brandId: string }>();\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\n  const hasGoogleAdAccount = selectedBrand?.googleAdAccount && selectedBrand?.googleAdAccount.length > 0 \n    ? true\n    : false;\n\n\n\n  const tabs = [\n    { label: 'Search Term', value: 'searchterm' },\n    { label: 'Keyword', value: 'keyword' },\n    { label: 'Age', value: 'age' },\n    { label: 'Gender', value: 'gender' },\n    { label: 'Product', value: 'product' }\n  ];\n\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        {!hasGoogleAdAccount ? (\n          <>\n            <ConnectPlatform\n              platform=\"google ads\"\n              brandId={brandId ?? ''}\n              onSuccess={(platform, accountName, accountId) => {\n                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n              }}\n            />\n          </>\n        ) : (\n          <>\n            {/* Header */}\n            <div className=\"flex-none\">\n              <Header showDatePicker={true} Icon={SquareChartGantt} title='Google Ads Reports' />\n              {/* Tabs */}\n              <div className=\"bg-white px-6 sticky top-0 z-10\">\n                <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\n              </div>\n            </div>\n\n            {/* Scrollable Content */}\n            <div ref={containerRef} className=\"flex-1 overflow-auto\">\n              <div className=\"px-6 py-4 space-y-6\">\n                {activeTab === 'searchterm' && (\n                  <div id=\"searchterm\">\n                    <SearchTerm dateRange={{\n                      from: date.from ? new Date(date.from) : undefined,\n                      to: date.to ? new Date(date.to) : undefined\n                    }} />\n                  </div>\n                )}\n                 {activeTab === 'keyword' && (\n                  <div id=\"keyword\">\n                    <Keyword dateRange={{\n                      from: date.from ? new Date(date.from) : undefined,\n                      to: date.to ? new Date(date.to) : undefined\n                    }} />\n                  </div>\n                )}\n                {activeTab === 'age' && (\n                  <div id=\"age\" >\n                    <Age dateRange={{\n                      from: date.from ? new Date(date.from) : undefined,\n                      to: date.to ? new Date(date.to) : undefined\n                    }} />\n                  </div>\n                )}\n                {activeTab === 'gender' && (\n                  <div id=\"gender\" >\n                    <Gender dateRange={{\n                      from: date.from ? new Date(date.from) : undefined,\n                      to: date.to ? new Date(date.to) : undefined\n                    }} />\n                  </div>\n                )}\n               \n                {activeTab === 'product' && (\n                  <div id=\"product\">\n                    <Product dateRange={{\n                      from: date.from ? new Date(date.from) : undefined,\n                      to: date.to ? new Date(date.to) : undefined\n                    }} />\n                  </div>\n                )}\n              </div>\n            </div>\n          </>\n        )}\n        <Footer />\n      </div>\n      <HelpDeskModal />\n    </div>\n  );\n};\n\nexport default GoogleAdsDashboard;","\nimport React, { useMemo, useState } from 'react';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { PerformanceSummaryProps, CategoryData } from '@/interfaces';\n\n\n\nconst PerformanceSummary: React.FC<PerformanceSummaryProps> = ({\n  data,\n  primaryColumn,\n  metricConfig,\n\n  onCategoryFilter\n}) => {\n  const [filteredCategory, setFilteredCategory] = useState<string | null>(null);\n\n  const thresholds = useMemo(() => {\n    const metrics: Record<string, number> = {\n      [metricConfig.primary.key]: 0,\n      [metricConfig.secondary.key]: 0\n    };\n    let totalMonths = 0;\n\n    // Always calculate thresholds from the complete original data\n    data.forEach(row => {\n      const monthlyData = row.MonthlyData as Array<{ Month: string; [key: string]: any }> | undefined;\n      \n      if (Array.isArray(monthlyData)) {\n        monthlyData.forEach((month) => {\n          // Map the metric keys to monthly data keys\n          const primaryMonthlyKey = metricConfig.primary.key === \"Total Sessions\" ? \"Sessions\" : \n                                   metricConfig.primary.key === \"Total Spend\" ? \"Spend\" :\n                                   metricConfig.primary.key === \"Total Cost\" ? \"Cost\" :\n                                   metricConfig.primary.key;\n          \n          const secondaryMonthlyKey = metricConfig.secondary.key === \"Avg Conv. Rate\" ? \"Conv. Rate\" :\n                                     metricConfig.secondary.key === \"Total Purchase ROAS\" ? \"Purchase ROAS\" :\n                                     metricConfig.secondary.key === \"Conv. Value / Cost\" ? \"Conv. Value/ Cost\" :\n                                     metricConfig.secondary.key;\n\n          const primaryMetric = month[primaryMonthlyKey];\n          const secondaryMetric = month[secondaryMonthlyKey];\n\n          if (\n            typeof primaryMetric === 'number' &&\n            typeof secondaryMetric === 'number'\n          ) {\n            metrics[metricConfig.primary.key] += Number(primaryMetric);\n            metrics[metricConfig.secondary.key] += Number(secondaryMetric);\n            totalMonths++;\n          }\n        });\n      }\n    });\n\n    return {\n      [metricConfig.primary.key]: totalMonths > 0 ? metrics[metricConfig.primary.key] / totalMonths : 0,\n      [metricConfig.secondary.key]: totalMonths > 0 ? metrics[metricConfig.secondary.key] / totalMonths : 0\n    };\n  }, [data, metricConfig]); // Only depend on original data\n\n  const categories: CategoryData[] = useMemo(() => {\n    const categorizedItems: Record<string, (string | number)[]> = {\n      'Top Performers': [],\n      [`High ${metricConfig.primary.name}`]: [],\n      [`High ${metricConfig.secondary.name}`]: [],\n      'Underperformers': []\n    };\n\n    data.forEach(row => {\n      const primaryMetric = Number(row[metricConfig.primary.key]);\n      const secondaryMetric = Number(row[metricConfig.secondary.key]);\n      const primaryValue = String(row[primaryColumn]);\n\n      const isHighPrimary = primaryMetric >= thresholds[metricConfig.primary.key];\n      const isHighSecondary = secondaryMetric >= thresholds[metricConfig.secondary.key];\n\n      if (isHighPrimary && isHighSecondary) {\n        categorizedItems['Top Performers'].push(primaryValue);\n      } else if (isHighPrimary && !isHighSecondary) {\n        categorizedItems[`High ${metricConfig.primary.name}`].push(primaryValue);\n      } else if (!isHighPrimary && isHighSecondary) {\n        categorizedItems[`High ${metricConfig.secondary.name}`].push(primaryValue);\n      } else {\n        categorizedItems['Underperformers'].push(primaryValue);\n      }\n    });\n\n    return [\n      {\n        name: 'Top Performers',\n        color: 'text-green-700',\n        bgColor: 'bg-[#D7FFDF]',\n        count: categorizedItems['Top Performers'].length,\n        items: categorizedItems['Top Performers'],\n        description: `Above average in both ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)})`\n      },\n      {\n        name: `High ${metricConfig.primary.name}`,\n        color: 'text-blue-700',\n        bgColor: 'bg-[#EFF6FF]',\n        count: categorizedItems[`High ${metricConfig.primary.name}`].length,\n        items: categorizedItems[`High ${metricConfig.primary.name}`],\n        description: `High ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) but below average ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\n      },\n      {\n        name: `High ${metricConfig.secondary.name}`,\n        color: 'text-yellow-700',\n        bgColor: 'bg-[#FFFBEB]',\n        count: categorizedItems[`High ${metricConfig.secondary.name}`].length,\n        items: categorizedItems[`High ${metricConfig.secondary.name}`],\n        description: `High ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)}) but below average ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)})`\n      },\n      {\n        name: 'Underperformers',\n        color: 'text-red-700',\n        bgColor: 'bg-[#FFF1F2]',\n        count: categorizedItems['Underperformers'].length,\n        items: categorizedItems['Underperformers'],\n        description: `Below average in both ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\n      }\n    ];\n  }, [data, thresholds, primaryColumn, metricConfig]);\n\n  const handleCategoryClick = (categoryName: string) => {\n    const category = categories.find(c => c.name === categoryName);\n    if (category) {\n      if (filteredCategory === categoryName) {\n        setFilteredCategory(null);\n        onCategoryFilter?.([]);\n      } else {\n        setFilteredCategory(categoryName);\n        onCategoryFilter?.(category.items);\n      }\n    }\n  };\n\n  return (\n    <TooltipProvider>\n      <div id=\"age-report-performance\" className=\"space-y-4 py-2.5\">\n        <div className=\"border border-gray-300 rounded-lg overflow-hidden\">\n          <div className=\"flex items-stretch h-9\">\n            {categories.map((category) => (\n              <Tooltip key={category.name}>\n                <TooltipTrigger asChild>\n                  <div\n                    className={`relative flex-grow ${category.bgColor} border-r last:border-r-0 border-gray-300 cursor-pointer transition-all duration-300 ease-in-out hover:opacity-90`}\n                    onClick={() => handleCategoryClick(category.name)}\n                  >\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\n                      <span className={`text-xs font-medium ${category.color} ${filteredCategory === category.name ? 'underline' : ''}`}>\n                        {category.name} ({category.count})\n                        {filteredCategory === category.name && (\n                          <span className=\"ml-1 inline-block w-2 h-2 bg-blue-500 rounded-full\"></span>\n                        )}\n                      </span>\n                    </div>\n                  </div>\n                </TooltipTrigger>\n                <TooltipContent className=\"max-w-xs p-4 bg-gray-900 text-white border-0 shadow-lg\">\n                  <div>\n                    \n                    {/* Category name and larger color sample */}\n                    <div  className=\"flex items-center gap-3 mb-3\">\n                      <div className={`w-8 h-8 rounded-lg ${category.bgColor} border border-white/20 flex items-center justify-center`}>\n                        <div className={`w-4 h-4 rounded-md ${category.color.replace('text-', 'bg-')}`} />\n                      </div>\n                      <p className=\"font-medium text-lg text-white\">\n                        {category.name}\n                      </p>\n                    </div>\n\n                    {/* Description */}\n                    <p className=\"text-sm text-gray-200\">{category.description}</p>\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            ))}\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n};\n\nexport default PerformanceSummary;","import { useDispatch, useSelector } from \"react-redux\";\nimport { Button } from \"@/components/ui/button\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Settings } from \"lucide-react\";\nimport { setLocale } from \"@/store/slices/LocalSlice\";\nimport { RootState } from \"@/store\";\n\ninterface NumberFormatSelectorProps {\n  size?: \"icon\" | \"default\" | \"sm\" | \"lg\";\n  variant?: \"outline\" | \"link\" | \"default\" | \"destructive\" | \"secondary\" | \"ghost\";\n  iconSize?: string;\n  className?: string;\n}\n\nconst NumberFormatSelector = ({ \n  size = \"icon\", \n  variant = \"outline\",\n  iconSize = \"h-4 w-4\",\n  className = \"\"\n}: NumberFormatSelectorProps) => {\n  const dispatch = useDispatch();\n  const locale = useSelector((state: RootState) => state.locale.locale);\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button \n          variant={variant as \"outline\" | \"link\" | \"default\" | \"destructive\" | \"secondary\" | \"ghost\"} \n          size={size as \"icon\" | \"default\" | \"sm\" | \"lg\"} \n          className={className}\n        >\n          <Settings className={iconSize} />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-56\">\n        <div className=\"grid gap-3\">\n          <h3 className=\"font-medium text-sm\">Number Format Preferences</h3>\n          <div className=\"flex flex-col space-y-2\">\n            <label className=\"flex items-center space-x-2 cursor-pointer text-sm\">\n              <input\n                type=\"radio\"\n                name=\"locale\"\n                value=\"en-IN\"\n                checked={locale === \"en-IN\"}\n                onChange={() => dispatch(setLocale(\"en-IN\"))}\n                className=\"form-radio\"\n              />\n              <span>Indian</span>\n            </label>\n            <label className=\"flex items-center space-x-2 cursor-pointer text-sm\">\n              <input\n                type=\"radio\"\n                name=\"locale\"\n                value=\"en-US\"\n                checked={locale === \"en-US\"}\n                onChange={() => dispatch(setLocale(\"en-US\"))}\n                className=\"form-radio\"\n              />\n              <span>International</span>\n            </label>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default NumberFormatSelector;","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { RootState } from \"@/store\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        audienceData: Array<{\n            \"Audience Segments\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\":number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedAudienceData: Array<{\n        \"Audience Segments\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst AudienceFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n    const dispatch = useDispatch();\n\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId:string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/audience/${brandId}`, {\n             startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n      \n      useEffect(() => {\n        if (!fullScreenAccount) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [fullScreenAccount, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const blendedAudienceData = apiResponse?.blendedAudienceData;\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Audience Segments\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n    const locale = useSelector((state:RootState) => state.locale.locale)\n\n  \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Audience Segments Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedAudienceData && blendedAudienceData.length > 0)&&(\n                         <Card\n   \n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                     >\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\n                             <div className=\"flex items-center justify-between\">\n                                 <div className=\"flex items-center gap-2\">\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                     <div className=\"text-lg font-medium\">\n                                         Blended Summary\n                                     </div>\n                                 </div>\n                                 <div className=\"flex items-center space-x-2\">\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                         <DatePickerWithRange\n                                             \n                                         />\n                                     </div>}\n                                     <NumberFormatSelector />\n                                     <Button\n                                         onClick={handleManualRefresh}\n                                         disabled={loading}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                     </Button>\n                                     <Button\n                                         onClick={() => toggleFullScreen('blended-summary')}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         {fullScreenAccount === 'blended-summary' ? (\n                                             <Minimize className=\"h-4 w-4\" />\n                                         ) : (\n                                             <Maximize className=\"h-4 w-4\" />\n                                         )}\n                                     </Button>\n                                 </div>\n                             </div>\n                         </div>\n                         <CardContent className=\"p-0\">\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                             <PerformanceSummary\n                                        data={blendedAudienceData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                 <ConversionTable\n                                     data={Array.isArray(blendedAudienceData) ? blendedAudienceData : [blendedAudienceData]}\n                                     primaryColumn={primaryColumn}\n                                     secondaryColumns={secondaryColumns}\n                                     monthlyDataKey={monthlyDataKey}\n                                     monthlyMetrics={monthlyMetrics}\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\n                                     locale={locale}\n                                 />\n                             </div>\n                         </CardContent>\n                     </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n                                               \n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                <PerformanceSummary\n                                        data={account.audienceData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={account.audienceData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                       locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default AudienceFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent} from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        placementData: Array<{\n            \"Placements\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\": number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedPlacementData: Array<{\n        \"Placements\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst PlacementFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state : RootState) =>state.date.from)\n    const dateTo = useSelector((state : RootState)=>state.date.to)\n    const date = useMemo(() => ({\n        from: dateFrom,\n        to: dateTo\n    }), [dateFrom, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId: string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/placement/${brandId}`, {\n                 startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n      \n      useEffect(() => {\n        if (!fullScreenAccount) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [fullScreenAccount, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const blendedPlacementData = apiResponse?.blendedPlacementData;    \n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Placements\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n    const locale = useSelector((state:RootState) => state.locale.locale)\n\n   \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Placements Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedPlacementData && blendedPlacementData.length > 0)&&(\n                         <Card\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                     >\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\n                             <div className=\"flex items-center justify-between\">\n                                 <div className=\"flex items-center gap-2\">\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                     <div className=\"text-lg font-medium\">\n                                         Blended Summary\n                                     </div>\n                                 </div>\n                                 <div className=\"flex items-center space-x-2\">\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                         <DatePickerWithRange\n                                             \n                                         />\n                                     </div>}\n                                     <NumberFormatSelector />\n                                     <Button\n                                         onClick={handleManualRefresh}\n                                         disabled={loading}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                     </Button>\n                                     <Button\n                                         onClick={() => toggleFullScreen('blended-summary')}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         {fullScreenAccount === 'blended-summary' ? (\n                                             <Minimize className=\"h-4 w-4\" />\n                                         ) : (\n                                             <Maximize className=\"h-4 w-4\" />\n                                         )}\n                                     </Button>\n                                 </div>\n                             </div>\n                         </div>\n                         <CardContent className=\"p-0\">\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                             <PerformanceSummary\n                                        data={blendedPlacementData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                 <ConversionTable\n                                     data={Array.isArray(blendedPlacementData) ? blendedPlacementData : [blendedPlacementData]}\n                                     primaryColumn={primaryColumn}\n                                     secondaryColumns={secondaryColumns}\n                                     monthlyDataKey={monthlyDataKey}\n                                     monthlyMetrics={monthlyMetrics}\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\n                                     locale={locale}\n                                 />\n                             </div>\n                         </CardContent>\n                     </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n                                               \n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                <PerformanceSummary\n                                        data={account.placementData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={account.placementData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default PlacementFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent} from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        platformData: Array<{\n            \"Platforms\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\":number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedPlatformData: Array<{\n        \"Platforms\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst PlatformFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n        from: dateFrom,\n        to: dateTo\n    }), [dateFrom, dateTo]);\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n\n    const dispatch = useDispatch();\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId:string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n    const locale = useSelector((state:RootState) => state.locale.locale)\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/platform/${brandId}`, {\n                startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n      \n      useEffect(() => {\n        if (!fullScreenAccount) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [fullScreenAccount, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const blendedPlatformData = apiResponse?.blendedPlatformData;\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Platforms\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n\n   \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Platform Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                     {(blendedPlatformData && blendedPlatformData.length > 0)&&(\n                         <Card\n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                     >\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\n                             <div className=\"flex items-center justify-between\">\n                                 <div className=\"flex items-center gap-2\">\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                     <div className=\"text-lg font-medium\">\n                                         Blended Summary\n                                     </div>\n                                 </div>\n                                 <div className=\"flex items-center space-x-2\">\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                         <DatePickerWithRange\n                                             \n                                         />\n                                     </div>}\n                                     <NumberFormatSelector />\n                                     <Button\n                                         onClick={handleManualRefresh}\n                                         disabled={loading}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                     </Button>\n                                     <Button\n                                         onClick={() => toggleFullScreen('blended-summary')}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         {fullScreenAccount === 'blended-summary' ? (\n                                             <Minimize className=\"h-4 w-4\" />\n                                         ) : (\n                                             <Maximize className=\"h-4 w-4\" />\n                                         )}\n                                     </Button>\n                                 </div>\n                             </div>\n                         </div>\n                         <CardContent className=\"p-0\">\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                             <PerformanceSummary\n                                        data={blendedPlatformData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                 <ConversionTable\n                                     data={Array.isArray(blendedPlatformData) ? blendedPlatformData : [blendedPlatformData]}\n                                     primaryColumn={primaryColumn}\n                                     secondaryColumns={secondaryColumns}\n                                     monthlyDataKey={monthlyDataKey}\n                                     monthlyMetrics={monthlyMetrics}\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\n                                     locale={locale}\n                                 />\n                             </div>\n                         </CardContent>\n                     </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md px-3 pt-2\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n                                                \n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                     <PerformanceSummary\n                                        data={account.platformData}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    /> \n                                    <ConversionTable\n                                        data={account.platformData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default PlatformFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent} from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        countryData: Array<{\n            \"Country\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\":number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedCountryData: Array<{\n        \"Country\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst CountryFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId:string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/country/${brandId}`, {\n               startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n      \n      useEffect(() => {\n        if (!fullScreenAccount) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [fullScreenAccount, propDateRange]);\n\n    const blendedCountryData = apiResponse?.blendedCountryData;\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Country\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n    const locale = useSelector((state:RootState) => state.locale.locale)\n\n   \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Country Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedCountryData && blendedCountryData.length > 0)&&(\n                         <Card\n   \n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                     >\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\n                             <div className=\"flex items-center justify-between\">\n                                 <div className=\"flex items-center gap-2\">\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                     <div className=\"text-lg font-medium\">\n                                         Blended Summary\n                                     </div>\n                                 </div>\n                                 <div className=\"flex items-center space-x-2\">\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                         <DatePickerWithRange\n                                             \n                                         />\n                                     </div>}\n                                     <NumberFormatSelector />\n                                     <Button\n                                         onClick={handleManualRefresh}\n                                         disabled={loading}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                     </Button>\n                                     <Button\n                                         onClick={() => toggleFullScreen('blended-summary')}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         {fullScreenAccount === 'blended-summary' ? (\n                                             <Minimize className=\"h-4 w-4\" />\n                                         ) : (\n                                             <Maximize className=\"h-4 w-4\" />\n                                         )}\n                                     </Button>\n                                 </div>\n                             </div>\n                         </div>\n                         <CardContent className=\"p-0\">\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                             <PerformanceSummary\n                                        data={blendedCountryData|| []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                 <ConversionTable\n                                     data={Array.isArray(blendedCountryData) ? blendedCountryData : [blendedCountryData]}\n                                     primaryColumn={primaryColumn}\n                                     secondaryColumns={secondaryColumns}\n                                     monthlyDataKey={monthlyDataKey}\n                                     monthlyMetrics={monthlyMetrics}\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\n                                     locale={locale}\n                                 />\n                             </div>\n                         </CardContent>\n                     </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n                                               \n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                     <PerformanceSummary\n                                        data={account.countryData|| []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={account.countryData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default CountryFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        deviceData: Array<{\n            \"Device\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\":number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedDeviceData: Array<{\n        \"Device\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst DeviceFbReport : React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateForm = useSelector((state : RootState)=> state.date.from)\n    const dateTo = useSelector((state : RootState)=> state.date.to)\n    const date = useMemo(() => ({\n        from: dateForm,\n        to: dateTo\n    }), [dateForm, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId:string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/device/${brandId}`, {\n               startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n      \n      useEffect(() => {\n        if (!fullScreenAccount) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [fullScreenAccount, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const blendedDeviceData = apiResponse?.blendedDeviceData\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Device\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n    const locale = useSelector((state:RootState)=>state.locale.locale)\n\n   \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Device Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedDeviceData && blendedDeviceData.length > 0)&&(\n                         <Card\n   \n                         className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                     >\n                         <div className=\"bg-white rounded-md pt-2 px-3\">\n                             <div className=\"flex items-center justify-between\">\n                                 <div className=\"flex items-center gap-2\">\n                                     <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                     <div className=\"text-lg font-medium\">\n                                         Blended Summary\n                                     </div>\n                                 </div>\n                                 <div className=\"flex items-center space-x-2\">\n                                     {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                         <DatePickerWithRange\n                                             \n                                         />\n                                     </div>}\n                                     <NumberFormatSelector />\n                                     <Button\n                                         onClick={handleManualRefresh}\n                                         disabled={loading}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                     </Button>\n                                     <Button\n                                         onClick={() => toggleFullScreen('blended-summary')}\n                                         size=\"sm\"\n                                         variant=\"outline\"\n                                         className=\"hover:bg-muted\"\n                                     >\n                                         {fullScreenAccount === 'blended-summary' ? (\n                                             <Minimize className=\"h-4 w-4\" />\n                                         ) : (\n                                             <Maximize className=\"h-4 w-4\" />\n                                         )}\n                                     </Button>\n                                 </div>\n                             </div>\n                         </div>\n                         <CardContent className=\"p-0\">\n                             <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                             <PerformanceSummary\n                                        data={blendedDeviceData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                 <ConversionTable\n                                     data={Array.isArray(blendedDeviceData) ? blendedDeviceData : [blendedDeviceData]}\n                                     primaryColumn={primaryColumn}\n                                     secondaryColumns={secondaryColumns}\n                                     monthlyDataKey={monthlyDataKey}\n                                     monthlyMetrics={monthlyMetrics}\n                                     isFullScreen={fullScreenAccount === 'blended-summary'}\n                                     locale={locale}\n                                 />\n                             </div>\n                         </CardContent>\n                     </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                    {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                     <PerformanceSummary\n                                        data={account.deviceData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={account.deviceData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default DeviceFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw} from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        genderData: Array<{\n            \"Gender\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\": number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedGenderData: Array<{\n        \"Gender\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst GenderFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateForm = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n        from: dateForm,\n        to: dateTo\n    }), [dateForm, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId: string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/gender/${brandId}`, {\n             startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n            dispatch(setDate({\n                from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n                to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n            }));\n        }\n    }, [propDateRange]);\n\n    useEffect(() => {\n        if (!fullScreenAccount) {\n            if (propDateRange) {\n                dispatch(setDate({\n                    from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n                    to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n                }));\n            }\n        }\n    }, [fullScreenAccount, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const blendedGenderData = apiResponse?.blendedGenderData;\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Gender\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n    const locale = useSelector((state: RootState) => state.locale.locale)\n\n    \n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Gender Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedGenderData && blendedGenderData.length > 0) && (\n                        <Card\n\n                            className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md px-3 pt-2\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            Blended Summary\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n\n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen('blended-summary')}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === 'blended-summary' ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                    <PerformanceSummary\n                                        data={blendedGenderData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={Array.isArray(blendedGenderData) ? blendedGenderData : [blendedGenderData]}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === 'blended-summary'}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n\n                                            />\n                                        </div>}\n                                     <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                    <PerformanceSummary\n                                        data={account.genderData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={account.genderData}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        isAdsTable={true}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default GenderFbReport;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"@/pages/ConversionReportPage/components/Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent} from '@/components/ui/card';\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { FacebookLogo } from \"@/data/logo\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    data: Array<{\n        account_name: string;\n        ageData: Array<{\n            \"Age\": string;\n            \"Total Spend\": number;\n            \"Total Purchase ROAS\": number;\n            \"Total PCV\": number;\n            MonthlyData?: Array<{\n                Month: string;\n                spend: number;\n                purchase_roas: number;\n                purchase_conversion_value: number;\n            }>;\n        }>;\n    }>,\n    blendedAgeData: Array<{\n        \"Age\": string;\n        \"Total Spend\": number;\n        \"Total Purchase ROAS\": number;\n        \"Total PCV\": number;\n        MonthlyData?: Array<{\n            Month: string;\n            spend: number;\n            purchase_roas: number;\n            purchase_conversion_value: number;\n        }>;\n    }>\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst AgeFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n        from: dateFrom,\n        to: dateTo\n    }), [dateFrom, dateTo]);\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\n    const dispatch = useDispatch();\n    const locale = useSelector((state : RootState)=>state.locale.locale);\n\n    const { brandId } = useParams();\n    const toggleFullScreen = (accountId: string) => {\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n\n            const response = await axiosInstance.post(`/api/meta/report/age/${brandId}`, {\n               startDate: startDate, endDate: endDate,\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate,]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n            dispatch(setDate({\n                from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n                to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n            }));\n        }\n    }, [propDateRange]);\n\n    useEffect(() => {\n        if (!fullScreenAccount) {\n            if (propDateRange) {\n                dispatch(setDate({\n                    from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n                    to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n                }));\n            }\n        }\n    }, [fullScreenAccount, propDateRange]);\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Age\";\n    const monthlyDataKey = \"MonthlyData\";\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\n    const monthlyMetrics = [\"Spend\", \"Purchase ROAS\"];\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n    const blendedAgeData = apiResponse?.blendedAgeData;\n\n    if(loading){\n        return <Loader isLoading={loading}/>\n    }\n\n    return (\n        <div>\n            {/* Dashboard Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                <div className=\"flex items-center gap-3\">\n                    <FacebookLogo />\n                    <div>\n                        <h2 className=\"text-xl font-semibold tracking-tight\">Age Insights</h2>\n                    </div>\n                </div>\n\n            </div>\n\n                <div className=\"grid grid-cols-1 gap-6\">\n                    {(blendedAgeData && blendedAgeData.length > 0) && (\n                        <Card\n\n                            className={`${fullScreenAccount === 'blended-summary' ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md pt-2 px-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            Blended Summary\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n\n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen('blended-summary')}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === 'blended-summary' ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                    <PerformanceSummary\n                                        data={blendedAgeData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={Array.isArray(blendedAgeData) ? blendedAgeData : [blendedAgeData]}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === 'blended-summary'}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    )}\n                    {apiResponse?.data.map((account, index) => (\n                        <Card\n                            key={index}\n                            className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}\n                        >\n                            <div className=\"bg-white rounded-md px-3 pt-2\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"h-2 w-2 bg-blue-500 rounded-full\" />\n                                        <div className=\"text-lg font-medium\">\n                                            {account.account_name}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {fullScreenAccount && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                                            <DatePickerWithRange\n\n                                            />\n                                        </div>}\n                                        <NumberFormatSelector />\n                                        <Button\n                                            onClick={handleManualRefresh}\n                                            disabled={loading}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                                        </Button>\n                                        <Button\n                                            onClick={() => toggleFullScreen(account.account_name)}\n                                            size=\"sm\"\n                                            variant=\"outline\"\n                                            className=\"hover:bg-muted\"\n                                        >\n                                            {fullScreenAccount === account.account_name ? (\n                                                <Minimize className=\"h-4 w-4\" />\n                                            ) : (\n                                                <Maximize className=\"h-4 w-4\" />\n                                            )}\n                                        </Button>\n                                    </div>\n                                </div>\n                            </div>\n                            <CardContent className=\"p-0\">\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\n                                    <PerformanceSummary\n                                        data={account.ageData || []}\n                                        primaryColumn={primaryColumn}\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\n                                    />\n                                    <ConversionTable\n                                        data={Array.isArray(account.ageData) ? account.ageData : [account.ageData]}\n                                        primaryColumn={primaryColumn}\n                                        secondaryColumns={secondaryColumns}\n                                        monthlyDataKey={monthlyDataKey}\n                                        monthlyMetrics={monthlyMetrics}\n                                        isFullScreen={fullScreenAccount === account.account_name}\n                                        locale={locale}\n                                    />\n                                </div>\n                            </CardContent>\n                        </Card>\n                    ))}\n                </div>\n        </div>\n    );\n}\nexport default AgeFbReport;\n","import React, { useMemo, useState } from 'react';\nimport { FaMeta } from \"react-icons/fa6\";\nimport AudienceFbReport from './component/AudienceFbReport';\nimport PlacementFbReport from './component/PlacementFbReport';\nimport PlatformFbReport from './component/PlatformFbReport';\nimport CountryFbReport from './component/CountryFbReport';\nimport DeviceFbReport from './component/DeviceFbReport';\nimport GenderFbReport from './component/GenderFbReport';\nimport AgeFbReport from './component/AgeFbReport';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport Header from '@/components/dashboard_component/Header';\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\nimport CollapsibleSidebar from '@/components/dashboard_component/CollapsibleSidebar';\nimport { CustomTabs } from '@/pages/ConversionReportPage/components/CustomTabs';\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\nimport ConnectPlatform from '@/pages/ReportPage/ConnectPlatformPage';\nimport { selectFbTokenError } from '@/store/slices/TokenSllice';\nimport { useParams } from 'react-router-dom';\nimport { Target } from 'lucide-react';\nimport Footer from '@/pages/LandingPage/components/Footer';\n\nconst FbReportPage: React.FC = () => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n        from: dateFrom,\n        to: dateTo\n    }), [dateFrom, dateTo]);\n    const [activeTab, setActiveTab] = useState('age');\n    const { brandId } = useParams();\n    const brands = useSelector((state: RootState) => state.brand.brands);\n    const selectedBrand = brands.find((brand) => brand._id === brandId);\n    const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\n        ? true\n        : false;\n    const fbTokenError = useSelector(selectFbTokenError);\n\n    const dateRange = {\n        from: date.from ? new Date(date.from) : undefined,\n        to: date.to ? new Date(date.to) : undefined\n    }\n\n    const tabs = [\n        { label: 'Age', value: 'age' },\n        { label: 'Gender', value: 'gender' },\n        { label: 'Country', value: 'country' },\n        { label: 'Platform', value: 'platform' },\n        { label: 'Placement', value: 'placement' },\n        { label: 'Impression Device', value: 'impressionDevice' },\n        { label: 'Audience Segments', value: 'audienceSegments' }\n    ];\n\n    const handleTabChange = (value: string) => {\n        setActiveTab(value);\n    };\n\n    return (\n        <div className=\"flex h-screen bg-gray-100\">\n            <CollapsibleSidebar />\n            <div className=\"flex-1 h-screen overflow-auto\">\n                <Header\n                    title='Meta Reports'\n                    Icon={FaMeta}\n                    showDatePicker={true}\n                />\n\n                {fbTokenError ? (\n                    <NoAccessPage\n                        platform=\"Facebook Ads\"\n                        message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\n                        icon={<Target className=\"w-8 h-8 text-red-500\" />}\n                        loginOptions={[\n                            {\n                                label: \"Connect Facebook Ads\",\n                                provider: \"facebook\"\n                            }\n                        ]}\n                    />\n                ) : !hasFbAdAccount ? (\n                    <ConnectPlatform\n                        platform=\"facebook\"\n                        brandId={brandId ?? ''}\n                        onSuccess={(platform, accountName, accountId) => {\n                            console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n                        }}\n                    />\n                ) : (!date.from || !date.to) ? (\n                    <MissingDateWarning />\n                ) : (\n                    <>\n                        {/* Tabs */}\n                        <div className=\"bg-white px-6 sticky top-0 z-10\">\n                            <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\n                        </div>\n\n                        {/* Scrollable Content */}\n                        <div className=\"flex-1 overflow-auto\">\n                            <div className=\"px-6 py-4 space-y-6\">\n                                {activeTab === 'audienceSegments' && (\n                                    <div id=\"audienceSegments\">\n                                        <AudienceFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'placement' && (\n                                    <div id=\"placement\">\n                                        <PlacementFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'platform' && (\n                                    <div id=\"platform\">\n                                        <PlatformFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'country' && (\n                                    <div id=\"country\">\n                                        <CountryFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'impressionDevice' && (\n                                    <div id=\"impressionDevice\">\n                                        <DeviceFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'gender' && (\n                                    <div id=\"gender\">\n                                        <GenderFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                                {activeTab === 'age' && (\n                                    <div id=\"age\">\n                                        <AgeFbReport dateRange={dateRange} />\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </>\n                )}\n                <Footer />\n                <HelpDeskModal />\n            </div>\n        </div>\n    );\n};\n\nexport default FbReportPage;","import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","import type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Building2, PlusCircle, CheckCircle, XCircle } from \"lucide-react\"\nimport { FullBrandData } from \"@/interfaces\"\nimport PlatformModal from \"@/components/dashboard_component/PlatformModal\"\n\n\ninterface PlatformIcon {\n    icon: React.ElementType;\n    name: string;\n}\n\ninterface BrandIntegrationModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    brandId: string;\n    brandName: string;\n    brandData: FullBrandData;\n    platformIcons: {\n        shopify: PlatformIcon;\n        googleAds: PlatformIcon;\n        googleAnalytics: PlatformIcon;\n        facebook: PlatformIcon;\n    };\n}\n\nexport function BrandIntegrationModal({ \n    isOpen, \n    onClose, \n    brandId, \n    brandName, \n    brandData, \n    platformIcons \n}: BrandIntegrationModalProps) {\n    const [activeTab, setActiveTab] = useState(\"overview\")\n    const [platformModalOpen, setPlatformModalOpen] = useState(false)\n    const [selectedPlatform, setSelectedPlatform] = useState(\"\")\n    const platforms = [\n        {\n            key: \"shopify\",\n            icon: platformIcons.shopify.icon,\n            name: platformIcons.shopify.name,\n            isConnected: !!brandData.shopifyAccount,\n            accountNumber: '1 Store',\n            accountName: brandData.shopifyAccount?.shopName,\n            data: brandData.shopifyAccount,\n            allowMultipleAccounts: false\n        },\n        {\n            key: \"googleAds\",\n            icon: platformIcons.googleAds.icon,\n            name: platformIcons.googleAds.name,\n            isConnected: brandData.googleAdAccount && brandData.googleAdAccount.length > 0,\n            accountNumber: brandData.googleAdAccount ? `${brandData.googleAdAccount.length} Account(s)` : undefined,\n            accountName: brandData.googleAdAccount && brandData.googleAdAccount.length > 0\n            ? `${brandData.googleAdAccount.map((acc) => acc.clientId).join(\", \")}` \n            : undefined,\n            data: brandData.googleAdAccount,\n            allowMultipleAccounts: true\n        },\n        {\n            key: \"googleAnalytics\",\n            icon: platformIcons.googleAnalytics.icon,\n            name: platformIcons.googleAnalytics.name,\n            isConnected: !!brandData.ga4Account?.PropertyID,\n            accountNumber: '1 Property',\n            accountName: brandData.ga4Account?.PropertyID ? `Property ${brandData.ga4Account.PropertyID}` : undefined,\n            data: brandData.ga4Account,\n            allowMultipleAccounts: false\n        },\n        {\n            key: \"facebook\",\n            icon: platformIcons.facebook.icon,\n            name: platformIcons.facebook.name,\n            isConnected: brandData.fbAdAccounts && brandData.fbAdAccounts.length > 0,\n            accountNumber: brandData.fbAdAccounts ? `${brandData.fbAdAccounts.length} Account(s)` : undefined,\n            accountName: brandData.fbAdAccounts && brandData.fbAdAccounts.length > 0\n            ? `${brandData.fbAdAccounts.join(\", \")}` \n            : undefined,\n            data: brandData.fbAdAccounts,\n            allowMultipleAccounts: true\n        }\n    ]\n    useEffect(()=>{\n        console.log(brandId);\n    },[])\n    \n    const handleAddAccount = (platformKey: string) => {\n        setSelectedPlatform(platformKey)\n        setPlatformModalOpen(true)\n    }\n    \n    const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\n        // Refresh the brand data or update the UI as needed\n        console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`)\n        // You might want to trigger a refresh of the brand data here\n    }\n    \n    return (\n        <Dialog open={isOpen} onOpenChange={onClose}>\n            <DialogContent className=\"sm:max-w-4xl max-h-[100vh] overflow-y-auto\">\n                <DialogHeader>\n                    <div className=\"flex items-center gap-3 mb-2\">\n                        <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\n                            <Building2 className=\"h-5 w-5 text-teal-600\" />\n                        </div>\n                        <DialogTitle className=\"text-xl\">{brandName}</DialogTitle>\n                    </div>\n                    <DialogDescription>Manage platform integrations for this brand</DialogDescription>\n                </DialogHeader>\n\n                <Tabs defaultValue=\"overview\" value={activeTab} onValueChange={setActiveTab} className=\"mt-2\">\n                    <TabsList className=\"grid grid-cols-5 mb-4\">\n                        <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                        <TabsTrigger value=\"shopify\">Shopify</TabsTrigger>\n                        <TabsTrigger value=\"googleAds\">Google Ads</TabsTrigger>\n                        <TabsTrigger value=\"googleAnalytics\">Analytics</TabsTrigger>\n                        <TabsTrigger value=\"facebook\">Facebook</TabsTrigger>\n                    </TabsList>\n\n                    <TabsContent value=\"overview\" className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            {platforms.map((platform) => (\n                                <div key={platform.key} className=\"border rounded-lg p-4 bg-white\">\n                                    <div className=\"flex items-center justify-between mb-3\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <div className=\"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center\">\n                                                <platform.icon className=\"h-4 w-4 text-slate-700\" />\n                                            </div>\n                                            <h3 className=\"font-medium\">{platform.name}</h3>\n                                        </div>\n                                        <Badge\n                                            className={platform.isConnected ? \"bg-green-100 text-green-700\" : \"bg-amber-100 text-amber-700\"}\n                                        >\n                                            {platform.isConnected ? \"Connected\" : \"Not Connected\"}\n                                        </Badge>\n                                    </div>\n\n                                    <div className=\"text-sm text-slate-600 space-y-2\">\n                                        {platform.isConnected ? (\n                                            <>\n                                                {platform.accountNumber && (\n                                                    <div className=\"flex justify-between\">\n                                                        <span>Account(s):</span>\n                                                        <span className=\"font-medium\">{platform.accountNumber}</span>\n                                                    </div>\n                                                )}\n                                                <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => setActiveTab(platform.key)}>\n                                                    View Details\n                                                </Button>\n                                            </>\n                                        ) : (\n                                            <Button \n                                                variant=\"outline\" \n                                                size=\"sm\" \n                                                className=\"w-full\"\n                                                onClick={() => handleAddAccount(platform.key)}\n                                            >\n                                                <PlusCircle className=\"h-4 w-4 mr-2\" />\n                                                Add {platform.key === 'shopify' ? 'Store' : 'Account'}\n                                            </Button>\n                                        )}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </TabsContent>\n\n                    {platforms.map((platform) => (\n                        <TabsContent key={platform.key} value={platform.key} className=\"space-y-4\">\n                            <div className=\"flex items-center justify-between\">\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\n                                        <platform.icon className=\"h-5 w-5 text-slate-700\" />\n                                    </div>\n                                    <div>\n                                        <h3 className=\"font-medium text-lg\">{platform.name}</h3>\n                                        <span className=\"text-sm text-slate-500\">\n                                            {platform.isConnected ? `Connected to ${platform.accountName}` : \"Not connected\"}\n                                        </span>\n                                    </div>\n                                </div>\n                                <Badge className={platform.isConnected ? \"bg-green-100 text-green-700\" : \"bg-amber-100 text-amber-700\"}>\n                                    {platform.isConnected ? \"Active\" : \"Inactive\"}\n                                </Badge>\n                            </div>\n\n                            <div className=\"border rounded-lg p-5 bg-slate-50\">\n                                <h4 className=\"font-medium mb-3\">Connection Details</h4>\n\n                                {platform.isConnected ? (\n                                    <div className=\"space-y-4\">\n                                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                                            <div className=\"space-y-1\">\n                                                <p className=\"text-slate-500\">Account Name</p>\n                                                <p className=\"font-medium\">{platform.accountName || \"N/A\"}</p>\n                                            </div>\n                                            <div className=\"space-y-1\">\n                                                <p className=\"text-slate-500\">Status</p>\n                                                <div className=\"flex items-center gap-1 text-green-600\">\n                                                    <CheckCircle className=\"h-4 w-4\" />\n                                                    <span>Connected</span>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex gap-3 mt-4 justify-end\">\n                                        {platform.allowMultipleAccounts && ( <Button size={\"sm\"} onClick={() => handleAddAccount(platform.key)}>\n                                            <PlusCircle className=\"h-4 w-4 mr-1\" />\n                                            Add {platform.key === 'shopify' ? 'Store' : 'Account'}\n                                        </Button>)}\n                                            <Button variant=\"destructive\" size=\"sm\" className=\"text-white hover:bg-red-800\">\n                                                Disconnect\n                                            </Button>\n                                        </div>\n                                    </div>\n                                ) : (\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex items-center gap-2 text-amber-600\">\n                                            <XCircle className=\"h-5 w-5\" />\n                                            <span>Not connected</span>\n                                        </div>\n\n                                        <div className=\"bg-white p-4 rounded border text-sm\">\n                                            <h5 className=\"font-medium mb-2\">Why connect {platform.name}?</h5>\n                                            <ul className=\"list-disc pl-5 space-y-1 text-slate-600\">\n                                                <li>Get comprehensive analytics across all your marketing channels</li>\n                                                <li>Track performance metrics in one dashboard</li>\n                                                <li>Generate insights from combined data sources</li>\n                                            </ul>\n                                        </div>\n\n                                        <Button className=\"mt-2\" onClick={() => handleAddAccount(platform.key)}>\n                                            <PlusCircle className=\"h-4 w-4 mr-2\" />\n                                            Add {platform.key === 'shopify' ? 'Store' : 'Account'}\n                                        </Button>\n                                    </div>\n                                )}\n                            </div>\n                        </TabsContent>\n                    ))}\n                </Tabs>\n            </DialogContent>\n            \n            {/* Platform Modal for adding accounts */}\n            {selectedPlatform && (\n                <PlatformModal\n                    platform={selectedPlatform === 'googleAds' ? 'Google Ads' : \n                              selectedPlatform === 'googleAnalytics' ? 'Google Analytics' : \n                              selectedPlatform === 'facebook' ? 'Facebook' : 'Shopify'}\n                    open={platformModalOpen}\n                    onOpenChange={setPlatformModalOpen}\n                    brandId={brandId}\n                    onSuccess={handlePlatformModalSuccess}\n                />\n            )}\n        </Dialog>\n    )\n}","import { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { Building2, Plus, Settings, Trash2, ShoppingBag, BarChart3, LineChart, Facebook } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { BrandIntegrationModal } from \"./BrandIntegrationModal\"\nimport { useSelector , useDispatch } from \"react-redux\"\nimport { RootState } from \"@/store\"\nimport axios from \"axios\"\nimport { baseURL } from \"@/data/constant\"\nimport { BrandDetail , FullBrandData } from \"@/interfaces\"\nimport { deleteBrand } from \"@/store/slices/BrandSlice\"\nimport { removeBrandFromUser } from \"@/store/slices/UserSlice\"\n\nconst platformIcons = {\n    shopify: { \n      icon: ShoppingBag, \n      name: \"Shopify\" \n    },\n    googleAds: { \n      icon: BarChart3, \n      name: \"Google Ads\" \n    },\n    googleAnalytics: { \n      icon: LineChart, \n      name: \"Google Analytics\" \n    },\n    facebook: { \n      icon: Facebook, \n      name: \"Facebook\" \n    }\n  }\n\nexport function BrandCards({ \n    userBrands = [] as string[] \n  }: { \n    userBrands?: string[] \n  }) {\n  const navigate = useNavigate()\n  const [selectedBrand, setSelectedBrand] = useState<{id: string, name: string} | null>(null)\n  const [selectedBrandData, setSelectedBrandData] = useState<FullBrandData | null>(null)\n  const brands = useSelector((state: RootState) => state.brand.brands);\n\n  const dispatch = useDispatch();\n\n\n  const userBrandDetails: BrandDetail[] = userBrands?.map((brandId: string) => {\n    const brand = brands.find((b) => b._id === brandId);\n    return brand \n      ? { _id: brand._id, name: brand.name }\n      : { _id: brandId, name: \"Unknown Brand\" };\n  }) || [];\n\n  useEffect(() => {\n    const fetchBrandDetails = async () => {\n      if (selectedBrand) {\n        try {\n          const response = await axios.get(`${baseURL}/api/brands/${selectedBrand.id}`,{withCredentials : true});\n          setSelectedBrandData(response.data);\n        } catch (error) {\n          console.error('Error fetching brand details:', error);\n        }\n      }\n    };\n\n    fetchBrandDetails();\n  }, [selectedBrand]);\n\n  const handleOpenModal = (brand: {id: string, name: string}) => {\n    setSelectedBrand(brand)\n  }\n\n  const handleCloseModal = () => {\n    setSelectedBrand(null)\n    setSelectedBrandData(null)\n  }\n\n  const handleDeleteBrand = async (brandId: string) => {\n    try {\n      \n      await axios.delete(`${baseURL}/api/brands/delete/${brandId}`, { withCredentials: true });\n      dispatch(deleteBrand(brandId));\n      dispatch(removeBrandFromUser(brandId));\n      \n    } catch (error) {\n      console.error('Error deleting brand:', error);\n    }\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <Button onClick={() => navigate(\"/brand-setup\")} variant=\"outline\" className=\"text-slate-700\">\n          <Plus className=\"h-5 w-5 mr-2\" />\n          Add New Brand\n        </Button>\n\n        {userBrandDetails.map((brand) => (\n          <div\n            key={brand._id}\n            className=\"bg-white rounded-lg border border-slate-200 p-5 hover:shadow-md transition-shadow cursor-pointer\"\n            onClick={() => handleOpenModal({ id: brand._id, name: brand.name })}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\n                  <Building2 className=\"h-5 w-5 text-teal-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-medium text-slate-900\">{brand.name}</h3>\n                  <span className=\"text-sm text-slate-500\">Connected</span>\n                </div>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"text-slate-600\"\n                onClick={(e) => {\n                  e.stopPropagation()\n                  // Handle settings click\n                }}\n              >\n                <Settings className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-slate-600\">Integration Status</span>\n                <Badge className=\"bg-teal-100 text-teal-700\">Active</Badge>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"text-slate-700\"\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    handleOpenModal({ id: brand._id, name: brand.name })\n                  }}\n                >\n                  Manage\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"text-red-600 hover:text-red-700\"\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    handleDeleteBrand(brand._id)\n                  }}\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {selectedBrand && selectedBrandData && (\n        <BrandIntegrationModal\n          isOpen={true}\n          onClose={handleCloseModal}\n          brandId={selectedBrand.id}\n          brandName={selectedBrand.name}\n          brandData={selectedBrandData}\n          platformIcons={platformIcons}\n        />\n      )}\n    </div>\n  )\n}","import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n    Mail,\n    Shield,\n    HelpCircle,\n} from 'lucide-react';\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\nimport { RootState } from '@/store';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { baseURL } from '@/data/constant';\nimport { BrandCards } from './components/BrandCard';\n\nfunction ProfilePage() {\n    const [activeTab, setActiveTab] = useState('brands');\n    const user = useSelector((state: RootState) => state.user.user);\n    console.log(user?.brands)\n\n    const handleZohoLogin = async () => {\n        try {\n          const response = await axios.get(\n            `${baseURL}/api/auth/zoho?source=${encodeURIComponent(window.location.pathname)}`\n          );\n          const { authUrl } = response.data;\n     \n          window.location.href = authUrl;\n        } catch (error) {\n          console.error('Error getting Zoho Auth URL:', error);\n        }\n    }\n\n    return (\n        <div className=\"flex h-screen\"> \n            <CollapsibleSidebar />\n            <div className=\"flex-1 h-screen overflow-auto\">\n                <div className=\"min-h-screen bg-slate-50\">\n                    <div className=\"container mx-auto px-4 py-4\">\n                        <div className=\"bg-white rounded-xl shadow-sm\">\n                            <div className=\"p-6 border-b border-slate-200\">\n                                <div className=\"flex items-start gap-6\">\n                                    <div className=\"h-24 w-24 rounded-full bg-slate-100 flex items-center justify-center\">\n                                        <span className=\"text-4xl font-bold text-slate-600\">{user?.username[0]}</span>\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <div className=\"flex items-center gap-4\">\n                                            <h2 className=\"text-2xl font-semibold text-slate-800\">{user?.username}</h2>\n                                            {user?.isAdmin && (\n                                                <Badge className=\"bg-teal-100 text-teal-700 px-3 py-1 rounded-full\">\n                                                    <Shield className=\"h-4 w-4 mr-1\" />\n                                                    Administrator\n                                                </Badge>\n                                            )}\n                                        </div>\n                                        <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                                            <div className=\"flex items-center gap-2 text-slate-600\">\n                                                <Mail className=\"h-4 w-4\" />\n                                                <span>{user?.email}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"border-b border-slate-200\">\n                                <div className=\"flex px-6\">\n                                    {['Brands'].map((tab) => (\n                                        <button\n                                            key={tab}\n                                            onClick={() => setActiveTab(tab.toLowerCase())}\n                                            className={`px-6 py-4 font-medium text-sm transition-colors relative ${activeTab === tab.toLowerCase()\n                                                ? 'text-teal-600'\n                                                : 'text-slate-600 hover:text-slate-900'\n                                                }`}\n                                        >\n                                            {tab}\n                                            {activeTab === tab.toLowerCase() && (\n                                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-teal-600\"></div>\n                                            )}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n\n                            {activeTab.toLowerCase() === 'brands' &&\n                              <BrandCards userBrands={user?.brands} />\n                            }\n                            {activeTab.toLowerCase() === \"support\" && user?.isAdmin && (\n                                <div className=\"py-8 flex gap-4 items-center justify-center\">\n                                    <Button onClick={handleZohoLogin} className=\"bg-teal-600 hover:bg-teal-700\">\n                                        <HelpCircle className=\"h-5 w-5 mr-2\" />\n                                        Connect Zoho Help Desk\n                                    </Button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ProfilePage;","export interface TutorialStep {\n    element: string;\n    popover: {\n        title: string;\n        description: string;\n        position?: 'top' | 'bottom' | 'left' | 'right' | 'auto';\n    };\n}\n\nexport interface TutorialDefinition {\n    id: string;\n    title: string;\n    description?: string;\n    route: string | RegExp;  // The route where this tutorial is applicable\n    componentId?: string; // Component identifier (optional)\n    steps?: TutorialStep[]; // Steps can be defined here or in the steps map\n    relatedTutorials?: string[]; // IDs of tutorials that should run after this one\n    priority?: number; // Higher priority tutorials will run first (default: 0)\n}\n\n// List of all available tutorials\nexport const availableTutorials: TutorialDefinition[] = [\n    {\n        id: 'business-performance',\n        title: 'Business Performance',\n        route: '/dashboard',\n        description: 'Period wise Metrics Performance',\n    },\n    {\n        id: 'report-tab',\n        title: 'Report Tab',\n        route: /^\\/conversion-reports\\/[a-zA-Z0-9]+\\/demographics$/,\n        description: 'Choose the Reports you want. Tap one any of the report and you will redirect to that report',\n        priority: 2, // Higher priority - will run first,\n        relatedTutorials:['age-conversion-report']\n    },\n    {\n        id: 'age-conversion-report',\n        title: 'Age Conversion Report',\n        description: 'Understanding the age conversion report',\n        route: /^\\/conversion-reports\\/[a-zA-Z0-9]+\\/demographics$/,\n        componentId: 'age-report',\n        priority: 1, \n    },\n    { \n        id: 'marketing-insights',\n        title: 'Marketing Insights',\n        description: 'Understanding the marketing insights iver different months',\n        route: /^\\/ad-metrics\\/[a-zA-Z0-9]+$/,\n    }\n];\n\n// Map tutorial steps by tutorial ID\nexport const tutorialStepsMap: Record<string, TutorialStep[]> = {\n'business-performance': [\n    {\n        element: '#analytics-section',\n        popover: {\n            title: 'Analytics Overview',\n            description: 'This section provides key business metrics such as Sessions, Cart Additions, Checkouts, and Purchases.',\n            position: 'top'\n        }\n    },\n    {\n        element: '#sessions-metric',\n        popover: {\n            title: 'Sessions Overview',\n            description: `This section shows the total number of sessions on your website:\\n\n            - Yesterday: Displays the total sessions for yesterday and its comparison to the previous day.\\n\n            - Last 7 Days: Aggregates data for the last 7 days and compares it with the previous 7-day period.\\n\n            - Last 30 Days: Shows trends over the last month, compared with the previous 30-day period.`,\n            position: 'bottom'\n        }\n    }\n]\n,\n    'report-tab':[\n        {\n            element: '#report-tab',\n            popover: {\n                title: 'Report Tab',\n                description: 'Choose the Reports you want. Tap one any of the report and you will redirect to that report',\n                position: 'bottom'\n            }\n        },\n    ],\n    'age-conversion-report': [\n        {\n            element: '#age-report',\n            popover: {\n                title: 'Age based Report',\n                description: 'Review detailed monthly conversion numbers for each age group here.',\n                position: 'top'\n            }\n        },\n        {\n            element: '#age-report-performance',\n            popover: {\n                title: 'Key Performers',\n                description: 'These metrics highlight your best and worst performing age segments.',\n                position: 'left'\n            }\n        },\n        {\n            element: '#age-report-table',\n            popover: {\n                title: 'Detailed Data',\n                description: 'Analyze session counts, conversion rates, and purchase trends for different age groups over time.',\n                position: 'top'\n            }\n        },\n        {\n            element: \"#refresh\",\n            popover: {\n                title: \"Refresh for Updated Values\",\n                description: \"Refresh to see the latest performance metrics for different age segments\",\n                position: 'bottom',\n            },\n        },\n        {\n            element: \"#filters\",\n            popover: {\n                title: \"Filter Your Data\",\n                description:\n                    \"Use filters to refine your data by selecting a metric, condition, and value. Click 'Add Filter' to apply.\",\n                position: \"bottom\",\n            },\n        },\n        {\n            element: \"#download-button\",\n            popover: {\n                title: \"Download Your Excel Report\",\n                description: \"Click to download the report as an Excel file for further analysis.\",\n                position: \"bottom\",\n            }\n        },\n        {\n            element: \"#expand-button\",\n            popover: {\n                title: \"Expand the Table for a Better View\",\n                description: \"Click to enlarge the table for easier data analysis and readability.\",\n                position: \"bottom\",\n            }\n        }\n    ],\n    'marketing-insights': [\n        {\n            element: '#metrics-table',\n            popover: {\n                title: 'Monthly Performance Overview',\n                description: 'This table displays key performance metrics for each month over the last two years, including ad spend, sales, and ROAS for Meta, Google, and Shopify.',\n                position: 'left'\n            }\n        },\n        {\n            element: '#expand-month',\n            popover: {\n                title: 'Expand to View Daily Breakdown',\n                description: 'Click on a month to expand and see the daily breakdown of ad performance metrics.',\n                position: 'top'\n            }\n        }\n    ],\n    // Define more tutorial steps as needed\n};\n\n// Helper to get all tutorials for a given path\nexport const getTutorialsForPath = (path: string): TutorialDefinition[] => {\n    return availableTutorials\n        .filter(tutorial => {\n            if (typeof tutorial.route === 'string') {\n                return tutorial.route === path;\n            } else {\n                return tutorial.route.test(path);\n            }\n        })\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\n};\n\n// Helper to get tutorial steps by tutorial ID\nexport const getTutorialSteps = (tutorialId: string): TutorialStep[] => {\n    const tutorial = getTutorialById(tutorialId);\n\n    // If tutorial has steps defined in its definition, use those\n    if (tutorial?.steps && tutorial.steps.length > 0) {\n        return tutorial.steps;\n    }\n\n    // Otherwise check the steps map\n    return tutorialStepsMap[tutorialId] || [];\n};\n\n// Helper to get a specific tutorial by ID\nexport const getTutorialById = (id: string): TutorialDefinition | undefined => {\n    return availableTutorials.find(tutorial => tutorial.id === id);\n};\n\n// Helper to get related tutorials (tutorials that should run after this one)\nexport const getRelatedTutorials = (tutorialId: string): string[] => {\n    const tutorial = getTutorialById(tutorialId);\n    return tutorial?.relatedTutorials || [];\n};\n\n// Helper to get component-specific tutorials for a path\nexport const getComponentTutorials = (path: string, componentId: string): TutorialDefinition[] => {\n    return availableTutorials\n        .filter(tutorial => {\n            const routeMatches = typeof tutorial.route === 'string'\n                ? tutorial.route === path\n                : tutorial.route.test(path);\n\n            return routeMatches && tutorial.componentId === componentId;\n        })\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\n};\n\n// Helper to get all tutorials for the current path in the correct order\nexport const getAllTutorialsForPath = (path: string): TutorialDefinition[] => {\n    // Get tutorials that match the current path\n    const pageTutorials = getTutorialsForPath(path);\n    \n    // Sort them by priority (higher priority first)\n    const sortedTutorials = [...pageTutorials].sort((a, b) => \n        (b.priority || 0) - (a.priority || 0)\n    );\n    \n    // Create a map to store unique tutorials\n    const tutorialMap = new Map<string, TutorialDefinition>();\n    \n    // Process a tutorial and its related tutorials\n    const processTutorial = (tutorial: TutorialDefinition) => {\n        // Skip if already processed\n        if (tutorialMap.has(tutorial.id)) {\n            return;\n        }\n        \n        // Add the tutorial to our map\n        tutorialMap.set(tutorial.id, tutorial);\n        \n        // Process related tutorials\n        if (tutorial.relatedTutorials && tutorial.relatedTutorials.length > 0) {\n            for (const relatedId of tutorial.relatedTutorials) {\n                const relatedTutorial = getTutorialById(relatedId);\n                if (relatedTutorial) {\n                    processTutorial(relatedTutorial);\n                }\n            }\n        }\n    };\n    \n    // Process all tutorials\n    for (const tutorial of sortedTutorials) {\n        processTutorial(tutorial);\n    }\n    \n    // Convert map to array, preserving the original priority order\n    const result = Array.from(tutorialMap.values());\n    \n    // Add debugging log\n    console.log('Available tutorials:', result.map(t => t.id).join(', '));\n    \n    return result;\n};\n\n// Create a route map for quick lookup\nexport const tutorialRouteMap: Record<string, string | RegExp> = {};\navailableTutorials.forEach(tutorial => {\n    tutorialRouteMap[tutorial.id] = tutorial.route;\n});","import React,{ useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { RootState } from '@/store';\nimport { setFirstTimeLogin, queueTutorials, completeFirstTimeLogin } from '@/store/slices/TutorialSlice';\nimport { getAllTutorialsForPath } from './TutorialConfig';\n\ninterface TutorialManagerProps {\n  children: React.ReactNode;\n}\n\nconst TutorialManager: React.FC<TutorialManagerProps> = ({ children }) => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const currentPath = location.pathname;\n  \n  const isFirstTimeLogin = useSelector((state: RootState) => state.tutorials.isFirstTimeLogin);\n  const user = useSelector((state: RootState) => state.user.user);\n  \n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\n  const tutorialQueue = useSelector((state: RootState) => state.tutorials.tutorialQueue);\n  const activeTutorial = useSelector((state: RootState) => state.tutorials.activeTutorial);\n\n  // Track if we've already started tutorials in this session to prevent restart\n  const hasStartedTutorialsRef = React.useRef(false);\n\n  // Check if it's the user's first login based on login count\n  useEffect(() => {\n    if (user && !hasStartedTutorialsRef.current) {\n      // Set isFirstTimeLogin to true if loginCount equals 1\n      const isFirstLogin = user.loginCount === 1;\n      \n      console.log('User login status:', { \n        loginCount: user.loginCount, \n        isFirstLogin \n      });\n      \n      dispatch(setFirstTimeLogin(isFirstLogin));\n    }\n  }, [user, dispatch]);\n\n  useEffect(() => {\n    // Log queue changes\n    console.log('Tutorial queue updated:', {\n      active: activeTutorial,\n      queueLength: tutorialQueue.length,\n      queue: tutorialQueue\n    });\n  }, [activeTutorial, tutorialQueue]);\n\n  // Monitor when tutorials are stopped/completed\n  useEffect(() => {\n    // If we had a tutorial active and now we don't, mark first-time login as complete\n    if (hasStartedTutorialsRef.current && activeTutorial === null && !isTutorialActive) {\n      console.log('Tutorial session ended, marking first-time login as complete');\n      dispatch(completeFirstTimeLogin());\n    }\n  }, [activeTutorial, isTutorialActive, dispatch]);\n\n  // Start appropriate tutorials based on path when needed\n  useEffect(() => {\n    // Only queue tutorials once per session to prevent restart\n    if (hasStartedTutorialsRef.current) {\n      return;\n    }\n    \n    // Check if we have what we need to start tutorials\n    const shouldQueueTutorials = isFirstTimeLogin && \n                               user && \n                               !isTutorialActive && \n                               tutorialQueue.length === 0;\n    \n    console.log('Tutorial conditions:', {\n      isFirstTimeLogin,\n      hasUser: !!user,\n      isTutorialActive,\n      queueLength: tutorialQueue.length,\n      shouldQueueTutorials\n    });\n    \n    if (shouldQueueTutorials) {\n      // Add a delay to ensure DOM is fully rendered\n      const timer = setTimeout(() => {\n        // Get all tutorials for this path in the correct order\n        const allTutorials = getAllTutorialsForPath(currentPath);\n        \n        console.log('Available tutorials for path:', {\n          path: currentPath,\n          allTutorials\n        });\n        \n        if (allTutorials.length > 0) {\n          // Get all tutorial IDs for this path\n          const tutorialIds = allTutorials.map(tutorial => tutorial.id);\n          \n          console.log('Queueing tutorials:', tutorialIds);\n          dispatch(queueTutorials(tutorialIds));\n          \n          // Mark that we've started tutorials in this session\n          hasStartedTutorialsRef.current = true;\n        } else {\n          console.log('No tutorials available for this path');\n        }\n      }, 1500);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [isFirstTimeLogin, user, currentPath, isTutorialActive, tutorialQueue, dispatch]);\n\n  return <>{children}</>;\n};\n\nexport default TutorialManager;","import React, { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { driver as driverJS, Driver } from 'driver.js';\nimport 'driver.js/dist/driver.css';\nimport { RootState } from '@/store';\nimport { nextTutorial,  setTutorialStep, queueTutorials } from '@/store/slices/TutorialSlice';\nimport { getTutorialSteps, getRelatedTutorials } from './TutorialConfig';\n\nconst TutorialDriver: React.FC = () => {\n  const dispatch = useDispatch();\n  const driverInstanceRef = useRef<Driver | null>(null);\n  \n  const activeTutorial = useSelector((state: RootState) => state.tutorials.activeTutorial);\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\n  const activeTutorialStep = useSelector((state: RootState) => state.tutorials.activeTutorialStep);\n  const tutorialQueue = useSelector((state: RootState) => state.tutorials.tutorialQueue);\n  \n  // Create a new driver instance when tutorial changes\n  useEffect(() => {\n    if (activeTutorial && isTutorialActive) {\n      console.log(`Starting tutorial: ${activeTutorial}, Queue: [${tutorialQueue.join(', ')}]`);\n      \n      const steps = getTutorialSteps(activeTutorial);\n      \n      if (steps && steps.length > 0) {\n        // Clean up any existing driver instance\n        if (driverInstanceRef.current) {\n          driverInstanceRef.current.destroy();\n          driverInstanceRef.current = null;\n        }\n        \n        // Start the driver with the steps for this tutorial\n        setTimeout(() => {\n          // Find all elements before creating driver to ensure they exist\n          let allElementsExist = true;\n          steps.forEach(step => {\n            const element = document.querySelector(step.element);\n            if (!element) {\n              console.warn(`Element ${step.element} not found for tutorial ${activeTutorial}`);\n              allElementsExist = false;\n            }\n          });\n          \n          if (!allElementsExist) {\n            console.warn(`Not all elements for tutorial ${activeTutorial} exist on the page. Moving to next tutorial.`);\n            dispatch(nextTutorial());\n            return;\n          }\n          \n          // Create a new driver instance with the steps\n          const driverInstance = driverJS({\n            showProgress: true,\n            smoothScroll: true,\n            animate: true,\n            allowClose: true,\n            stagePadding: 10,\n            steps: steps,\n            onHighlightStarted: (element) => {\n              const currentStepIndex = steps.findIndex(step => step.element === element?.id);\n              dispatch(setTutorialStep(currentStepIndex >= 0 ? currentStepIndex : 0));\n            },\n          \n            onDestroyed: () => {\n              // Clear the reference\n              driverInstanceRef.current = null;\n              \n              // Check if there are related tutorials to queue\n              const relatedTutorials = getRelatedTutorials(activeTutorial);\n              \n              if (relatedTutorials.length > 0) {\n                console.log(`Queueing related tutorials: ${relatedTutorials.join(', ')}`);\n                // Queue any related tutorials before moving to next\n                dispatch(queueTutorials(relatedTutorials));\n              }\n              \n              // Move to the next tutorial in queue\n              console.log('Moving to next tutorial');\n              dispatch(nextTutorial());\n            }\n          });\n          \n          // Start from the active step\n          if (activeTutorialStep > 0 && activeTutorialStep < steps.length) {\n            // Use proper API method to navigate to a specific step\n            driverInstance.highlight(steps[activeTutorialStep]);\n          } else {\n            driverInstance.drive();\n          }\n          \n          // Store the instance reference\n          driverInstanceRef.current = driverInstance;\n          \n        }, 500); // Longer delay to ensure elements are rendered\n      } else {\n        console.error(`No steps defined for tutorial: ${activeTutorial}`);\n        dispatch(nextTutorial());\n      }\n    }\n    \n    // Cleanup function\n    return () => {\n      if (driverInstanceRef.current) {\n        driverInstanceRef.current.destroy();\n        driverInstanceRef.current = null;\n      }\n    };\n  }, [activeTutorial, isTutorialActive, dispatch]);\n  \n  // This component doesn't render anything visible\n  return null;\n};\n\nexport default TutorialDriver;","import { Button } from \"@/components/ui/button\"\nimport { Link } from \"react-router-dom\"\n\nfunction CTA() {\n  return (\n    <section className=\"w-full py-12 md:py-8 lg:py-16 gradient-bg text-white\">\n      <div className=\"container px-4 md:px-6\">\n        <div className=\"flex flex-col items-center justify-center space-y-4 text-center\">\n          <div className=\"space-y-2\">\n            <h2 className=\"text-3xl font-bold tracking-tighter md:text-4xl\">\n              You’ve made it this far—why stop now?\n            </h2>\n            <p className=\"max-w-[900px] md:text-xl\">\n              Let’s take your marketing to the next level. Start your 14-day free trial today.\n            </p>\n          </div>\n          <div className=\"flex flex-col gap-2 min-[400px]:flex-row\">\n            <Link to=\"/login\">\n            <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-primary hover:bg-blue-50\">\n              Start Free Trial\n            </Button>\n            </Link>\n            <Button size=\"lg\" variant=\"outline\" className=\"border-white text-black hover:bg-blue-50\">\n              Schedule a Demo\n            </Button>\n          </div>\n          <p className=\"text-sm text-blue-100\">\n            Got questions?{\" \"}\n            <Link to=\"#\" className=\"text-white underline underline-offset-2\">\n              Chat with our sales team\n            </Link>\n          </p>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default CTA\n","import { cn } from \"@/lib/utils\";\nimport { BarChart3, CalendarRange, DollarSign, Folder, Layers, LineChart, Mail, Users } from \"lucide-react\"\n\nconst Feature = ({\n    title,\n    description,\n    icon,\n    index,\n}: {\n    title: string;\n    description: string;\n    icon: React.ReactNode;\n    index: number;\n}) => {\n    return (\n        <div\n            className={cn(\n                \"flex flex-col lg:border-r  py-10 relative group/feature dark:border-neutral-800\",\n                (index === 0 || index === 4) && \"lg:border-l dark:border-neutral-800\",\n                index < 4 && \"lg:border-b dark:border-neutral-800\"\n            )}\n        >\n            {index < 4 && (\n                <div className=\"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-t from-gray-200 dark:from-neutral-800 to-transparent pointer-events-none\" />\n            )}\n            {index >= 4 && (\n                <div className=\"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-b from-gray-200 dark:from-neutral-800 to-transparent pointer-events-none\" />\n            )}\n            <div className=\"mb-4 relative z-10 px-10 text-neutral-600 dark:text-neutral-400\">\n                {icon}\n            </div>\n            <div className=\"text-lg font-bold mb-2 relative z-10 px-10\">\n                <div className=\"absolute left-0 inset-y-0 h-6 group-hover/feature:h-8 w-1 rounded-tr-full rounded-br-full bg-neutral-300 dark:bg-neutral-700 group-hover/feature:bg-blue-500 transition-all duration-200 origin-center\" />\n                <span className=\"group-hover/feature:translate-x-2 transition duration-200 inline-block text-neutral-800 dark:text-neutral-100\">\n                    {title}\n                </span>\n            </div>\n            <p className=\"text-sm text-neutral-600 dark:text-neutral-300 max-w-xs relative z-10 px-10\">\n                {description}\n            </p>\n        </div>\n    );\n};\n\nconst PlatformFeatures = [\n    {\n        title: \"Unified Dashboard\",\n        description: \"View all your marketing data in one place with customizable widgets\",\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Multi-platform Integration\",\n        description: \"Connect with Shopify, Meta, Google Ads, and GA4 seamlessly\",\n        icon: <Layers className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Performance Tracking\",\n        description: \"Monitor business performance across platforms and time periods\",\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Demographic Analysis\",\n        description: \"Track conversions based on location, demographics, brands, and products\",\n        icon: <Users className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Automated Email Reports\",\n        description: \"Receive regular performance updates directly in your inbox\",\n        icon: <Mail className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Campaign Grouping\",\n        description: \"Group campaigns by category to analyze performance at a glance\",\n        icon: <Folder className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Compare Date Ranges\",\n        description: \"Easily compare analytics across different time periods\",\n        icon: <CalendarRange className=\"h-8 w-8 text-primary\" />,\n    },\n    {\n        title: \"Easy & Transparent Pricing\",\n        description: \"Simple, no-surprise pricing plans to fit every business\",\n        icon: <DollarSign className=\"h-8 w-8 text-primary\" />,\n    }\n];\n\nfunction Features() {\n    return (\n        <section id=\"features\" className=\"w-full py-12 md:py-8 lg:py-16 bg-slate-100 px-4\">\n            <div className=\"container px-4 md:px-6\">\n                <div className=\"flex flex-col items-center justify-center space-y-4 text-center mb-5\">\n                    <div className=\"space-y-2\">\n                        <h2 className=\"text-2xl font-bold tracking-tighter md:text-4xl lg:text-3xl gradient-text\">\n                            Smarter Marketing, Better Results\n                        </h2>\n                        <p className=\"max-w-[900px] text-muted-foreground md:text-lg\">\n                            Track performance, scale campaigns, and maximize ROI—all with ease.\n                        </p>\n                    </div>\n\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4  relative z-10 pt-6 max-w-7xl mx-auto\">\n                    {PlatformFeatures.map((feature, index) => (\n                        <Feature key={feature.title} {...feature} index={index} />\n                    ))}\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default Features\n\n","import { Button } from \"@/components/ui/button\"\nimport { ArrowRight } from \"lucide-react\"\nimport { Link } from \"react-router-dom\";\nimport { Area, AreaChart, ResponsiveContainer, XAxis, YAxis } from \"recharts\";\n\nconst generateLast30Days = () => {\n    const data = [];\n    const today = new Date();\n    \n    let baseValue = 25000; // Start at a lower value\n\n    for (let i = 0; i < 30; i++) {\n        const date = new Date(today);\n        date.setDate(date.getDate() - (29 - i)); // Ensure chronological order\n        const day = date.getDate();\n\n        // Gradual increase over time\n        baseValue += Math.random() * 1500 + 500; // Ensure an upward movement\n\n        // Large fluctuations for some days\n        const fluctuation = (Math.random() > 0.7 ? Math.random() * 10000 - 5000 : Math.random() * 3000 - 1500);\n\n        const value = Math.round(baseValue + fluctuation);\n\n        data.push({\n            name: day,\n            value: Math.max(value, 5000), // Ensure it never goes too low\n        });\n    }\n\n    return data;\n};\n\n\nconst data = generateLast30Days();\n\nfunction HeroSection() {\n    return (\n      <div className=\"relative min-h-screen w-full overflow-hidden gradient-bg\">\n        {/* Gradient effects */}\n        <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,rgba(120,119,198,0.3),rgba(255,255,255,0))]\" />\n        \n        <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n          <div className=\"py-12\">\n            {/* Top badge */}\n           \n            {/* Main content grid */}\n            <div className=\"grid gap-12 lg:grid-cols-2 lg:gap-8\">\n              <div className=\"flex flex-col justify-center items-start\">\n              <div className=\"mb-8 flex justify-center\">\n              <div className=\"animate-fade-in rounded-full border border-[#1E1B4B]/20 bg-[#0E0E2C] px-3 py-1 text-sm text-slate-300 backdrop-blur-sm\">\n                <span className=\"mr-2 inline-block text-indigo-500\">✦</span>\n                Unified Marketing Analytics Platform\n              </div>\n            </div>\n  \n                <h1 className=\"text-center text-4xl font-bold tracking-tight text-white lg:text-left lg:text-6xl\">\n                  <span className=\"block mb-2\">All Your Marketing Data,  One Place.</span>\n                </h1>\n  \n                <p className=\"mt-6 text-center text-lg text-slate-200 lg:text-left\">\n                  Connect Shopify, Meta, Google Ads, and GA4 in one dashboard. Track performance, analyze conversions, and get automated email reports.\n                </p>\n  \n                <div className=\"mt-8 flex flex-col items-center gap-4 sm:flex-row lg:justify-start\">\n                <Link to=\"/login\">\n                  <Button size=\"lg\" className=\"w-full bg-white text-black hover:bg-blue-100 sm:w-auto\">\n                    Start Free Trial <ArrowRight className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                  </Link>\n                  <Button size=\"lg\" variant=\"outline\" className=\"w-full border-slate-800 text-black hover:bg-blue-100 sm:w-auto\">\n                    View Demo\n                  </Button>\n                </div>\n              </div>\n  \n              {/* Dashboard Preview */}\n              <div className=\"relative\">\n            <div className=\"relative rounded-2xl border border-slate-800 bg-[#0A0A1B] p-4\">\n              {/* Window Controls */}\n              <div className=\"mb-6 flex items-center justify-between\">\n                <div className=\"flex gap-2\">\n                  <div className=\"h-3 w-3 rounded-full bg-[#FF5F57]\" />\n                  <div className=\"h-3 w-3 rounded-full bg-[#FFBD2E]\" />\n                  <div className=\"h-3 w-3 rounded-full bg-[#28C840]\" />\n                </div>\n                <div className=\"flex items-center gap-2 rounded-full bg-slate-800/50 px-3 py-1\">\n                  <div className=\"h-2 w-2 rounded-full bg-emerald-500\" />\n                  <span className=\"text-xs text-slate-300\">Last 30 days</span>\n                </div>\n              </div>\n\n              {/* Analytics Content */}\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <h2 className=\"text-xl font-semibold text-slate-300\">Analytics Overview</h2>\n                  <Button variant=\"outline\" size=\"sm\" className=\"border-slate-800\">\n                    Export\n                  </Button>\n                </div>\n\n                {/* Metrics Grid */}\n                <div className=\"grid grid-cols-3 gap-4 text-slate-100\">\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\n                    <div className=\"text-sm text-slate-400\">Revenue</div>\n                    <div className=\"mt-1 text-2xl font-bold\">$48.2K</div>\n                    <div className=\"mt-2 text-sm text-emerald-400\">+12.4%</div>\n                  </div>\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\n                    <div className=\"text-sm text-slate-400\">Orders</div>\n                    <div className=\"mt-1 text-2xl font-bold\">2,567</div>\n                    <div className=\"mt-2 text-sm text-emerald-400\">+8.2%</div>\n                  </div>\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\n                    <div className=\"text-sm text-slate-400\">Customers</div>\n                    <div className=\"mt-1 text-2xl font-bold\">1.2M</div>\n                    <div className=\"mt-2 text-sm text-emerald-400\">+4.7%</div>\n                  </div>\n                </div>\n\n                {/* Chart Placeholder */}\n                <div className=\"h-[300px] rounded-lg bg-slate-800/30 p-4\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <AreaChart data={data}>\n                      <defs>\n                        <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                          <stop offset=\"5%\" stopColor=\"#6366f1\" stopOpacity={0.3} />\n                          <stop offset=\"95%\" stopColor=\"#6366f1\" stopOpacity={0} />\n                        </linearGradient>\n                      </defs>\n                      <XAxis\n                        dataKey=\"name\"\n                        axisLine={false}\n                        tickLine={false}\n                        tick={{ fill: '#64748b', fontSize: 12 }}\n                        interval=\"preserveStartEnd\"\n                      />\n                      <YAxis\n                        axisLine={false}\n                        tickLine={false}\n                        tick={{ fill: '#64748b', fontSize: 12 }}\n                        tickFormatter={(value) => `$${value / 1000}k`}\n                      />\n                      <Area\n                        type=\"monotone\"\n                        dataKey=\"value\"\n                        stroke=\"#6366f1\"\n                        strokeWidth={2}\n                        fill=\"url(#colorValue)\"\n                      />\n                    </AreaChart>\n                  </ResponsiveContainer>\n                </div>\n              </div>\n            </div>\n\n            {/* Floating Achievement Card */}\n            <div className=\"absolute -right-4 bottom-20\">\n              <div className=\"rounded-2xl border border-green-500/20 bg-green-400/20 p-4 shadow-xl\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-2 w-2 rounded-full bg-green-500\" />\n                  <span className=\"text-sm font-medium text-green-500\">New Milestone!</span>\n                </div>\n                <p className=\"mt-1 text-xs text-green-300\">Revenue target achieved</p>\n              </div>\n            </div>\n          </div>\n        </div>\n            </div>\n          </div>\n        </div>\n    );\n  }\n\nexport default HeroSection;","import { Button } from \"@/components/ui/button\";\nimport Logo from \"@/assets/messold-icon.png\";\nimport { useDispatch,useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport axios from \"axios\";\nimport { clearUser } from \"@/store/slices/UserSlice\";\nimport { resetBrand } from \"@/store/slices/BrandSlice\";\nimport { baseURL } from \"@/data/constant\";\nimport { useNavigate, Link } from \"react-router-dom\";\n\nfunction Navbar() {\n  const user = useSelector((state: RootState) => state.user.user);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    try {\n        const response = await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true });\n        if (response.status === 200) {\n            dispatch(clearUser());\n            dispatch(resetBrand());\n            navigate('/');\n        }\n    } catch (error) {\n        console.error('Error logging out:', error);\n    }\n};\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"container px-10 flex h-16 items-center justify-between\">\n        <Link to=\"/\">\n          <div className=\"flex items-center gap-2 font-bold text-xl\">\n            <img src={Logo} alt=\"Messold Logo\" className=\"h-8 w-8\" />\n            <span>Parallels</span>\n          </div>\n        </Link>\n        <nav className=\"hidden md:flex gap-6\">\n          <Link to=\"#features\" className=\"text-sm font-medium hover:text-primary\">\n            Features\n          </Link>\n          <Link to=\"#integrations\" className=\"text-sm font-medium hover:text-primary\">\n            Integrations\n          </Link>\n          <Link to=\"#analytics\" className=\"text-sm font-medium hover:text-primary\">\n            Analytics\n          </Link>\n        </nav>\n        <div className=\"flex items-center gap-4\">\n          {user ? (\n            <div className=\"flex items-center gap-3\">\n              <Link to=\"/dashboard\" className=\"text-sm font-medium hover:text-primary\">\n                Dashboard\n              </Link>\n              <Button variant=\"outline\" onClick={handleLogout}>Log Out</Button>\n            </div>\n          ) : (\n            <>\n              <Link to=\"/login\" className=\"text-sm font-medium hover:text-primary\">\n                Log in\n              </Link>\n              <Link to=\"/login\" >\n              <Button>Get Started</Button>\n              </Link>\n            </>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default Navbar;\n","import CTA from './components/CTA'\nimport Features from './components/Features'\nimport Footer from './components/Footer'\nimport HeroSection from './components/HeroSection'\nimport Navbar from './components/Navbar'\n\nfunction LandingPage() {\n  return (\n    <div className=\"flex min-h-screen flex-col gradient-bg\">\n   <Navbar />\n   <main className=\"flex-1\">\n    <HeroSection />\n    <Features />\n    <CTA />\n   </main>\n   <Footer />\n   </div>\n  )\n}\n\nexport default LandingPage","import Footer from \"./Footer\";\nimport Navbar from \"./Navbar\";\nimport { privacyPolicySections } from \"@/data/constant\";\n\nfunction PrivacyPolicy() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 text-slate-800\">\n      <Navbar />\n      <div className=\"max-w-4xl mx-auto p-6 my-5\">\n        <div className=\"bg-white shadow-lg rounded-2xl p-8\">\n          <h1 className=\"text-4xl font-extrabold text-center text-gray-900 mb-6\">Privacy Policy</h1>\n          \n          {privacyPolicySections.map((section) => (\n            <section key={section.title} className=\"mb-6 border-b pb-4 last:border-none\">\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-2\">{section.title}</h2>\n              {section.content.map((para: string | string[]) => (\n                typeof para === \"string\" ? (\n                  <p key={`${section.title}-${para.slice(0, 20)}`} className=\"text-gray-700 mb-2\">{para}</p>\n                ) : (\n                  <ul key={`${section.title}-list-${para[0]?.slice(0, 20)}`} className=\"list-disc pl-5 text-gray-700\">\n                    {para.map((item) => (\n                      <li key={`${section.title}-item-${item.slice(0, 20)}`}>{item}</li>\n                    ))}\n                  </ul>\n                )\n              ))}\n            </section>\n          ))}\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default PrivacyPolicy;\n","import Footer from \"./Footer\";\nimport Navbar from \"./Navbar\";\nimport { termsAndConditionsSections } from \"@/data/constant\";\n\nfunction TermsAndConditions() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 text-slate-800\">\n      <Navbar />\n      <div className=\"max-w-4xl mx-auto p-6 my-5\">\n        <div className=\"bg-white shadow-lg rounded-2xl p-8\">\n          <h1 className=\"text-4xl font-extrabold text-center text-gray-900 mb-6\">Terms and Conditions</h1>\n          \n          {termsAndConditionsSections.map((section) => (\n            <section key={section.title} className=\"mb-6 border-b pb-4 last:border-none\">\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-2\">{section.title}</h2>\n              {section.content.map((para: string | string[]) => (\n                typeof para === \"string\" ? (\n                  <p key={`${section.title}-${para.slice(0, 20)}`} className=\"text-gray-700 mb-2\">{para}</p>\n                ) : (\n                  <ul key={`${section.title}-list-${para[0]?.slice(0, 20)}`} className=\"list-disc pl-5 text-gray-700\">\n                    {para.map((item) => (\n                      <li key={`${section.title}-item-${item.slice(0, 20)}`}>{item}</li>\n                    ))}\n                  </ul>\n                )\n              ))}\n            </section>\n          ))}\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default TermsAndConditions; ","// ExcelDownload.tsx\nimport * as XLSX from 'xlsx-js-style';\nimport { Button } from '@/components/ui/button';\nimport { FileDown } from 'lucide-react';\n\nexport interface ExcelStyle {\n  patternType: string;\n  fgColor: { rgb: string };\n}\n\nexport interface ExcelStyles {\n  green: ExcelStyle;\n  blue: ExcelStyle;\n  yellow: ExcelStyle;\n  red: ExcelStyle;\n  header: ExcelStyle;\n}\n\nexport interface ExcelThresholds {\n  avgSessions: number;\n  avgConvRate: number;\n}\n\nexport interface MonthlyData {\n  Month: string;\n  [key: string]: number | string;\n}\n\nexport interface RowData {\n  [key: string]: number | string | MonthlyData[];\n}\n\ninterface ExcelDownloadProps {\n  data: RowData[];\n  fileName: string;\n  primaryColumn: string;\n  secondaryColumns: string[];\n  monthlyDataKey: string;\n  monthlyMetrics: string[];\n  buttonClassName?: string;\n  disabled?: boolean;\n}\n\nconst defaultStyles: ExcelStyles = {\n  green: { patternType: 'solid', fgColor: { rgb: \"DCFCE7\" } },\n  blue: { patternType: 'solid', fgColor: { rgb: \"DBEAFE\" } },\n  yellow: { patternType: 'solid', fgColor: { rgb: \"FEF9C3\" } },\n  red: { patternType: 'solid', fgColor: { rgb: \"FEF2F2\" } },\n  header: { patternType: 'solid', fgColor: { rgb: \"F1F5F9\" } }\n};\n\nexport const calculateThresholds = (data: RowData[]): ExcelThresholds => {\n  let totalSessions = 0;\n  let totalConvRate = 0;\n  let count = 0;\n\n  data.forEach(row => {\n    if (typeof row['Total Sessions'] === 'number' && typeof row['Avg Conv. Rate'] === 'number') {\n      totalSessions += Number(row['Total Sessions']);\n      totalConvRate += Number(row['Avg Conv. Rate']);\n      count++;\n    }\n  });\n\n  return {\n    avgSessions: totalSessions / count,\n    avgConvRate: totalConvRate / count\n  };\n};\n\nconst getCellStyle = (\n  metric: string,\n  sessions: number | undefined,\n  convRate: number | undefined,\n  thresholds: ExcelThresholds,\n  styles: ExcelStyles\n) => {\n  if (\n    (metric === 'Sessions' || metric === 'Conv. Rate') &&\n    typeof sessions === 'number' &&\n    typeof convRate === 'number'\n  ) {\n    const isHighSessions = sessions >= thresholds.avgSessions;\n    const isGoodConversion = convRate >= thresholds.avgConvRate;\n\n    if (isHighSessions && isGoodConversion) return styles.green;\n    if (isHighSessions && !isGoodConversion) return styles.blue;\n    if (!isHighSessions && isGoodConversion) return styles.yellow;\n    return styles.red;\n  }\n  return undefined;\n};\n\nconst applyExcelStyles = (\n  worksheet: XLSX.WorkSheet,\n  data: RowData[],\n  months: string[],\n  secondaryColumns: string[],\n  monthlyDataKey: string,\n  monthlyMetrics: string[],\n  styles: ExcelStyles,\n  thresholds: ExcelThresholds\n) => {\n  const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1');\n\n  // Style header row\n  for (let C = range.s.c; C <= range.e.c; C++) {\n    const headerCell = XLSX.utils.encode_cell({ r: 0, c: C });\n    if (!worksheet[headerCell]) worksheet[headerCell] = { v: '' };\n    worksheet[headerCell].s = {\n      fill: styles.header,\n      font: { bold: true, color: { rgb: \"64748B\" } },\n      alignment: { horizontal: 'left' }\n    };\n  }\n\n  // Style data cells\n  data.forEach((row, dataIndex) => {\n    monthlyMetrics.forEach((metric, metricIndex) => {\n      const actualRow = dataIndex * monthlyMetrics.length + metricIndex + 2;\n\n      // Apply styles for each cell\n      const startCol = 2;\n      const endCol = months.length + secondaryColumns.length + 1;\n\n      for (let col = startCol; col <= endCol; col++) {\n        const cellRef = XLSX.utils.encode_cell({\n          r: actualRow - 1,\n          c: col\n        });\n\n        if (!worksheet[cellRef]) worksheet[cellRef] = { v: '' };\n\n        let cellStyle: any = {\n          font: { color: { rgb: \"000000\" } },\n          alignment: { horizontal: 'right' },\n          format: metric === 'Conv. Rate' ? '0.00%' : '#,##0'\n        };\n\n        let sessions: number | undefined;\n        let convRate: number | undefined;\n\n        if (col < startCol + secondaryColumns.length) {\n          sessions = row['Total Sessions'] as number;\n          convRate = row['Avg Conv. Rate'] as number;\n        } else {\n          const monthIndex = col - (startCol + secondaryColumns.length);\n          const monthKey = months[monthIndex];\n          const monthlyData = (row[monthlyDataKey] as MonthlyData[]).find(\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === monthKey\n          );\n\n          if (monthlyData) {\n            sessions = monthlyData['Sessions'] as number;\n            convRate = monthlyData['Conv. Rate'] as number;\n          }\n        }\n\n        const fillStyle = getCellStyle(metric, sessions, convRate, thresholds, styles);\n        if (fillStyle) {\n          cellStyle.fill = fillStyle;\n        }\n\n        worksheet[cellRef].s = cellStyle;\n      }\n    });\n  });\n};\n\nconst ExcelDownload: React.FC<ExcelDownloadProps> = ({\n  data,\n  fileName,\n  primaryColumn,\n  secondaryColumns,\n  monthlyDataKey,\n  monthlyMetrics,\n  buttonClassName = '',\n  disabled = false,\n}) => {\n  const handleDownload = () => {\n    const workbook = XLSX.utils.book_new();\n    const sheetData: Array<Array<string | number | null>> = [];\n    const thresholds = calculateThresholds(data);\n\n    // Get all months\n    const months = Array.from(new Set(\n      data.flatMap(row => \n        (row[monthlyDataKey] as MonthlyData[]).map(m => \n          `${m.Month.slice(0, 4)}-${m.Month.slice(4)}`\n        )\n      )\n    )).sort().reverse();\n\n    // Create header row\n    const headerRow = [\n      primaryColumn,\n      'Metric',\n      ...secondaryColumns,\n      ...months,\n    ];\n    sheetData.push(headerRow);\n\n    // Create rows\n    data.forEach(row => {\n      monthlyMetrics.forEach(metric => {\n        const rowData: Array<string | number | null> = [];\n        \n        rowData.push(metric === monthlyMetrics[0] ? (row[primaryColumn] as string | number) : '');\n        rowData.push(metric);\n\n        secondaryColumns.forEach(column => {\n          const value = row[column] as number | string | undefined;\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\n        });\n\n        months.forEach(month => {\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find(\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === month\n          );\n          const value = monthData ? monthData[metric] : null;\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\n        });\n\n        sheetData.push(rowData);\n      });\n    });\n\n    const worksheet = XLSX.utils.aoa_to_sheet(sheetData);\n    \n    // Apply styles\n    applyExcelStyles(\n      worksheet,\n      data,\n      months,\n      secondaryColumns,\n      monthlyDataKey,\n      monthlyMetrics,\n      defaultStyles,\n      thresholds\n    );\n\n    // Set column widths\n    const colWidths = [\n      { wch: 20 },\n      { wch: 12 },\n      ...secondaryColumns.map(() => ({ wch: 15 })),\n      ...months.map(() => ({ wch: 12 }))\n    ];\n    worksheet['!cols'] = colWidths;\n\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Conversion Data');\n    XLSX.writeFile(workbook, `${fileName}.xlsx`);\n  };\n\n  return (\n    <Button\n    id='download-button'\n      onClick={handleDownload}\n      size=\"icon\"\n      variant=\"outline\"\n      className={buttonClassName}\n      disabled={disabled} \n    >\n      <FileDown className=\"h-4 w-4\" />\n    </Button>\n  );\n};\n\nexport default ExcelDownload;","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;// eslint-disable-line\n    [key: string]: any;\n  }>;// eslint-disable-line\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst DeviceTypeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'device-conversion'\n\n  const locale = useSelector((state: RootState) => state.locale.locale);\n\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const axiosInstance = createAxiosInstance();\n  // Use optional chaining to safely access date properties\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n        const response = await axiosInstance.post(`/api/analytics/deviceTypeConversionReport/${brandId}`, {\n    \n            startDate,\n            endDate,  ...transformedFilters  \n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n    } finally {\n        setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Device\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Device based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                   \n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default DeviceTypeConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\n\nconst GenderConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'gender-conversion'\n\n\n  const locale = useSelector((state: RootState)=>state.locale.locale);\n  const { brandId } = useParams();\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n        const response = await axiosInstance.post(`/api/analytics/genderConversionReport/${brandId}`, {\n          \n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);;\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Gender\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Gender based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                   \n                  />\n                </div>}\n                <NumberFormatSelector  />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default GenderConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '@/store';\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst AgeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const dispatch = useDispatch();\n  const componentId = 'age-conversion';\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {}, shallowEqual\n  );\n  const locale = useSelector((state:RootState)=>state.locale.locale);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n   \n      const response = await axiosInstance.post(`/api/analytics/ageConversionReport/${brandId}`, {\n        startDate: startDate, \n        endDate: endDate, \n        ...transformedFilters  \n      }, { withCredentials: true });\n\n      const fetchedData = response.data || [];\n\n      setApiResponse(fetchedData);\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, transformedFilters]);\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Age\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"]; \n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card id=\"age-report\" className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent >\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Age based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                    defaultDate={{\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                      to: new Date()\n                    }}\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button id=\"refresh\" onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <div id=\"filters\">\n            <FilterConversions componentId={componentId} /> \n            </div>\n  \n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default AgeConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst InterestConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'interest-conversion'\n\n  const locale = useSelector((state: RootState)=>state.locale.locale);\n  const { brandId } = useParams();\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n    \n        const response = await axiosInstance.post(`/api/analytics/interestConversionReport/${brandId}`, {\n           \n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n\n    } finally {\n      setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Interest\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Interest based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                   \n                  />\n                </div>}\n                <NumberFormatSelector  />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId}/>\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default InterestConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n    reportType: string;\n    data: Array<{\n        DeviceType: string;\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n        [key: string]: any;\n    }>;\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst OperatingSystemConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n    const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n    const componentId = 'operatingSystem-conversion'\n\n\n    const locale = useSelector((state: RootState)=>state.locale.locale);\n    const { brandId } = useParams();\n    const toggleFullScreen = () => {\n        setIsFullScreen(!isFullScreen);\n    };\n\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const filters = useSelector((state: RootState) => \n        state.conversionFilters[componentId] || {} , shallowEqual\n      );\n\n      const transformedFilters = useMemo(() => {\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n          if (filter) {\n            const apiColumnName = {\n              \"Total Sessions\": \"sessionsFilter\",\n              \"Avg Conv Rate\": \"convRateFilter\",\n            }[column] || column;\n    \n            acc[apiColumnName] = filter;\n          }\n          return acc;\n        }, {});\n      }, [filters]);\n\n      \n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(`/api/analytics/operatingSystemConversionReport/${brandId}`, {\n               \n                startDate,\n                endDate,  ...transformedFilters  // Spread the transformed filters\n            });\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate, transformedFilters]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); \n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n    \n      useEffect(() => {\n        if (!isFullScreen) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [isFullScreen, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const handleCategoryFilter = (items: (string | number)[]) => {\n        setCurrentFilter(items.map(item => String(item)));\n    };\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Operating System\";\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n    const monthlyDataKey = \"MonthlyData\";\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n    if (loading) {\n        return <Loader isLoading={loading} />\n    }\n\n    return (\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\n            <CardContent>\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div className=\"flex items-center gap-3\">\n                        <h2 className=\"text-lg font-medium\">Operating System based Conversion</h2>\n                        <Ga4Logo />\n                    </div>\n                    <div className=\"flex flex-wrap items-center gap-3\">\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                            <DatePickerWithRange\n                               \n                            />\n                        </div>}\n                        <NumberFormatSelector />\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                        </Button>\n                        <FilterConversions componentId={componentId} />\n                        <ExcelDownload\n                            data={apiResponse?.data || []}\n                            fileName={`${primaryColumn}_Conversion_Report`}\n                            primaryColumn={primaryColumn}\n                            secondaryColumns={secondaryColumns}\n                            monthlyDataKey={monthlyDataKey}\n                            monthlyMetrics={monthlyMetrics}\n                            disabled={loading}\n                        />\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                        </Button>\n                    </div>\n                </div>\n\n                <div className=\"rounded-md overflow-hidden\">\n                        <div>\n                            <PerformanceSummary\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                                onCategoryFilter={handleCategoryFilter}\n                            />\n                            <ConversionTable\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                secondaryColumns={secondaryColumns}\n                                monthlyDataKey={monthlyDataKey}\n                                monthlyMetrics={monthlyMetrics}\n                                isFullScreen={isFullScreen}\n                                locale={locale}\n                                filter={currentFilter}\n                            />\n                        </div>\n                </div>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default OperatingSystemConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    reportType: string;\n    data: Array<{\n        DeviceType: string;\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n        [key: string]: any;\n    }>;\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\n\nconst BrowserConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n  \n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n    const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n    const componentId = 'browser-conversion';\n    const locale = useSelector((state:RootState) => state.locale.locale)\n    const { brandId } = useParams();\n\n    const toggleFullScreen = () => {\n        setIsFullScreen(!isFullScreen);\n    };\n\n    const { sessionsFilter, convRateFilter } = useSelector((state: RootState) =>\n        state.conversionFilters[componentId] || { sessionsFilter: null, convRateFilter: null }\n    );\n\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n    const axiosInstance = createAxiosInstance();\n\n    const filters = useSelector((state: RootState) => \n        state.conversionFilters[componentId] || {} ,shallowEqual\n      );\n      const transformedFilters = useMemo(() => {\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n          if (filter) {\n            const apiColumnName = {\n              \"Total Sessions\": \"sessionsFilter\",\n              \"Avg Conv Rate\": \"convRateFilter\",\n            }[column] || column;\n    \n            acc[apiColumnName] = filter;\n          }\n          return acc;\n        }, {});\n      }, [filters]);\n      \n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(`/api/analytics/browserConversionReport/${brandId}`, {\n                startDate,\n                endDate, sessionsFilter, convRateFilter\n            });\n            const fetchedData = response.data || [];\n            setApiResponse(fetchedData);\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate, transformedFilters]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n    \n      useEffect(() => {\n        if (!isFullScreen) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [isFullScreen, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Browser\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"]; \n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card id=\"browser-report\" className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent >\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Browser based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                    defaultDate={{\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                      to: new Date()\n                    }}\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button id=\"refresh\" onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <div id=\"filters\">\n            <FilterConversions componentId={componentId} /> \n            </div>\n  \n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} onCategoryFilter={handleCategoryFilter} />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n\n      </CardContent>\n    </Card>\n  )\n};\n\nexport default BrowserConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n    reportType: string;\n    data: Array<{\n        DeviceType: string;\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n        [key: string]: any;\n    }>;\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\n\nconst SourceConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n    const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n    const dispatch = useDispatch();\n    const componentId = 'source-conversion'\n    const locale = useSelector((state: RootState)=> state.locale.locale)\n    \n    const { brandId } = useParams();\n    const toggleFullScreen = () => {\n        setIsFullScreen(!isFullScreen);\n    };\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n    const axiosInstance = createAxiosInstance();\n\n    const filters = useSelector((state: RootState) => \n        state.conversionFilters[componentId] || {} , shallowEqual\n      );\n\n      const transformedFilters = useMemo(() => {\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n          if (filter) {\n            const apiColumnName = {\n              \"Total Sessions\": \"sessionsFilter\",\n              \"Avg Conv Rate\": \"convRateFilter\",\n            }[column] || column;\n    \n            acc[apiColumnName] = filter;\n          }\n          return acc;\n        }, {});\n      }, [filters]);\n      \n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(`/api/analytics/sourceConversionReport/${brandId}`, {\n                startDate,\n                endDate, ...transformedFilters\n            });\n            const fetchedData = response.data || [];\n            setApiResponse(fetchedData);\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate, transformedFilters]);\n\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n    \n      useEffect(() => {\n        if (!isFullScreen) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [isFullScreen, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const handleCategoryClick = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Source\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"]; \n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card id=\"source-report\" className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent >\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Source based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                    defaultDate={{\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                      to: new Date()\n                    }}\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button id=\"refresh\" onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <div id=\"filters\">\n            <FilterConversions componentId={componentId} /> \n            </div>\n  \n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} onCategoryFilter={handleCategoryClick} />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n\n      </CardContent>\n    </Card>\n  )\n};\n\nexport default SourceConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n    reportType: string;\n    data: Array<{\n        DeviceType: string;\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n        [key: string]: any;\n    }>;\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst PageTitleConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n    const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n    const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n\n    const componentId = 'pageTitle-conversion'\n    const locale = useSelector((state : RootState)=> state.locale.locale);\n    const { brandId } = useParams();\n    const toggleFullScreen = () => {\n        setIsFullScreen(!isFullScreen);\n    };\n\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const filters = useSelector((state: RootState) => \n        state.conversionFilters[componentId] || {} , shallowEqual\n      );\n\n      const transformedFilters = useMemo(() => {\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n          if (filter) {\n            const apiColumnName = {\n              \"Total Sessions\": \"sessionsFilter\",\n              \"Avg Conv Rate\": \"convRateFilter\",\n            }[column] || column;\n    \n            acc[apiColumnName] = filter;\n          }\n          return acc;\n        }, {});\n      }, [filters]);\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n        \n            const response = await axiosInstance.post(`/api/analytics/pageTitleConversionReport/${brandId}`, {\n                 startDate: startDate, endDate: endDate, ...transformedFilters\n            }, { withCredentials: true })\n\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate, transformedFilters]);\n\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 10 minutes\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n    \n      useEffect(() => {\n        if (!isFullScreen) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [isFullScreen, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const handleCategoryFilter = (items: (string | number)[]) => {\n        setCurrentFilter(items.map(item => String(item)));\n    };\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Page Title\";\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n    const monthlyDataKey = \"MonthlyData\";\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n    if(loading) {\n        return <Loader isLoading={loading} />\n    }\n    return (\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\n            <CardContent>\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div className=\"flex items-center gap-3\">\n                        <h2 className=\"text-lg font-medium\">Page Title based Conversion</h2>\n                        <Ga4Logo />\n                    </div>\n                    <div className=\"flex flex-wrap items-center gap-3\">\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                            <DatePickerWithRange\n                               \n                            />\n                        </div>}\n                        <NumberFormatSelector />\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                        </Button>\n                        <FilterConversions componentId={componentId} />\n                        <ExcelDownload\n                            data={apiResponse?.data || []}\n                            fileName={`${primaryColumn}_Conversion_Report`}\n                            primaryColumn={primaryColumn}\n                            secondaryColumns={secondaryColumns}\n                            monthlyDataKey={monthlyDataKey}\n                            monthlyMetrics={monthlyMetrics}\n                            disabled={loading}\n                        />\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                        </Button>\n                    </div>\n                </div>\n\n                <div className=\"rounded-md overflow-hidden\">\n                        <div>\n                            <PerformanceSummary\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                                onCategoryFilter={handleCategoryFilter}\n                            />\n                            <ConversionTable\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                secondaryColumns={secondaryColumns}\n                                monthlyDataKey={monthlyDataKey}\n                                monthlyMetrics={monthlyMetrics}\n                                isFullScreen={isFullScreen}\n                                locale={locale}\n                                filter={currentFilter}\n                            />\n                        </div>\n                </div>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default PageTitleConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n    reportType: string;\n    data: Array<{\n        DeviceType: string;\n        MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n        [key: string]: any;\n    }>;\n};\n\ninterface CityBasedReportsProps {\n    dateRange: DateRange | undefined;\n}\n\nconst PagePathConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n      from: dateFrom,\n      to: dateTo\n    }), [dateFrom, dateTo]);\n      const dispatch = useDispatch();\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n    const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n    const componentId = 'pagePath-conversion'\n\n    const locale = useSelector((state: RootState) => state.locale.locale);\n    const { brandId } = useParams();\n    const toggleFullScreen = () => {\n        setIsFullScreen(!isFullScreen);\n    };\n\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n    const axiosInstance = createAxiosInstance();\n\n    const filters = useSelector((state: RootState) => \n        state.conversionFilters[componentId] || {} , shallowEqual\n      );\n\n      const transformedFilters = useMemo(() => {\n        return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n          if (filter) {\n            const apiColumnName = {\n              \"Total Sessions\": \"sessionsFilter\",\n              \"Avg Conv Rate\": \"convRateFilter\",\n            }[column] || column;\n    \n            acc[apiColumnName] = filter;\n          }\n          return acc;\n        }, {});\n      }, [filters]);\n      \n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(`/api/analytics/pagePathConversionReport/${brandId}`, {\n               \n                startDate,\n                endDate,  ...transformedFilters \n            });\n            const fetchedData = response.data || [];\n\n            setApiResponse(fetchedData);\n\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    }, [brandId, startDate, endDate, transformedFilters]);\n\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n      }, [propDateRange]);\n    \n      useEffect(() => {\n        if (!isFullScreen) {\n          if (propDateRange) {\n          dispatch(setDate({\n            from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n            to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n          }));\n        }\n        }\n      }, [isFullScreen, propDateRange]);\n\n    const handleManualRefresh = () => {\n        fetchData();\n    };\n\n    const handleCategoryFilter = (items: (string | number)[]) => {\n        setCurrentFilter(items.map(item => String(item)));\n    };\n\n    // Extract columns dynamically from the API response\n    const primaryColumn = \"Page Path\";\n    const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n    const monthlyDataKey = \"MonthlyData\";\n    const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n    if (loading) {\n        return <Loader isLoading={loading} />\n    }\n\n    return (\n        <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\n            <CardContent>\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div className=\"flex items-center gap-3\">\n                        <h2 className=\"text-lg font-medium\">Page path based Conversion</h2>\n                        <Ga4Logo />\n                    </div>\n                    <div className=\"flex flex-wrap items-center gap-3\">\n                        {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                            <DatePickerWithRange\n                               \n                            />\n                        </div>}\n                        <NumberFormatSelector />\n                        <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n                        </Button>\n                        <FilterConversions componentId={componentId} />\n                        <ExcelDownload\n                            data={apiResponse?.data || []}\n                            fileName={`${primaryColumn}_Conversion_Report`}\n                            primaryColumn={primaryColumn}\n                            secondaryColumns={secondaryColumns}\n                            monthlyDataKey={monthlyDataKey}\n                            monthlyMetrics={monthlyMetrics}\n                            disabled={loading}\n                        />\n                        <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                        </Button>\n                    </div>\n                </div>\n\n                <div className=\"rounded-md overflow-hidden\">\n                        <div>\n                            <PerformanceSummary\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                                onCategoryFilter={handleCategoryFilter}\n                            />\n                            <ConversionTable\n                                data={apiResponse?.data || []}\n                                primaryColumn={primaryColumn}\n                                secondaryColumns={secondaryColumns}\n                                monthlyDataKey={monthlyDataKey}\n                                monthlyMetrics={monthlyMetrics}\n                                isFullScreen={isFullScreen}\n                                locale={locale}\n                                filter={currentFilter}\n                            />\n                        </div>\n                </div>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default PagePathConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst LandingPageConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'landingPage-conversion'\n\n  const locale = useSelector((state: RootState) => state.locale.locale)\n  \n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen); \n  };\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) =>\n    state.conversionFilters[componentId] || {}, shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.post(`/api/analytics/pageConversionReport/${brandId}`, {\n       \n        startDate,\n        endDate, ...transformedFilters  // Spread the transformed filters\n      });\n      const fetchedData = response.data || [];\n      setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n        dispatch(setDate({\n          from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n          to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n        }));\n      }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Landing Page\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Landing Page based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n            {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n              <DatePickerWithRange\n               \n              />\n            </div>}\n            <NumberFormatSelector  />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default LandingPageConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\n\nconst RegionConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'region-conversion'\n  const locale = useSelector((state : RootState)=> state.locale.locale);\n  \n  const { brandId } = useParams();\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n  \nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n        const response = await axiosInstance.post(`/api/analytics/regionConversionReport/${brandId}`, {\n            \n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 *60 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Region\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Region based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                  \n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n\n            <div>\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} onCategoryFilter={handleCategoryFilter}/>\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default RegionConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst CityTypeConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'city-conversion';\n  \n  const locale = useSelector((state:RootState)=>state.locale.locale);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n        const response = await axiosInstance.post(`/api/analytics/cityConversionReport/${brandId}`, {\n      \n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n    } finally {\n        setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n     \n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); \n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"City\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n  \n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''} overflow-auto`}>\n      <CardContent>\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">City based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n             <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default CityTypeConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst CountryConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'country-conversion';\n  const locale = useSelector((state:RootState) =>state.locale.locale);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n        const response = await axiosInstance.post(`/api/analytics/countryConversionReport/${brandId}`, {\n           \n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n    } finally {\n        setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  const primaryColumn = \"Country\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Country based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                metricConfig={metricConfigs.sessionsAndConversion || {}}\n                onCategoryFilter={handleCategoryFilter}\n              />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default CountryConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from '@/store';\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\n\nconst CampaignConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter, setCurrentFilter] = useState<string[]>([]);\n  const componentId = 'campaign-conversion';\n  const locale = useSelector((state: RootState) => state.locale.locale);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) =>\n    state.conversionFilters[componentId] || {}, shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.post(`/api/analytics/campaignConversionReport/${brandId}`, {\n        startDate,\n        endDate, ...transformedFilters  // Spread the transformed filters\n      });\n      const fetchedData = response.data || [];\n      setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n        dispatch(setDate({\n          from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n          to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n        }));\n      }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Campaign\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if(loading){\n    return <Loader isLoading={loading} />\n  }\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Campaign based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n            {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n              <DatePickerWithRange\n                defaultDate={{\n                  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                  to: new Date()\n                }}\n              />\n            </div>}\n            <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n            <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} onCategoryFilter={handleCategoryFilter} />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default CampaignConversion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport ConversionTable from \"./Table\";\nimport { useParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Ga4Logo } from \"@/data/logo\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize, Minimize, RefreshCw } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\nimport createAxiosInstance from \"./axiosInstance\";\nimport PerformanceSummary from \"./PerformanceSummary\";\nimport ExcelDownload from \"./ExcelDownload\";\nimport FilterConversions from \"./Filter\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\nimport { setDate } from \"@/store/slices/DateSlice\";\nimport { metricConfigs } from \"@/data/constant\";\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\nimport Loader from \"@/components/dashboard_component/loader\";\n\ntype ApiResponse = {\n  reportType: string;\n  data: Array<{\n    DeviceType: string;\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\n    [key: string]: any;\n  }>;\n};\n\ninterface CityBasedReportsProps {\n  dateRange: DateRange | undefined;\n}\n\nconst ChannelConversion: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const dispatch = useDispatch();\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false);\n  const [currentFilter , setCurrentFilter] = useState<string[]>([]);\n\n  const componentId = 'channel-conversion'\n  const locale = useSelector((state:RootState) => state.locale.locale);\n  const { brandId } = useParams();\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n  const axiosInstance = createAxiosInstance();\n\n  const filters = useSelector((state: RootState) => \n    state.conversionFilters[componentId] || {} , shallowEqual\n  );\n\n  const transformedFilters = useMemo(() => {\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\n      if (filter) {\n        const apiColumnName = {\n          \"Total Sessions\": \"sessionsFilter\",\n          \"Avg Conv Rate\": \"convRateFilter\",\n        }[column] || column;\n\n        acc[apiColumnName] = filter;\n      }\n      return acc;\n    }, {});\n  }, [filters]);\n\nconst fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n    \n        const response = await axiosInstance.post(`/api/analytics/channelConversionReport/${brandId}`, {\n            startDate,\n            endDate,  ...transformedFilters  // Spread the transformed filters\n        });\n        const fetchedData = response.data || [];\n        setApiResponse(fetchedData);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n}, [brandId, startDate, endDate, transformedFilters]);\n\n\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // Refresh every 5 minutes\n    return () => clearInterval(intervalId);\n  }, [fetchData]);\n\n  useEffect(() => {\n    if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n  }, [propDateRange]);\n\n  useEffect(() => {\n    if (!isFullScreen) {\n      if (propDateRange) {\n      dispatch(setDate({\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\n      }));\n    }\n    }\n  }, [isFullScreen, propDateRange]);\n\n  const handleManualRefresh = () => {\n    fetchData();\n  };\n\n  const handleCategoryFilter = (items: (string | number)[]) => {\n    setCurrentFilter(items.map(item => String(item)));\n  };\n\n  // Extract columns dynamically from the API response\n  const primaryColumn = \"Channel\";\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\n  const monthlyDataKey = \"MonthlyData\";\n  const monthlyMetrics = [\"Sessions\", \"Conv. Rate\"];\n\n  if (loading) {\n    return <Loader isLoading={loading} />\n  }\n  return (\n    <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\n      <CardContent>\n\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-lg font-medium\">Channel based Conversion</h2>\n            <Ga4Logo />\n          </div>\n          <div className=\"flex flex-wrap items-center gap-3\">\n          {isFullScreen && <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\n                  <DatePickerWithRange\n                    defaultDate={{\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\n                      to: new Date()\n                    }}\n                  />\n                </div>}\n                <NumberFormatSelector />\n            <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            </Button>\n            <FilterConversions componentId={componentId} />\n              <ExcelDownload\n              data={apiResponse?.data || []}\n              fileName={`${primaryColumn}_Conversion_Report`}\n              primaryColumn={primaryColumn}\n              secondaryColumns={secondaryColumns}\n              monthlyDataKey={monthlyDataKey}\n              monthlyMetrics={monthlyMetrics}\n              disabled={loading}\n            />\n            <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\n              {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"rounded-md overflow-hidden\">\n            <div>\n              <PerformanceSummary data={apiResponse?.data || []} primaryColumn={primaryColumn} metricConfig={metricConfigs.sessionsAndConversion || {}} onCategoryFilter={handleCategoryFilter} />\n              <ConversionTable\n                data={apiResponse?.data || []}\n                primaryColumn={primaryColumn}\n                secondaryColumns={secondaryColumns}\n                monthlyDataKey={monthlyDataKey}\n                monthlyMetrics={monthlyMetrics}\n                isFullScreen={isFullScreen}\n                locale={locale}\n                filter={currentFilter}\n              />\n            </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ChannelConversion;\n","import React, { useState,useMemo } from 'react';\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\nimport { useParams } from 'react-router-dom';\nimport { ChartBar, Radar } from 'lucide-react';\nimport { useTokenError } from '@/context/TokenErrorContext';\nimport DeviceTypeConversion from './components/DeviceConversion';\nimport GenderConversion from './components/GenderConversion';\nimport AgeConversion from './components/AgeConversion';\nimport { CustomTabs } from './components/CustomTabs';\nimport InterestConversion from './components/InterestConversion';\nimport OperatingSystemConversion from './components/OperatingSystemConversion';\nimport BrowserConversion from './components/BrowserConversion';\nimport SourceConversion from './components/SourceConversion';\nimport { useSelector } from 'react-redux';\nimport { RootState } from \"@/store/index.ts\";\nimport Header from '@/components/dashboard_component/Header';\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\nimport PageTitleConversion from './components/PageTitleConversion';\nimport PagePathConversion from './components/PagePathConversion';\nimport LandingPageConversion from './components/LandingPageConversion';\nimport RegionConversion from './components/RegionConversion';\nimport CityTypeConversion from './components/CityConversion';\nimport CountryConversion from './components/CountryConversion';\nimport CampaignConversion from './components/CampaignConversion';\nimport ChannelConversion from './components/ChannelConversion';\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\nimport Footer from '../LandingPage/components/Footer';\n\nconst ConversionLens: React.FC = () => {\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n  const { brandId } = useParams<{ brandId: string }>();\n  const brands = useSelector((state: RootState) => state.brand.brands);\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\n  const { tokenError } = useTokenError();\n\n  const [activeTab, setActiveTab] = useState('age');\n \n\n  const tabs = [\n    { label: 'Age', value: 'age' },\n    { label: 'Gender', value: 'gender' },\n    { label: 'Interest', value: 'interest' },\n    { label: 'Device', value: 'device' },\n    { label: 'Operating System', value: 'operatingSystem' },\n    { label: 'Browser', value: 'browser' },\n    { label: 'Source', value: 'source' },\n    { label: 'Channel', value: 'channel' },\n    { label: 'Campaign', value: 'campaign' },\n    { label: 'Country', value: 'country' },\n    { label: 'City', value: 'city' },\n    { label: 'Region', value: 'region' },\n    { label: 'Landing Page', value: 'landingPage' },\n    { label: 'Page Path', value: 'pagePath' },\n    { label: 'Page Title', value: 'pageTitle' }\n  ];\n\n\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n  };\n\n  if (tokenError) {\n    return <NoAccessPage\n    platform=\"Google Analytics\"\n    message=\"We need access to your Google Analytics account to show you amazing insights about your website performance.\"\n    icon={<ChartBar className=\"w-8 h-8 text-blue-600\" />}\n    loginOptions={[\n      {\n        label: \"Connect Google Analytics\",\n        context: \"googleAnalyticsSetup\",\n        provider: \"google\"\n      }\n    ]}\n  />;\n  }\n\n\n  if (!hasGA4Account) {\n    return <ConnectPlatform\n      platform=\"google analytics\"\n      brandId={brandId ?? ''}\n      onSuccess={(platform, accountName, accountId) => {\n        console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n      }} />;\n  }\n\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <CollapsibleSidebar />\n      \n         <div className=\"flex-1 h-screen overflow-hidden flex flex-col\">\n         {(!date.from || !date.to) ? (\n          <MissingDateWarning />\n        ) : (\n          <>\n            {/* Header */}\n            <div className=\"flex-none\">\n              <Header\n                title=\"Conversion Lens\"\n                Icon={Radar}\n                showDatePicker={true}\n              />\n\n              <div id=\"report-tab\" className=\"bg-white px-6 sticky top-0 z-10 w-full\">\n                <CustomTabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />\n              </div>\n            </div>\n            {/* Scrollable Content */}\n            <div className=\"flex-1 overflow-auto\">\n              <div className=\"px-6 py-4 space-y-6\">\n                {activeTab === 'age' && <div id=\"age-conversion-report\">\n                  <AgeConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'gender' && <div id=\"gender\">\n                  <GenderConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'interest' && <div id=\"interest\">\n                  <InterestConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'device' && <div id=\"device\" >\n                  <DeviceTypeConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'operatingSystem' && <div id=\"operatingSystem\" >\n                  <OperatingSystemConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'browser' && <div id=\"browser\">\n                  <BrowserConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'source' && <div id=\"source\" >\n                  <SourceConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'channel' && <div id=\"channel\" >\n                  <ChannelConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'campaign' && <div id=\"campaign\">\n                  <CampaignConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'country' && <div id=\"country\">\n                  <CountryConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'city' && <div id=\"city\">\n                  <CityTypeConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'region' && <div id=\"region\" >\n                  <RegionConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'landingPage' && <div id=\"landingPage\" >\n                  <LandingPageConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n                {activeTab === 'pagePath' && <div id=\"pagePath\">\n                  <PagePathConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n\n                {activeTab === 'pageTitle' && <div id=\"pageTitle\" >\n                  <PageTitleConversion dateRange={{\n                    from: date.from ? new Date(date.from) : undefined,\n                    to: date.to ? new Date(date.to) : undefined\n                  }} />\n                </div>}\n              </div>\n              <Footer />\n              <HelpDeskModal />\n            </div>\n          </>\n        )}\n      </div>\n     \n      </div>\n      );\n};\n\n      export default ConversionLens;","import React, { useState, useEffect, useRef, useMemo } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { FacebookLogo } from \"@/data/logo\"\nimport {\n  ChevronDown,\n  ChevronRight,\n  Tag,\n  Filter,\n  Plus,\n  LayoutGrid,\n  SlidersHorizontal,\n  Check,\n  Maximize,\n  Minimize,\n  Edit,\n  X,\n} from \"lucide-react\"\nimport type { RootState } from \"@/store\"\nimport { addLabelToCampaign, removeLabelFromCampaign } from \"@/store/slices/campaignLabelsSlice\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport ColumnManagementSheet from \"@/pages/AnalyticsDashboard/Components/ColumnManagementSheet\"\n\n// Enhanced label colors with better contrast and visual hierarchy\nconst LABEL_COLORS = [\n  \"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200\",\n  \"bg-blue-100 text-blue-800 border border-blue-200 hover:bg-blue-200\",\n  \"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200\",\n  \"bg-yellow-100 text-yellow-800 border border-yellow-200 hover:bg-yellow-200\",\n  \"bg-purple-100 text-purple-800 border border-purple-200 hover:bg-purple-200\",\n  \"bg-pink-100 text-pink-800 border border-pink-200 hover:bg-pink-200\",\n  \"bg-indigo-100 text-indigo-800 border border-indigo-200 hover:bg-indigo-200\",\n  \"bg-orange-100 text-orange-800 border border-orange-200 hover:bg-orange-200\",\n]\n\n// Using a single fixed width for all columns except Campaign and Labels\nconst DEFAULT_COLUMN_WIDTH = \"85px\"\n\ninterface Campaign {\n  campaignName: string\n  campaignId: string\n  [key: string]: string | number\n}\n\ninterface MetaCampaignTableProps {\n  data: {\n    account_name: string\n    account_id: string\n    campaigns: Campaign[]\n  }\n  height: string\n  type?: string\n}\n\n// New interface for grouped campaigns\ninterface GroupedCampaign {\n  label: string\n  campaigns: Campaign[]\n  isExpanded: boolean\n}\n\nconst MetaCampaignTable: React.FC<MetaCampaignTableProps> = ({ data, height, type }) => {\n  const dispatch = useDispatch()\n  const [draggedCampaign, setDraggedCampaign] = useState<string | null>(null)\n  const [dragOverCampaign, setDragOverCampaign] = useState<string | null>(null)\n  const [isFullScreen, setIsFullScreen] = useState(false)\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null)\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null)\n  const [editingLabel, setEditingLabel] = useState<string | null>(null)\n  const [editLabelValue, setEditLabelValue] = useState(\"\")\n  const [isEditMode, setIsEditMode] = useState(false)\n\n  const [visibleColumns, setVisibleColumns] = useState<string[]>([])\n  const [columnOrder, setColumnOrder] = useState<string[]>([])\n  const [frozenColumns, setFrozenColumns] = useState<string[]>([\"Campaign\", \"Labels\"])\n\n\n  const [scrollLeft, setScrollLeft] = useState(0)\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n\n  // Ensure Campaign and Labels are always frozen in correct order\n  useEffect(() => {\n    setFrozenColumns((prev) => {\n      const newFrozen = prev.filter((col) => col !== \"Campaign\" && col !== \"Labels\")\n      return [\"Campaign\", \"Labels\", ...newFrozen]\n    })\n  }, [])\n\n  const [isGroupingEnabled, setIsGroupingEnabled] = useState(true)\n  const [groupedCampaigns, setGroupedCampaigns] = useState<GroupedCampaign[]>([])\n  const [ungroupedCampaigns, setUngroupedCampaigns] = useState<Campaign[]>([])\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"active\" | \"paused\">(\"all\")\n\n  const tableRef = useRef<HTMLDivElement>(null)\n  const columnRefs = useRef<{ [key: string]: HTMLTableCellElement | null }>({})\n  const newLabelInputRef = useRef<HTMLInputElement>(null)\n\n  const { labels } = useSelector((state: RootState) => state.campaignLabels)\n\n  const accountLabels = useMemo(() => {\n    return data.account_id ? labels[data.account_id] || {} : {}\n  }, [labels, data.account_id])\n\n  const PREDEFINED_LABELS = [\"TOFU\", \"MOFU\", \"BOFU\", \"TOFU+MOFU\"]\n\n  // Get all unique labels across all campaigns\n  const allUniqueLabels = useMemo(() => {\n    const uniqueLabels = new Set<string>()\n    Object.values(accountLabels).forEach((labelArray) => {\n      labelArray?.forEach((label) => {\n        uniqueLabels.add(label)\n      })\n    })\n    return Array.from(uniqueLabels)\n  }, [accountLabels])\n\n  const hasAnyLabels = useMemo(() => {\n    return allUniqueLabels.length > 0\n  }, [allUniqueLabels])\n\n  // Filter campaigns by status\n  const filterCampaignsByStatus = (campaigns: Campaign[]) => {\n    if (statusFilter === \"all\") return campaigns\n    return campaigns.filter((campaign) => {\n      // Check all possible status property names and formats\n      const statusValue = campaign.status || campaign.Status || \"\"\n      const status = String(statusValue).toLowerCase()\n\n      return statusFilter === \"active\" ? status === \"active\" : status === \"paused\"\n    })\n  }\n\n  // Filter campaigns before processing\n  const filteredCampaigns = useMemo(() => {\n    return filterCampaignsByStatus(data.campaigns)\n  }, [data.campaigns, statusFilter])\n\n  // Initialize column state\n  useEffect(() => {\n    if (data.campaigns.length > 0) {\n      const columns = Object.keys(data.campaigns[0])\n      // Always include Labels column\n      const initialColumns = columns.filter(\n        (col) => col !== \"Labels\" && col !== \"campaignId\" && col !== \"accountId\" && col !== \"accountName\",\n      )\n      const initialVisibleColumns = [...initialColumns, \"Labels\"]\n      setVisibleColumns(initialVisibleColumns)\n\n      // Create column order with Campaign first, then Labels, then others\n      const baseColumns = [...initialColumns].filter(\n        (col) => col !== \"Campaign\" && col !== \"campaignName\" && col !== \"Labels\",\n      )\n      const orderedColumns = [\"Campaign\", \"Labels\", ...baseColumns]\n      setColumnOrder(orderedColumns)\n    }\n  }, [data.campaigns])\n\n  // Group campaigns by labels\n  useEffect(() => {\n    if (isGroupingEnabled && hasAnyLabels) {\n      // Create a map to group campaigns by label\n      const labelMap: { [key: string]: Campaign[] } = {}\n\n      // Initialize each label with an empty array\n      allUniqueLabels.forEach((label) => {\n        labelMap[label] = []\n      })\n\n      // Group campaigns by labels\n      const unGrouped: Campaign[] = []\n\n      filteredCampaigns.forEach((campaign) => {\n        const currentCampaignLabels = accountLabels[campaign.campaignId] || []\n\n        if (currentCampaignLabels.length > 0) {\n          // Add campaign to each of its label groups\n          currentCampaignLabels.forEach((label) => {\n            labelMap[label].push(campaign)\n          })\n        } else {\n          // Add to ungrouped\n          unGrouped.push(campaign)\n        }\n      })\n\n      // Convert to array format with expanded state\n      const grouped = Object.entries(labelMap)\n        .filter(([, campaigns]) => campaigns.length > 0) // Only include groups with campaigns\n        .map(([label, campaigns]) => ({\n          label,\n          campaigns,\n          isExpanded: true,\n        }))\n\n      setGroupedCampaigns(grouped)\n      setUngroupedCampaigns(unGrouped)\n    } else {\n      setGroupedCampaigns([])\n      setUngroupedCampaigns(filteredCampaigns)\n    }\n  }, [filteredCampaigns, accountLabels, isGroupingEnabled, hasAnyLabels, allUniqueLabels])\n\n  const labelColorMap = React.useMemo(() => {\n    const map = new Map<string, string>()\n    let colorIndex = 0\n\n    allUniqueLabels.forEach((label) => {\n      map.set(label, LABEL_COLORS[colorIndex % LABEL_COLORS.length])\n      colorIndex++\n    })\n\n    return map\n  }, [allUniqueLabels])\n\n  // Calculate left position for frozen columns\n  const getLeftPosition = (columnIndex: number): number => {\n    let position = 0\n\n    // Get only the visible columns in the correct order\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col))\n\n    for (let i = 0; i < columnIndex; i++) {\n      const column = visibleOrderedColumns[i]\n      if (frozenColumns.includes(column)) {\n        const columnElement = columnRefs.current[column]\n        if (columnElement) {\n          position += columnElement.offsetWidth\n        }\n      }\n    }\n\n    return position\n  }\n\n  const shouldShowSeparator = (column: string): boolean => {\n    if (scrollLeft <= 0) return false;\n\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col));\n    const frozenVisibleColumns = visibleOrderedColumns.filter((col) => frozenColumns.includes(col));\n\n    if (frozenVisibleColumns.length === 0) return false;\n\n    const lastFrozenColumn = frozenVisibleColumns[frozenVisibleColumns.length - 1];\n    return column === lastFrozenColumn;\n  };\n\n  // Add a function to get the separator class\n  const getSeparatorClass = (column: string) => {\n    if (!shouldShowSeparator(column)) return \"\";\n    return \"relative after:content-[''] after:absolute after:right-0 after:top-0 after:bottom-0 after:w-[3px] after:bg-gradient-to-r after:from-slate-400 after:to-transparent after:shadow-lg before:content-[''] before:absolute before:right-0 before:top-0 before:bottom-0 before:w-[1px] before:bg-slate-300\";\n  };\n\n  const handleAddLabel = (campaignId: string, label: string) => {\n    if (label) {\n      dispatch(\n        addLabelToCampaign({\n          accountId: data.account_id,\n          campaignId: campaignId,\n          label,\n        }),\n      )\n    }\n  }\n\n  const handleRemoveLabel = (campaignId: string, label: string) => {\n    dispatch(\n      removeLabelFromCampaign({\n        accountId: data.account_id,\n        campaignId: campaignId,\n        label,\n      }),\n    )\n  }\n\n  const handleCreateNewLabel = (campaignId: string) => {\n    if (editLabelValue) {\n      handleAddLabel(campaignId, editLabelValue)\n      setEditLabelValue(\"\")\n      setEditingLabel(null)\n    }\n  }\n\n  // Get column style based on column name\n  const getColumnStyle = (column: string) => {\n    if (column === \"Campaign\") {\n      return { width: \"auto\", minWidth: \"200px\" }\n    }\n    if (column === \"Labels\") {\n      return { width: \"auto\", minWidth: \"150px\" }\n    }\n\n    // All other columns get the fixed width\n    return {\n      width: DEFAULT_COLUMN_WIDTH,\n      minWidth: DEFAULT_COLUMN_WIDTH,\n    }\n  }\n\n  // Campaign drag and drop handlers\n  const handleDragStart = (campaignId: string) => {\n    setDraggedCampaign(campaignId)\n  }\n\n  const handleDragOver = (e: React.DragEvent, campaignId: string) => {\n    e.preventDefault()\n    if (campaignId !== draggedCampaign) {\n      setDragOverCampaign(campaignId)\n    }\n  }\n\n  const handleDrop = (targetCampaignId: string) => {\n    if (!draggedCampaign || draggedCampaign === targetCampaignId) return\n\n    // Reorder campaigns logic would go here\n    // For now, just reset the state\n    setDraggedCampaign(null)\n    setDragOverCampaign(null)\n\n    // Note: In a real implementation, you would dispatch an action to update the order in your Redux store\n    console.log(`Dragged ${draggedCampaign} and dropped on ${targetCampaignId}`)\n  }\n\n  const handleDragEnd = () => {\n    setDraggedCampaign(null)\n    setDragOverCampaign(null)\n  }\n\n  // Column drag and drop handlers\n  const handleColumnDragStart = (columnName: string) => {\n    setDraggedColumn(columnName)\n  }\n\n  const handleColumnDragOver = (e: React.DragEvent, columnName: string) => {\n    e.preventDefault()\n    if (columnName !== draggedColumn) {\n      setDragOverColumn(columnName)\n    }\n  }\n\n  const handleColumnDrop = (targetColumnName: string) => {\n    if (!draggedColumn || draggedColumn === targetColumnName) return\n\n    // Reorder columns\n    const draggedIndex = columnOrder.indexOf(draggedColumn)\n    const targetIndex = columnOrder.indexOf(targetColumnName)\n\n    if (draggedIndex !== -1 && targetIndex !== -1) {\n      const newColumnOrder = [...columnOrder]\n      newColumnOrder.splice(draggedIndex, 1)\n      newColumnOrder.splice(targetIndex, 0, draggedColumn)\n      setColumnOrder(newColumnOrder)\n    }\n\n    setDraggedColumn(null)\n    setDragOverColumn(null)\n  }\n\n  const handleColumnDragEnd = () => {\n    setDraggedColumn(null)\n    setDragOverColumn(null)\n  }\n\n  // Toggle full screen mode\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen)\n  }\n\n  // Toggle group expansion\n  const toggleGroupExpansion = (labelIndex: number) => {\n    const updatedGroups = [...groupedCampaigns]\n    updatedGroups[labelIndex].isExpanded = !updatedGroups[labelIndex].isExpanded\n    setGroupedCampaigns(updatedGroups)\n  }\n\n  // Calculate summary values for a group\n  const calculateGroupSummary = (campaigns: Campaign[]) => {\n    const summary: { [key: string]: number | string } = {}\n\n    // Get columns that should be visible in the summary\n    const summaryColumns = columnOrder.filter(\n      (col) => visibleColumns.includes(col) && col !== \"Campaign\" && col !== \"Labels\",\n    )\n\n    // Define different calculation methods for specific columns\n    const calculationMethods: { [key: string]: (values: number[], campaigns: Campaign[]) => number } = {\n      \"Conversion Rate\": (_, campaigns) => {\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\n        const totalPurchases = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Purchases\"] || 0), 0)\n        if (totalLinkClicks === 0) return 0\n\n        const conversionRate = (totalPurchases / totalLinkClicks) * 100\n        return conversionRate\n      },\n      \"CPM (Reach Based)\": (_, campaigns) => {\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\n        const totalSpend = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Amount spend\"] || 0), 0)\n\n        const cpmReachBased = totalSpend / (totalreach / 1000)\n        return cpmReachBased\n      },\n      \"Audience Saturation Score\": (_, campaigns) => {\n        const totaloutboundctr = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Outbound CTR\"] || 0), 0)\n        const totalFrequency = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Frequency\"] || 0), 0)\n        if (totaloutboundctr === 0) return 0\n\n        const audienceScore = (totalFrequency / totaloutboundctr) * 100\n        return audienceScore\n      },\n      \"Reach v/s Unique Click\": (_, campaigns) => {\n        const totalUniqueClicks = campaigns.reduce(\n          (sum, campaign) => sum + Number(campaign[\"Unique Link Click\"] || 0),\n          0,\n        )\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\n        if (totalUniqueClicks === 0) return 0\n\n        const reachVsUniqueClick = totalreach / totalUniqueClicks\n        return reachVsUniqueClick\n      },\n      \"High-Intent Click Rate\": (_, campaigns) => {\n        const totalAddToCart = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Add To Cart (ATC)\"] || 0), 0)\n        const totalCheckoutInitiated = campaigns.reduce(\n          (sum, campaign) => sum + Number(campaign[\"Checkout Initiate (CI)\"] || 0),\n          0,\n        )\n        const totalLandingPageView = campaigns.reduce(\n          (sum, campaign) => sum + Number(campaign[\"Landing Page View\"] || 0),\n          0,\n        )\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\n        if (totalLinkClicks === 0) return 0\n\n        const highIntentClickRate =\n          ((totalAddToCart + totalCheckoutInitiated + totalLandingPageView) / totalLinkClicks) * 100\n        return highIntentClickRate\n      },\n      HookRate: (_, campaigns) => {\n        const threeSecondsView = campaigns.reduce(\n          (sum, campaign) => sum + Number(campaign[\"Three Seconds View\"] || 0),\n          0,\n        )\n        const totalimpressions = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Impressions\"] || 0), 0)\n        if (totalimpressions === 0) return 0\n\n        const hookrate = (threeSecondsView / totalimpressions) * 100\n        return hookrate\n      },\n      DEFAULT: (values, _) => values.reduce((sum, val) => sum + val, 0),\n    }\n\n    // Then modify how you call these methods:\n    summaryColumns.forEach((column) => {\n      const values = campaigns.map((campaign) => Number(campaign[column] || 0)).filter((value) => !isNaN(value))\n\n      const calculateMethod = calculationMethods[column] || calculationMethods[\"DEFAULT\"]\n      summary[column] = calculateMethod(values, campaigns).toFixed(2)\n    })\n\n    return summary\n  }\n\n  const getTableHeight = () => {\n    if (isFullScreen) {\n      return \"max-h-[calc(100vh-100px)]\"\n    }\n    return height\n  }\n\n  const renderLabelDropdown = (campaign: Campaign) => {\n    const campaignLabels = accountLabels[campaign.campaignId] || []\n\n    return (\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" size=\"sm\" className=\"h-7 w-full justify-between\">\n            <div className=\"flex items-center gap-1 overflow-hidden\">\n              <Tag className=\"h-3.5 w-3.5 text-slate-500 shrink-0\" />\n              <span className=\"truncate\">\n                {campaignLabels.length > 0\n                  ? `${campaignLabels.length} label${campaignLabels.length > 1 ? \"s\" : \"\"}`\n                  : \"Add label\"}\n              </span>\n            </div>\n            <ChevronDown className=\"h-3.5 w-3.5 opacity-70\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"start\" className=\"w-56\">\n          <div className=\"p-2\">\n            <div className=\"text-xs font-medium text-slate-500 mb-2\">Predefined labels</div>\n            {PREDEFINED_LABELS.map((label) => {\n              const isSelected = campaignLabels.includes(label)\n              return (\n                <DropdownMenuItem\n                  key={label}\n                  className=\"flex items-center gap-2 cursor-pointer\"\n                  onClick={() => {\n                    if (isSelected) {\n                      handleRemoveLabel(campaign.campaignId, label)\n                    } else {\n                      handleAddLabel(campaign.campaignId, label)\n                    }\n                  }}\n                >\n                  <Badge\n                    className={`bg-slate-100 text-slate-800 border border-slate-200 hover:bg-slate-200 text-xs py-0.5 px-2 w-full`}\n                  >\n                    {label}\n                  </Badge>\n                </DropdownMenuItem>\n              )\n            })}\n\n            {allUniqueLabels.length > 0 && (\n              <>\n                <DropdownMenuSeparator />\n                <div className=\"text-xs font-medium text-slate-500 my-2\">Custom labels</div>\n                {allUniqueLabels\n                  .filter((label) => !PREDEFINED_LABELS.includes(label))\n                  .map((label) => {\n                    const isSelected = campaignLabels.includes(label)\n                    return (\n                      <DropdownMenuItem\n                        key={label}\n                        className=\"flex items-center gap-2 cursor-pointer\"\n                        onClick={() => {\n                          if (isSelected) {\n                            handleRemoveLabel(campaign.campaignId, label)\n                          } else {\n                            handleAddLabel(campaign.campaignId, label)\n                          }\n                        }}\n                      >\n                        <Badge className={`${labelColorMap.get(label)} text-xs py-0.5 px-2`}>{label}</Badge>\n                      </DropdownMenuItem>\n                    )\n                  })}\n              </>\n            )}\n\n            <DropdownMenuSeparator />\n\n            {editingLabel === campaign.campaignId ? (\n              <div className=\"flex items-center gap-1 px-2 py-1\">\n                <Input\n                  ref={newLabelInputRef}\n                  value={editLabelValue}\n                  onChange={(e) => setEditLabelValue(e.target.value)}\n                  placeholder=\"New label name\"\n                  className=\"h-7 text-xs\"\n                  autoFocus\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\") {\n                      handleCreateNewLabel(campaign.campaignId)\n                    } else if (e.key === \"Escape\") {\n                      setEditingLabel(null)\n                      setEditLabelValue(\"\")\n                    }\n                  }}\n                />\n                <Button size=\"sm\" className=\"h-7 px-2\" onClick={() => handleCreateNewLabel(campaign.campaignId)}>\n                  <Check className=\"h-3.5 w-3.5\" />\n                </Button>\n              </div>\n            ) : (\n              <DropdownMenuItem\n                className=\"flex items-center gap-2 cursor-pointer\"\n                onClick={(e) => {\n                  e.preventDefault()\n                  setEditingLabel(campaign.campaignId)\n                  setEditLabelValue(\"\")\n                  setTimeout(() => {\n                    newLabelInputRef.current?.focus()\n                  }, 0)\n                }}\n              >\n                <Plus className=\"h-3.5 w-3.5 text-slate-500\" />\n                <span className=\"text-sm\">Create new label</span>\n              </DropdownMenuItem>\n            )}\n          </div>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    )\n  }\n\n  useEffect(() => {\n    return () => {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current)\n      }\n    }\n  }, [])\n\n  return (\n    <TooltipProvider>\n      <Card className={`overflow-hidden ${isFullScreen ? \"fixed inset-0 z-50\" : \"\"} border-slate-200 shadow-md`}>\n        <div className=\"flex items-center justify-between p-3 border-b bg-gradient-to-r from-slate-50 to-white\">\n          <div className=\"flex items-center gap-2\">\n            <FacebookLogo height={\"1rem\"} width={\"1rem\"} />\n            <div className=\"text-base font-semibold text-slate-800\">\n              Campaign Performance <span>({data.account_name})</span>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className={`gap-1 font-medium ${statusFilter !== \"all\" ? \"bg-blue-50 text-blue-600 border-blue-200\" : \"\"}`}\n                >\n                  <Filter className={`h-4 w-4 ${statusFilter !== \"all\" ? \"text-blue-600\" : \"text-slate-500\"}`} />\n                  {statusFilter === \"all\" ? \"All Status\" : statusFilter === \"active\" ? \"Active\" : \"Paused\"}\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-32\">\n                <DropdownMenuItem\n                  onClick={() => setStatusFilter(\"all\")}\n                  className={statusFilter === \"all\" ? \"bg-blue-50\" : \"\"}\n                >\n                  All Status\n                </DropdownMenuItem>\n                <DropdownMenuItem\n                  onClick={() => setStatusFilter(\"active\")}\n                  className={statusFilter === \"active\" ? \"bg-blue-50\" : \"\"}\n                >\n                  Active\n                </DropdownMenuItem>\n                <DropdownMenuItem\n                  onClick={() => setStatusFilter(\"paused\")}\n                  className={statusFilter === \"paused\" ? \"bg-blue-50\" : \"\"}\n                >\n                  Paused\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsEditMode(!isEditMode)}\n                  size=\"sm\"\n                  className={`gap-1 font-medium ${isEditMode ? \"bg-blue-50 text-blue-600 border-blue-200\" : \"\"}`}\n                  disabled={!isGroupingEnabled}\n                >\n                  <Edit className={`h-4 w-4 ${isEditMode ? \"text-blue-600\" : \"text-slate-500\"}`} />\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>{isEditMode ? \"Exit Edit Mode\" : \"Edit Labels\"}</TooltipContent>\n            </Tooltip>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsGroupingEnabled(!isGroupingEnabled)}\n                  size=\"sm\"\n                  className=\"gap-1 font-medium\"\n                >\n                  {isGroupingEnabled ? (\n                    <>\n                      <LayoutGrid className=\"h-4 w-4 text-blue-600\" />\n                    </>\n                  ) : (\n                    <>\n                      <LayoutGrid className=\"h-4 w-4 text-slate-500\" />\n                    </>\n                  )}\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>{isGroupingEnabled ? \"Disable Grouping\" : \"Enable Grouping\"}</TooltipContent>\n            </Tooltip>\n\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <div>\n                  <ColumnManagementSheet\n                    visibleColumns={visibleColumns}\n                    columnOrder={columnOrder}\n                    frozenColumns={frozenColumns}\n                    onVisibilityChange={setVisibleColumns}\n                    onOrderChange={setColumnOrder}\n                    onFrozenChange={setFrozenColumns}\n                  />\n                </div>\n              </TooltipTrigger>\n              <TooltipContent>Manage Columns</TooltipContent>\n            </Tooltip>\n\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" onClick={toggleFullScreen} className=\"font-medium\">\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>{isFullScreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}</TooltipContent>\n            </Tooltip>\n          </div>\n        </div>\n\n        <div className=\"p-3\">\n          <div\n            ref={tableRef}\n            className={`overflow-auto ${getTableHeight()} bg-white rounded-lg border border-slate-200 shadow-sm`}\n            onScroll={(e) => {\n              const target = e.target as HTMLDivElement\n              const currentScrollLeft = target.scrollLeft\n\n              setScrollLeft(currentScrollLeft)\n              if (scrollTimeoutRef.current) {\n                clearTimeout(scrollTimeoutRef.current)\n              }\n\n             \n            }}\n          >\n            <table className=\"w-full border-collapse text-xs relative\">\n              <thead className=\"bg-slate-50 sticky top-0 z-20\">\n                <tr>\n                  {columnOrder\n                    .filter((column) => visibleColumns.includes(column))\n                    .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\n                    .map((column, index) => {\n                      const isFrozen = frozenColumns.includes(column)\n                      const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                      const columnStyle = getColumnStyle(column)\n\n                      return (\n                        <th\n                          key={column}\n                          ref={(el) => (columnRefs.current[column] = el)}\n                          className={`text-left p-2 font-medium text-slate-700 border-b border-r ${\n                            isFrozen ? \"sticky z-20 bg-slate-50\" : \"\"\n                          } ${dragOverColumn === column ? \"bg-blue-50\" : \"\"} ${getSeparatorClass(column)}`}\n                          style={{\n                            left: leftPos,\n                            ...columnStyle,\n                          }}\n                          draggable\n                          onDragStart={() => handleColumnDragStart(column)}\n                          onDragOver={(e) => handleColumnDragOver(e, column)}\n                          onDrop={() => handleColumnDrop(column)}\n                          onDragEnd={handleColumnDragEnd}\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <span>{column}</span>\n                            <SlidersHorizontal className=\"h-3 w-3 text-slate-400 cursor-grab\" />\n                          </div>\n                        </th>\n                      )\n                    })}\n                </tr>\n              </thead>\n              <tbody>\n                {/* Render grouped campaigns */}\n                {isGroupingEnabled &&\n                  groupedCampaigns.map((group, groupIndex) => (\n                    <React.Fragment key={`group-${group.label}`}>\n                      {/* Label group header/summary row */}\n                      <tr className=\"bg-gradient-to-r from-slate-100 to-slate-50 font-medium hover:bg-slate-100 transition-colors\">\n                        {columnOrder\n                          .filter((column) => visibleColumns.includes(column))\n                          .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\n                          .map((column, index) => {\n                            const isFrozen = frozenColumns.includes(column)\n                            const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                            const columnStyle = getColumnStyle(column)\n                            const summary = calculateGroupSummary(group.campaigns)\n\n                            if (column === \"Campaign\") {\n                              return (\n                                <td\n                                  key={column}\n                                  className={`p-2 border-r sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50 ${getSeparatorClass(column)}`}\n                                  style={{\n                                    left: leftPos,\n                                    ...columnStyle,\n                                  }}\n                                >\n                                  <div className=\"flex items-center\">\n                                    <button\n                                      onClick={() => toggleGroupExpansion(groupIndex)}\n                                      className=\"mr-2 focus:outline-none rounded-full p-0.5 hover:bg-slate-200 transition-colors\"\n                                    >\n                                      {group.isExpanded ? (\n                                        <ChevronDown className=\"h-4 w-4 text-slate-600\" />\n                                      ) : (\n                                        <ChevronRight className=\"h-4 w-4 text-slate-600\" />\n                                      )}\n                                    </button>\n                                    <span className=\"font-medium text-slate-700\">\n                                      Group: {group.campaigns.length} campaigns\n                                    </span>\n                                  </div>\n                                </td>\n                              )\n                            }\n\n                            if (column === \"Labels\") {\n                              return (\n                                <td\n                                  key={column}\n                                  className={`p-2 border-r ${\n                                    isFrozen\n                                      ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\n                                      : \"bg-gradient-to-r from-slate-100 to-slate-50\"\n                                  } ${getSeparatorClass(column)}`}\n                                  style={{\n                                    left: leftPos,\n                                    ...columnStyle,\n                                  }}\n                                >\n                                  <div className=\"flex items-center gap-2\">\n                                    <Badge\n                                      className={`${labelColorMap.get(group.label)} w-fit flex items-center gap-1 cursor-default text-xs py-0.5 px-2 rounded-md`}\n                                    >\n                                      {group.label}\n                                    </Badge>\n                                    {isEditMode && (\n                                      <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        className=\"h-6 w-6 p-0 rounded-full hover:bg-red-50\"\n                                        onClick={() => {\n                                          // Remove this label from all campaigns in this group\n                                          group.campaigns.forEach((campaign) => {\n                                            handleRemoveLabel(campaign.campaignId, group.label)\n                                          })\n                                        }}\n                                      >\n                                        <X className=\"h-3.5 w-3.5 text-red-500\" />\n                                      </Button>\n                                    )}\n                                  </div>\n                                </td>\n                              )\n                            }\n\n                            return (\n                              <td\n                                key={column}\n                                className={`p-2 border-r ${\n                                  isFrozen\n                                    ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\n                                    : \"bg-gradient-to-r from-slate-100 to-slate-50\"\n                                } font-semibold`}\n                                style={{\n                                  left: leftPos,\n                                  ...columnStyle,\n                                }}\n                              >\n                                <div>{summary[column]}</div>\n                              </td>\n                            )\n                          })}\n                      </tr>\n\n                      {/* Individual campaigns in the group */}\n                      {group.isExpanded &&\n                        group.campaigns.map((campaign, index) => (\n                          <tr\n                            key={`group-${group.label}-campaign-${campaign.campaignId}-${index}`}\n                            className={`border-b border-2 hover:bg-slate-50 transition-colors ${\n                              dragOverCampaign === campaign.campaignName ? \"bg-blue-50\" : \"\"\n                            }`}\n                            draggable\n                            onDragStart={() => handleDragStart(campaign.campaignName)}\n                            onDragOver={(e) => handleDragOver(e, campaign.campaignName)}\n                            onDrop={() => handleDrop(campaign.campaignName)}\n                            onDragEnd={handleDragEnd}\n                          >\n                            {columnOrder\n                              .filter((column) => visibleColumns.includes(column))\n                              .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\n                              .map((column, index) => {\n                                const isFrozen = frozenColumns.includes(column)\n                                const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                                const columnStyle = getColumnStyle(column)\n\n                                if (column === \"Campaign\") {\n                                  return (\n                                    <td\n                                      key={column}\n                                      className={`p-2 border-r sticky bg-white z-10 ${getSeparatorClass(column)}`}\n                                      style={{\n                                        left: leftPos,\n                                        paddingLeft: \"30px\",\n                                        ...columnStyle,\n                                      }}\n                                    >\n                                      <div className=\"flex items-center justify-between gap-2\">\n                                        <span className=\"font-medium\">{campaign.campaignName}</span>\n                                        {type === \"blended-summary\" && campaign.accountName && (\n                                          <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded whitespace-nowrap\">\n                                            {campaign.accountName}\n                                          </span>\n                                        )}\n                                      </div>\n                                    </td>\n                                  )\n                                }\n\n                                if (column === \"Labels\") {\n                                  return (\n                                    <td\n                                      key={column}\n                                      className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"} ${getSeparatorClass(column)}`}\n                                      style={{\n                                        left: leftPos,\n                                        ...columnStyle,\n                                      }}\n                                    >\n                                      {isEditMode && isGroupingEnabled ? (\n                                        <div className=\"flex items-center gap-2\">\n                                          <Badge\n                                            className={`${labelColorMap.get(group.label)} w-fit flex items-center gap-1 text-xs py-0.5 px-2 rounded-md`}\n                                          >\n                                            {group.label}\n                                          </Badge>\n                                          <Button\n                                            variant=\"ghost\"\n                                            size=\"sm\"\n                                            className=\"h-6 w-6 p-0 rounded-full hover:bg-red-50\"\n                                            onClick={() => handleRemoveLabel(campaign.campaignId, group.label)}\n                                          >\n                                            <X className=\"h-3.5 w-3.5 text-red-500\" />\n                                          </Button>\n                                          <DropdownMenu>\n                                            <DropdownMenuTrigger asChild>\n                                              <Button variant=\"outline\" size=\"sm\" className=\"h-7\">\n                                                Change\n                                              </Button>\n                                            </DropdownMenuTrigger>\n                                            <DropdownMenuContent align=\"start\" className=\"w-56\">\n                                              <div className=\"p-2\">\n                                                {allUniqueLabels\n                                                  .filter((label) => label !== group.label)\n                                                  .map((label) => (\n                                                    <DropdownMenuItem\n                                                      key={label}\n                                                      className=\"flex items-center gap-2 cursor-pointer\"\n                                                      onClick={() => {\n                                                        handleRemoveLabel(campaign.campaignId, group.label)\n                                                        handleAddLabel(campaign.campaignId, label)\n                                                      }}\n                                                    >\n                                                      <Badge\n                                                        className={`${labelColorMap.get(label)} text-xs py-0.5 px-2`}\n                                                      >\n                                                        {label}\n                                                      </Badge>\n                                                    </DropdownMenuItem>\n                                                  ))}\n                                                <DropdownMenuSeparator />\n                                                <DropdownMenuItem\n                                                  className=\"flex items-center gap-2 cursor-pointer\"\n                                                  onClick={(e) => {\n                                                    e.preventDefault()\n                                                    setEditingLabel(campaign.campaignId)\n                                                    setEditLabelValue(\"\")\n                                                    setTimeout(() => {\n                                                      newLabelInputRef.current?.focus()\n                                                    }, 0)\n                                                  }}\n                                                >\n                                                  <Plus className=\"h-3.5 w-3.5 text-slate-500\" />\n                                                  <span className=\"text-sm\">Create new label</span>\n                                                </DropdownMenuItem>\n                                                {editingLabel === campaign.campaignName && (\n                                                  <div className=\"flex items-center gap-1 px-2 py-1 mt-2\">\n                                                    <Input\n                                                      ref={newLabelInputRef}\n                                                      value={editLabelValue}\n                                                      onChange={(e) => setEditLabelValue(e.target.value)}\n                                                      placeholder=\"New label name\"\n                                                      className=\"h-7 text-xs\"\n                                                      autoFocus\n                                                      onKeyDown={(e) => {\n                                                        if (e.key === \"Enter\") {\n                                                          handleCreateNewLabel(campaign.campaignId)\n                                                          handleRemoveLabel(campaign.campaignId, group.label)\n                                                        } else if (e.key === \"Escape\") {\n                                                          setEditingLabel(null)\n                                                          setEditLabelValue(\"\")\n                                                        }\n                                                      }}\n                                                    />\n                                                    <Button\n                                                      size=\"sm\"\n                                                      className=\"h-7 px-2\"\n                                                      onClick={() => {\n                                                        handleCreateNewLabel(campaign.campaignId)\n                                                        handleRemoveLabel(campaign.campaignId, group.label)\n                                                      }}\n                                                    >\n                                                      <Check className=\"h-3.5 w-3.5\" />\n                                                    </Button>\n                                                  </div>\n                                                )}\n                                              </div>\n                                            </DropdownMenuContent>\n                                          </DropdownMenu>\n                                        </div>\n                                      ) : (\n                                        renderLabelDropdown(campaign)\n                                      )}\n                                    </td>\n                                  )\n                                }\n\n                                return (\n                                  <td\n                                    key={column}\n                                    className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"} ${getSeparatorClass(column)}`}\n                                    style={{\n                                      left: leftPos,\n                                      ...columnStyle,\n                                    }}\n                                  >\n                                    <div>{campaign[column]}</div>\n                                  </td>\n                                )\n                              })}\n                          </tr>\n                        ))}\n                    </React.Fragment>\n                  ))}\n\n                {/* Ungrouped campaigns section */}\n                {isGroupingEnabled && ungroupedCampaigns.length > 0 && (\n                  <tr className=\"bg-gradient-to-r from-gray-100 to-gray-50 font-medium hover:bg-gray-100 transition-colors\">\n                    {columnOrder\n                      .filter((column) => visibleColumns.includes(column))\n                      .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\n                      .map((column, index) => {\n                        const isFrozen = frozenColumns.includes(column)\n                        const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                        const columnStyle = getColumnStyle(column)\n\n                        if (column === \"Campaign\") {\n                          return (\n                            <td\n                              key={column}\n                              className={`p-2 border-r sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50 ${getSeparatorClass(column)}`}\n                              style={{\n                                left: leftPos,\n                                ...columnStyle,\n                              }}\n                            >\n                              <div className=\"font-medium text-slate-700 flex items-center\">\n                                <Filter className=\"h-4 w-4 mr-2 text-slate-500\" />\n                                Unlabeled: {ungroupedCampaigns.length} campaigns\n                              </div>\n                            </td>\n                          )\n                        }\n\n                        if (column === \"Labels\") {\n                          return (\n                            <td\n                              key={column}\n                              className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\" : \"\"} ${getSeparatorClass(column)}`}\n                              style={{\n                                left: leftPos,\n                                ...columnStyle,\n                              }}\n                            >\n                              -\n                            </td>\n                          )\n                        }\n\n                        // Calculate summary for ungrouped campaigns\n                        const summary = calculateGroupSummary(ungroupedCampaigns)\n\n                        return (\n                          <td\n                            key={column}\n                            className={`p-2 border-r ${\n                              isFrozen\n                                ? \"sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50\"\n                                : \"bg-gradient-to-r from-gray-100 to-gray-50\"\n                            } font-semibold`}\n                            style={{\n                              left: leftPos,\n                              ...columnStyle,\n                            }}\n                          >\n                            <div>{summary[column]}</div>\n                          </td>\n                        )\n                      })}\n                  </tr>\n                )}\n\n                {/* Render ungrouped campaigns or all campaigns when grouping is disabled */}\n                {(isGroupingEnabled ? ungroupedCampaigns : filteredCampaigns).map((campaign, index) => (\n                  <tr\n                    key={`${isGroupingEnabled ? \"ungrouped\" : \"all\"}-${campaign.campaignName}-${index}`}\n                    className={`border-b border-2 hover:bg-slate-50 transition-colors ${\n                      dragOverCampaign === campaign.campaignName ? \"bg-blue-50\" : \"\"\n                    }`}\n                    draggable\n                    onDragStart={() => handleDragStart(campaign.campaignName)}\n                    onDragOver={(e) => handleDragOver(e, campaign.campaignName)}\n                    onDrop={() => handleDrop(campaign.campaignName)}\n                    onDragEnd={handleDragEnd}\n                  >\n                    {columnOrder\n                      .filter((column) => visibleColumns.includes(column))\n                      .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\n                      .map((column, index) => {\n                        const isFrozen = frozenColumns.includes(column)\n                        const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                        const columnStyle = getColumnStyle(column)\n                        if (column === \"Campaign\") {\n                          return (\n                            <td\n                              key={column}\n                              className={`p-2 border-r sticky z-10 bg-white ${getSeparatorClass(column)}`}\n                              style={{\n                                left: leftPos,\n                                ...columnStyle,\n                              }}\n                            >\n                              <div className=\"flex items-center justify-between gap-2\">\n                                <span className=\"font-medium\">{campaign.campaignName}</span>\n                                {type === \"blended-summary\" && campaign.accountName && (\n                                  <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded whitespace-nowrap\">\n                                    {campaign.accountName}\n                                  </span>\n                                )}\n                              </div>\n                            </td>\n                          )\n                        }\n\n                        if (column === \"Labels\") {\n                          return (\n                            <td\n                              key={column}\n                              className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"} ${getSeparatorClass(column)}`}\n                              style={{\n                                left: leftPos,\n                                ...columnStyle,\n                              }}\n                            >\n                              {renderLabelDropdown(campaign)}\n                            </td>\n                          )\n                        }\n\n                        return (\n                          <td\n                            key={column}\n                            className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white\" : \"\"} ${getSeparatorClass(column)}`}\n                            style={{\n                              left: leftPos,\n                              ...columnStyle,\n                            }}\n                          >\n                            <div>{campaign[column]}</div>\n                          </td>\n                        )\n                      })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </Card>\n    </TooltipProvider>\n  )\n}\n\nexport default MetaCampaignTable\n","import Header from \"@/components/dashboard_component/Header\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\nimport { FaMeta } from \"react-icons/fa6\";\nimport { useEffect, useCallback, useState, useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { format } from \"date-fns\";\nimport { ICampaignData } from \"@/interfaces\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport MetaCampaignTable from \"./components/MetaCampaignTable\";\nimport MissingDateWarning from \"@/components/dashboard_component/Missing-Date-Waning\";\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\nimport ConnectPlatform from \"@/pages/ReportPage/ConnectPlatformPage\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport { selectFbTokenError } from \"@/store/slices/TokenSllice\";\nimport { Target } from \"lucide-react\";\nimport Footer from \"@/pages/LandingPage/components/Footer\";\n\nfunction CampaignPage() {\n\n    const [isLoading, setIsLoading] = useState(false);\n    const [metaCampaign, setMetaCampaign] = useState<ICampaignData>();\n    const dateFrom = useSelector((state: RootState) => state.date.from);\n    const dateTo = useSelector((state: RootState) => state.date.to);\n    const date = useMemo(() => ({\n        from: dateFrom,\n        to: dateTo\n    }), [dateFrom, dateTo]);\n\n    const axiosInstance = createAxiosInstance();\n    const { brandId } = useParams();\n    const brands = useSelector((state: RootState) => state.brand.brands);\n    const selectedBrand = brands.find((brand) => brand._id === brandId);\n    const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\n        ? true\n        : false;\n    const fbTokenError = useSelector(selectFbTokenError);\n\n    const navigate = useNavigate();\n\n    const fetchData = useCallback(async () => {\n        setIsLoading(true);\n        try {\n            const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\n            const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\n            try {\n                const response = await axiosInstance.post(\n                    `/api/meta/campaign/${brandId}`,\n                    { startDate, endDate, },\n                    { withCredentials: true }\n                );\n                const data = response.data;\n\n                setMetaCampaign(data);\n            } catch (error) {\n                console.error('Error fetching Facebook ad data:', error);\n            }\n        } catch (error) {\n            console.error('Error fetching ad data:', error);\n            if (axios.isAxiosError(error) && error.response?.status === 401) {\n                alert('Your session has expired. Please log in again.');\n                navigate('/');\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    }, [navigate, date, brandId]);\n\n\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n\n    useEffect(() => {\n        fetchData();\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // 3 hours\n        return () => clearInterval(intervalId);\n    }, [fetchData]);\n\n    useEffect(() => {\n        console.log(\"meta campaign\", metaCampaign)\n    }, [])\n\n    const blendedSummary = metaCampaign?.blendedSummary\n    const accountData = metaCampaign?.accountData\n\n    let height = '';\n    if (metaCampaign?.blendedSummary && metaCampaign?.blendedSummary.length > 1) {\n        height = 'max-h-[calc(100vh-400px)]';\n    } else {\n        height = 'max-h-[calc(100vh-210px)]'\n    }\n\n    return (\n        <div className=\"flex h-screen bg-gray-100\">\n            <CollapsibleSidebar />\n            <div className=\"flex-1 h-screen overflow-auto\">\n            <Header title='Meta Campaign Trends' Icon={FaMeta} showDatePicker={true} />\n                {fbTokenError ? (\n                    <NoAccessPage\n                        platform=\"Facebook Ads\"\n                        message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\n                        icon={<Target className=\"w-8 h-8 text-red-500\" />}\n                        loginOptions={[\n                            {\n                                label: \"Connect Facebook Ads\",\n                                provider: \"facebook\"\n                            }\n                        ]}\n                    />\n                ) : !hasFbAdAccount ? (\n                    <>\n                        <ConnectPlatform\n                            platform=\"facebook\"\n                            brandId={brandId ?? ''}\n                            onSuccess={(platform, accountName, accountId) => {\n                                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n                            }}\n                        />\n                    </>) : (!date.from || !date.to) ? <MissingDateWarning /> : ((isLoading) ? <Loader isLoading={isLoading} /> :\n                        <>\n                            <div className=\"flex-none\">\n                               \n                            </div>\n                            <main className=\"p-4 md:p-6 lg:px-8 overflow-auto\">\n                                <div className=\"grid grid-cols-1 gap-6\">\n                                    {(blendedSummary && blendedSummary.length > 0) && (\n                                        <MetaCampaignTable\n                                            data={{\n                                                account_name: \"Blended Summary\",\n                                                account_id: \"blended_summary\",\n                                                campaigns: blendedSummary.map(campaign => ({\n                                                    ...campaign,\n                                                    Campaign: campaign.campaignName\n                                                }))\n                                            }}\n                                            height={height}\n                                            type=\"blended-summary\"\n                                        />\n                                    )}\n                                    {(accountData && accountData.map(account => (\n                                        <MetaCampaignTable\n                                            key={account.account_id}\n                                            data={{\n                                                account_name: account.account_name,\n                                                account_id: account.account_id,\n                                                campaigns: account.campaigns.map(campaign => ({\n                                                    ...campaign,\n                                                    Campaign: campaign.campaignName\n                                                }))\n                                            }}\n                                            height={height}\n                                        />\n                                    )))}\n                                </div>\n                            </main>\n\n\n                        </>\n                    )}\n                    <Footer />\n                <HelpDeskModal />\n            </div>\n        </div>\n    )\n}\nexport default CampaignPage;\n\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { addFilter, removeFilter, clearFilters, FilterCondition } from '@/store/slices/interestFilterSlice';\nimport { RootState } from '@/store';\nimport { Filter, X } from 'lucide-react';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\ninterface InterestFilterProps {\n  columns: string[];\n  tableId: string;\n}\n\nconst InterestFilter: React.FC<InterestFilterProps> = ({ columns, tableId }) => {\n  const dispatch = useDispatch();\n  const filters = useSelector((state: RootState) => state.interestFilter.filters[tableId] || []);\n  const [open, setOpen] = useState(false);\n  const [newFilter, setNewFilter] = useState<Omit<FilterCondition, 'value'> & { value: string }>({\n    column: columns[0],\n    operator: '>',\n    value: '',\n  });\n\n  const handleAddFilter = () => {\n    if (newFilter.value) {\n      dispatch(addFilter({\n        tableId,\n        filter: {\n          ...newFilter,\n          value: newFilter.column === 'Interest' ? newFilter.value : Number(newFilter.value)\n        }\n      }));\n      setNewFilter({ ...newFilter, value: '' });\n      setOpen(false);\n    }\n  };\n\n  const handleRemoveFilter = (index: number) => {\n    dispatch(removeFilter({ tableId, index }));\n  };\n\n  const handleClearFilters = () => {\n    dispatch(clearFilters({ tableId }));\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" size=\"icon\" className=\"relative\">\n          <Filter className=\"h-4 w-4\" />\n          {filters.length > 0 && (\n            <span className=\"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center\">\n              {filters.length}\n            </span>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80\">\n        <div className=\"flex flex-col gap-4\">\n          <Select\n            value={newFilter.column}\n            onValueChange={(value) => setNewFilter({ ...newFilter, column: value })}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder=\"Select column\" />\n            </SelectTrigger>\n            <SelectContent>\n              {columns.map((column) => (\n                <SelectItem key={column} value={column}>\n                  {column}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n\n          <Select\n            value={newFilter.operator}\n            onValueChange={(value) => setNewFilter({ ...newFilter, operator: value as FilterCondition['operator'] })}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder=\"Operator\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\">\">{'>'}</SelectItem>\n              <SelectItem value=\"<\">{'<'}</SelectItem>\n              <SelectItem value=\"=\">{'='}</SelectItem>\n              <SelectItem value=\">=\">{'>='}</SelectItem>\n              <SelectItem value=\"<=\">{'<='}</SelectItem>\n            </SelectContent>\n          </Select>\n\n          <Input\n            type={newFilter.column === 'Interest' ? 'text' : 'number'}\n            value={newFilter.value}\n            onChange={(e) => setNewFilter({ ...newFilter, value: e.target.value })}\n            placeholder=\"Enter value\"\n          />\n\n          <div className=\"flex gap-2\">\n            <Button onClick={handleAddFilter} className=\"flex-1\">Add Filter</Button>\n            <Button variant=\"outline\" onClick={handleClearFilters} className=\"flex-1\">\n              Clear All\n            </Button>\n          </div>\n\n          {filters.length > 0 && (\n            <div className=\"space-y-2\">\n              <div className=\"text-sm font-medium text-slate-700\">Active Filters</div>\n              {filters.map((filter: FilterCondition, index: number) => (\n                <div key={index} className=\"flex items-center gap-2 p-2 bg-slate-50 rounded-md\">\n                  <div className=\"flex-1 text-sm\">\n                    {filter.column} {filter.operator} {filter.value}\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => handleRemoveFilter(index)}\n                    className=\"h-6 w-6\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default InterestFilter; ","import React, { useState, useRef } from \"react\"\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { FacebookLogo } from \"@/data/logo\"\nimport {\n  Maximize,\n  Minimize,\n  SlidersHorizontal,\n} from \"lucide-react\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport ColumnManagementSheet from \"../../../AnalyticsDashboard/Components/ColumnManagementSheet\"\nimport InterestFilter from \"./InterestFilter\"\nimport { useSelector } from \"react-redux\"\nimport { RootState } from \"@/store\"\n\nconst DEFAULT_COLUMN_WIDTH = \"100px\"\n\ninterface InterestData {\n  Interest: string;\n  InterestId: string;\n  Spend: number;\n  Revenue: number;\n  Roas: number;\n  accounts?: string[];\n}\n\ninterface InterestTableProps {\n  data: {\n    resultsByAccount: {\n      [accountName: string]: {\n        adAccountId: string;\n        interestMetrics: InterestData[];\n      }\n    },\n    blendedSummary: InterestData[];\n  };\n  height?: string;\n  accountName?: string;\n  showAccounts?: boolean;\n}\n\nconst InterestTable: React.FC<InterestTableProps> = ({ data, height = \"max-h-96\", accountName, showAccounts = false }) => {\n  const [draggedInterest, setDraggedInterest] = useState<string | null>(null)\n  const [dragOverInterest, setDragOverInterest] = useState<string | null>(null)\n  const [isFullScreen, setIsFullScreen] = useState(false)\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null)\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null)\n\n  const filters = useSelector((state: RootState) => state.interestFilter.filters[accountName || 'blended'] || [])\n\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(\n    showAccounts \n      ? [\"Interest\", \"Spend\", \"Revenue\", \"Roas\", \"accounts\"]\n      : [\"Interest\", \"Spend\", \"Revenue\", \"Roas\"]\n  );\n  const [columnOrder, setColumnOrder] = useState<string[]>(\n    showAccounts \n      ? [\"Interest\", \"Spend\", \"Revenue\", \"Roas\", \"accounts\"]\n      : [\"Interest\", \"Spend\", \"Revenue\", \"Roas\"]\n  );\n  const [frozenColumns, setFrozenColumns] = useState<string[]>([\"Interest\"])\n\n  const tableRef = useRef<HTMLDivElement>(null)\n  const columnRefs = useRef<{ [key: string]: HTMLTableCellElement | null }>({})\n\n  // Apply filters to the data\n  const applyFilters = (data: InterestData[]) => {\n    return data.filter(interest => {\n      return filters.every(filter => {\n        const value = interest[filter.column as keyof InterestData];\n        const filterValue = filter.value;\n\n        switch (filter.operator) {\n          case '>':\n            return Number(value) > Number(filterValue);\n          case '<':\n            return Number(value) < Number(filterValue);\n          case '=':\n            return String(value).toLowerCase() === String(filterValue).toLowerCase();\n          case '>=':\n            return Number(value) >= Number(filterValue);\n          case '<=':\n            return Number(value) <= Number(filterValue);\n          default:\n            return true;\n        }\n      });\n    });\n  };\n\n  // Determine which data to display based on accountName prop\n  const interestData = accountName \n    ? data.resultsByAccount[accountName]?.interestMetrics || []\n    : data.blendedSummary || []\n\n  // Apply filters to the data\n  const filteredInterestData = applyFilters(interestData)\n\n  // Get display name for the table header\n  const displayName = accountName || \"All Accounts\"\n\n  // Calculate left position for frozen columns\n  const getLeftPosition = (columnIndex: number): number => {\n    let position = 0\n\n    // Get only the visible columns in the correct order\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col))\n\n    for (let i = 0; i < columnIndex; i++) {\n      const column = visibleOrderedColumns[i]\n      if (frozenColumns.includes(column)) {\n        const columnElement = columnRefs.current[column]\n        if (columnElement) {\n          position += columnElement.offsetWidth\n        }\n      }\n    }\n\n    return position\n  }\n\n  // Get column style based on column name\n  const getColumnStyle = (column: string) => {\n    if (column === \"Interest\") {\n      return { width: \"auto\", minWidth: \"200px\" }\n    }\n    if (column === \"accounts\") {\n      return { width: \"auto\", minWidth: \"120px\" }\n    }\n    return {\n      width: DEFAULT_COLUMN_WIDTH,\n      minWidth: DEFAULT_COLUMN_WIDTH,\n    }\n  }\n\n  // Campaign drag and drop handlers\n  const handleDragStart = (interestId: string) => {\n    setDraggedInterest(interestId)\n  }\n\n  const handleDragOver = (e: React.DragEvent, interestId: string) => {\n    e.preventDefault()\n    if (interestId !== draggedInterest) {\n      setDragOverInterest(interestId)\n    }\n  }\n\n  const handleDrop = (targetInterestId: string) => {\n    if (!draggedInterest || draggedInterest === targetInterestId) return \n\n    // Reorder campaigns logic would go here\n    // For now, just reset the state\n    setDraggedInterest(null)\n    setDragOverInterest(null)\n\n    // Note: In a real implementation, you would dispatch an action to update the order in your Redux store\n    console.log(`Dragged ${draggedInterest} and dropped on ${targetInterestId}`)\n  }\n\n  const handleDragEnd = () => {\n    setDraggedInterest(null)\n    setDragOverInterest(null)\n  }\n\n  // Column drag and drop handlers\n  const handleColumnDragStart = (columnName: string) => {\n    setDraggedColumn(columnName)\n  }\n\n  const handleColumnDragOver = (e: React.DragEvent, columnName: string) => {\n    e.preventDefault()\n    if (columnName !== draggedColumn) {\n      setDragOverColumn(columnName)\n    }\n  }\n\n  const handleColumnDrop = (targetColumnName: string) => {\n    if (!draggedColumn || draggedColumn === targetColumnName) return\n\n    // Reorder columns\n    const draggedIndex = columnOrder.indexOf(draggedColumn)\n    const targetIndex = columnOrder.indexOf(targetColumnName)\n\n    if (draggedIndex !== -1 && targetIndex !== -1) {\n      const newColumnOrder = [...columnOrder]\n      newColumnOrder.splice(draggedIndex, 1)\n      newColumnOrder.splice(targetIndex, 0, draggedColumn)\n      setColumnOrder(newColumnOrder)\n    }\n\n    setDraggedColumn(null)\n    setDragOverColumn(null)\n  }\n\n  const handleColumnDragEnd = () => {\n    setDraggedColumn(null)\n    setDragOverColumn(null)\n  }\n\n  // Toggle full screen mode\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen)\n  }\n\n  const getTableHeight = () => {\n    if (isFullScreen) {\n      return \"max-h-screen\"\n    }\n    return height\n  }\n\n  // Format currency values\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 2\n    }).format(value);\n  }\n\n  // Format ROAS values\n  const formatRoas = (value: number) => {\n    return value.toFixed(2) + 'x';\n  }\n\n  // Format accounts array\n  const formatAccounts = (accounts: string[] | undefined) => {\n    if (!accounts || accounts.length === 0) return \"-\";\n    if (accounts.length <= 2) return accounts.join(\", \");\n    return `${accounts[0]}, ${accounts[1]} +${accounts.length - 2} more`;\n  }\n\n  // Render cell content based on column\n  const renderCellContent = (interest: InterestData, column: string) => {\n    switch(column) {\n      case \"Interest\":\n        return interest.Interest;\n      case \"Spend\":\n        return formatCurrency(interest.Spend);\n      case \"Revenue\":\n        return formatCurrency(interest.Revenue);\n      case \"Roas\":\n        return formatRoas(interest.Roas);\n      case \"accounts\":\n        return formatAccounts(interest.accounts);\n      default:\n        return interest[column as keyof InterestData] || \"-\";\n    }\n  }\n\n  if (!interestData || interestData.length === 0) {\n    return (\n      <Card className=\"p-4\">\n        <div className=\"text-center text-slate-500\">No interest data available</div>\n      </Card>\n    )\n  }\n\n  return (\n    <TooltipProvider>\n      <Card className={`overflow-hidden ${isFullScreen ? \"fixed inset-0 z-50\" : \"\"} border-slate-200 shadow-md`}>\n        <div className=\"flex items-center justify-between p-3 border-b bg-gradient-to-r from-slate-50 to-white\">\n          <div className=\"flex items-center gap-2\">\n            <FacebookLogo height={\"1rem\"} width={\"1rem\"} />\n            <div className=\"text-base font-semibold text-slate-800\">Interest Performance <span>({displayName})</span></div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <InterestFilter \n                  columns={visibleColumns} \n                  tableId={accountName || 'blended'} \n                />\n              </TooltipTrigger>\n              <TooltipContent>Apply Filter</TooltipContent>\n            </Tooltip>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" onClick={toggleFullScreen} className=\"font-medium\">\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>{isFullScreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}</TooltipContent>\n            </Tooltip>\n\n\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <div>\n                  <ColumnManagementSheet\n                    visibleColumns={visibleColumns}\n                    columnOrder={columnOrder}\n                    frozenColumns={frozenColumns}\n                    onVisibilityChange={setVisibleColumns}\n                    onOrderChange={setColumnOrder}\n                    onFrozenChange={setFrozenColumns}\n                  />\n                </div>\n              </TooltipTrigger>\n              <TooltipContent>Manage Columns</TooltipContent>\n            </Tooltip>\n          </div>\n        </div>\n\n        <div className=\"p-3\">\n\n          <div\n            ref={tableRef}\n            className={`overflow-auto ${getTableHeight()} bg-white rounded-lg border border-slate-200 shadow-sm `}\n          >\n            <table className=\"w-full border-collapse text-xs relative\">\n              <thead className=\"bg-slate-50 sticky top-0 z-20\">\n                <tr>\n                  {columnOrder\n                    .filter((column) => visibleColumns.includes(column))\n                    .map((column, index) => {\n                      const isFrozen = frozenColumns.includes(column)\n                      const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\n                      const columnStyle = getColumnStyle(column)\n\n                      return (\n                        <th\n                          key={column}\n                          ref={(el) => (columnRefs.current[column] = el)}\n                          className={`text-left p-2 font-medium text-slate-700 border-b border-r ${\n                            isFrozen ? \"sticky z-20 bg-slate-50\" : \"\"\n                          } ${dragOverColumn === column ? \"bg-blue-50\" : \"\"}`}\n                          style={{\n                            left: leftPos,\n                            ...columnStyle,\n                          }}\n                          draggable\n                          onDragStart={() => handleColumnDragStart(column)}\n                          onDragOver={(e) => handleColumnDragOver(e, column)}\n                          onDrop={() => handleColumnDrop(column)}\n                          onDragEnd={handleColumnDragEnd}\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <span>{column}</span>\n                            <SlidersHorizontal className=\"h-3 w-3 text-slate-400 cursor-grab\" />\n                          </div>\n                        </th>\n                      )\n                    })}\n                </tr>\n              </thead>\n              <tbody>\n                {filteredInterestData.map((interest) => (\n                  <tr \n                    key={interest.InterestId} \n                    className={`border-b hover:bg-slate-50 transition-colors ${\n                        dragOverInterest === interest.InterestId ? \"bg-blue-50\" : \"\"\n                      }`}\n                    draggable\n                    onDragStart={() => handleDragStart(interest.InterestId)}\n                    onDragOver={(e) => handleDragOver(e, interest.InterestId)}\n                    onDrop={() => handleDrop(interest.InterestId)}\n                    onDragEnd={handleDragEnd}\n                  >\n                    {columnOrder\n                      .filter((column) => visibleColumns.includes(column))\n                      .map((column, colIndex) => {\n                        const isFrozen = frozenColumns.includes(column)\n                        const leftPos = isFrozen ? `${getLeftPosition(colIndex)}px` : undefined\n                        const columnStyle = getColumnStyle(column)\n                        \n                        return (\n                          <td\n                            key={`${interest.InterestId}-${column}`}\n                            className={`p-2 border-b border-r text-slate-700 ${\n                              isFrozen ? \"sticky z-10 bg-inherit\" : \"\"\n                            }`}\n                            style={{\n                              left: leftPos,\n                              ...columnStyle,\n                            }}\n                          >\n                            {renderCellContent(interest, column)}\n                          </td>\n                        )\n                      })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </Card>\n    </TooltipProvider>\n  )\n}\n\nexport default InterestTable;","import Header from \"@/components/dashboard_component/Header\";\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\nimport { FaMeta } from \"react-icons/fa6\";\nimport { useEffect, useCallback, useState, useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\nimport { format } from \"date-fns\";\nimport axios from \"axios\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Loader from \"@/components/dashboard_component/loader\";\nimport InterestTable from \"./components/InterestTable\";\nimport MissingDateWarning from \"@/components/dashboard_component/Missing-Date-Waning\";\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\nimport { selectFbTokenError } from \"@/store/slices/TokenSllice\";\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\nimport ConnectPlatform from \"@/pages/ReportPage/ConnectPlatformPage\";\nimport { Target } from \"lucide-react\";\nimport Footer from \"@/pages/LandingPage/components/Footer\";\n// Define interface for interest data structure\ninterface InterestMetric {\n  Interest: string;\n  InterestId: string;\n  Spend: number;\n  Revenue: number;\n  Roas: number;\n  accounts?: string[];\n}\n\ninterface AccountData {\n  adAccountId: string;\n  interestMetrics: InterestMetric[];\n}\n\ninterface MetaInterestData {\n  resultsByAccount: {\n    [accountName: string]: AccountData;\n  };\n  blendedSummary: InterestMetric[];\n}\n\nfunction InterestPage() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [metaInterest, setMetaInterest] = useState<MetaInterestData | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const brands = useSelector((state: RootState) => state.brand.brands);\n  const { brandId } = useParams();\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\n  const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\n    ? true\n    : false;\n  const fbTokenError = useSelector(selectFbTokenError);\n\n  const dateFrom = useSelector((state: RootState) => state.date.from);\n  const dateTo = useSelector((state: RootState) => state.date.to);\n  const date = useMemo(() => ({\n    from: dateFrom,\n    to: dateTo\n  }), [dateFrom, dateTo]);\n\n  const axiosInstance = createAxiosInstance();\n  const navigate = useNavigate();\n\n  const fetchData = useCallback(async () => {\n    if (!date.from || !date.to) return;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const startDate = format(date.from, \"yyyy-MM-dd\");\n      const endDate = format(date.to, \"yyyy-MM-dd\");\n\n      const response = await axiosInstance.post(\n        `/api/meta/interest/${brandId}`,\n        { startDate, endDate },\n        { withCredentials: true }\n      );\n\n      console.log(\"API Response:\", response.data);\n\n      if (response.data && response.data.data) {\n        setMetaInterest(response.data.data);\n      } else {\n        console.error(\"Invalid data structure:\", response.data);\n        setError(\"Invalid data structure received from API\");\n      }\n    } catch (error) {\n      console.error('Error fetching interest data:', error);\n      if (axios.isAxiosError(error)) {\n        if (error.response?.status === 401) {\n          alert('Your session has expired. Please log in again.');\n          navigate('/');\n        } else {\n          setError(`API Error: ${error.response?.data?.message || error.message}`);\n        }\n      } else {\n        setError(\"An unexpected error occurred\");\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate, date, brandId]);\n\n  useEffect(() => {\n    if (date.from && date.to) {\n      fetchData();\n    }\n  }, [fetchData, date]);\n\n  useEffect(() => {\n    // Set up refresh interval\n    const intervalId = setInterval(() => {\n      if (date.from && date.to) {\n        fetchData();\n      }\n    }, 3 * 60 * 60 * 1000); // 3 hours\n\n    return () => clearInterval(intervalId);\n  }, [fetchData, date]);\n\n  // Get available accounts for dropdown with safe access\n  const accounts = useMemo(() => {\n    if (!metaInterest?.resultsByAccount) {\n      console.log(\"No resultsByAccount found in metaInterest:\", metaInterest);\n      return [];\n    }\n\n    const accountKeys = Object.keys(metaInterest.resultsByAccount);\n    console.log(\"Found accounts:\", accountKeys);\n\n    return accountKeys.filter(account => {\n      const hasInterests = metaInterest.resultsByAccount[account]?.interestMetrics?.length > 0;\n      console.log(`Account ${account} has interests: ${hasInterests}`);\n      return hasInterests;\n    });\n  }, [metaInterest]);\n\n\n  const tableHeight = useMemo(() => {\n\n    const baseHeight = 'max-h-[calc(100vh-210px)]';\n\n    if (!metaInterest?.resultsByAccount) return baseHeight;\n\n    const accountCount = Object.keys(metaInterest.resultsByAccount).length;\n\n    if (accountCount <= 1) return baseHeight;\n\n    return 'max-h-[calc(100vh-400px)]';\n  }, [metaInterest]);\n\n\n  const hasBlendedData = metaInterest?.blendedSummary && metaInterest.blendedSummary.length > 0;\n  console.log(\"Has blended data:\", hasBlendedData, metaInterest?.blendedSummary?.length);\n\n  const hasAccountData = accounts.length > 0;\n  console.log(\"Has account data:\", hasAccountData, accounts.length);\n\n  const hasAnyData = hasBlendedData || hasAccountData;\n  console.log(\"Has any data:\", hasAnyData);\n\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      <CollapsibleSidebar />\n      <div className=\"flex-1 h-screen overflow-auto\">\n        <Header\n          title='Meta Interest Analysis'\n          Icon={FaMeta}\n          showDatePicker={true}\n        />\n\n        {fbTokenError ? (\n          <NoAccessPage\n            platform=\"Facebook Ads\"\n            message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\n            icon={<Target className=\"w-8 h-8 text-red-500\" />}\n            loginOptions={[\n              {\n                label: \"Connect Facebook Ads\",\n                provider: \"facebook\"\n              }\n            ]}\n          />\n        ) : !hasFbAdAccount ? (\n          <ConnectPlatform\n            platform=\"facebook\"\n            brandId={brandId ?? ''}\n            onSuccess={(platform, accountName, accountId) => {\n              console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\n            }}\n          />\n        ) : (!date.from || !date.to) ? (\n          <MissingDateWarning />\n        ) : isLoading ? (\n          <Loader isLoading={isLoading} />\n        ) : (\n          <main className=\"p-4 md:p-6 lg:px-8 overflow-auto\">\n            {error ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-red-500\">{error}</p>\n                <button\n                  onClick={fetchData}\n                  className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n                >\n                  Retry\n                </button>\n              </div>\n            ) : metaInterest ? (\n              <div className=\"grid grid-cols-1 gap-6\">\n                {/* Blended Summary Table */}\n                {hasBlendedData && (\n                  <InterestTable\n                    data={metaInterest}\n                    height={tableHeight}\n                    showAccounts={true}\n                  />\n                )}\n\n                {/* Individual Account Tables */}\n                {hasAccountData && accounts.map((accountName) => (\n                  <InterestTable\n                    key={accountName}\n                    data={{\n                      resultsByAccount: {\n                        [accountName]: metaInterest.resultsByAccount[accountName]\n                      },\n                      blendedSummary: metaInterest.resultsByAccount[accountName].interestMetrics\n                    }}\n                    height={tableHeight}\n                    accountName={accountName}\n                    showAccounts={false}\n                  />\n                ))}\n\n                {/* No Data Message */}\n                {!hasAnyData && (\n                  <div className=\"text-center py-12\">\n                    <p className=\"text-gray-500\">No interest data available. Please try adjusting your date range.</p>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <p className=\"text-gray-500\">No interest data available. Please try adjusting your date range.</p>\n              </div>\n            )}\n          </main>\n        )}\n        <Footer />\n        <HelpDeskModal />\n      </div>\n    </div>\n  );\n}\n\nexport default InterestPage;","import { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom';\nimport { baseURL } from '@/data/constant';\n\nfunction ShopifyAuth() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const location = useLocation();\n\n  useEffect(() => {\n    async function handleShopifyRedirect() {\n      try {\n        // Get all URL parameters\n        const searchParams = new URLSearchParams(location.search);\n        const params: Record<string, string> = {};\n        \n        // Extract all parameters from the URL\n        for (const [key, value] of searchParams.entries()) {\n          params[key] = value;\n        }\n        \n        // Ensure we have the required shop parameter\n        if (!params.shop) {\n          setError('Shop parameter is missing');\n          setLoading(false);\n          return;\n        }\n\n        // Send all parameters to the backend for validation and auth URL generation\n        const response = await axios.post(`${baseURL}/api/auth/shopify-install`, params);\n        \n        if (response.data && response.data.success && response.data.authUrl) {\n          // Redirect the browser to Shopify's OAuth page\n          window.location.href = response.data.authUrl;\n        } else {\n          setError('Failed to get authorization URL');\n          setLoading(false);\n        }\n      } catch (err: unknown) {\n        if (axios.isAxiosError(err)) {\n          setError(err.response?.data?.error || err.message || 'An error occurred');\n        } else {\n          setError((err as Error)?.message || 'An error occurred');\n        }\n        setLoading(false);\n      }\n    }\n\n    handleShopifyRedirect();\n  }, [location]);\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center h-screen\">\n      <div className=\"text-center\">\n        <div className=\"spinner mb-4\"></div>\n        <p className=\"text-lg\">Connecting to Dashboard...</p>\n      </div>\n    </div>;\n  }\n\n  if (error) {\n    return <div className=\"flex justify-center items-center h-screen\">\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-6 max-w-md\">\n        <h2 className=\"text-red-700 text-lg font-medium mb-2\">Authentication Error</h2>\n        <p className=\"text-red-600\">{error}</p>\n        <button \n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded\"\n          onClick={() => window.location.href = '/'}\n        >\n          Return to Home\n        </button>\n      </div>\n    </div>;\n  }\n\n  return null; // This component should redirect before rendering\n}\n\nexport default ShopifyAuth;","import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst PricingCallback = () => {\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    \n    const baseURL = import.meta.env.PROD\n        ? import.meta.env.VITE_API_URL\n        : import.meta.env.VITE_LOCAL_API_URL;\n\n    useEffect(() => {\n        const handlePricingCallback = async () => {\n            try {\n                const queryParams = new URLSearchParams(window.location.search);\n                const shop = queryParams.get('shop');\n                const chargeId = queryParams.get('charge_id');\n\n                if (!shop || !chargeId) {\n                    console.error('Missing required parameters: shop or charge_id');\n                    setError('Missing required parameters');\n                    setLoading(false);\n                    setTimeout(() => navigate('/dashboard'), 2000);\n                    return;\n                }\n\n                console.log(`Processing subscription for shop: ${shop}, charge ID: ${chargeId}`);\n                \n                // Call your backend API to process the subscription\n                await axios.get(`${baseURL}/api/pricing/callback`, {\n                    params: { shop, charge_id: chargeId }\n                });\n                \n                console.log('Subscription processed successfully');\n                setLoading(false);\n                navigate('/dashboard');\n                \n            } catch (error :any) {\n                console.error('Error processing subscription:', error);\n                setError(error.response?.data?.error || 'An error occurred');\n                setLoading(false);\n                setTimeout(() => navigate('/dashboard'), 2000);\n            }\n        };\n\n        handlePricingCallback();\n    }, [navigate, baseURL]);\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center min-h-screen\">\n                <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\n                <p className=\"mt-4 text-lg font-medium\">Processing your subscription...</p>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"flex flex-col items-center justify-center min-h-screen\">\n                <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n                    <p>Error: {error}</p>\n                    <p className=\"mt-2\">Redirecting to dashboard...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return null;\n};\n\nexport default PricingCallback;","import { Sparkles } from \"lucide-react\"\nimport BrandSetup from \"./components/BrandForm\"\nimport CollapsibleSidebar from \"../../components/dashboard_component/CollapsibleSidebar\"\n\nexport default function AddBrandDashboard() {\n\n\n  return (\n    <div className=\"flex h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100\">\n      <CollapsibleSidebar />\n      {/* Main Content */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"container mx-auto py-8 px-4\">\n         \n          <div className=\"w-full\">\n            <BrandSetup />\n          </div>\n\n          {/* Quick Tips */}\n          <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fadeInUp\">\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"rounded-full bg-primary/10 p-2 group-hover:bg-primary/20 transition-colors\">\n                  <Sparkles className=\"h-5 w-5 text-primary\" />\n                </div>\n                <h3 className=\"font-medium text-gray-900\">Connect Multiple Platforms</h3>\n              </div>\n              <p className=\"text-sm text-gray-600\">Link all your marketing platforms for comprehensive analytics and insights</p>\n            </div>\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"rounded-full bg-success/10 p-2 group-hover:bg-success/20 transition-colors\">\n                  <Sparkles className=\"h-5 w-5 text-success\" />\n                </div>\n                <h3 className=\"font-medium text-gray-900\">Real-time Updates</h3>\n              </div>\n              <p className=\"text-sm text-gray-600\">Your data will be automatically synced every 3 hours for accurate reporting</p>\n            </div>\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"rounded-full bg-warning/10 p-2 group-hover:bg-warning/20 transition-colors\">\n                  <Sparkles className=\"h-5 w-5 text-warning\" />\n                </div>\n                <h3 className=\"font-medium text-gray-900\">Easy Management</h3>\n              </div>\n              <p className=\"text-sm text-gray-600\">Manage all your brands and their performance from a single dashboard</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n} ","import { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport { clearUser } from '@/store/slices/UserSlice';\nimport { resetBrand } from '@/store/slices/BrandSlice';\nimport axios from 'axios';\nimport { baseURL } from '@/data/constant';\n\ninterface DecodedToken {\n  id?: string;        // Used by Google OAuth and normal login\n  userId?: string;    // Used by app_sync\n  email: string;      // Used by all\n  method?: string;    // Used by Google OAuth and normal login\n  exp: number;        // JWT standard - expiration time\n  iat: number;        // JWT standard - issued at time\n}\n\nexport const useTokenExpire = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Function to get token from cookies\n  const getTokenFromCookies = (): string | null => {\n    const cookies = document.cookie.split(';');\n    const tokenCookie = cookies.find(cookie => cookie.trim().startsWith('token='));\n    return tokenCookie ? tokenCookie.split('=')[1] : null;\n  };\n\n  // Function to decode and validate token\n  const decodeToken = (token: string): DecodedToken | null => {\n    try {\n      const decoded = jwtDecode<DecodedToken>(token);\n      return decoded;\n    } catch (error) {\n      console.error('Error decoding token:', error);\n      return null;\n    }\n  };\n\n  // Function to check if token is expired\n  const isTokenExpired = (decodedToken: DecodedToken): boolean => {\n    const currentTime = Math.floor(Date.now() / 1000);\n    return decodedToken.exp < currentTime;\n  };\n\n  // Function to handle logout\n  const handleLogout = async () => {\n    try {\n      // Call logout API\n      await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true });\n    } catch (error) {\n      console.error('Error during logout API call:', error);\n    }\n\n    // Clear Redux state\n    dispatch(clearUser());\n    dispatch(resetBrand());\n\n    // Navigate to login page\n    navigate('/login');\n  };\n\n  // Function to check token status\n  const checkTokenStatus = () => {\n    const token = getTokenFromCookies();\n    \n    if (!token) {\n      console.log('No token found');\n      return;\n    }\n\n    const decodedToken = decodeToken(token);\n    if (!decodedToken) {\n      console.log('Invalid token');\n      handleLogout();\n      return;\n    }\n\n    if (isTokenExpired(decodedToken)) {\n      console.log('Token is expired');\n      handleLogout();\n      return;\n    }\n\n    // Log token info in development\n    if (process.env.NODE_ENV === 'development') {\n      const currentTime = Math.floor(Date.now() / 1000);\n      const timeUntilExpiry = decodedToken.exp - currentTime;\n      const minutesUntilExpiry = Math.floor(timeUntilExpiry / 60);\n      \n      console.log('🔐 Token Status:');\n      console.log('📅 Expires at:', new Date(decodedToken.exp * 1000).toLocaleString());\n      console.log('⏰ Minutes until expiry:', minutesUntilExpiry);\n      \n      if (minutesUntilExpiry <= 5) {\n        console.log('⚠️ Token expires soon!');\n      }\n    }\n  };\n\n  // Set up periodic token checking\n  useEffect(() => {\n    // Initial check\n    checkTokenStatus();\n\n    // Check every minute\n    intervalRef.current = setInterval(checkTokenStatus, 60000);\n\n    // Cleanup function\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    checkTokenStatus,\n    isTokenValid: () => {\n      const token = getTokenFromCookies();\n      if (!token) return false;\n      const decodedToken = decodeToken(token);\n      if (!decodedToken) return false;\n      return !isTokenExpired(decodedToken);\n    }\n  };\n};\n","import React from 'react';\nimport { useTokenExpire } from '@/hooks/useTokenExpire';\n\ninterface AutoLogoutProps {\n  children: React.ReactNode;\n}\n\nconst AutoLogout: React.FC<AutoLogoutProps> = ({ children }) => {\n \n \n  useTokenExpire();\n\n  return <>{children}</>;\n};\n\nexport default AutoLogout; ","import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport AuthForm from \"./Auth/AuthForm.tsx\";\nimport { Toaster } from \"@/components/ui/toaster\"\nimport AnalyticsDashboard from './pages/AnalyticsDashboard/AnalyticsDashboard.tsx';\nimport GeneralDashboard from './pages/GeneralisedDashboard/GeneralDashboard.tsx'\nimport { ExcelMetricsPage } from './pages/MonthlyAdMetrics/ExcelMetrics.tsx';\nimport PerformanceDashboard from './pages/BrandPerformanceDashboard/PerformanceDashboard.tsx';\nimport SegmentDashboard from './pages/SegmentDashboard/SegmentDashboard.tsx';\nimport GoogleCallback from './Auth/OauthSucces.tsx';\nimport ReportsPage from './pages/ReportPage/ReportsPage.tsx';\nimport { TokenErrorProvider } from './context/TokenErrorContext.tsx';\nimport GoogleAdsDashboard from './pages/GoogleAdsHub/Dashboard.tsx';\nimport FbReportPage from './pages/Meta/FbReports/FbReportPage';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './store';\nimport ProfilePage from './pages/Profile Page/ProfilePage.tsx';\nimport BrandSetupDashboard from './pages/GeneralisedDashboard/BrandSetUpDashboard.tsx';\nimport TutorialManager from './components/Tutorial/TutorialManager.tsx';\nimport TutorialDriver from './components/Tutorial/TutorialDriver.tsx';\nimport LandingPage from './pages/LandingPage/page.tsx';\nimport PrivacyPolicy from './pages/LandingPage/components/PrivacyPolicy.tsx';\nimport TermsAndConditions from './pages/LandingPage/components/TermsAndConditions.tsx';\nimport ConversionLens from './pages/ConversionReportPage/ConversionLens.tsx';\nimport CampaignPage from './pages/Meta/Campaign Reports/CampaignPage.tsx';\nimport InterestPage from './pages/Meta/Interest Reports/InterestReportPage.tsx';\nimport ShopifyAuth from \"./Auth/Shopify.tsx\";\nimport PricingCallback from './Auth/PricingSuccess.tsx';\nimport AddBrandDashboard from './pages/GeneralisedDashboard/AddBrandDashboard.tsx';\nimport AutoLogout from './components/dashboard_component/AutoLogout.tsx';\n\n\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <TokenErrorProvider>\n          <Router>\n            <AutoLogout>\n              <TutorialManager>\n                <TutorialDriver />\n                <Toaster />\n                <Routes>\n                <Route path='/' element={<LandingPage />} />\n                <Route path=\"/login\" element={<AuthForm />} />\n                <Route path=\"/dashboard\" element={<GeneralDashboard />} />\n                <Route path=\"/admetrics/:brandId\" element={<AnalyticsDashboard />} />\n                <Route path='/ecommerce-reports/:brandId' element={<ReportsPage />} />\n                <Route path=\"/marketing-insights/:brandId\" element={<ExcelMetricsPage />} />\n                <Route path='/performance-metrics' element={<PerformanceDashboard />} />\n                <Route path='/segment-dashboard/:brandId' element={<SegmentDashboard />} />\n                <Route path='/meta-reports/:brandId' element={<FbReportPage />} />\n                <Route path='/google-reports/:brandId' element={<GoogleAdsDashboard />} />\n                <Route path=\"/conversion-reports/:brandId\" element={<ConversionLens />} />\n                <Route path=\"/callback\" element={<GoogleCallback />} />\n                <Route path =\"/profile\" element = {<ProfilePage />} />\n                <Route path =\"/shopify\" element = {<ShopifyAuth />} />\n                <Route path =\"/brand-setup\" element = {<AddBrandDashboard />} />\n                <Route path =\"/privacy-policy\" element={<PrivacyPolicy />} />\n                <Route path =\"/terms-and-conditions\" element={<TermsAndConditions />} />\n                <Route path = \"/meta-campaigns/:brandId\" element={<CampaignPage />} />\n                <Route path = \"/meta-interest/:brandId\" element={<InterestPage />} />\n                <Route path = \"/pricing_callback\" element={<PricingCallback />} />\n                <Route path = \"/first-time-brand-setup\" element={<BrandSetupDashboard />} />\n              </Routes>\n            </TutorialManager>\n            </AutoLogout>\n          </Router>\n        </TokenErrorProvider>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["cn","inputs","twMerge","clsx","Input","React.forwardRef","className","type","props","ref","jsx","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","labelVariants","Label","LabelPrimitive.Root","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","toast","t","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","initialState","userSlice","createSlice","brandId","setUser","clearUser","removeBrandFromUser","addBrandToUser","userReducer","baseURL","apphandle","COLORS","pricingPlans","setupSteps","Settings","LayoutDashboard","privacyPolicySections","termsAndConditionsSections","metricConfigs","AuthForm","isLogin","setIsLogin","useState","username","setUsername","email","setEmail","password","setPassword","showPassword","setShowPassword","shop","setShop","isShopifyLogin","setIsShopifyLogin","navigate","useNavigate","errors","setErrors","user","useSelector","useDispatch","useEffect","toggleForm","toggleShopifyLogin","validateForm","newErrors","isValid","handleSubmit","e","handleShopifyLogin","response","axios","userData","error","handleGoogleLogin","authUrl","prev","jsxs","Store","Fragment","User","Mail","Lock","Eye","EyeOff","FcGoogle","ToastProvider","ToastPrimitives.Provider","ToastViewport","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","Cross2Icon","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","brandSlice","brand","setSelectedBrandId","setBrands","deleteBrand","resetBrand","brandReducer","TooltipProvider","TooltipPrimitive.Provider","Tooltip","TooltipPrimitive.Root","TooltipTrigger","TooltipPrimitive.Trigger","TooltipContent","sideOffset","TooltipPrimitive.Portal","TooltipPrimitive.Content","Logo","ScrollArea","children","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","orientation","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","Ga4Logo","width","height","ShopifyLogo","FacebookLogo","GoogleLogo","WhiteGa4Logo","WhiteGoogleAdsLogo","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Skeleton","PricingModal","onOpenChange","selectedBrandId","brands","subscription","setSubscription","loading","setLoading","selectedBrand","shopifyStoreName","_a","handle","fetchSubscriptionDetails","err","currentPlanId","planName","Clock","format","Calendar","plan","isCurrentPlan","Star","feature","Check","CollapsibleSidebar","isExpanded","setIsExpanded","isPricingOpen","setIsPricingOpen","isInitialLoad","setIsInitialLoad","location","useLocation","sidebarRef","useRef","fetchBrands","useCallback","toggleSidebar","handleLogout","pathParts","getCurrentPathType","handleBrandChange","currentPathType","handlePricing","allDashboards","Blend","CalendarRange","LineChart","FaMeta","Target","isItemDisabled","item","currentBrand","b","ChevronLeft","ChevronRight","SidebarItem","ChevronUp","ChevronDown","SidebarChild","Plus","isAnySubItemSelected","subItem","isMainItemActive","dashboardItemContent","subIndex","disabled","PricingButton","UserProfile","LogoutButton","path","text","onClick","isSelected","isOpen","setIsOpen","hasChildren","React","handleToggle","isChildSelected","child","isActive","baseClasses","content","childItem","NavLink","icon","openIcon","closeIcon","tooltipContent","autoOpenOnSelect","_b","grandchild","userProfileContent","User2Icon","logoutContent","LogOut","pricingContent","Crown","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","MetricCardSkeleton","MetricCard","label","value","date","formatDate","dateValue","HelpCircle","AdAccountMetricsCard","metrics","isLoading","errorMessage","_","metric","classNames","showOutsideDays","DayPicker","ChevronLeftIcon","ChevronRightIcon","Popover","PopoverPrimitive.Root","PopoverTrigger","PopoverPrimitive.Trigger","PopoverContent","align","PopoverPrimitive.Portal","PopoverPrimitive.Content","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","dateSlice","setDate","clearDate","dateReducer","selectDateRange","createSelector","from","to","DatePickerWithRange","defaultDate","resetToFirstPage","dateRange","initialDate","useMemo","tempDate","setTempDate","compareDate","setCompareDate","setOpen","selectedPreset","setSelectedPreset","isCompareEnabled","setIsCompareEnabled","calendarMode","setCalendarMode","manualFromDate","setManualFromDate","manualToDate","setManualToDate","manualCompareFromDate","setManualCompareFromDate","manualCompareToDate","setManualCompareToDate","dates","today","daysSinceSunday","startOfThisWeek","subDays","endOfThisWeek","addDays","startOfThisMonth","endOfThisMonth","startOfLastWeek","endOfLastWeek","quarter","startOfThisQuarter","endOfThisQuarter","lastQuarter","lastQuarterYear","startOfLastQuarter","endOfLastQuarter","parseManualDate","dateString","parsedDate","parse","handleManualDateInput","fromDate","toDate","handleManualCompareDateInput","setPresetRange","presets","subMonths","subYears","startOfYear","endOfYear","handleCalendarSelect","range","formatDateRange","clearDateRange","handleUpdate","CalendarIcon","preset","localeSlice","setLocale","localReducer","notificationSlice","newNotification","notification","addNotification","markAsRead","markAllAsRead","removeNotification","clearAllNotifications","toggleSound","setSoundEnabled","notificationReducer","badgeVariants","Badge","HeaderNotificationDropdown","dropdownRef","notifications","unreadCount","isSoundEnabled","handleClickOutside","event","handleNotificationClick","notificationId","handleRemoveNotification","handleMarkAllAsRead","handleClearAll","handleToggleSound","getNotificationIcon","getNotificationColor","Bell","Volume2","VolumeX","X","conversionFiltersSlice","componentId","column","filter","setFilter","clearFilters","conversionFiltersReducer","defaultAccountState","initializeAccountState","accountId","campaignGroupsSlice","name","campaigns","color","newGroup","groupId","group","campaignName","g","c","expandedGroups","isCreating","campaignGroupsReducer","campaignLabelsSlice","campaignId","sourceCampaignId","targetCampaignId","addLabelToCampaign","removeLabelFromCampaign","toggleAddingLabel","clearAccountLabels","copyLabels","deleteLabel","campaignLabelsReducer","tutorialSlice","newTutorials","setFirstTimeLogin","queueTutorials","startTutorial","nextTutorial","setTutorialStep","stopTutorial","completeFirstTimeLogin","resetTutorial","resetAllTutorials","tutorialsReducer","tokenErrorSlice","setFbTokenError","setGoogleAnalyticsTokenError","setGoogleAdsTokenError","resetAllTokenErrors","selectFbTokenError","selectGoogleAnalyticsTokenError","selectGoogleAdsTokenError","tokenReducer","interestFilterSlice","tableId","currentFilters","i","f","addFilter","removeFilter","updateFilter","interestFilterReducer","brandFormSlice","setBrandFormData","clearBrandFormData","brandFormReducer","rootReducer","combineReducers","persistConfig","storage","oneWeekAgo","filteredNotifications","persistedReducer","persistReducer","store","configureStore","getDefaultMiddleware","persistor","persistStore","socket","isConnecting","isConnected","currentUserId","currentBrandId","reconnectAttempts","maxReconnectAttempts","reconnectTimer","initializeSocket","userId","handleRoomChanges","createSocketConnection","io","handleConnectionError","reason","attemptReconnection","setupEventListeners","_c","_d","_e","delay","data","handleNotification","notificationData","notificationType","message","playNotificationSound","audioContext","oscillator","gainNode","joinBrandRoom","leaveBrandRoom","disconnectSocket","isSocketConnected","useSocketConnection","previousBrandId","previousUserId","isInitializedRef","isInitializingRef","userChanged","isFirstTime","socketNotConnected","shouldInitialize","resetInitializingFlag","brandChanged","Header","Icon","showDatePicker","showSettings","showRefresh","handleManualRefresh","locale","RefreshCw","Loader","progress","setProgress","messageIndex","setMessageIndex","isComplete","setIsComplete","loadingMessages","progressInterval","messageInterval","CheckCircle","createAxiosInstance","axiosInstance","_f","_h","_g","PlatformModal","platform","onSuccess","searchTerm","setSearchTerm","googleAdsAccounts","setGoogleAdsAccounts","googleAnalyticsAccounts","setGoogleAnalyticsAccounts","facebookAdsAccounts","setFacebookAdsAccounts","showLoginButton","setShowLoginButton","connectedAccounts","setConnectedAccounts","selectedAccounts","setSelectedAccounts","params","modalToOpen","newUrl","connectedIds","endpoint","accountsSetter","account","handleError","axiosError","status","code","updateBrandWithAccount","accountIds","accountNames","managerIds","updateData","existingFbAccounts","currentBrandForGoogle","existingGoogleAccounts","newGoogleAccounts","mergedGoogleAccounts","newAccount","existing","currentBrandForGA","updatedBrand","updatedBrands","handleAccountSelection","handleConnectSelected","selectedAccountData","filteredAccounts","acc","displayName","managerId","handleGoogleAdLogin","handleGoogleAnalyticsLogin","handleFbLogin","searchLower","Search","filtered","isGoogleAds","isFacebook","accountName","uniqueKey","platformLogo","displayText","METRIC_COLORS","METRIC_BG_COLORS","formatValue","isRoas","change","trend","prevValue","source","ArrowUpIcon","ArrowDownIcon","ConnectPlatformCard","getPlatformLogo","PlusCircle","PerformanceCard","period","performanceData","apiStatus","combinedMetrics","allMetrics","periodLabels","renderSourceCards","cards","sourceMetrics","key","metricData","str","SummaryDashboard","userName","setPerformanceData","setApiStatus","platformModalOpen","setPlatformModalOpen","selectedPlatform","setSelectedPlatform","platformToOpen","fetchPerformanceData","metaPromise","googlePromise","analyticsPromise","metaResponse","googleResponse","analyticsResponse","handleConnectPlatform","handlePlatformModalSuccess","allConnected","ConnectAccountsPage","isPlatformModalOpen","setIsPlatformModalOpen","useParams","Dashboard","setIsLoading","fbAdAccountsMetrics","setFbAdAccountsMetrics","googleAdMetrics","setGoogleAdMetrics","dateFrom","dateTo","rawMetrics","setRawMetrics","hasGoogleAdAccount","hasFbAdAccount","hasAnyAdAccounts","fetchFacebookData","startDate","endDate","fbError","fetchGoogleData","googleError","fetchAdData","fbData","googleData","calculateAggregatedMetrics","intervalId","calculateFacebookMetrics","totalSpent","totalRevenue","totalPurchases","totalClicks","totalImpressions","calculateGoogleMetrics","fbMetrics","googleMetrics","formattedMetrics","_i","_j","accountMetrics","fbmetrics","TicketFormSkeleton","TicketForm","onClose","form","setForm","departments","setDepartments","submitting","setSubmitting","handleChange","MessageSquare","AlertCircle","Building","Briefcase","dept","Loader2","Send","HelpDeskModal","isModalOpen","setIsModalOpen","FaHeadset","Footer","Link","AnalyticsDashboard","ShopifyModalContent","storeName","setStoreName","OtherPlatformModalContent","onConnect","connectedId","onRemove","fetchGoogleAdsAccounts","fetchGoogleAnalyticsAccounts","fetchFacebookAdsAccounts","request","config","authCode","googleAdsErrorMessage","errText","handleConnect","platforms","BrandSetup","openModal","setOpenModal","formData","brandName","setBrandName","googleAdsConnections","setGoogleAdsConnections","ga4Id","setGa4Id","fbAdId","setFBAdId","shopifyAccessToken","setShopifyAccessToken","accessToken","shopName","getConnectedId","platformName","conn","canSubmit","payload","connection","newBrandId","updatedUser","Building2","accounts","ArrowRight","Separator","decorative","SeparatorPrimitive.Root","BrandSetupDashboard","Sparkles","step","CircleCheckBig","GeneralDashboard","DataBuilding","loadingText","setLoadingText","interval","nextIndex","BarChart3","PieChart","formatCurrency","amount","currencyCode","TooltipHeader","tooltip","colSpan","rowSpan","isSubHeader","isImportant","isFirstInSection","Cell","isNumeric","isHeader","isSticky","ExcelMetricsPage","metricsData","setMetricsData","setError","isFullScreen","setIsFullScreen","currency","setCurrency","expandedMonths","setExpandedMonths","toggleFullScreen","getTableHeight","queryParams","currencyResponse","toggleMonth","monthYear","m","formatCurrencyUtil","formatPercentage","processedData","safeDivide","numerator","denominator","monthData","processedDailyMetrics","daily","metaSales","sum","googleSales","totalAdSales","totalSales","month","totalSpend","totalROI","metaSpend","googleSpend","metaROAS","googleROAS","renderTable","renderContent","Minimize","Maximize","Download","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","ChevronDownIcon","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUpIcon","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","position","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","BrandPerformanceDashboard","selectedBrands","setSelectedBrands","newBrand","setNewBrand","endOfMonth","editingBrand","setEditingBrand","editData","setEditData","achievedMetrics","setAchievedMetrics","getMetaMetrics","getGoogleAdMetrics","fetchMetricsData","handleInputChange","handleSourceChange","handleAddBrand","brandToAdd","newBrandTarget","handleEdit","brandToEdit","handleSaveEdit","handleCancelEdit","handleDelete","calculateMetrics","achievedSpend","achievedSales","remainingSales","achievedROAS","targetDate","remainingDays","requiredSalesPerDay","chartData","metaMetrics","metaBrands","googleBrands","isEditing","Edit2","Trash2","ResponsiveContainer","BarChart","XAxis","YAxis","Bar","PerformanceDashboard","ProductTab","tabs","setTabs","activeTab","setActiveTab","currentPage","setCurrentPage","expandedCategories","setExpandedCategories","filterApplied","setFilterApplied","rowsPerPage","filterData","setFilterData","cacheRef","POLL_INTERVAL","sortColumn","setSortColumn","sortOrder","setSortOrder","handleTabChange","newTabId","fetchTabData","tabId","body","isFilterApplied","tab","updatedBody","cacheKey","cachedData","now","prevTabs","columns","requestBody","handleRowClick","currentTab","rowData","tabColumnMapping","bodyKeyMapping","columnToFetch","bodyKey","valueToSend","filterPayload","toggleCategory","categoryPath","newSet","renderCategoryRow","category","depth","currentPath","subCategory","handleSort","columnId","prevOrder","getCurrentTabData","sortedData","a","aValue","bValue","stringA","stringB","startIndex","endIndex","totalPages","categoryColumns","TableSkeleton","idx","Package","Layers","Tag","BarChart2","Filter","ArrowUp","ArrowDown","ArrowUpDown","row","isIssuesColumn","isProductColumn","isStatusColumn","isNoIssues","getStatusColor","renderCell","statusValue","colorClass","rowIndex","cellIndex","SearchTermTable","searchTerms","setSearchTerms","hasMoreData","setHasMoreData","totalRecords","setTotalRecords","setTotalPages","campaignAdGroupPairs","setCampaignAdGroupPairs","selectedCampaign","setSelectedCampaign","statusOptions","setStatusOptions","selectedAdGroup","setSelectedAdGroup","selectedStatus","setSelectedStatus","Zap","Megaphone","Users","DollarSign","TrendingUp","Percent","MousePointer","CreditCard","sortedSearchTerms","fetchData","handleCampaignChange","handleAdGroupChange","handleStatusChange","filteredAdGroups","pair","adGroup","isSearchTermColumn","searchTermValue","performance","isPerformingWell","SegmentDashboard","GoogleCallback","googletoken","fbToken","googleAdRefreshToken","googleAnalyticsRefreshToken","zohoRefreshToken","appToken","updateToken","url","token","sourcePage","login","getUser","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","DropdownMenuPrimitive.SubTrigger","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","DotFilledIcon","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","FilterComponent","onFiltersChange","filters","setFilters","filterColumn","setFilterColumn","filterOperator","setFilterOperator","filterValue","setFilterValue","getConditionalColors","average","NewReportTable","sortDirection","setSortDirection","columnWidths","setColumnWidths","loadedRows","setLoadedRows","columnOrder","setColumnOrder","draggedColumn","setDraggedColumn","rowsPerChunk","minColumnWidth","tableRef","containerRef","widthsRef","comparisonColumns","handleDragStart","handleDragOver","handleDrop","targetColumn","newOrder","draggedIdx","targetIdx","parsePercentage","containerWidth","totalColumns","initialWidths","equalWidth","averageValues","averages","validData","parsedData","parseDateString","dateStr","day","year","aDate","bDate","aNum","bNum","isNumericColumn","loadMoreRows","nextChunk","handleScroll","target","displayRows","pageCount","goToPage","page","pageNumber","columnPairs","renderHeader","colIndex","isComparisonCol","GripVertical","cellValue","isComparisonColumn","isPairedColumn","rateColumn","rateValue","ChevronsLeft","ChevronsRight","NewReportTable$1","Sheet","SheetPrimitive.Root","SheetTrigger","SheetPrimitive.Trigger","SheetPortal","SheetPrimitive.Portal","SheetOverlay","SheetPrimitive.Overlay","sheetVariants","SheetContent","side","SheetPrimitive.Content","SheetPrimitive.Close","SheetHeader","SheetTitle","SheetPrimitive.Title","SheetDescription","SheetPrimitive.Description","ColumnManagementSheet","visibleColumns","frozenColumns","onVisibilityChange","onOrderChange","onFrozenChange","dropTargetColumn","setDropTargetColumn","filteredColumns","toggleColumnVisibility","newVisibleColumns","col","toggleColumnFreeze","newFrozenColumns","Settings2","Pin","PinOff","EcommerceMetricsPage","propDateRange","compareFrom","compareTo","filteredData","setFilteredData","setData","compareStartDate","compareEndDate","selectedColumns","setSelectedColumns","fetchMetrics","dateRanges","fetchedRanges","isConsolidatedData","firstRangeData","firstItem","allColumns","prevSelected","setVisibleColumns","handleVisibilityChange","handleOrderChange","applyFilters","result","numValue","memoizedFilteredData","numericColumns","platformConfigs","AlertTriangle","Facebook","ConnectPlatform","benefit","DaywiseMetricsPage","fetchedData","newColumns","CustomTabs","onTabChange","scrollContainerRef","showLeftArrow","setShowLeftArrow","showRightArrow","setShowRightArrow","searchQuery","setSearchQuery","isSearchOpen","setIsSearchOpen","filteredTabs","checkScrollPosition","scrollLeft","scrollWidth","clientWidth","activeTabElement","container","containerRect","tabRect","direction","scrollAmount","ChevronsUpDown","MissingDateWarning","NoAccessPage","loginOptions","handleLogin","provider","context","option","ReportsPage","hasGA4Account","googleAnalyticsTokenError","ChartBar","ShoppingCart","TokenErrorContext","createContext","TokenErrorProvider","tokenError","setTokenError","useTokenError","useContext","ConversionTable","primaryColumn","secondaryColumns","monthlyDataKey","monthlyMetrics","rows","isAdsTable","dataToProcess","primaryValue","months","getMonthName","monthNumber","allMonths","monthlyData","monthNum","allRows","dataIndex","metricIndex","prevRows","scrollTop","scrollHeight","clientHeight","thresholds","totalSessions","totalConvRate","totalMonths","totalPurchaseROAS","spendMonths","totalCost","totalConvValuePerCost","costMonths","getMetricColor","sessions","convRate","spend","purchaseROAS","cost","convValuePerCost","isHighSessions","isGoodConversion","isHighSpent","isGoodROAS","isHighCost","isGoodConvValuePerCost","renderMonthCell","colorStyle","renderMetricValue","currentMetric","columnIndex","totalConvValue","totalPCV","renderMetricRow","getMonthNumber","monthName","monthFormat","totalRows","renderColumnHeader","thresholdValue","FILTERABLE_COLUMNS","FilterConversions","availableColumns","selectedColumn","setSelectedColumn","operator","setOperator","setValue","dropdownOpen","setDropdownOpen","handleAddFilter","handleClearFilters","filterTooltip","SearchTerm","apiResponse","setApiResponse","shallowEqual","transformedFilters","apiColumnName","googleAdsTokenError","Age","Gender","Keyword","Product","GoogleAdsDashboard","SquareChartGantt","PerformanceSummary","metricConfig","onCategoryFilter","filteredCategory","setFilteredCategory","primaryMonthlyKey","secondaryMonthlyKey","primaryMetric","secondaryMetric","categories","categorizedItems","isHighPrimary","isHighSecondary","handleCategoryClick","categoryName","NumberFormatSelector","iconSize","AudienceFbReport","fullScreenAccount","setFullScreenAccount","blendedAudienceData","PlacementFbReport","blendedPlacementData","PlatformFbReport","blendedPlatformData","CountryFbReport","blendedCountryData","DeviceFbReport","dateForm","blendedDeviceData","GenderFbReport","blendedGenderData","AgeFbReport","blendedAgeData","FbReportPage","fbTokenError","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","BrandIntegrationModal","brandData","platformIcons","handleAddAccount","platformKey","XCircle","ShoppingBag","BrandCards","userBrands","setSelectedBrand","selectedBrandData","setSelectedBrandData","userBrandDetails","handleOpenModal","handleCloseModal","handleDeleteBrand","ProfilePage","handleZohoLogin","Shield","availableTutorials","tutorialStepsMap","getTutorialsForPath","tutorial","getTutorialSteps","tutorialId","getTutorialById","getRelatedTutorials","getAllTutorialsForPath","sortedTutorials","tutorialMap","processTutorial","relatedId","relatedTutorial","tutorialRouteMap","TutorialManager","isFirstTimeLogin","isTutorialActive","tutorialQueue","activeTutorial","hasStartedTutorialsRef","isFirstLogin","shouldQueueTutorials","timer","allTutorials","tutorialIds","TutorialDriver","driverInstanceRef","activeTutorialStep","steps","allElementsExist","driverInstance","driverJS","element","currentStepIndex","relatedTutorials","CTA","Feature","PlatformFeatures","Folder","Features","generateLast30Days","baseValue","fluctuation","HeroSection","AreaChart","Area","Navbar","LandingPage","PrivacyPolicy","section","para","TermsAndConditions","defaultStyles","calculateThresholds","getCellStyle","styles","applyExcelStyles","worksheet","XLSX.utils","C","headerCell","actualRow","startCol","endCol","cellRef","cellStyle","monthIndex","monthKey","fillStyle","ExcelDownload","fileName","buttonClassName","handleDownload","workbook","sheetData","headerRow","colWidths","XLSX.writeFile","FileDown","DeviceTypeConversion","currentFilter","setCurrentFilter","handleCategoryFilter","items","GenderConversion","AgeConversion","InterestConversion","OperatingSystemConversion","BrowserConversion","sessionsFilter","convRateFilter","SourceConversion","PageTitleConversion","PagePathConversion","LandingPageConversion","RegionConversion","CityTypeConversion","CountryConversion","CampaignConversion","ChannelConversion","ConversionLens","Radar","LABEL_COLORS","DEFAULT_COLUMN_WIDTH","MetaCampaignTable","draggedCampaign","setDraggedCampaign","dragOverCampaign","setDragOverCampaign","dragOverColumn","setDragOverColumn","editingLabel","setEditingLabel","editLabelValue","setEditLabelValue","isEditMode","setIsEditMode","setFrozenColumns","setScrollLeft","scrollTimeoutRef","isGroupingEnabled","setIsGroupingEnabled","groupedCampaigns","setGroupedCampaigns","ungroupedCampaigns","setUngroupedCampaigns","statusFilter","setStatusFilter","columnRefs","newLabelInputRef","labels","accountLabels","PREDEFINED_LABELS","allUniqueLabels","uniqueLabels","labelArray","hasAnyLabels","filterCampaignsByStatus","campaign","filteredCampaigns","initialColumns","initialVisibleColumns","orderedColumns","labelMap","unGrouped","currentCampaignLabels","grouped","labelColorMap","map","colorIndex","getLeftPosition","visibleOrderedColumns","columnElement","shouldShowSeparator","frozenVisibleColumns","lastFrozenColumn","getSeparatorClass","handleAddLabel","handleRemoveLabel","handleCreateNewLabel","getColumnStyle","handleDragEnd","handleColumnDragStart","columnName","handleColumnDragOver","handleColumnDrop","targetColumnName","draggedIndex","targetIndex","newColumnOrder","handleColumnDragEnd","toggleGroupExpansion","labelIndex","updatedGroups","calculateGroupSummary","summary","summaryColumns","calculationMethods","totalLinkClicks","totalreach","totaloutboundctr","totalFrequency","totalUniqueClicks","totalAddToCart","totalCheckoutInitiated","totalLandingPageView","threeSecondsView","totalimpressions","values","val","calculateMethod","renderLabelDropdown","campaignLabels","Edit","LayoutGrid","currentScrollLeft","isFrozen","leftPos","columnStyle","el","SlidersHorizontal","groupIndex","CampaignPage","metaCampaign","setMetaCampaign","blendedSummary","accountData","InterestFilter","newFilter","setNewFilter","handleRemoveFilter","InterestTable","showAccounts","draggedInterest","setDraggedInterest","dragOverInterest","setDragOverInterest","interest","interestData","filteredInterestData","interestId","targetInterestId","formatRoas","formatAccounts","renderCellContent","InterestPage","metaInterest","setMetaInterest","accountKeys","hasInterests","tableHeight","baseHeight","hasBlendedData","hasAccountData","hasAnyData","ShopifyAuth","handleShopifyRedirect","searchParams","PricingCallback","chargeId","AddBrandDashboard","useTokenExpire","intervalRef","getTokenFromCookies","tokenCookie","cookie","decodeToken","jwtDecode","isTokenExpired","decodedToken","currentTime","checkTokenStatus","AutoLogout","App","Provider","PersistGate","Router","Routes","Route","createRoot","StrictMode"],"mappings":"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CN,EACA,QAAS,CACP,KAAM,UACN,KAAM,UACN,GAAI,SACN,EACA,QAAS,CAEP,KAAM,UACN,KAAM,UACN,GAAI,SACN,EACA,KAAM,CACJ,QAAS,UACT,UAAW,UACX,MAAO,SACT,EACA,OAAQ,CACN,KAAM,UACN,KAAM,SACR,EACA,WAAY,CACV,eAAgB,8CAClB,CACF,EAGaC,GAAe,CAC1B,CACI,GAAI,OACJ,MAAO,YACP,MAAO,OACP,YAAa,6CACb,SAAU,CACN,4BACA,sBACA,qBACA,gBACA,eACJ,EACA,WAAY,aAChB,EACA,CACI,GAAI,UACJ,MAAO,eACP,MAAO,MACP,OAAQ,SACR,YAAa,+BACb,SAAU,CACN,0BACA,sBACA,oBACA,mBACA,wBACJ,EACA,UAAW,GACX,WAAY,eAChB,EACA,CACI,GAAI,SACJ,MAAO,cACP,MAAO,MACP,OAAQ,SACR,YAAa,gCACb,SAAU,CACN,6BACA,sBACA,sBACA,sBACA,oBACJ,EACA,WAAY,eAChB,CACF,EAEaC,GAAa,CACxB,CACE,GAAI,EACJ,MAAO,cACP,YAAa,4CACb,KAAMC,EACR,EACA,CACE,GAAI,EACJ,MAAO,oBACP,YAAa,6CACb,KAAMC,EACR,CACF,EAIaC,GAAwB,CACnC,CACE,MAAO,kBACP,QAAS,CACP,2MACF,CACF,EACA,CACE,MAAO,4BACP,QAAS,CACP,uFACA,CACE,8EACA,mFACA,wGACF,CACF,CACF,EACA,CACE,MAAO,0CACP,QAAS,CACP,CACE,iDACA,6DACA,sCACA,4DACF,CACF,CACF,EACA,CACE,MAAO,+BACP,QAAS,CACP,6FACA,CACE,0FACA,2CACA,oBACF,CACF,CACF,EACA,CACE,MAAO,+BACP,QAAS,CACP,qBACA,CACE,+DACA,mCACA,kEACF,CACF,CACF,EACA,CACE,MAAO,mBACP,QAAS,CACP,0GACF,CACF,EACA,CACE,MAAO,2BACP,QAAS,CACP,yBACA,CACE,gEACA,yDACA,wDACA,2CACF,CACF,CACF,EACA,CACE,MAAO,sEACP,QAAS,CACP,mGACA,wJACF,CACF,EACA,CACE,MAAO,0BACP,QAAS,CACP,wEACA,CACE,qDACA,iCACA,qDACF,CACF,CACF,EACA,CACE,MAAO,qCACP,QAAS,CACP,mIACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,4CACA,yBACF,CACF,CACF,EAEaC,GAA6B,CACxC,CACE,MAAO,WACP,QAAS,CACP,6WACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,oRACA,CACE,gCACA,uGACA,oGACA,kFACA,wFACF,EACA,0TACF,CACF,EACA,CACE,MAAO,gBACP,QAAS,CACP,kqBACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,upBACF,CACF,EACA,CACE,MAAO,2BACP,QAAS,CACP,8aACF,CACF,EACA,CACE,MAAO,WACP,QAAS,CACP,+UACF,CACF,EACA,CACE,MAAO,qCACP,QAAS,CACP,gOACF,CACF,EACA,CACE,MAAO,mBACP,QAAS,CACP,kMACF,CACF,EACA,CACE,MAAO,aACP,QAAS,CACP,uCACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,oFACA,yBACF,CACF,CACF,EAEaC,GAAgB,CACzB,sBAAuB,CACrB,QAAS,CACP,IAAK,iBACL,KAAM,UACR,EACA,UAAW,CACT,IAAK,iBACL,KAAM,YACR,CACF,EACA,aAAc,CACZ,QAAS,CACP,IAAK,cACL,KAAM,OACR,EACA,UAAW,CACT,IAAK,sBACL,KAAM,eACR,CACF,CACF,EC5SF,SAAwBC,IAAW,CACjC,KAAM,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAI,EACrC,CAACC,EAAUC,CAAW,EAAIF,WAAS,EAAE,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,WAAS,EAAE,EAC/B,CAACK,EAAUC,CAAW,EAAIN,WAAS,EAAE,EACrC,CAACO,EAAcC,CAAe,EAAIR,WAAS,EAAK,EAChD,CAACS,EAAMC,CAAO,EAAIV,WAAS,EAAE,EAC7B,CAACW,EAAgBC,CAAiB,EAAIZ,WAAS,EAAK,EACpD,CAAE,MAAApC,GAAUS,KACZwC,EAAWC,KACX,CAACC,EAAQC,CAAS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"}