{"version":3,"file":"index-BEQ-NLoA.js","sources":["../../src/context/UserContext.tsx","../../src/lib/utils.ts","../../src/components/ui/input.tsx","../../src/components/ui/button.tsx","../../src/components/ui/label.tsx","../../src/hooks/use-toast.ts","../../src/Auth/AuthForm.tsx","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/context/BrandContext.tsx","../../src/components/ui/tooltip.tsx","../../src/components/dashboard_component/Logo.tsx","../../src/Dashboard/CollapsibleSidebar.tsx","../../src/components/ui/card.tsx","../../src/components/dashboard_component/ReferringChannelChart.tsx","../../src/components/dashboard_component/CityChart.tsx","../../src/components/dashboard_component/LandingPageChart.tsx","../../src/components/ui/table.tsx","../../src/components/ui/dialog.tsx","../../src/components/dashboard_component/ReportModal.tsx","../../src/components/ui/calendar.tsx","../../src/components/ui/popover.tsx","../../src/components/dashboard_component/DatePickerWithRange.tsx","../../src/MetricsSheet/SheetModal.tsx","../../src/components/dashboard_component/EcommerceChart.tsx","../../src/Dashboard/dashboard.tsx","../../src/Dashboard/BusinessDashboard.tsx","../../src/components/ui/skeleton.tsx","../../src/AnalyticsDashboard/AdAccountsMetricsCard.tsx","../../src/AnalyticsDashboard/dashboard.tsx","../../src/AnalyticsDashboard/AnalyticsDashboard.tsx","../../src/GeneralisedDashboard/dashboard.tsx","../../src/GeneralisedDashboard/GeneralDashboard.tsx","../../src/EcommerceMetrics/EcommerceMetricsPage.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import React, { createContext, useState, useContext, ReactNode } from 'react';\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n}\r\n\r\ninterface UserContextType {\r\n  user: User | null;\r\n  setUser: (user: User | null) => void;\r\n}\r\n\r\nconst UserContext = createContext<UserContextType | undefined>(undefined);\r\n\r\nexport const UserProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useUser = () => {\r\n  const context = useContext(UserContext);\r\n  if (context === undefined) {\r\n    throw new Error('useUser must be used within a UserProvider');\r\n  }\r\n  return context;\r\n};\r\n","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","import { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useUser } from '../context/UserContext';\r\nimport { EyeIcon, EyeOffIcon } from 'lucide-react';\r\n\r\nexport default function AuthForm() {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { toast } = useToast()\r\n  const navigate = useNavigate();\r\n  const [errors, setErrors] = useState({ username: '', email: '', password: '' });\r\n  const { setUser } = useUser();\r\n\r\n  const toggleForm = () => setIsLogin(!isLogin);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = { username: '', email: '', password: '' };\r\n    let isValid = true;\r\n\r\n    if (!isLogin && !username.trim()) {\r\n      newErrors.username = 'Username is required';\r\n      isValid = false;\r\n    }\r\n\r\n    if (!email.trim()) {\r\n      newErrors.email = 'Email is required';\r\n      isValid = false;\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\r\n      newErrors.email = 'Email is invalid';\r\n      isValid = false;\r\n    }\r\n\r\n    if (!password) {\r\n      newErrors.password = 'Password is required';\r\n      isValid = false;\r\n    } else if (password.length < 8) {\r\n      newErrors.password = 'Password must be at least 8 characters';\r\n      isValid = false;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return isValid;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let response;\r\n      // Determine the base URL based on the environment\r\n      const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      if (isLogin) {\r\n        response = await axios.post(\r\n          `${baseURL}/api/auth/login`,\r\n          { email, password },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data.success) {\r\n          // Set the user in the context\r\n          setUser(response.data.user);\r\n          console.log('User set in context:', response.data.user);\r\n\r\n          toast({\r\n            title: 'Login successful!',\r\n            description: 'Welcome! Redirecting to your dashboard.',\r\n            variant: 'default',\r\n          });\r\n          navigate('/dashboard');\r\n          console.log(baseURL);\r\n        }\r\n      } else {\r\n        response = await axios.post(\r\n          `${baseURL}/api/auth/signup`,\r\n          { username, email, password },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data.success) {\r\n          toast({\r\n            title: 'Registration successful!',\r\n            description: 'Please log in with your new account.',\r\n            variant: 'default',\r\n          });\r\n          setIsLogin(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (axios.isAxiosError(error) && error.response) {\r\n        toast({\r\n          title: 'Error',\r\n          description: error.response.data.message || 'An error occurred',\r\n          variant: 'destructive',\r\n        });\r\n      } else {\r\n        toast({\r\n          title: 'Unexpected Error',\r\n          description: 'An unexpected error occurred',\r\n          variant: 'destructive',\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 to-indigo-600\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"bg-white p-8 rounded-lg shadow-2xl w-96\"\r\n      >\r\n        <div className=\"flex mb-6\">\r\n          <button\r\n            className={`flex-1 py-2 ${isLogin ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}\r\n            onClick={() => setIsLogin(true)}\r\n          >\r\n            Login\r\n          </button>\r\n          <button\r\n            className={`flex-1 py-2 ${!isLogin ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}\r\n            onClick={() => setIsLogin(false)}\r\n          >\r\n            Sign Up\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {/* Username Field for Registration */}\r\n          {!isLogin && (\r\n            <motion.div\r\n              initial={{ opacity: 0, height: 0 }}\r\n              animate={{ opacity: !isLogin ? 1 : 0, height: !isLogin ? 'auto' : 0 }}\r\n              transition={{ duration: 0.3 }}\r\n              className=\"overflow-hidden space-y-2\"\r\n            >\r\n              <Label htmlFor=\"username\">Username</Label>\r\n              <Input\r\n                id=\"username\"\r\n                type=\"text\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                placeholder=\"Enter your username\"\r\n                required={!isLogin}\r\n              />\r\n              {errors.username && <p className=\"text-red-500 text-sm mt-1\">{errors.username}</p>}\r\n            </motion.div>\r\n          )}\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"email\">Email</Label>\r\n            <Input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"Enter your email\"\r\n              required\r\n            />\r\n            {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\r\n          </div>\r\n\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"password\">Password</Label>\r\n            <div className='relative'>\r\n              <Input\r\n                id=\"password\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder=\"Enter your password\"\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute right-2 top-2\"\r\n              >\r\n                {showPassword ? (\r\n                  <EyeOffIcon className=\"h-5 w-5 text-gray-500\" />\r\n                ) : (\r\n                  <EyeIcon className=\"h-5 w-5 text-gray-500\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n            {errors.password && <p className=\"text-red-500 text-sm mt-1\">{errors.password}</p>}\r\n          </div>\r\n\r\n          <Button type=\"submit\" className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white\">\r\n            {isLogin ? 'Login' : 'Sign Up'}\r\n          </Button>\r\n        </form>\r\n\r\n        <p className=\"mt-4 text-center text-sm text-gray-600\">\r\n          {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n          <button onClick={toggleForm} className=\"text-indigo-600 hover:underline\">\r\n            {isLogin ? 'Sign Up' : 'Login'}\r\n          </button>\r\n        </p>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <Cross2Icon className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","import React, { createContext, useContext, useState } from 'react';\r\n\r\ninterface Brand {\r\n  _id: string;\r\n  name: string;\r\n  fbAdAccounts?: []; \r\n}\r\n\r\ninterface BrandContextType {\r\n  selectedBrandId: string | null;\r\n  setSelectedBrandId: (id: string | null) => void;\r\n  resetBrand: () => void;\r\n  brands: Brand[];\r\n  setBrands: (brands: Brand[]) => void; // New setter function for brands\r\n}\r\n\r\nconst BrandContext = createContext<BrandContextType | undefined>(undefined);\r\n\r\nexport const BrandProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [selectedBrandId, setSelectedBrandId] = useState<string | null>(null);\r\n  const [brands, setBrands] = useState<Brand[]>([]); // New state for brands\r\n\r\n  const resetBrand = () => {\r\n    setSelectedBrandId(null);\r\n  };\r\n\r\n  return (\r\n    <BrandContext.Provider value={{ selectedBrandId, setSelectedBrandId, resetBrand, brands, setBrands }}>\r\n      {children}\r\n    </BrandContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useBrand = () => {\r\n  const context = useContext(BrandContext);\r\n  if (context === undefined) {\r\n    throw new Error('useBrand must be used within a BrandProvider');\r\n  }\r\n  return context;\r\n};\r\n","import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","import { Link } from \"react-router-dom\";\r\n\r\nconst Logo = () => {\r\n    return (\r\n        <Link to='/dashboard'>\r\n        <div className=\"bg-white rounded-full flex items-center justify-center\" style={{ width: '24px', height: '24px' }}>\r\n      \r\n           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" fill=\"none\" viewBox=\"0 0 40 40\"><path fill=\"#F06225\" d=\"M20 0c11.046 0 20 8.954 20 20v14a6 6 0 0 1-6 6H21v-8.774c0-2.002.122-4.076 1.172-5.78a10 10 0 0 1 6.904-4.627l.383-.062a.8.8 0 0 0 0-1.514l-.383-.062a10 10 0 0 1-8.257-8.257l-.062-.383a.8.8 0 0 0-1.514 0l-.062.383a9.999 9.999 0 0 1-4.627 6.904C12.85 18.878 10.776 19 8.774 19H.024C.547 8.419 9.29 0 20 0Z\"></path><path fill=\"#F06225\" d=\"M0 21h8.774c2.002 0 4.076.122 5.78 1.172a10.02 10.02 0 0 1 3.274 3.274C18.878 27.15 19 29.224 19 31.226V40H6a6 6 0 0 1-6-6V21ZM40 2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z\">\r\n            </path></svg>\r\n            </div>\r\n            </Link>\r\n    );\r\n};\r\n\r\nexport default Logo;\r\n\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport { ChevronLeft, ChevronRight, ChartColumn, ChevronDown, ChevronUp, LogOut, User2Icon, Store } from 'lucide-react'\r\nimport React from 'react'\r\nimport { NavLink, useLocation } from 'react-router-dom'\r\nimport { useUser } from '../context/UserContext'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useBrand } from '@/context/BrandContext'\r\nimport axios from 'axios'\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\nimport Logo from '@/components/dashboard_component/Logo'\r\n\r\nexport default function CollapsibleSidebar() {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const { selectedBrandId, setSelectedBrandId, brands,setBrands } = useBrand();\r\n  const location = useLocation();\r\n\r\n  const baseURL =\r\n    import.meta.env.PROD\r\n      ? import.meta.env.VITE_API_URL\r\n      : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n  const toggleSidebar = () => {\r\n    setIsExpanded(prev => !prev);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchBrands = async () => {\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/brands/all`,{ withCredentials: true });\r\n        setBrands(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching brands:', error);\r\n      }\r\n    };\r\n    fetchBrands();\r\n  }, [setBrands]);\r\n\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div\r\n        className={`bg-gray-800 text-white transition-all duration-300 ease-in-out flex flex-col justify-between ${isExpanded ? 'w-64' : 'w-16'}`}\r\n      >\r\n        <div>\r\n          <div className=\"flex justify-end p-4\">\r\n            <button\r\n              onClick={toggleSidebar}\r\n              className=\"text-gray-300 hover:text-white focus:outline-none\"\r\n              aria-label={isExpanded ? \"Collapse sidebar\" : \"Expand sidebar\"}\r\n            >\r\n              {isExpanded ? <ChevronLeft size={24} /> : <ChevronRight size={24} />}\r\n            </button>\r\n          </div>\r\n          <nav className=\"mt-3\">\r\n            <SidebarItem\r\n              icon={<Logo />}\r\n              text={\"Messold\"}\r\n              isExpanded={isExpanded}\r\n              isSelected={true}\r\n              tooltipContent=\"Messold\"\r\n            >\r\n            </SidebarItem>\r\n          </nav>\r\n          <nav className=\"mt-3\">\r\n            <SidebarItem\r\n              icon={<Store size={24} />}\r\n              text={selectedBrandId ? brands.find(b => b._id === selectedBrandId)?.name.replace(/_/g, ' ') || \"Unknown Brand\" : \"Your Brands\"}\r\n              isExpanded={isExpanded}\r\n              openIcon={<ChevronUp />}\r\n              closeIcon={<ChevronDown />}\r\n              isSelected={!!selectedBrandId}\r\n              tooltipContent=\"Your Brands\"\r\n            >\r\n              {brands.map(brand => (\r\n                <SidebarChild\r\n                  key={brand._id}\r\n                  path={`/${brand._id}`} // Update to proper path\r\n                  text={brand.name.replace(/_/g, ' ')} \r\n                  onClick={() => setSelectedBrandId(brand._id)} \r\n                  selectedBrandId={selectedBrandId}\r\n                />\r\n              ))}\r\n            </SidebarItem>\r\n            <SidebarItem\r\n              icon={<ChartColumn size={24} />}\r\n              text=\"Analytics\"\r\n              isExpanded={isExpanded}\r\n              openIcon={<ChevronUp />}\r\n              closeIcon={<ChevronDown />}\r\n              isSelected={location.pathname.includes(\"/business-dashboard\") || location.pathname.includes(\"/analytics-dashboard\")}\r\n              tooltipContent=\"Analytics\"\r\n            >\r\n              <SidebarChild path={`/business-dashboard/${selectedBrandId || ''}`} text=\"Business Dashboard\" />\r\n              <SidebarChild path={`/analytics-dashboard/${selectedBrandId || ''}`} text=\"Metrics Dashboard\"\r\n             disabled={\r\n              !selectedBrandId || \r\n              !brands || \r\n              brands.length === 0 || \r\n              !brands.find(b => b._id === selectedBrandId)?.fbAdAccounts?.length\r\n            } />\r\n            </SidebarItem>\r\n          </nav>\r\n        </div>\r\n        <UserProfile isExpanded={isExpanded} />\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n}\r\n\r\nfunction SidebarItem({ icon, text, isExpanded, openIcon, closeIcon, children, isSelected, tooltipContent }: {\r\n  icon?: React.ReactNode;\r\n  text: string;\r\n  isExpanded: boolean;\r\n  openIcon?: React.ReactNode;\r\n  closeIcon?: React.ReactNode;\r\n  children?: React.ReactNode;\r\n  isSelected: boolean;\r\n  tooltipContent: string;\r\n}) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const handleToggle = () => {\r\n    setIsOpen(prev => !prev);\r\n  };\r\n\r\n  const content = (\r\n    <div\r\n      onClick={handleToggle}\r\n      className={`flex items-center px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors\r\n         duration-200 cursor-pointer ${isSelected ? 'text-white font-semibold relative' : 'text-gray-100'}`}\r\n    >\r\n      <span className=\"mr-4\">{icon}</span>\r\n      {isExpanded && <span className=\"text-sm\">{text}</span>}\r\n      {isExpanded && <span className=\"ml-auto\">{isOpen ? openIcon : closeIcon}</span>}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            {content}\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"right\">\r\n          <p className={React.Children.count(children) > 0 ? 'mb-4' : ''}>{tooltipContent}</p>\r\n            {React.Children.map(children, (child) => (\r\n              <div className=\"relative\">\r\n                <div className=\"absolute top-0 w-1 h-full bg-gray-500\" />\r\n                {child}\r\n              </div>\r\n            ))}\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        content\r\n      )}\r\n      {isOpen && isExpanded && (\r\n        <div className=\"relative pl-8\">\r\n          <div className=\"absolute top-0 w-1 h-full bg-gray-500\" />\r\n          {React.Children.map(children, (child) => (\r\n            <div>{child}</div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SidebarChild({\r\n  path,\r\n  text,\r\n  onClick,\r\n  selectedBrandId,\r\n  disabled,\r\n}: {\r\n  path: string;\r\n  text: string;\r\n  onClick?: () => void;\r\n  selectedBrandId?: string | null;\r\n  disabled?: boolean;\r\n}) {\r\n  const { pathname } = useLocation();\r\n  const isSelected = pathname === path || (selectedBrandId === path.split('/').pop());\r\n\r\n  // Apply styles conditionally based on whether the item is disabled or not\r\n  const baseClasses = `flex items-center text-sm w-full p-3 transition-colors duration-200 ${\r\n    isSelected ? 'text-white font-semibold relative' : 'text-gray-100'\r\n  } ${disabled ? 'cursor-not-allowed text-gray-400' : 'hover:bg-gray-700'}`;\r\n\r\n  return disabled ? (\r\n    <div className={baseClasses}>\r\n      {text}\r\n      {isSelected && <div className=\"absolute left-0 w-1 h-full bg-white\" />}\r\n    </div>\r\n  ) : (\r\n    <NavLink\r\n      to={path}\r\n      className={baseClasses}\r\n      onClick={(e) => {\r\n        if (onClick) {\r\n          e.preventDefault();\r\n          onClick();\r\n        }\r\n      }}\r\n    >\r\n      {text}\r\n      {isSelected && <div className=\"absolute left-0 w-1 h-full bg-white\" />}\r\n    </NavLink>\r\n  );\r\n}\r\n\r\n\r\nfunction UserProfile({ isExpanded }: { isExpanded: boolean }) {\r\n  const { user, setUser } = useUser();\r\n  const { resetBrand } = useBrand();\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      await axios.post(`${baseURL}/api/auth/logout`, {}, {\r\n        withCredentials: true\r\n      });\r\n\r\n      setUser(null);\r\n      resetBrand();\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error logging out:', error);\r\n    }\r\n  };\r\n\r\n  const userProfileContent = (\r\n    <div className={'flex items-center gap-4 px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer'}>\r\n      <span className=\"text-gray-300 hover:text-white\">\r\n        <User2Icon size={24} />\r\n      </span>\r\n      {isExpanded && <span className=\"text-sm mr-2\">{user?.username ||'user'}</span>}\r\n    </div>\r\n  );\r\n\r\n  const logoutContent = (\r\n    <div className={'flex items-center gap-4 px-4 py-2 mb-2 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200 cursor-pointer'}>\r\n      <span className=\"text-gray-300 hover:text-white\">\r\n        <LogOut onClick={handleLogout} size={24} />\r\n      </span>\r\n      {isExpanded && <span className=\"hidden sm:inline\">Logout</span>}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            {userProfileContent}\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"right\">\r\n            <p>{user?.username || 'user'}</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        userProfileContent\r\n      )}\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            {logoutContent}\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"right\">\r\n            <p>Logout</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        logoutContent\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","import React from 'react';\r\nimport { PieChart, Pie, Cell, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\ninterface ReferringChannelsChartProps {\r\n  rawData: { Channel: string; Visitors: string }[]; // Accept raw data\r\n}\r\n\r\nconst COLORS = ['#071952', '#088395', '#37B7C3', '#4A628A', '#98DED9', '#FF33CC'];\r\n\r\nexport const ReferringChannelChart: React.FC<ReferringChannelsChartProps> = ({ rawData }) => {\r\n\r\n  if (rawData.length === 0) {\r\n    return (\r\n      <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n        <p>No data available. Please set up Google Analytics for this data.</p>\r\n      </div>\r\n    );\r\n  }\r\n  // Aggregate visitors by channel\r\n  const aggregatedData = rawData.reduce((acc, entry) => {\r\n    const Channel = entry.Channel;\r\n    const Visitors = parseInt(entry.Visitors, 10); // Convert visitors to number\r\n\r\n    if (!acc[Channel]) {\r\n      acc[Channel] = { Channel, totalVisitors: 0 };\r\n    }\r\n    acc[Channel].totalVisitors += Visitors; // Sum visitors for each channel\r\n\r\n    return acc;\r\n  }, {} as Record<string, { Channel: string; totalVisitors: number }>);\r\n\r\n  // Convert aggregated data back to an array and sort by total visitors\r\n  const topChannels = Object.values(aggregatedData)\r\n    .sort((a, b) => b.totalVisitors - a.totalVisitors)\r\n    .slice(0, 5); // Get top 5 channels\r\n\r\n  // Custom legend component\r\n  const renderLegend = () => (\r\n    <div className=\"grid grid-cols-3 gap-2 mt-2\">\r\n      {topChannels.map((entry, index) => (\r\n        <div key={`legend-${index}`} className=\"flex items-center\">\r\n          <div\r\n            className=\"w-4 h-4 mr-2\"\r\n            style={{ backgroundColor: COLORS[index % COLORS.length] }}\r\n          />\r\n          <span className=\"text-xs\">{entry.Channel}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n  \r\n\r\n  return (\r\n    <div> {/* Wrap everything in a div */}\r\n       {renderLegend()}\r\n      {/* ResponsiveContainer should only contain one child */}\r\n      <ResponsiveContainer width=\"100%\" height={280}> \r\n        <PieChart>\r\n          <Pie\r\n            data={topChannels}\r\n            dataKey=\"totalVisitors\"\r\n            nameKey=\"channel\"\r\n            cx=\"50%\"\r\n            cy=\"50%\"\r\n            outerRadius=\"60%\" // Reduced outerRadius to fit within the card\r\n            label\r\n          >\r\n            {topChannels.map((_, index) => (\r\n              <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n            ))}\r\n          </Pie>\r\n          <Tooltip />\r\n        </PieChart>\r\n      </ResponsiveContainer>\r\n      {/* The custom legend should be placed outside the ResponsiveContainer */}\r\n   \r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, CartesianGrid, Legend, ResponsiveContainer } from 'recharts';\r\n\r\n// Define the interface for city data\r\ninterface CityData {\r\n  City: string;\r\n  Visitors: string; // Assuming visitors is a string based on your provided data\r\n}\r\n\r\n// Function to get top 5 cities based on visitors from the data\r\nconst getTopCities = (data: CityData[]) => {\r\n  return data\r\n    .map(item => ({ city: item.City, visitors: parseInt(item.Visitors, 10) }))\r\n    .filter(item => !isNaN(item.visitors)) // Filter out invalid entries\r\n    .sort((a, b) => b.visitors - a.visitors)\r\n    .slice(0, 5);\r\n};\r\n\r\ninterface TopCitiesBarChartProps {\r\n  cityData: CityData[];\r\n}\r\n\r\n\r\nconst getBarColor = (value: number, max: number) => {\r\n  const blueColors = ['#E0F7FA', '#B2EBF2', '#80DEEA', '#4DD0E1', '#00ACC1']; \r\n  const index = Math.floor((value / max) * (blueColors.length - 1)); \r\n  return blueColors[index]; \r\n};\r\n\r\n\r\nconst TopCitiesBarChart: React.FC<TopCitiesBarChartProps> = ({ cityData }) => {\r\n  const topCities = getTopCities(cityData);\r\n\r\n  const maxRate = Math.max(...topCities.map(entry => entry.visitors)); // Use topCities instead of cityData\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={300}>\r\n      {topCities.length > 0 ? (\r\n        <BarChart\r\n          data={topCities}\r\n          layout=\"vertical\"\r\n          margin={{ right: 30, left: 35, bottom: 30 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis type=\"number\" label={{ value: 'Visitors', position: 'insideBottom', offset: -5 }} />\r\n          <YAxis dataKey=\"city\" type=\"category\" />\r\n          <Tooltip \r\n            formatter={(value) => [value, 'Visitors']}\r\n            contentStyle={{ backgroundColor: 'hsl(var(--background))', borderColor: 'hsl(var(--border))' }}\r\n          />\r\n          <Legend verticalAlign=\"top\" height={36} />\r\n          <Bar \r\n            dataKey=\"visitors\" \r\n            name=\"Visitors\" \r\n            barSize={20} \r\n            fill=\"#00ACC1\" \r\n            shape={(props:any) => {\r\n              const { visitors } = props.payload; // Access visitors from the payload\r\n              return <rect {...props} fill={getBarColor(visitors, maxRate)} />; // Use getBarColor to determine the fill color\r\n            }}\r\n          />\r\n        </BarChart>\r\n      ) : (\r\n        <div className=\"flex items-center justify-center h-full\">\r\n          <p className=\"text-muted-foreground\">No data available. Please set up Google Analytics for this data.</p>\r\n        </div>\r\n      )}\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default TopCitiesBarChart;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { PieChart, Pie, Tooltip, ResponsiveContainer, Cell, Legend } from 'recharts';\r\n\r\n// Define the interface for landingPage data\r\ninterface PageData {\r\n  LandingPage: string;\r\n  Visitors: string;\r\n}\r\n\r\n// Function to get top 5 Pages based on visitors from the data\r\nconst getTopLandingPages = (data: PageData[]) => {\r\n  return data\r\n    .map(item => ({\r\n      LandingPage: item.LandingPage,\r\n      Visitors: parseInt(item.Visitors, 10),\r\n    }))\r\n    .sort((a, b) => b.Visitors - a.Visitors)\r\n    .slice(0, 5);\r\n};\r\n\r\ninterface TopPagesPieChartProps {\r\n  PageData: PageData[];\r\n}\r\n\r\n// Define an array of colors for the pie slices\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#8dd1e1'];\r\n\r\nconst TopPagesPieChart: React.FC<TopPagesPieChartProps> = ({ PageData }) => {\r\n  const topPages = getTopLandingPages(PageData);\r\n  const [isMobileOrTablet, setIsMobileOrTablet] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobileOrTablet(window.innerWidth < 768);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <ResponsiveContainer width=\"100%\" height={ 300}>\r\n        {topPages.length>0 ?(\r\n        <PieChart>\r\n          <Tooltip formatter={(value, name) => [`${value}`, `${name}`]} />\r\n          {!isMobileOrTablet && ( // Conditionally render the Legend\r\n            <Legend layout=\"vertical\" align=\"right\" verticalAlign=\"middle\" />\r\n          )}\r\n          <Pie\r\n            data={topPages}\r\n            dataKey=\"Visitors\"\r\n            nameKey=\"LandingPage\"\r\n            cx=\"50%\"\r\n            cy=\"50%\"\r\n            outerRadius={100}\r\n            innerRadius={40}\r\n            label\r\n          >\r\n            {topPages.map((_, index) => (\r\n              <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n            ))}\r\n          </Pie>\r\n        </PieChart>\r\n        ):(\r\n          <div style={{ textAlign: 'center', marginTop: '50px' }}>\r\n          <p>No data available for top landing pages.Please set up Google Analytics for this data.</p>\r\n          </div>\r\n        )}\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopPagesPieChart;\r\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <Cross2Icon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\"; // Adjust the import based on your UI library\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"; // Import Dialog components from ShadCN\r\n\r\ninterface LandingPageReport {\r\n  AddToCarts: string;\r\n  Checkouts: string;\r\n  Conversions: string;\r\n  LandingPage: string;\r\n  Sessions: string;\r\n  Visitors: string;\r\n  YearMonth: string;\r\n}\r\n\r\n// Define the interface for City Report\r\ninterface CityReport {\r\n  City: string;\r\n  Country: string;\r\n  Region: string;\r\n  Sessions: string;\r\n  Visitors: string;\r\n  YearMonth: string;\r\n}\r\n\r\ninterface ReferringChannelReport {\r\n  Channel: string;\r\n  Source: string;\r\n  Medium: string;\r\n  Visitors: string;\r\n  Sessions: string;\r\n}\r\ninterface ReportModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  data: (LandingPageReport | CityReport |ReferringChannelReport)[];\r\n}\r\n\r\nconst ReportModal: React.FC<ReportModalProps> = ({ isOpen, onClose, title, data }) => {\r\n\r\n  // Function to determine background color based on the session count\r\n  const getBackgroundColor = (sessions: number, maxSessions: number) => {\r\n    const intensity = sessions / maxSessions; // Scale intensity between 0 and 1 \r\n    return `rgba(0, 0, 255, ${Math.max(0.1, intensity)})`; // Use rgba for a gradient effect\r\n  };\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <Dialog open={isOpen} onOpenChange={onClose}>\r\n        <DialogContent className=\"max-w-full w-[90%] h-[80%]\">\r\n          <DialogHeader>\r\n            <DialogTitle>{title}</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"text-center mt-5\">\r\n            <p>No data available. Please set up Google Analytics for this data.</p>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Parse session data and find the maximum value\r\n  const parsedData = data.map(item => ({\r\n    ...item,\r\n    Sessions: Number(item.Sessions),\r\n  }));\r\n  // console.log('parseddata', parsedData);\r\n  const maxSessions = Math.max(...parsedData.map(item => item.Sessions));\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-full w-[90%] h-[80%]\">\r\n        <DialogHeader>\r\n          <DialogTitle>{title}</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <Table>\r\n            <TableHeader className=\"bg-gray-200\">\r\n              <TableRow>\r\n                {data.length > 0 && Object.keys(data[0]).map((key) => (\r\n                  <TableCell key={key} className=\"font-bold px-4 text-black min-w-[100px]\">{key}</TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {parsedData.map((item, index) => (\r\n                <TableRow key={index}>\r\n                  {Object.entries(item).map(([key, value], idx) => (\r\n                    <TableCell \r\n                      key={idx} \r\n                      className=\"px-4 py-2 border-b\"\r\n                      style={{\r\n                        width: '150px',\r\n                        backgroundColor: key === \"Sessions\" ? getBackgroundColor(Number(value), maxSessions) : '',\r\n                      }}\r\n                    >\r\n                      {value}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ReportModal;\r\n","import * as React from \"react\"\nimport { ChevronLeftIcon, ChevronRightIcon } from \"@radix-ui/react-icons\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: cn(\n          \"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\n          props.mode === \"range\"\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\n            : \"[&:has([aria-selected])]:rounded-md\"\n        ),\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-8 w-8 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_start: \"day-range-start\",\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: () => <ChevronLeftIcon className=\"h-4 w-4\" />,\n        IconRight: () => <ChevronRightIcon className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","import { CalendarIcon } from \"lucide-react\";\r\nimport { format } from \"date-fns\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype DatePickerWithRangeProps = {\r\n  date: DateRange | undefined;\r\n  setDate: (date: DateRange | undefined) => void;\r\n  defaultDate?: DateRange;\r\n  resetToFirstPage?: () => void; // New prop for default dates\r\n};\r\n\r\nexport const DatePickerWithRange: React.FC<DatePickerWithRangeProps> = ({\r\n  date,\r\n  setDate,\r\n  defaultDate,\r\n  resetToFirstPage\r\n}) => {\r\n  // Use defaultDate only if date is undefined\r\n  const effectiveDate = date && (date.from || date.to) ? date : defaultDate;\r\n\r\n  const handleDateChange = (newDate: DateRange | undefined) => {\r\n    setDate(newDate);\r\n    if (resetToFirstPage) {\r\n      resetToFirstPage(); // Call reset only if provided\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid gap-2\">\r\n      <Popover>\r\n        <PopoverTrigger asChild>\r\n          <Button\r\n            id=\"date\"\r\n            variant={\"outline\"}\r\n            className={cn(\r\n              \"w-[260px] justify-start text-left font-normal\",\r\n              !effectiveDate && \"text-muted-foreground\"\r\n            )}\r\n          >\r\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n            {effectiveDate?.from ? (\r\n              effectiveDate.to ? (\r\n                <>\r\n                  {format(effectiveDate.from, \"LLL dd, y\")} - {format(effectiveDate.to, \"LLL dd, y\")}\r\n                </>\r\n              ) : (\r\n                format(effectiveDate.from, \"LLL dd, y\")\r\n              )\r\n            ) : (\r\n              <span>Pick a date</span>\r\n            )}\r\n          </Button>\r\n        </PopoverTrigger>\r\n        <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n          <Calendar\r\n            initialFocus\r\n            mode=\"range\"\r\n            defaultMonth={effectiveDate?.from}\r\n            selected={effectiveDate}\r\n            onSelect={handleDateChange}\r\n            numberOfMonths={2}\r\n          />\r\n        </PopoverContent>\r\n      </Popover>\r\n    </div>\r\n  );\r\n};","\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { format } from \"date-fns\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\"\r\n\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Search } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { SearchX } from 'lucide-react';\r\n\r\ninterface MetricsData {\r\n  date: string\r\n  metaSpend: number\r\n  metaROAS: number\r\n  googleSpend: number\r\n  googleROAS: number\r\n  totalSpend: number\r\n  grossROI: number\r\n  shopifySales: number\r\n  netROI: number\r\n}\r\n\r\ninterface SheetModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  brandId: string\r\n}\r\n\r\nexport const SheetModal: React.FC<SheetModalProps> = ({ isOpen, onClose, brandId }) => {\r\n  const [metricsData, setMetricsData] = useState<MetricsData[]>([])\r\n  const [brandName, setBrandName] = useState<string>(\"\")\r\n  const [loading, setLoading] = useState<boolean>(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [date, setDate] = useState<Date>()\r\n\r\n  const baseURL = import.meta.env.PROD\r\n    ? import.meta.env.VITE_API_URL\r\n    : import.meta.env.VITE_LOCAL_API_URL\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const fetchData = async () => {\r\n        setLoading(true)\r\n        setError(null)\r\n        try {\r\n          const queryParams: any = {};\r\n          if (date) {\r\n            queryParams.date = date.toISOString(); // Format date as 'YYYY-MM-DD'\r\n          }\r\n  \r\n          // Fetch the metrics data\r\n          const reportResponse = await axios.get(`${baseURL}/api/report/${brandId}`, {\r\n            params: queryParams, // Pass query parameters here\r\n            withCredentials: true,\r\n          });\r\n          const metricsData: MetricsData[] = reportResponse.data.data\r\n\r\n          const brandResponse = await axios.get(`${baseURL}/api/brands/${brandId}`, { withCredentials: true })\r\n          const brandName = brandResponse.data.name\r\n\r\n          setMetricsData(metricsData)\r\n          setBrandName(brandName)\r\n        } catch (err) {\r\n          console.error(err)\r\n          setError(\"Failed to fetch data. Please try again later.\")\r\n        } finally {\r\n          setLoading(false)\r\n        }\r\n      }\r\n      fetchData()\r\n    }\r\n  }, [isOpen, brandId,date, baseURL])\r\n\r\n  const tableHeaders = [\"Date\", \"Meta Spend\", \"Meta Sales\", \"Meta ROAS\", \"Google Spend\", \"Google Sales\", \"Google ROAS\", \"Total Spend\", \"Gross ROI\", \"Shopify Sales\", \"Net ROI\"]\r\n  const handleDateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setDate(new Date(event.target.value))\r\n  }\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-[95vw] max-h-[90vh] \">\r\n        <DialogHeader className=\"flex flex-col md:flex-row items-center justify-between md:gap-10 mt-2 \">\r\n          <DialogTitle className=\"text-xl font-bold\">\r\n            Daily Report - {brandName}\r\n          </DialogTitle>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"relative\">\r\n              <Input\r\n                type=\"date\"\r\n                value={date ? date.toISOString().slice(0, 10) : \"\"}\r\n                onChange={handleDateChange}\r\n                className=\"w-[200px] pr-8\" // Add padding to prevent text overlap with the icon\r\n                title=\"Select a date\"\r\n              />\r\n              <Search className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 w-4 h-4\" />\r\n            </div>\r\n            {date&&\r\n              <Button onClick={()=>setDate(undefined)} className=\"px-4 py-2 text-white bg-red-500 hover:bg-red-600\">\r\n                <SearchX className=\"w-6 h-6\" />\r\n              </Button>\r\n            }\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        {loading ? (\r\n          <p>Loading data...</p>\r\n        ) : error ? (\r\n          <p className=\"text-red-500\">{error}</p>\r\n        ) : (\r\n          <div className=\"border rounded-md overflow-auto\">\r\n            <div className=\"max-h-[70vh] overflow-hidden\">\r\n              <Table>\r\n                <TableHeader className=\"bg-blue-900 sticky top-0 z-10\">\r\n                  <TableRow>\r\n                    {tableHeaders.map((header) => (\r\n                      <TableHead key={header} className=\"font-bold text-white border px-2 py-2 text-center w-[120px]\">\r\n                        {header}\r\n                      </TableHead>\r\n                    ))}\r\n                    <TableHead className=\"border px-2 py-2 text-center w-[15px]\"></TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n              </Table>\r\n              <div className=\"max-h-[60vh] md:max-h-[calc(70vh-2.5rem)]  overflow-y-auto \">\r\n                <Table>\r\n                  <TableBody>\r\n                    {metricsData.map((entry, index) => (\r\n                      <TableRow key={index} className=\"hover:bg-gray-50\">\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{format(new Date(entry.date), 'dd/MM/yyyy')}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.metaSpend.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{(entry.metaSpend * entry.metaROAS).toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.metaROAS.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.googleSpend.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{(entry.googleSpend * entry.googleROAS).toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.googleROAS.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.totalSpend.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.grossROI.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.shopifySales.toFixed(2)}</TableCell>\r\n                        <TableCell className=\"border px-2 py-1 text-center  w-[120px]\">{entry.netROI.toFixed(2)}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}","import { DailyCartCheckoutData } from \"@/Dashboard/interfaces\";\r\nimport { AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\r\n\r\ninterface EcommerceMetricsProps {\r\n  rawData: DailyCartCheckoutData[]; // Use camelCase for consistency\r\n}\r\n\r\nconst formatData = (data: any) => {\r\n  return Object.entries(data).map(([name, value]) => ({ name, value }));\r\n};\r\n\r\nconst CustomTooltip = ({ active, payload }: any) => {\r\n  if (active && payload && payload.length) {\r\n    return (\r\n      <div className=\"bg-background border border-border p-2 rounded-md shadow-md\">\r\n        <p className=\"font-bold\">{payload[0].payload.name}</p>\r\n        <p>{payload[0].value.toLocaleString()}</p>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n// Updated color palette to shades of blue\r\nconst colorPalette = [\r\n  \"#4f83cc\", // Light Blue\r\n  \"#337ab7\", // Medium Blue\r\n  \"#1e6a8c\", // Darker Blue\r\n  \"#0d4d68\"  // Even Darker Blue\r\n];\r\n\r\nexport default function EcommerceMetrics({ rawData }: EcommerceMetricsProps) {\r\n  console.log(rawData)\r\n  const aggregateData = () => {\r\n    return rawData.reduce((acc, curr) => {\r\n      acc.AddToCarts += parseInt(curr.AddToCarts, 10);\r\n      acc.Checkouts += parseInt(curr.Checkouts, 10);\r\n      acc.Sessions += parseInt(curr.Sessions, 10);\r\n      acc.Purchases += parseInt(curr.Purchases, 10);\r\n      return acc;\r\n    }, { AddToCarts: 0, Checkouts: 0, Sessions: 0, Purchases: 0 });\r\n  };\r\n\r\n  const aggregatedData = formatData(aggregateData());\r\n\r\n  return (\r\n      <ResponsiveContainer width=\"100%\" height={280}>\r\n        <AreaChart data={aggregatedData}>\r\n          <XAxis dataKey=\"name\" />\r\n          <YAxis />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Area \r\n            type=\"monotone\" \r\n            dataKey=\"value\" \r\n            stroke=\"#0d4d68\" \r\n            fillOpacity={0.4} \r\n            fill=\"#0d4d68\" \r\n          />\r\n          <defs>\r\n            <linearGradient id=\"colorGradient\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\r\n              {colorPalette.map((color, index) => (\r\n                <stop\r\n                  key={index}\r\n                  offset={`${(index / (colorPalette.length - 1)) * 100}%`}\r\n                  stopColor={color}\r\n                />\r\n              ))}\r\n            </linearGradient>\r\n          </defs>\r\n        </AreaChart>\r\n      </ResponsiveContainer>\r\n  );\r\n}\r\n\r\n","import { useEffect, useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport { ShoppingCart, DollarSign, PercentIcon, TrendingUp, FileChartColumn, RefreshCw, BriefcaseBusiness, Sheet } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\"\r\nimport { format } from \"date-fns\"\r\n// import MonthlyReturningCustomerRatesChart from '../components/dashboard_component/MonthlyReturningCustomerRatesChart.tsx';\r\nimport { ReferringChannelChart } from '../components/dashboard_component/ReferringChannelChart.tsx';\r\nimport TopCitiesLineChart from '../components/dashboard_component/CityChart.tsx';\r\nimport TopPagesPieChart from '../components/dashboard_component/LandingPageChart.tsx';\r\nimport ReportModal from '../components/dashboard_component/ReportModal.tsx';\r\nimport { DashboardData, CombinedData, DailyCartCheckoutReport } from './interfaces';\r\nimport { DatePickerWithRange } from '@/components/dashboard_component/DatePickerWithRange.tsx';\r\nimport { SheetModal } from '@/MetricsSheet/SheetModal.tsx';\r\nimport EcommerceMetrics from '@/components/dashboard_component/EcommerceChart.tsx';\r\n\r\n\r\nfunction useDebouncedValue<T>(value: T, delay: number): T {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\nexport default function Dashboard() {\r\n\r\n  const { brandId } = useParams();\r\n  const [data, setData] = useState<CombinedData | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [isSheetModalOpen, setSheetModalOpen] = useState(false);\r\n  const [reportData, setReportData] = useState<any[]>([]);\r\n  const [date, setDate] = useState<DateRange | undefined>(undefined); // Initialize state\r\n\r\n  // const websocketUrl = import.meta.env.PROD ? 'wss://your-production-url' : 'ws://localhost:PORT';\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const debouncedStartDate = useDebouncedValue(startDate, 500);\r\n  const debouncedEndDate = useDebouncedValue(endDate, 500);\r\n\r\n\r\n  const now = new Date(); // Define 'now' variable\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n\r\n      const baseURL =\r\n        import.meta.env.PROD\r\n          ? import.meta.env.VITE_API_URL\r\n          : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      let url = `${baseURL}/api/shopify/data/${brandId}`;\r\n      const params = new URLSearchParams();\r\n\r\n      if (debouncedStartDate) {\r\n        params.append('startDate', debouncedStartDate);\r\n      }\r\n      if (debouncedEndDate) {\r\n        params.append('endDate', debouncedEndDate);\r\n      }\r\n\r\n      if (params.toString()) {\r\n        url += `?${params.toString()}`;\r\n      }\r\n\r\n      const shopifyResponse = await axios.get<DashboardData>(url, {\r\n        withCredentials: true\r\n      });\r\n\r\n      const analyticsResponse = await axios.post(`${baseURL}/api/analytics/report/${brandId}`, {\r\n        startDate: debouncedStartDate,\r\n        endDate: debouncedEndDate\r\n      }, {\r\n        withCredentials: true\r\n      });\r\n\r\n      console.log(\"Analytics Data:\", analyticsResponse.data);\r\n\r\n      const DailyAnalyticsResponse = await axios.post<DailyCartCheckoutReport>(`${baseURL}/api/analytics/atcreport/${brandId}`,{\r\n        startDate: debouncedStartDate,\r\n        endDate: debouncedEndDate\r\n      },{withCredentials: true});\r\n\r\n      console.log(\"Daily Analytics Data:\", DailyAnalyticsResponse.data);\r\n\r\n      const combinedData = {\r\n        ...shopifyResponse.data,\r\n        analyticsReports: analyticsResponse.data || null,\r\n        dailyCartCheckoutReports: DailyAnalyticsResponse.data ? [DailyAnalyticsResponse.data] : [] // Store as an array\r\n      };\r\n\r\n      setData(combinedData);\r\n      console.log(data)\r\n      setLastUpdated(new Date());\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [navigate, debouncedStartDate, debouncedEndDate]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n\r\n    const intervalId = setInterval(fetchData, 5 * 60 * 1000);\r\n\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n\r\n  //websocket connection\r\n\r\n  // useEffect(() => {\r\n  //   const ws = new WebSocket(websocketUrl);\r\n\r\n  //   ws.onopen = () => {\r\n  //     console.log('WebSocket connected');\r\n  //   };\r\n\r\n  //   ws.onmessage = (event) => {\r\n  //     const newData = JSON.parse(event.data);\r\n  //     console.log('New webhook data received:', newData);\r\n\r\n  //     // Fetch the latest data again after receiving the update\r\n  //     fetchData(); // Re-fetch data to ensure the dashboard reflects the latest state\r\n  //   };\r\n\r\n  //   ws.onclose = () => {\r\n  //     console.log('WebSocket disconnected');\r\n  //   };\r\n\r\n  //   return () => {\r\n  //     ws.close(); // Clean up WebSocket connection on component unmount\r\n  //   };\r\n  // }, [fetchData, websocketUrl]);\r\n\r\n\r\n\r\n\r\n  const handleManualRefresh = () => {\r\n    fetchData();\r\n  };\r\n\r\n\r\n\r\n// Conversion Rate calculation\r\nconst session = data?.analyticsReports.find(report=>report.reportType === 'Purchase Data');\r\nconst totalFilteredSessions = session?.data.reduce((accumulator, entry) => {\r\n    if (entry.transactionId !== '(not set)' && entry.transactionId !== '') {\r\n        return accumulator + parseInt(entry.sessions, 10); // Sum the sessions\r\n    }\r\n    return accumulator; \r\n}, 0);\r\nconst totalSessions = session?.data.reduce((accumulator, entry) => {\r\n    return accumulator + parseInt(entry.sessions, 10); // Convert sessions to an integer\r\n}, 0);\r\n\r\nconst conversionRate = totalSessions ? (totalFilteredSessions || 0) / totalSessions * 100 : 0;\r\n\r\n  \r\n\r\n  // const prepareMonthlyReturnRatesData = () => {\r\n  //   if (!data || !data.analyticsReports) return [];\r\n\r\n  //   const returningCustomerRateReport = data.analyticsReports.find(report => report.reportType === 'Returning Customer Rate');\r\n\r\n  //   if (!returningCustomerRateReport || !returningCustomerRateReport.data) return [];\r\n\r\n  //   return returningCustomerRateReport.data.map(({ yearMonth, returnRate }) => ({\r\n  //     month: yearMonth,\r\n  //     returningCustomerRate: parseFloat(returnRate) || 0,\r\n  //   }));\r\n  // };\r\n\r\n  const prepareMonthlyReturnRatesData = () => {\r\n    if (!data || !data.analyticsReports) return 0;\r\n  \r\n    const returningCustomerRateReport = data.analyticsReports.find(report => report.reportType === 'Returning Customer Rate');\r\n  \r\n    if (!returningCustomerRateReport || !returningCustomerRateReport.data) return 0;\r\n  \r\n    // Extract return rates and calculate total return rate\r\n    const totalReturnRate = returningCustomerRateReport.data.reduce((acc, { returnRate }) => {\r\n      const rate = parseFloat(returnRate) || 0; // Ensure it's a number, default to 0 if parsing fails\r\n      return acc + rate; // Sum the return rates\r\n    }, 0);\r\n  \r\n    return totalReturnRate;\r\n  };\r\n\r\n  const monthlyReturnRate = parseFloat(prepareMonthlyReturnRatesData().toFixed(2));\r\n  \r\n  const preparedReferringData = () => {\r\n    if (!data || !data.analyticsReports) return [];\r\n\r\n    const referringChannelData = data.analyticsReports.find(report => report.reportType === 'Sessions by Referring Channel')?.data || [];\r\n    if (!referringChannelData) return [];\r\n\r\n    return referringChannelData.map(entry => ({\r\n      Channel: entry.channel,\r\n      Source: entry.source,\r\n      Medium: entry.medium,\r\n      Visitors: entry.visitors,\r\n      Sessions: entry.sessions\r\n    }));\r\n  };\r\n\r\n\r\n  const preparedCityData = () => {\r\n    if (!data || !data.analyticsReports) return [];\r\n\r\n    const cityData = data.analyticsReports.find(report => report.reportType === 'Sessions by Location')?.data || [];\r\n    if (!cityData) return [];\r\n\r\n    return cityData.map(entry => ({\r\n      City: entry.city,\r\n      Region: entry.region,\r\n      Country: entry.country,\r\n      Visitors: entry.visitors,\r\n      Sessions: entry.sessions\r\n    }));\r\n  };\r\n\r\n  const preparedPageData = () => {\r\n    if (!data || !data.analyticsReports) return [];\r\n\r\n    const pageData = data.analyticsReports.find(report => report.reportType === 'Landing Page Report')?.data || [];\r\n    if (!pageData) return [];\r\n\r\n    return pageData.map(entry => ({\r\n      LandingPage: getShortLabel(entry.landingPage),\r\n      AddToCarts: entry.addToCarts,\r\n      Checkouts: entry.checkouts,\r\n      Conversions: entry.conversions,\r\n      Visitors: entry.visitors,\r\n      Sessions: entry.sessions\r\n    }));\r\n  };\r\n\r\n\r\n  const getShortLabel = (label: string) => {\r\n    const url = new URL(label, 'http://dummy-base-url');\r\n    return url.pathname;\r\n  };\r\n\r\n\r\n\r\n  const handleOpenModal = (data: any[]) => {\r\n    setReportData(data);\r\n    setModalOpen(true);\r\n  };\r\n  const handleCloseModal = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  const handleOpenSheetModal = () => {\r\n    console.log('sheet opened')\r\n    setSheetModalOpen(true);\r\n   \r\n  };\r\n  const handleCloseSheetModal = () => {\r\n    setSheetModalOpen(false);\r\n  };\r\n\r\n\r\n  if (!data) return <div className=\"flex items-center justify-center h-screen\">\r\n    <div className=\"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500\"></div>\r\n  </div>;\r\n\r\n  return (\r\n    <>\r\n\r\n      <header className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-6\">\r\n        <div className=\" flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <BriefcaseBusiness className=\"h-6 w-6 text-gray-500\" />\r\n            <h1 className=\"text-2xl font-bold\">Business Dashboard</h1>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n          <Button onClick={handleOpenSheetModal} className='flex items-center justify-between bg-cyan-600'>\r\n            <p>View Report</p>\r\n            <Sheet />\r\n          </Button>\r\n            <DatePickerWithRange date={date} setDate={setDate}\r\n              defaultDate={{\r\n                from: new Date(now.getFullYear(), now.getMonth(), 1), // First day of the current month\r\n                to: now // Current date\r\n              }} />\r\n          </div>\r\n        </div>\r\n      </header>\r\n      <div className=\"p-4 md:p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h1 className=\"text-2xl font-semibold mb-2 flex items-center space-x-3\">\r\n            <BriefcaseBusiness className=\"h-6 w-6\" />\r\n            <span>Blended summary</span>\r\n            <svg viewBox=\"0 0 64 64\" className=\"w-5 h-5\"\r\n              xmlns=\"http://www.w3.org/2000/svg\" ><g>\r\n                <g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-11.703,9.951-12.889,15.008    c-3.078,0.956-5.266,1.638-5.542,1.728C9.943,18.42,9.89,18.474,9.667,20.1C9.495,21.331,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#95C675\" /></g><g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-9.873,9.951-11.059,15.008    c-3.078,0.956-5.44,6.219-5.719,6.307c-1.719,0.542-1.772,0.596-1.996,2.223C11.148,25.91,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#79B259\" /></g><path d=\"M40.022,62.857L59,58.731c0,0-6.661-45.261-6.703-45.572c-0.042-0.311-0.313-0.482-0.538-0.5   c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631c-0.192-0.194-0.479-0.249-0.75-0.251   c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839L40.022,62.857z\" fill=\"#55932C\" /><path d=\"M33.583,2.977c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844   c-7.887,0-11.674,9.873-12.875,14.947l2.447-0.759c1.354-4.609,4.545-12.053,10.209-12.053c0.346,0,0.688,0.116,1.018,0.345   c-2.532,1.195-5.244,4.209-6.398,10.213l2.43-0.75c1.182-4.541,3.381-6.739,5.307-7.569c0.484,1.227,0.803,2.988,0.803,5.363   c0,0.108,0,0.211-0.002,0.314l2.078-0.643c0-0.2,0.002-0.4,0.002-0.617c0-1.966-0.273-3.551-0.709-4.807   c1.746,0.218,2.912,2.213,3.662,4.508l1.938-0.601C38.906,5.876,36.976,2.977,33.583,2.977z\" fill=\"#4A7A2B\" /><path d=\"M47.611,12.348c-0.474-0.037-0.793-0.06-0.793-0.06s-3.28-3.271-3.639-3.631   c-0.192-0.194-0.479-0.249-0.75-0.251c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839l0.396,0.075l10.098-2.196L47.611,12.348z\" fill=\"#4C822A\" />\r\n              </g></svg>\r\n            <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n              <rect x=\"17\" y=\"2\" width=\"5\" height=\"20\" rx=\"2.5\" fill=\"#F9AB00\"></rect>\r\n              <path d=\"M9.5 13.5C9.5 12.1193 10.6193 11 12 11C13.3807 11 14.5 12.1193 14.5 13.5V19.5C14.5 20.8807 13.3807 22 12 22C10.6193 22 9.5 20.8807 9.5 19.5V13.5Z\" fill=\"#E37400\"></path><path d=\"M2 19.5C2 18.1193 3.11929 17 4.5 17C5.88071 17 7 18.1193 7 19.5C7 20.8807 5.88071 22 4.5 22C3.11929 22 2 20.8807 2 19.5Z\" fill=\"#E37400\"></path><path d=\"M6.92162 10C6.36184 10 5.95724 9.68838 5.95724 9.05977V8.55474H3.2304C2.49881 8.55474 2 8.1088 2 7.45332C2 7.07723 2.12193 6.70651 2.40459 6.22297C2.93666 5.29349 3.57403 4.31565 4.31116 3.23573C4.92637 2.31162 5.39747 2 6.20111 2C7.2209 2 7.88044 2.54265 7.88044 3.38617V7.02351H8.19082C8.72842 7.02351 9 7.34587 9 7.79181C9 8.23774 8.72288 8.55474 8.19082 8.55474H7.88044V9.05977C7.88044 9.68838 7.47585 10 6.92162 10ZM6.01267 7.09335V3.48287H5.97387C5.0095 4.8368 4.34996 5.83076 3.7015 7.03962V7.09335H6.01267Z\" fill=\"#E37400\"></path>\r\n            </svg>\r\n          </h1>\r\n          <div className=\"md:flex items-center hidden\">\r\n            {lastUpdated && (\r\n              <span className=\"text-sm text-gray-600 mr-4\">\r\n                Last updated: {lastUpdated.toLocaleTimeString()}\r\n              </span>\r\n            )}\r\n            <Button\r\n              onClick={handleManualRefresh}\r\n              disabled={isLoading}\r\n              className=\"flex items-center\"\r\n            >\r\n              <RefreshCw className={`mr-2 h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              Refresh\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Top stats cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-2 mb-4 md:mb-5\">\r\n          {/* Existing data cards */}\r\n          {[\r\n            { title: \"Total Orders\", value: data.totalOrders, colorClass: \"text-cyan-700\", icon: ShoppingCart },\r\n            { title: \"Total Sales\", value: `${data.totalSales.toFixed(2)}`, colorClass: \"text-cyan-700\", icon: DollarSign },\r\n            { title: \"Conversion Rate\", value: `${conversionRate.toFixed(2)}%`, colorClass: \"text-cyan-700\", icon: PercentIcon },\r\n            { title: \"Average Order Value\", value: `${data.averageOrderValue.toFixed(2)}`, colorClass: \"text-cyan-700\", icon: TrendingUp },\r\n            {title: \"Monthly Return Rate\" , value: `${monthlyReturnRate}`,colorClass: \"text-cyan-700\", icon: PercentIcon}\r\n          ].map((item, index) => (\r\n            <Card key={index} className=\"shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1\">\r\n              <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                <CardTitle className=\"text-lg text-gray-600\">{item.title}</CardTitle>\r\n                <item.icon className={`h-6 w-6 ${item.colorClass}`} />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className={`text-2xl font-bold ${item.colorClass}`}>{item.value}</p>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        \r\n        <div className='grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4'>\r\n        <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300 mb-5\">\r\n            <CardHeader className='flex flex-row justify-between items-center'>\r\n            <div className='flex flex-col gap-1'>\r\n            <CardTitle className='text-base'>Aggregated E-commerce Metrics</CardTitle>\r\n            <CardDescription>Total Add to Carts, Checkouts, Sessions, and Purchases</CardDescription>\r\n            </div>\r\n            <Link to={`/ecommerce-metrics/${brandId}`}>\r\n            <Button className=\" bg-blue-50 text-blue-900 hover:text-white \">\r\n                <FileChartColumn />\r\n              </Button>\r\n              </Link>\r\n            </CardHeader>\r\n            <CardContent>\r\n          <EcommerceMetrics rawData={data?.dailyCartCheckoutReports[0].data} />\r\n              </CardContent>\r\n              </Card>\r\n                       {/* City Chart */}\r\n          <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300 mb-5\">\r\n            <CardHeader className='flex flex-row justify-between items-center'>\r\n              <div className='flex flex-col gap-1'>\r\n              <CardTitle className='text-base'>Top 5 Cities</CardTitle>\r\n              <CardDescription>Visitor count for top cities</CardDescription>\r\n              </div>\r\n              <Button onClick={() => handleOpenModal(preparedCityData())} className=\" bg-blue-50 text-blue-900 hover:text-white \">\r\n                <FileChartColumn />\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <TopCitiesLineChart cityData={preparedCityData()} />\r\n            </CardContent>\r\n          </Card>\r\n          {/* Referring Channels Chart */}\r\n          <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300 mb-5\">\r\n            <CardHeader className='flex flex-row items-center justify-between'>\r\n            <div className='flex flex-col gap-1'>\r\n            <CardTitle className='text-base'>Top 5 referring channels</CardTitle>\r\n            <CardDescription>Visitor count for reffering channels</CardDescription>\r\n            </div>\r\n              <Button onClick={() => handleOpenModal(preparedReferringData())} className=\" bg-blue-50 text-blue-900 hover:text-white \">\r\n                <FileChartColumn />\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent className=\"h-80\">\r\n              <ReferringChannelChart rawData={preparedReferringData()} />\r\n            </CardContent>\r\n          </Card>\r\n\r\n    \r\n\r\n          {/* Report Modal */}\r\n          <ReportModal\r\n            isOpen={isModalOpen}\r\n            onClose={handleCloseModal}\r\n            title=\"Report Data\"\r\n            data={reportData}\r\n          />\r\n          {/* sheetModal */}\r\n          <SheetModal\r\n          isOpen={isSheetModalOpen}\r\n          onClose={handleCloseSheetModal}\r\n          brandId={brandId || ''}/>\r\n        </div>\r\n        <div className='grid grid-cols-1 xl:grid-cols-2 gap-4'>\r\n          {/* Monthly Returning Customer Rates Chart */}\r\n          {/* <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg text-gray-600\">Monthly Returning Customer Rates</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"h-80\">\r\n              <MonthlyReturningCustomerRatesChart data={prepareMonthlyReturnRatesData()} />\r\n            </CardContent>\r\n          </Card> */}\r\n\r\n                {/* Landing Page Report*/}\r\n                <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300 \">\r\n            <CardHeader className='flex flex-row justify-between items-center'>\r\n              <CardTitle className=\"text-lg text-gray-600\">Top 5 Landing Pages based on visitors</CardTitle>\r\n              <Button onClick={() => handleOpenModal(preparedPageData())} className=\" bg-blue-50 text-blue-900 hover:text-white \">\r\n                <FileChartColumn />\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <TopPagesPieChart PageData={preparedPageData()} />\r\n            </CardContent>\r\n          </Card>\r\n\r\n       \r\n            {/* Top selling Products\r\n          <Card className=\"shadow-lg hover:shadow-xl transition-all duration-300\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-2xl text-gray-600\">Top Selling Products</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ul className=\"space-y-2\">\r\n                {data.topSellingProducts.map((product, index) => (\r\n                  <li key={index} className=\"flex justify-between items-center p-2 bg-white rounded-lg shadow\">\r\n                    <span className=\"text-gray-800 font-medium\">{product.name}</span>\r\n                    <span className=\"font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded\">{product.count}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </CardContent>\r\n          </Card> \r\n  */}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import CollapsibleSidebar from './CollapsibleSidebar'\r\nimport Dashboard from './dashboard'\r\n\r\nexport default function BusinessDashboard() {\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <Dashboard />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","// AdAccountMetrics.js\r\nimport React from 'react';\r\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\n\r\n\r\n// Define the type for each metric\r\nexport interface Metric {\r\n  label: string;\r\n  value: string;\r\n}\r\n\r\n// Define the props for the AdAccountMetrics component\r\ninterface AdAccountMetricsProps {\r\n  title?: string;\r\n  metrics: Metric[];\r\n  date: DateRange;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport interface DateRange {\r\n  from?: Date;\r\n  to?: Date;\r\n}\r\n\r\ninterface MetricCardProps extends Metric {\r\n  date: DateRange;\r\n}\r\n\r\nconst MetricCardSkeleton: React.FC = () => {\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          <Skeleton className=\"w-4 h-4 rounded-full\" />\r\n          <Skeleton className=\"h-6 w-24\" />\r\n        </div>\r\n        <Skeleton className=\"h-4 w-32 mt-2\" />\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Skeleton className=\"h-8 w-20 mt-2\" />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n\r\n// MetricCard component to render each metric using ShadCN Card\r\nconst MetricCard: React.FC<MetricCardProps> = ({ label, value, date }) => {\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          <svg className=\"w-4 h-4\" fill=\"#1877F2\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n          </svg>\r\n          <div className=\"text-lg font-medium\">{label}</div>\r\n        </div>\r\n        <div className=\"text-xs text-gray-500 font-bold\">\r\n          {date.from ? date.from.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : ''}\r\n          -\r\n          {date.to ? date.to.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : ''}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <p className=\"text-3xl font-bold mt-2\">{value}</p>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst AdAccountMetricsCard: React.FC<AdAccountMetricsProps> = ({ title, metrics = [], date, isLoading = false }) => {\r\n  return (\r\n    <section className={title ?'mt-10':''}>\r\n      <h2 className=\"text-xl font-semibold mb-4 flex items-center space-x-2\">\r\n        {title && <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n          <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n        </svg>}\r\n        <span>{title}</span>\r\n      </h2>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {isLoading\r\n          ? Array(8).fill(0).map((_, index) => <MetricCardSkeleton key={index} />)\r\n          : metrics.map((metric, index) => (\r\n              <MetricCard key={index} label={metric.label} value={metric.value} date={date} />\r\n            ))\r\n        }\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default AdAccountMetricsCard;","\"use client\"\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { format } from \"date-fns\"\r\nimport { Settings2Icon } from \"lucide-react\"\r\nimport { DateRange } from \"react-day-picker\"\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\"\r\n// import { Card, CardContent, CardHeader } from \"@/components/ui/card\"\r\nimport AdAccountMetricsCard from \"./AdAccountsMetricsCard.tsx\"\r\nimport { AdAccountData, AggregatedMetrics } from '@/Dashboard/interfaces.ts'\r\nimport { DatePickerWithRange } from '@/components/dashboard_component/DatePickerWithRange.tsx'\r\n\r\n\r\nexport default function Dashboard() {\r\n  const [date, setDate] = useState<DateRange | undefined>({\r\n    from: new Date(),\r\n    to: new Date(),\r\n  })\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [adAccountsMetrics, setAdAccountsMetrics] = useState<AdAccountData[]>([]);\r\n  const [aggregatedMetrics, setAggregatedMetrics] = useState<AggregatedMetrics | null>(null)\r\n\r\n  const { brandId } = useParams();\r\n\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const fetchFbAdData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const baseURL =\r\n        import.meta.env.PROD\r\n          ? import.meta.env.VITE_API_URL\r\n          : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n      const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n      const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n      // console.log('Request Payload:', { brandId, startDate, endDate });\r\n\r\n      const fbAdResponse = await axios.post(\r\n        `${baseURL}/api/metrics/fbad/${brandId}`,\r\n        { startDate, endDate },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      const Fbdata = fbAdResponse.data;\r\n      const transformedData = Fbdata.data\r\n        .filter((account: any) => !account.message) // Exclude accounts with messages\r\n        .map((account: any) => ({\r\n          account_name: account.account_name,  // Adjust if there's an ID or name in your account\r\n          metrics: [\r\n            { label: 'Amount Spent', value: ` ${parseFloat(account.spend).toLocaleString()}` },\r\n            { label: 'Revenue', value: ` ${parseFloat(account.Revenue?.value || '0').toLocaleString()}` }, // Handle Revenue safely\r\n            {\r\n              label: 'ROAS (Ads only)',\r\n              value: account.purchase_roas.length > 0\r\n                ? parseFloat(account.purchase_roas[0]?.value).toFixed(2) // Only access if the array has elements\r\n                : '0' // Default to '0' if no ROAS data\r\n            },\r\n            { label: 'Ads Purchases', value: account.purchases?.value || '0' },\r\n            { label: 'CPC (All clicks)', value: ` ${parseFloat(account.cpc).toLocaleString()}` },\r\n            { label: 'CPM', value: ` ${parseFloat(account.cpm).toFixed(2).toLocaleString()}` },\r\n            { label: 'CTR', value: `${parseFloat(account.ctr).toFixed(2)} %` || '0' },\r\n            { label: 'Cost per Purchase (All)', value: ` ${parseFloat(account.cpp).toLocaleString()}` },\r\n          ],\r\n        }));\r\n\r\n      console.log('Transformed Metrics:', transformedData);\r\n      setAdAccountsMetrics(transformedData);\r\n      const newAggregatedMetrics = calculateAggregate(transformedData);\r\n      setAggregatedMetrics(newAggregatedMetrics);\r\n    } catch (error) {\r\n      console.error('Error fetching fb ad data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [navigate, date]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchFbAdData();\r\n    console.log(adAccountsMetrics)\r\n  }, [fetchFbAdData]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchFbAdData();\r\n\r\n    const intervalId = setInterval(fetchFbAdData, 5 * 60 * 1000);\r\n\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchFbAdData]);\r\n\r\n\r\n\r\n  const calculateAggregate = (data: AdAccountData[]): AggregatedMetrics => {\r\n    const totals = data.reduce((acc, account) => {\r\n      if (account.metrics) {\r\n        acc.totalSpent += parseFloat(account.metrics.find(m => m.label === 'Amount Spent')?.value.replace(/\\s/g, '').replace(/,/g, '') || '0');\r\n        acc.totalRevenue += parseFloat(account.metrics.find(m => m.label === 'Revenue')?.value.replace(/\\s/g, '').replace(/,/g, '') || '0');\r\n        acc.totalROAS += parseFloat(account.metrics.find(m => m.label === 'ROAS (Ads only)')?.value || '0');\r\n        acc.totalPurchases += parseFloat(account.metrics.find(m => m.label === 'Ads Purchases')?.value || '0');\r\n        acc.totalCPC += parseFloat(account.metrics.find(m => m.label === 'CPC (All clicks)')?.value.replace(/\\s/g, '').replace(/,/g, '') || '0');\r\n        acc.totalCPM += parseFloat(account.metrics.find(m => m.label === 'CPM')?.value.replace(/\\s/g, '').replace(/,/g, '') || '0');\r\n        acc.totalCTR += parseFloat(account.metrics.find(m => m.label === 'CTR')?.value.replace(/ %$/, '') || '0');\r\n        acc.totalCPP += parseFloat(account.metrics.find(m => m.label === 'Cost per Purchase (All)')?.value.replace(/\\s/g, '').replace(/,/g, '') || '0');\r\n      }\r\n\r\n      return acc;\r\n    }, {\r\n      totalSpent: 0,\r\n      totalRevenue: 0,\r\n      totalROAS: 0,\r\n      totalPurchases: 0,\r\n      totalCPC: 0,\r\n      totalCPM: 0,\r\n      totalCTR: 0,\r\n      totalCPP: 0\r\n    });\r\n\r\n    // Format the totals as needed\r\n    return {\r\n      totalSpent: ` ${totals.totalSpent.toLocaleString()}`,\r\n      totalRevenue: ` ${totals.totalRevenue.toLocaleString()}`,\r\n      totalROAS: totals.totalROAS.toFixed(2),\r\n      totalPurchases: totals.totalPurchases.toString(),\r\n      totalCPC: ` ${totals.totalCPC.toLocaleString()}`,\r\n      totalCPM: ` ${totals.totalCPM.toFixed(2).toLocaleString()}`,\r\n      totalCTR: `${(totals.totalCTR / data.length).toFixed(2)} %`, // Average CTR\r\n      totalCPP: ` ${totals.totalCPP.toLocaleString()}`\r\n    };\r\n  };\r\n\r\n\r\n  const metrics = [\r\n    {\r\n      label: 'Amount Spent',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalSpent : ' 0',\r\n    },\r\n    {\r\n      label: 'Revenue',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalRevenue : ' 0',\r\n    },\r\n    {\r\n      label: 'ROAS (Ads only)',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalROAS : '0.00',\r\n    },\r\n    {\r\n      label: 'Ads Purchases',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalPurchases : '0',\r\n    },\r\n    {\r\n      label: 'CPC (All clicks)',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalCPC : ' 0',\r\n    },\r\n    {\r\n      label: 'CPM',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalCPM : ' 0',\r\n    },\r\n    {\r\n      label: 'CTR',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalCTR : '0.00',\r\n    },\r\n    {\r\n      label: 'Cost per Purchase (All)',\r\n      value: aggregatedMetrics ? aggregatedMetrics.totalCPP : '0',\r\n    },\r\n\r\n  ];\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n\r\n      <nav className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\" flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Settings2Icon className=\"h-6 w-6 text-gray-500\" />\r\n            <h1 className=\"text-2xl font-bold\">Metrics Dashboard</h1>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <DatePickerWithRange date={date} setDate={setDate}\r\n              defaultDate={{ from: new Date(), to: new Date() }} />\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Main content */}\r\n      <main className=\"p-4 md:p-6 lg:p-8\">\r\n        <div className=\"space-y-6\">\r\n          {/* Blended summary */}\r\n          <section>\r\n            <h2 className=\"text-xl font-semibold mb-2 flex items-center space-x-2\">\r\n              <Settings2Icon className=\"h-5 w-5\" />\r\n              <span>Blended summary</span>\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n              </svg>\r\n              <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" >\r\n                <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path><path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path><path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n              </svg>\r\n            </h2>\r\n           <AdAccountMetricsCard metrics={metrics} date={date || { from: new Date(), to: new Date() }} isLoading={isLoading} />\r\n          </section>\r\n        </div>\r\n\r\n            {adAccountsMetrics.map((accountMetrics, index) => (\r\n              <AdAccountMetricsCard\r\n                key={index}\r\n                title={`Facebook - ${accountMetrics.account_name}`}\r\n                metrics={accountMetrics.metrics || []}\r\n                date={date || { from: new Date(), to: new Date() }}\r\n                isLoading={isLoading}\r\n              />\r\n            ))}\r\n        \r\n        \r\n\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n// function renderMetricCard(title: string, value: string, date: DateRange) {\r\n//   return (\r\n//     <Card className='transition-transform transform hover:scale-105 hover:border hover:border-blue-600'>\r\n//       <CardHeader className=\"flex flex-col items-start justify-start gap-2 \">\r\n//         <div className=\"flex flex-row items-center gap-2\">\r\n//           <svg className=\"w-5 h-5\" fill=\"#1877F2\" viewBox=\"0 0 24 24\">\r\n//             <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n//           </svg>\r\n//           <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\">\r\n//             <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n//             <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n//             <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n//           </svg>\r\n//           <div className=\"text-lg font-semibold\">{title}</div>\r\n//         </div>\r\n//         <div className=\"text-xs text-gray-500 font-bold\">\r\n//           {date.from ? date.from.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : ''}\r\n//           -\r\n//           {date.to ? date.to.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : ''}\r\n//         </div>\r\n\r\n//       </CardHeader>\r\n//       <CardContent className=\"flex flex-row justify-between items-center mt-3\">\r\n//         <div className=\"text-4xl font-bold\">{value}</div>\r\n//       </CardContent>\r\n//     </Card>\r\n//   )\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport CollapsibleSidebar from \"@/Dashboard/CollapsibleSidebar\";\r\nimport Dashboard from \"./dashboard.tsx\";\r\n\r\nconst AnalyticsDashboard: React.FC = () => {\r\n  return (\r\n    <div className=\"flex h-screen\"> {/* Set a fixed width for the sidebar */}\r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <Dashboard />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n","import { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Bell, Settings, Briefcase, RefreshCw, Store, FileSpreadsheet} from \"lucide-react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { useUser } from \"@/context/UserContext\"\r\nimport { useBrand } from \"@/context/BrandContext\"\r\nimport { SheetModal } from \"@/MetricsSheet/SheetModal\"\r\n\r\nexport default function LandingPage() {\r\n\r\n  const { user } = useUser();\r\n  const { brands } = useBrand();\r\n  const [isSheetModalOpen, setSheetModalOpen] = useState(false);\r\n  const [currentBrandId, setCurrentBrandId] = useState('');\r\n\r\n  const handleOpenSheetModal = (brandId:string) => {\r\n    setSheetModalOpen(true);\r\n    setCurrentBrandId(brandId);\r\n  };\r\n  const handleCloseSheetModal = () => {\r\n    setSheetModalOpen(false);\r\n  };\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 to-pink-50 p-6 space-y-6\">\r\n      <div className=\"max-w-7xl mx-auto space-y-6\">\r\n        <h1 className=\"text-3xl font-bold tracking-tight \">Welcome back, {user?.username.split(' ')[0] || 'user'} !</h1>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <Card className=\"bg-white border-t-4 border-t-black shadow-lg\">\r\n            <CardHeader>\r\n              <CardTitle>Your Brands</CardTitle>\r\n              <CardDescription>Quick access to your brand dashboards</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n              {brands.map((brand, index) => (\r\n                <Button\r\n                key={brand._id}\r\n                 asChild\r\n                  className={`w-full justify-start ${index %2 == 0?' hover:bg-black/50 hover:text-white':'hover:bg-pink-500 bg-pink-600 text-white'} `}>\r\n                  <Link to={`/business-dashboard/${brand._id}`}>\r\n                    <Store className=\"mr-2 h-4 w-4\" />\r\n                    {brand.name}\r\n                  </Link>\r\n                </Button>\r\n              ))}\r\n              <Button variant=\"outline\" className=\"w-full justify-start border-dashed border-2 border-gray-300 hover:bg-indigo-50\">\r\n                <Briefcase className=\"mr-2 h-4 w-4\" />\r\n                Add New Brand\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-white border-t-4 border-t-cyan-600 shadow-lg\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-cyan-600\">Daily Reports</CardTitle>\r\n            <CardDescription>Get Daily Reports for your brands</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n              {brands.map((brand) => (\r\n                <Button\r\n                  key={brand._id}\r\n                  variant=\"outline\"\r\n                  className=\"w-full justify-start items-center text-cyan-600 hover:bg-green-50 hover:text-cyan-700 border-cyan-400\"\r\n                  onClick={() => handleOpenSheetModal(brand._id)}\r\n                >\r\n                  <FileSpreadsheet className=\"h-4 w-4\" />\r\n                  <span className=\"\">{brand.name}</span>\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        </div>\r\n        <div className=\"grid gap-6 md:grid-cols-1\">\r\n        <Card className=\"bg-white border-t-4 border-t-amber-500 shadow-lg\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-amber-600\">Getting Started</CardTitle>\r\n            <CardDescription>Follow these steps to make the most of your analytics</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ol className=\"list-decimal list-inside space-y-2\">\r\n              <li className=\"text-gray-700\">Select a brand from the sidebar or \"Your Brands\" section</li>\r\n              <li className=\"text-gray-700\">Connect your brand's Shopify store</li>\r\n              <li className=\"text-gray-700\">Set up Google Analytics 4 property for your brand</li>\r\n              <li className=\"text-gray-700\">Link your brand's Facebook Ads account</li>\r\n              <li className=\"text-gray-700\">Configure Google Ads integration for your brand</li>\r\n              <li className=\"text-gray-700\">Explore your unified brand analytics in the dashboard</li>\r\n            </ol>\r\n          </CardContent>\r\n        </Card>\r\n      \r\n{/*         \r\n        <Card className=\"bg-white border-t-4 border-t-pink-500 shadow-lg\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-pink-600\">Recent Activity</CardTitle>\r\n              <CardDescription>Your latest actions and updates</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ul className=\"space-y-2\">\r\n                <li className=\"flex items-center\">\r\n                  <span className=\"w-32 text-sm text-gray-500\">2 hours ago</span>\r\n                  <span>Updated UDD Studio Shopify integration</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <span className=\"w-32 text-sm text-gray-500\">Yesterday</span>\r\n                  <span className=\"text-pink-600\">Viewed Fisherman Hub GA4 report</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <span className=\"w-32 text-sm text-gray-500\">2 days ago</span>\r\n                  <span>Created new FB Ad campaign for UDD Studio</span>\r\n                </li>\r\n              </ul>\r\n            </CardContent>\r\n          </Card> */}\r\n        </div>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <Card className=\"bg-white border-t-4 border-t-teal-500 shadow-lg\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-teal-600\">Notifications</CardTitle>\r\n              <CardDescription>Stay updated with your latest alerts</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ul className=\"space-y-2\">\r\n                <li className=\"flex items-center\">\r\n                  <Bell className=\"mr-2 h-4 w-4 text-indigo-500\" />\r\n                  <span className=\"text-gray-700\">New Shopify order received for UDD Studio</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <Bell className=\"mr-2 h-4 w-4 text-pink-500\" />\r\n                  <span className=\"text-gray-700\">Weekly analytics report ready for Fisherman Hub</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <Bell className=\"mr-2 h-4 w-4 text-amber-500\" />\r\n                  <span className=\"text-gray-700\">Facebook Ads campaign ended for UDD Studio</span>\r\n                </li>\r\n              </ul>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card className=\"bg-white border-t-4 border-t-purple-500 shadow-lg\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-purple-600\">Quick Actions</CardTitle>\r\n              <CardDescription>Frequently used features and settings</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <Button variant=\"outline\" className=\"w-full justify-start text-purple-600 hover:bg-purple-50 hover:text-purple-700 border-purple-200\">\r\n                <Settings className=\"mr-2 h-4 w-4\" />\r\n                Account Settings\r\n              </Button>\r\n              <Button variant=\"outline\" className=\"w-full justify-start text-purple-600 hover:bg-purple-50 hover:text-purple-700 border-purple-200\">\r\n                <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n                Sync Data Sources\r\n              </Button>\r\n              <Button variant=\"outline\" className=\"w-full justify-start text-purple-600 hover:bg-purple-50 hover:text-purple-700 border-purple-200\">\r\n                <Briefcase className=\"mr-2 h-4 w-4\" />\r\n                Manage Brands\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n        <SheetModal\r\n          isOpen={isSheetModalOpen}\r\n          onClose={handleCloseSheetModal}\r\n          brandId={currentBrandId || ''}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport LandingPage from \"./dashboard\";\r\nimport CollapsibleSidebar from \"@/Dashboard/CollapsibleSidebar\";\r\n const GeneralDashboard : React.FC=()=>{\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <LandingPage />\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default GeneralDashboard;","import {useState, useCallback, useEffect} from \"react\";\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport CollapsibleSidebar from \"@/Dashboard/CollapsibleSidebar\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { BriefcaseBusiness, RefreshCw } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\"\r\nimport { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport axios from \"axios\";\r\nimport { format } from \"date-fns\"\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface EcommerceMetric{\r\n  Date: string;\r\n  AddToCarts: string;\r\n  Checkouts: string;\r\n  Sessions: string;\r\n  Purchases: string;\r\n  PurchaseRate:string;\r\n  AddToCartRate:string;\r\n}\r\n const EcommerceMetricsPage : React.FC=()=>{\r\n    const [date, setDate] = useState<DateRange | undefined>(undefined);\r\n    const now = new Date();\r\n    const [data, setData]= useState<EcommerceMetric[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\r\n    const { brandId } = useParams();\r\n    const navigate = useNavigate();\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    \r\n\r\n    const fetchMetrics = useCallback(async () => {\r\n      setIsLoading(true);\r\n      try {\r\n  \r\n        const baseURL =\r\n          import.meta.env.PROD\r\n            ? import.meta.env.VITE_API_URL\r\n            : import.meta.env.VITE_LOCAL_API_URL;\r\n  \r\n  \r\n        const DailyAnalyticsResponse = await axios.post(`${baseURL}/api/analytics/atcreport/${brandId}`,{\r\n          startDate: startDate,\r\n          endDate: endDate\r\n        },{withCredentials: true});\r\n  \r\n       \r\n  \r\n        setData(DailyAnalyticsResponse.data.data || []);\r\n        setLastUpdated(new Date());\r\n\r\n  \r\n      } catch (error) {\r\n        console.error('Error fetching dashboard data:', error);\r\n        if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n          alert('Your session has expired. Please log in again.');\r\n          navigate('/');\r\n        }\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }, [navigate, endDate, endDate]);\r\n\r\n    useEffect(() => {\r\n      fetchMetrics();\r\n    }, [fetchMetrics]);\r\n\r\n    useEffect(() => {\r\n      fetchMetrics();\r\n  \r\n      const intervalId = setInterval(fetchMetrics, 5 * 60 * 1000);\r\n  \r\n  \r\n      return () => clearInterval(intervalId);\r\n    }, [fetchMetrics]);\r\n\r\n    const handleManualRefresh = () => {\r\n      fetchMetrics();\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"flex h-screen \"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-hidden\">\r\n      <header className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\" flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <BriefcaseBusiness className=\"h-6 w-6 text-gray-500\" />\r\n            <h1 className=\"text-2xl font-bold\"> E-commerce Metrics Overview</h1>\r\n          </div>\r\n          <div className=\"flex flex-row space-x-3 items-center\">\r\n          <div className=\"md:flex items-center hidden\">\r\n            {lastUpdated && (\r\n              <span className=\"text-sm text-gray-600 mr-4\">\r\n                Last updated: {lastUpdated.toLocaleTimeString()}\r\n              </span>\r\n            )}\r\n            <Button\r\n              onClick={handleManualRefresh}\r\n              disabled={isLoading}\r\n              className=\"flex items-center\"\r\n            >\r\n              <RefreshCw className={`mr-2 h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              Refresh\r\n            </Button>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <DatePickerWithRange date={date} setDate={setDate}\r\n              defaultDate={{\r\n                from: new Date(now.getFullYear(), now.getMonth(), 1), // First day of the current month\r\n                to: now // Current date\r\n              }} />\r\n          </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n     \r\n          <h1 className=\"text-lg font-semibold flex flex-col items-start space-x-3 m-5 lg:mx-10\">\r\n         \r\n          Key performance indicators for your online store\r\n          </h1>\r\n          \r\n   \r\n      <Card className=\"m-5 max-h-[80vh] overflow-y-auto\">\r\n\r\n        <div className=\"overflow-x-auto p-6\">\r\n          <Table>\r\n            <TableHeader className=\"bg-gray-200\">\r\n              <TableRow>\r\n                {data.length > 0 && Object.keys(data[0]).map((key) => (\r\n                  <TableCell key={key} className=\"font-bold px-4 text-black min-w-[100px]\">{key}</TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {data.map((item, index) => (\r\n                <TableRow key={index}>\r\n                  {Object.entries(item).map(([_, value], idx) => (\r\n                    <TableCell \r\n                      key={idx} \r\n                      className=\"px-4 py-2 border-b\"\r\n                    >\r\n                      {value}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n\r\n   \r\n        </Card>\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default EcommerceMetricsPage;","\r\nimport { UserProvider } from './context/UserContext';\r\nimport { BrowserRouter as Router,Route,Routes } from 'react-router-dom';\r\nimport AuthForm from \"./Auth/AuthForm.tsx\";\r\nimport { Toaster } from \"@/components/ui/toaster\"\r\nimport BusinessDashboard from './Dashboard/BusinessDashboard.tsx';\r\nimport AnalyticsDashboard from './AnalyticsDashboard/AnalyticsDashboard.tsx';\r\nimport GeneralDashboard from './GeneralisedDashboard/GeneralDashboard.tsx';\r\nimport { BrandProvider } from './context/BrandContext.tsx';\r\nimport EcommerceMetricsPage from './EcommerceMetrics/EcommerceMetricsPage.tsx';\r\n// import { ExcelMetricsPage } from './ExcelMetrics/ExcelMetrics.tsx';\r\n\r\nfunction App() {\r\n  return (\r\n    <UserProvider>\r\n      <BrandProvider>\r\n      <Router>\r\n        <Toaster />\r\n        <Routes>\r\n          <Route path=\"/\" element={<AuthForm />} />\r\n          <Route path=\"/dashboard\" element={<GeneralDashboard />} />\r\n          <Route path=\"/business-dashboard/:brandId\" element={<BusinessDashboard />} />\r\n          <Route path=\"/analytics-dashboard/:brandId\" element={<AnalyticsDashboard/>} />\r\n          <Route path =\"/ecommerce-metrics/:brandId\" element={<EcommerceMetricsPage />} />\r\n          {/* <Route path =\"/ad-metrics/:brandId\" element={<ExcelMetricsPage />} /> */}\r\n        </Routes>\r\n      </Router>\r\n      </BrandProvider>\r\n    </UserProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"names":["UserContext","createContext","UserProvider","children","user","setUser","useState","jsx","useUser","context","useContext","cn","inputs","twMerge","clsx","Input","React.forwardRef","className","type","props","ref","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","labelVariants","Label","LabelPrimitive.Root","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","t","toast","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","AuthForm","isLogin","setIsLogin","username","setUsername","email","setEmail","password","setPassword","showPassword","setShowPassword","navigate","useNavigate","errors","setErrors","toggleForm","validateForm","newErrors","isValid","handleSubmit","e","response","baseURL","axios","error","jsxs","motion","EyeOffIcon","EyeIcon","ToastProvider","ToastPrimitives.Provider","ToastViewport","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","Cross2Icon","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","BrandContext","BrandProvider","selectedBrandId","setSelectedBrandId","brands","setBrands","resetBrand","useBrand","TooltipProvider","TooltipPrimitive.Provider","Tooltip","TooltipPrimitive.Root","TooltipTrigger","TooltipPrimitive.Trigger","TooltipContent","sideOffset","TooltipPrimitive.Portal","TooltipPrimitive.Content","Logo","Link","CollapsibleSidebar","isExpanded","setIsExpanded","location","useLocation","toggleSidebar","prev","useEffect","ChevronLeft","ChevronRight","SidebarItem","Store","_a","b","ChevronUp","ChevronDown","brand","SidebarChild","ChartColumn","_c","_b","UserProfile","icon","text","openIcon","closeIcon","isSelected","tooltipContent","isOpen","setIsOpen","handleToggle","content","React","child","path","onClick","disabled","pathname","baseClasses","NavLink","handleLogout","userProfileContent","User2Icon","logoutContent","LogOut","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","COLORS","ReferringChannelChart","rawData","aggregatedData","acc","entry","Channel","Visitors","topChannels","a","renderLegend","ResponsiveContainer","PieChart","Pie","_","Cell","getTopCities","data","item","getBarColor","value","max","blueColors","TopCitiesBarChart","cityData","topCities","maxRate","BarChart","CartesianGrid","XAxis","YAxis","Legend","Bar","visitors","getTopLandingPages","TopPagesPieChart","PageData","topPages","isMobileOrTablet","setIsMobileOrTablet","handleResize","name","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","ReportModal","onClose","getBackgroundColor","sessions","maxSessions","intensity","parsedData","key","idx","Calendar","classNames","showOutsideDays","DayPicker","ChevronLeftIcon","ChevronRightIcon","Popover","PopoverPrimitive.Root","PopoverTrigger","PopoverPrimitive.Trigger","PopoverContent","align","PopoverPrimitive.Portal","PopoverPrimitive.Content","DatePickerWithRange","date","setDate","defaultDate","resetToFirstPage","effectiveDate","handleDateChange","newDate","CalendarIcon","Fragment","format","SheetModal","brandId","metricsData","setMetricsData","brandName","setBrandName","loading","setLoading","setError","queryParams","err","tableHeaders","event","Search","SearchX","header","formatData","CustomTooltip","active","payload","colorPalette","EcommerceMetrics","curr","AreaChart","Area","color","useDebouncedValue","delay","debouncedValue","setDebouncedValue","handler","Dashboard","useParams","setData","isLoading","setIsLoading","lastUpdated","setLastUpdated","isModalOpen","setModalOpen","isSheetModalOpen","setSheetModalOpen","reportData","setReportData","startDate","endDate","debouncedStartDate","debouncedEndDate","now","fetchData","useCallback","url","params","shopifyResponse","analyticsResponse","DailyAnalyticsResponse","combinedData","intervalId","handleManualRefresh","session","report","totalFilteredSessions","accumulator","totalSessions","conversionRate","monthlyReturnRate","returningCustomerRateReport","returnRate","rate","preparedReferringData","referringChannelData","preparedCityData","preparedPageData","pageData","getShortLabel","label","handleOpenModal","handleCloseModal","handleOpenSheetModal","handleCloseSheetModal","BriefcaseBusiness","Sheet","RefreshCw","ShoppingCart","DollarSign","PercentIcon","TrendingUp","FileChartColumn","TopCitiesLineChart","BusinessDashboard","Skeleton","MetricCardSkeleton","MetricCard","AdAccountMetricsCard","metrics","metric","adAccountsMetrics","setAdAccountsMetrics","aggregatedMetrics","setAggregatedMetrics","fetchFbAdData","transformedData","account","newAggregatedMetrics","calculateAggregate","totals","m","_d","_e","_f","_g","_h","Settings2Icon","accountMetrics","AnalyticsDashboard","LandingPage","currentBrandId","setCurrentBrandId","Briefcase","FileSpreadsheet","Bell","Settings","GeneralDashboard","EcommerceMetricsPage","fetchMetrics","App","Router","Routes","Route","createRoot","StrictMode"],"mappings":"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"}