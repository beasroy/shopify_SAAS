{"version":3,"file":"index-CLVZzqFA.js","sources":["../../src/lib/utils.ts","../../src/components/ui/input.tsx","../../src/components/ui/button.tsx","../../src/components/ui/label.tsx","../../src/components/ui/tooltip.tsx","../../src/hooks/use-toast.ts","../../src/store/slices/UserSlice.ts","../../src/data/constant.ts","../../src/Auth/AuthForm.tsx","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/store/slices/BrandSlice.ts","../../src/assets/messold-icon.png","../../src/components/ui/scroll-area.tsx","../../src/data/logo.tsx","../../src/components/ui/dialog.tsx","../../src/components/ui/skeleton.tsx","../../src/pages/Pricing/Pricing.tsx","../../src/components/dashboard_component/CollapsibleSidebar.tsx","../../src/components/ui/card.tsx","../../src/pages/AnalyticsDashboard/AdAccountsMetricsCard.tsx","../../src/components/ui/calendar.tsx","../../src/components/ui/popover.tsx","../../src/components/ui/checkbox.tsx","../../src/store/slices/DateSlice.ts","../../src/components/dashboard_component/DatePickerWithRange.tsx","../../src/store/slices/LocalSlice.ts","../../src/store/slices/NotificationSlice.ts","../../src/components/ui/badge.tsx","../../src/components/dashboard_component/HeaderNotificationDropdown.tsx","../../src/store/slices/ConversionFilterSlice.ts","../../src/store/slices/CampaignGroupSlice.ts","../../src/store/slices/campaignLabelsSlice.ts","../../src/store/slices/TutorialSlice.ts","../../src/store/slices/TokenSllice.ts","../../src/store/slices/interestFilterSlice.ts","../../src/store/slices/BrandFormSlice.ts","../../src/store/index.ts","../../src/services/socketService.ts","../../src/hooks/useSocketConnection.ts","../../src/components/dashboard_component/Header.tsx","../../src/components/dashboard_component/loader.tsx","../../src/pages/ConversionReportPage/components/axiosInstance.ts","../../src/components/dashboard_component/PlatformModal.tsx","../../src/components/dashboard_component/TicketForm.tsx","../../src/pages/GeneralisedDashboard/components/ConversionFunnelCard.tsx","../../src/pages/GeneralisedDashboard/components/MarketingInsightsCard.tsx","../../src/pages/GeneralisedDashboard/components/PerformanceTable.tsx","../../src/pages/GeneralisedDashboard/components/PaymentOrdersCard.tsx","../../src/pages/GeneralisedDashboard/dashboard.tsx","../../src/pages/AnalyticsDashboard/Components/ConnectAccountsPage.tsx","../../src/pages/AnalyticsDashboard/dashboard.tsx","../../src/components/dashboard_component/HelpDeskModal.tsx","../../src/pages/AnalyticsDashboard/AnalyticsDashboard.tsx","../../src/pages/GeneralisedDashboard/GeneralDashboard.tsx","../../src/pages/MonthlyAdMetrics/components/DataBuilding.tsx","../../src/utils/currency.ts","../../src/pages/MonthlyAdMetrics/ExcelMetrics.tsx","../../src/components/ui/table.tsx","../../src/components/ui/select.tsx","../../src/pages/BrandPerformanceDashboard/Dashboard.tsx","../../src/pages/BrandPerformanceDashboard/PerformanceDashboard.tsx","../../src/pages/SegmentDashboard/component/ProductTab.tsx","../../src/components/dashboard_component/TableSkeleton.tsx","../../src/pages/SegmentDashboard/component/SearchTermTable.tsx","../../src/pages/SegmentDashboard/Dashboard.tsx","../../src/pages/SegmentDashboard/SegmentDashboard.tsx","../../src/hooks/useBrandRefresh.ts","../../src/Auth/OauthSucces.tsx","../../src/pages/ReportPage/component/ReportTable.tsx","../../src/pages/ReportPage/component/EcommerceMetricsPage.tsx","../../src/pages/ReportPage/ConnectPlatformPage.tsx","../../src/pages/ReportPage/component/DaywiseMetricsPage.tsx","../../src/components/dashboard_component/Missing-Date-Waning.tsx","../../src/components/dashboard_component/NoAccessPage..tsx","../../src/components/ui/sheet.tsx","../../src/pages/AnalyticsDashboard/Components/ColumnManagementSheet.tsx","../../src/pages/ReportPage/component/MonthlyMetricsPage.tsx","../../src/pages/ReportPage/ReportsPage.tsx","../../src/context/TokenErrorContext.tsx","../../src/pages/ConversionReportPage/components/ConversionTable.tsx","../../src/pages/GoogleAdsHub/components/SearchTerm.tsx","../../src/pages/GoogleAdsHub/components/Age.tsx","../../src/pages/GoogleAdsHub/components/Gender.tsx","../../src/pages/GoogleAdsHub/components/Keyword.tsx","../../src/pages/GoogleAdsHub/components/Product.tsx","../../src/components/ui/side-tab.tsx","../../src/pages/ConversionReportPage/components/PerformanceSummary.tsx","../../src/components/dashboard_component/NumberFormatSelector.tsx","../../src/pages/ConversionReportPage/components/ExcelDownload.tsx","../../src/pages/GoogleAdsHub/Dashboard.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/pages/Meta/FbReports/component/MetaReportTable.tsx","../../src/pages/Meta/FbReports/component/AudienceFbReport.tsx","../../src/pages/Meta/FbReports/component/PlacementFbReport.tsx","../../src/pages/Meta/FbReports/component/PlatformFbReport.tsx","../../src/pages/Meta/FbReports/component/CountryFbReport.tsx","../../src/pages/Meta/FbReports/component/DeviceFbReport.tsx","../../src/pages/Meta/FbReports/component/GenderFbReport.tsx","../../src/pages/Meta/FbReports/component/AgeFbReport.tsx","../../src/pages/Meta/FbReports/FbReportPage.tsx","../../src/components/ui/tabs.tsx","../../src/pages/Profile Page/components/BrandIntegrationModal.tsx","../../src/pages/Profile Page/components/BrandCard.tsx","../../src/pages/Profile Page/ProfilePage.tsx","../../src/pages/GeneralisedDashboard/components/ShopifyModalContent.tsx","../../src/pages/GeneralisedDashboard/components/OtherPlatformModalContent.tsx","../../src/pages/GeneralisedDashboard/components/BrandForm.tsx","../../src/components/ui/separator.tsx","../../src/pages/GeneralisedDashboard/BrandSetUpDashboard.tsx","../../src/components/Tutorial/TutorialConfig.ts","../../src/components/Tutorial/TutorialManager.tsx","../../src/components/Tutorial/TutorialDriver.tsx","../../src/pages/LandingPage/components/CTA.tsx","../../src/pages/LandingPage/components/Features.tsx","../../src/pages/LandingPage/components/Footer.tsx","../../src/pages/LandingPage/components/HeroSection.tsx","../../src/pages/LandingPage/components/Navbar.tsx","../../src/pages/LandingPage/page.tsx","../../src/pages/LandingPage/components/PrivacyPolicy.tsx","../../src/pages/LandingPage/components/TermsAndConditions.tsx","../../src/pages/ConversionReportPage/components/DeviceConversion.tsx","../../src/pages/ConversionReportPage/components/GenderConversion.tsx","../../src/pages/ConversionReportPage/components/AgeConversion.tsx","../../src/pages/ConversionReportPage/components/InterestConversion.tsx","../../src/pages/ConversionReportPage/components/OperatingSystemConversion.tsx","../../src/pages/ConversionReportPage/components/BrowserConversion.tsx","../../src/pages/ConversionReportPage/components/SourceConversion.tsx","../../src/pages/ConversionReportPage/components/PageTitleConversion.tsx","../../src/pages/ConversionReportPage/components/PagePathConversion.tsx","../../src/pages/ConversionReportPage/components/LandingPageConversion.tsx","../../src/pages/ConversionReportPage/components/RegionConversion.tsx","../../src/pages/ConversionReportPage/components/CityConversion.tsx","../../src/pages/ConversionReportPage/components/CountryConversion.tsx","../../src/pages/ConversionReportPage/components/CampaignConversion.tsx","../../src/pages/ConversionReportPage/components/ChannelConversion.tsx","../../src/pages/ConversionReportPage/ConversionLens.tsx","../../src/pages/Meta/Campaign Reports/components/MetaCampaignTable.tsx","../../src/pages/Meta/Campaign Reports/CampaignPage.tsx","../../src/pages/Meta/Interest Reports/components/InterestFilter.tsx","../../src/pages/Meta/Interest Reports/components/InterestTable.tsx","../../src/pages/Meta/Interest Reports/InterestReportPage.tsx","../../src/Auth/Shopify.tsx","../../src/Auth/PricingSuccess.tsx","../../src/pages/GeneralisedDashboard/AddBrandDashboard.tsx","../../src/hooks/useTokenExpire.ts","../../src/components/dashboard_component/AutoLogout.tsx","../../src/pages/CreativesLibrary/components/CreativeCard.tsx","../../src/pages/CreativesLibrary/CreativesLibrary.tsx","../../src/components/ui/accordion.tsx","../../src/services/axiosConfig.ts","../../src/pages/D2CCalculator/components/EbidtaCalculator.tsx","../../src/pages/D2CCalculator/D2CCalculator.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-black text-white shadow hover:bg-white hover:text-black\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n","import * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Portal>\r\n    <TooltipPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 overflow-hidden rounded-md bg-black px-3 py-1.5 text-xs text-white animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </TooltipPrimitive.Portal>\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"@/components/ui/toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  brands: string[];\r\n  isClient: boolean;\r\n  isAdmin: boolean;\r\n  method: string;\r\n  loginCount: number;\r\n}\r\n\r\ninterface UserState {\r\n  user: User | null;\r\n}\r\n\r\nconst initialState: UserState = {\r\n  user: null,\r\n};\r\n\r\nconst userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  reducers: {\r\n    setUser: (state, action: PayloadAction<User | null>) => {\r\n      state.user = action.payload;\r\n    },\r\n\r\n    clearUser: (state) => {\r\n      state.user = null;\r\n    },\r\n\r\n    removeBrandFromUser: (state, action: PayloadAction<string>) => {\r\n      if (state.user) {\r\n        state.user.brands = state.user.brands.filter(brandId => brandId !== action.payload);\r\n      }\r\n    },\r\n\r\n    addBrandToUser: (state, action: PayloadAction<string>) => {\r\n      if (state.user && !state.user.brands.includes(action.payload)) {\r\n        state.user.brands.push(action.payload);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setUser, clearUser, removeBrandFromUser, addBrandToUser } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n","import { LayoutDashboard, Settings } from \"lucide-react\";\r\n\r\nexport const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\nexport const apphandle = import.meta.env.VITE_APP_HANDLE ;\r\n\r\nexport const COLORS = {\r\n  primary: {\r\n    main: \"#0EA5E9\", // Vivid sky blue\r\n    light: \"#7DD3FC\", // Light sky blue\r\n    dark: \"#0369A1\", // Deep sky blue\r\n    bg: \"#F0F9FF\", // Very light sky blue\r\n  },\r\n  secondary: {\r\n    main: \"#475569\", // Slate gray\r\n    light: \"#94A3B8\", // Light slate\r\n    dark: \"#334155\", // Dark slate\r\n    bg: \"#F8FAFC\", // Very light slate\r\n  },\r\n  success: {\r\n    main: \"#10B981\", // Emerald green\r\n    dark: \"#047857\", // Deep emerald\r\n    bg: \"#D7FFDF\", // Very light emerald\r\n  },\r\n  danger: {\r\n    main: \"#F43F5E\", // Rose red\r\n    dark: \"#BE123C\", // Deep rose\r\n    bg: \"#FFF1F2\", // Very light rose\r\n  },\r\n  warning: {\r\n    main: \"#1E40AF\", // Deep navy blue\r\n    dark: \"#1E3A8A\", // Darker navy blue\r\n    bg: \"#EFF6FF\", // Very light blue\r\n  },\r\n  neutral: {\r\n\r\n    main: \"#F59E0B\", // Amber\r\n    dark: \"#B45309\", // Deep amber\r\n    bg: \"#FFFBEB\", // Very light amber\r\n  },\r\n  text: {\r\n    primary: \"#0F172A\", // Very dark slate\r\n    secondary: \"#334155\", // Dark slate\r\n    muted: \"#64748B\", // Medium slate\r\n  },\r\n  border: {\r\n    main: \"#CBD5E1\", // Light slate\r\n    dark: \"#94A3B8\", // Medium slate\r\n  },\r\n  background: {\r\n    headerGradient: \"linear-gradient(to bottom, #F1F5F9, #E2E8F0)\",\r\n  },\r\n};\r\n\r\n\r\nexport const pricingPlans = [\r\n  {\r\n      id: \"FREE\",\r\n      title: \"Free Plan\",\r\n      price: \"Free\",\r\n      description: \"Perfect for getting started with analytics\",\r\n      features: [\r\n          \"Basic Analytics Dashboard\",\r\n          \"Shopify Integration\",\r\n          \"Daily Data Updates\",\r\n          \"Basic Reports\",\r\n          \"Email Support\",\r\n      ],\r\n      buttonText: \"Get Started\",\r\n  },\r\n  {\r\n      id: \"STARTUP\",\r\n      title: \"Startup Plan\",\r\n      price: \"$10\",\r\n      period: \"/month\",\r\n      description: \"Ideal for growing businesses\",\r\n      features: [\r\n          \"Everything in Free Plan\",\r\n          \"Real-time Analytics\",\r\n          \"Custom Dashboards\",\r\n          \"Advanced Reports\",\r\n          \"Priority Email Support\",\r\n      ],\r\n      isPopular: true,\r\n      buttonText: \"Subscribe Now\",\r\n  },\r\n  {\r\n      id: \"GROWTH\",\r\n      title: \"Growth Plan\",\r\n      price: \"$50\",\r\n      period: \"/month\",\r\n      description: \"For businesses ready to scale\",\r\n      features: [\r\n          \"Everything in Startup Plan\",\r\n          \"AI-Powered Insights\",\r\n          \"White-label Reports\",\r\n          \"Custom Integrations\",\r\n          \"Team Collaboration\",\r\n      ],\r\n      buttonText: \"Subscribe Now\",\r\n  },\r\n]\r\n\r\nexport const setupSteps = [\r\n  {\r\n    id: 1,\r\n    title: \"Brand Setup\",\r\n    description: \"Configure your brand details and identity\",\r\n    icon: Settings,\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Connect Platforms\",\r\n    description: \"Link your marketing and analytics accounts\",\r\n    icon: LayoutDashboard,\r\n  }\r\n]\r\n\r\n\r\n\r\nexport const privacyPolicySections = [\r\n  {\r\n    title: \"1. Introduction\",\r\n    content: [\r\n      \"Welcome to Messold (\\\"we,\\\" \\\"our,\\\" or \\\"us\\\"). Your privacy is important to us. This Privacy Policy explains how we collect, use, share, and protect your information when you use our Parallels application.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"2. Information We Collect\",\r\n    content: [\r\n      \"Our application accesses and processes the following user data from Google and Meta:\",\r\n      [\r\n        \"Google Ads Data: We access advertising campaign performance and spend data.\",\r\n        \"Google Analytics Data: We access read-only analytics data and may edit settings.\",\r\n        \"Meta Ads Data: We access ad account data, campaign insights, and interest-based targeting information.\",\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"3. How We Use Google and Meta User Data\",\r\n    content: [\r\n      [\r\n        \"To provide analytics and advertising insights.\",\r\n        \"To display relevant reports and campaign performance data.\",\r\n        \"To personalize the user experience.\",\r\n        \"To enhance and improve our services through data analysis.\"\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"4. Data Sharing & Disclosure\",\r\n    content: [\r\n      \"We do not sell, rent, or trade your personal information. However, we may share your data:\",\r\n      [\r\n        \"With authorized service providers assisting in hosting, analytics, or customer support.\",\r\n        \"For legal compliance if required by law.\",\r\n        \"With your consent.\"\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"5. Data Retention & Deletion\",\r\n    content: [\r\n      \"Users can request:\",\r\n      [\r\n        \"Deletion of their data by contacting us at info@messold.com.\",\r\n        \"Access to stored data via email.\",\r\n        \"Revocation of Meta data access via Facebook's security settings.\"\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"6. Data Security\",\r\n    content: [\r\n      \"We take appropriate security measures including encryption, access control, and regular security audits.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"7. User Rights & Control\",\r\n    content: [\r\n      \"You have the right to:\",\r\n      [\r\n        \"Revoke our application's access via Google Security Settings.\",\r\n        \"Revoke our application's access via Meta App Settings.\",\r\n        \"Request access, correction, or deletion of your data.\",\r\n        \"Opt-out of non-essential data collection.\"\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"8. Compliance with Google API Services Policy & Meta Platform Terms\",\r\n    content: [\r\n      \"We comply with the Google API Services User Data Policy, including the Limited Use requirements.\",\r\n      \"We comply with Meta's Platform Terms and ensure that we process Platform Data only as described in this policy and in accordance with applicable laws.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"9. GDPR/CCPA Compliance\",\r\n    content: [\r\n      \"Residents of the EEA or California have additional rights, including:\",\r\n      [\r\n        \"The right to access, correct, or delete your data.\",\r\n        \"The right to data portability.\",\r\n        \"The right to restrict or object to data processing.\"\r\n      ]\r\n    ]\r\n  },\r\n  {\r\n    title: \"10. Updates to This Privacy Policy\",\r\n    content: [\r\n      \"We may update this Privacy Policy periodically. Any significant changes will be communicated via email or within the application.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"11. Contact Us\",\r\n    content: [\r\n      \"If you have any questions, contact us at:\",\r\n      \"Email: info@messold.com\"\r\n    ]\r\n  }\r\n];\r\n\r\nexport const termsAndConditionsSections = [\r\n  {\r\n    title: \"1. Terms\",\r\n    content: [\r\n      \"By accessing this web site, you are agreeing to be bound by these web site Terms and Conditions of Use, applicable laws and regulations and their compliance. If you disagree with any of the stated terms and conditions, you are prohibited from using or accessing this site. The materials contained in this site are secured by relevant copyright and trade mark law.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"2. Use License\",\r\n    content: [\r\n      \"Permission is allowed to temporarily download one duplicate of the materials (data or programming) on Messold Technologies's site for individual and non-business use only. This is the just a permit of license and not an exchange of title, and under this permit you may not:\",\r\n      [\r\n        \"modify or copy the materials;\",\r\n        \"use the materials for any commercial use, or for any public presentation (business or non-business);\",\r\n        \"attempt to decompile or rebuild any product or material contained on Messold Technologies's site;\",\r\n        \"remove any copyright or other restrictive documentations from the materials; or\",\r\n        \"transfer the materials to someone else or even \\\"mirror\\\" the materials on other server.\"\r\n      ],\r\n      \"This permit might consequently be terminated if you disregard any of these confinements and may be ended by Messold Technologies whenever deemed. After permit termination or when your viewing permit is terminated, you must destroy any downloaded materials in your ownership whether in electronic or printed form.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"3. Disclaimer\",\r\n    content: [\r\n      \"The materials on Messold Technologies's site are given \\\"as is\\\". Messold Technologies makes no guarantees, communicated or suggested, and thus renounces and nullifies every single other warranties, including without impediment, inferred guarantees or states of merchantability, fitness for a specific reason, or non-encroachment of licensed property or other infringement of rights. Further, Messold Technologies does not warrant or make any representations concerning the precision, likely results, or unwavering quality of the utilization of the materials on its Internet site or generally identifying with such materials or on any destinations connected to this website.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"4. Constraints\",\r\n    content: [\r\n      \"In no occasion should Messold Technologies or its suppliers subject for any harms (counting, without constraint, harms for loss of information or benefit, or because of business interference,) emerging out of the utilization or powerlessness to utilize the materials on Messold Technologies's Internet webpage, regardless of the possibility that Messold Technologies or a Messold Technologies approved agent has been told orally or in written of the likelihood of such harm. Since a few purviews don't permit constraints on inferred guarantees, or impediments of obligation for weighty or coincidental harms, these confinements may not make a difference to you.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"5. Amendments and Errata\",\r\n    content: [\r\n      \"The materials showing up on Messold Technologies's site could incorporate typographical, or photographic mistakes. Messold Technologies does not warrant that any of the materials on its site are exact, finished, or current. Messold Technologies may roll out improvements to the materials contained on its site whenever without notification. Messold Technologies does not, then again, make any dedication to update the materials.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"6. Links\",\r\n    content: [\r\n      \"Messold Technologies has not checked on the majority of the websites or links connected to its website and is not in charge of the substance of any such connected webpage. The incorporation of any connection does not infer support by Messold Technologies of the site. Utilization of any such connected site is at the user's own risk.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"7. Site Terms of Use Modifications\",\r\n    content: [\r\n      \"Messold Technologies may update these terms of utilization for its website whenever without notification. By utilizing this site you are consenting to be bound by the then current form of these Terms and Conditions of Use.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"8. Governing Law\",\r\n    content: [\r\n      \"Any case identifying with Messold Technologies's site should be administered by the laws of the country of India Messold Technologies State without respect to its contention of law provisions.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"9. Refunds\",\r\n    content: [\r\n      \"Any amount charged is non-refundable.\"\r\n    ]\r\n  },\r\n  {\r\n    title: \"10. Contact Us\",\r\n    content: [\r\n      \"If you have any questions about these Terms and Conditions, please contact us at:\",\r\n      \"Email: info@messold.com\"\r\n    ]\r\n  }\r\n];\r\n\r\nexport const metricConfigs = {\r\n    sessionsAndConversion: {\r\n      primary: {\r\n        key: 'Total Sessions',\r\n        name: 'Sessions'\r\n      },\r\n      secondary: {\r\n        key: 'Avg Conv. Rate',\r\n        name: 'Conversion'\r\n      }\r\n    },\r\n    spendAndRoas: {\r\n      primary: {\r\n        key: 'Total Spend',\r\n        name: 'Spend'\r\n      },\r\n      secondary: {\r\n        key: 'Total Purchase ROAS',\r\n        name: 'Purchase ROAS'\r\n      }\r\n    },\r\n    googleAds: {\r\n      primary: {\r\n        key: 'Total Cost',\r\n        name: 'Sessions'\r\n      },\r\n      secondary: {\r\n        key: 'Conv. Value / Cost',\r\n        name: 'Conversion'\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  \r\n  \r\n  \r\n  \r\n\r\n","import type React from \"react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport { Eye, EyeOff, Mail, Lock, User, Store, HelpCircle } from \"lucide-react\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\nimport { useToast } from \"../hooks/use-toast\"\r\nimport { FcGoogle } from \"react-icons/fc\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store\"\r\nimport { setUser } from \"@/store/slices/UserSlice\"\r\nimport { baseURL } from \"@/data/constant\"\r\n\r\nexport default function AuthForm() {\r\n  const [isLogin, setIsLogin] = useState(true)\r\n  const [username, setUsername] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [shop, setShop] = useState(\"\")\r\n  const [isShopifyLogin, setIsShopifyLogin] = useState(false)\r\n  const { toast } = useToast()\r\n  const navigate = useNavigate()\r\n  const [errors, setErrors] = useState({ username: \"\", email: \"\", password: \"\", shop: \"\" })\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    if (user?.brands && user.brands.length > 0) {\r\n      navigate(\"/dashboard\")\r\n    }else if (user?.brands && user.brands.length === 0) {\r\n      navigate(\"/first-time-brand-setup\")\r\n    }\r\n  }, [user, navigate])\r\n\r\n  const toggleForm = () => {\r\n    setIsLogin(!isLogin)\r\n    setIsShopifyLogin(false)\r\n  }\r\n\r\n  const toggleShopifyLogin = () => {\r\n    setIsShopifyLogin(!isShopifyLogin)\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors = { username: \"\", email: \"\", password: \"\", shop: \"\" }\r\n    let isValid = true\r\n\r\n    if (isShopifyLogin) {\r\n      if (!shop.trim()) {\r\n        newErrors.shop = \"Shop name is required\"\r\n        isValid = false\r\n      }\r\n      return isValid\r\n    }\r\n\r\n    if (!isLogin && !username.trim()) {\r\n      newErrors.username = \"Username is required\"\r\n      isValid = false\r\n    }\r\n\r\n    if (!email.trim()) {\r\n      newErrors.email = \"Email is required\"\r\n      isValid = false\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\r\n      newErrors.email = \"Email is invalid\"\r\n      isValid = false\r\n    }\r\n\r\n    if (!password) {\r\n      newErrors.password = \"Password is required\"\r\n      isValid = false\r\n    } else if (password.length < 8) {\r\n      newErrors.password = \"Password must be at least 8 characters\"\r\n      isValid = false\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return isValid\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n\r\n    if (isShopifyLogin) {\r\n      handleShopifyLogin()\r\n      return\r\n    }\r\n\r\n    try {\r\n      let response\r\n\r\n      if (isLogin) {\r\n        response = await axios.post(`${baseURL}/api/auth/login/normal`, { email, password }, { withCredentials: true })\r\n\r\n        if (response.data.success) {\r\n          // Set the user in the context with hasSeenLandingSlides flag\r\n          const userData = {\r\n            ...response.data.user,\r\n          }\r\n          dispatch(setUser(userData))\r\n\r\n          toast({\r\n            title: \"Login successful!\",\r\n            description: \"Welcome! Redirecting to your dashboard.\",\r\n            variant: \"default\",\r\n          })\r\n          console.log(user)\r\n          if (user?.brands && user.brands.length > 0) {\r\n            navigate(\"/dashboard\")\r\n          }else if (user?.brands && user.brands.length === 0) {\r\n            navigate(\"/first-time-brand-setup\")\r\n          }\r\n        }\r\n      } else {\r\n        response = await axios.post(\r\n          `${baseURL}/api/auth/signup`,\r\n          { username, email, password },\r\n          { withCredentials: true },\r\n        )\r\n\r\n        if (response.data.success) {\r\n          toast({\r\n            title: \"Registration successful!\",\r\n            description: \"Please log in with your new account.\",\r\n            variant: \"default\",\r\n          })\r\n          setIsLogin(true)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (axios.isAxiosError(error) && error.response) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: error.response.data.message || \"An error occurred\",\r\n          variant: \"destructive\",\r\n        })\r\n      } else {\r\n        toast({\r\n          title: \"Unexpected Error\",\r\n          description: \"An unexpected error occurred\",\r\n          variant: \"destructive\",\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/google?context=userLogin`)\r\n      const { authUrl } = response.data\r\n\r\n      window.location.href = authUrl\r\n    } catch (error) {\r\n      console.error(\"Error getting Google Auth URL:\", error)\r\n    }\r\n  }\r\n\r\n  const handleShopifyLogin = async () => {\r\n    try {\r\n      if (!shop.trim()) {\r\n        setErrors((prev) => ({ ...prev, shop: \"Shop name is required\" }))\r\n        return\r\n      }\r\n\r\n      const response = await axios.post(`${baseURL}/api/auth/shopify`, { shop , flowType: \"login\" })\r\n      const { authUrl } = response.data\r\n      window.location.href = authUrl\r\n    } catch (error) {\r\n      console.error(\"Error getting Shopify Auth URL:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to connect to Shopify\",\r\n        variant: \"destructive\",\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <div\r\n        className=\"hidden md:flex md:w-1/2 bg-cover bg-center\"\r\n        style={{\r\n          backgroundImage:\r\n            \"url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2015&q=80')\",\r\n        }}\r\n      >\r\n        <div className=\"flex items-center justify-center w-full h-full bg-black bg-opacity-40\">\r\n          <div className=\"text-white text-center p-8\">\r\n            <h3 className=\"text-4xl font-bold mb-6\">Unified Marketing Analytics</h3>\r\n            <p className=\"text-xl\">View your Shopify, Facebook, and Google Ads data all in one place.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-full md:w-1/2 flex items-center justify-center bg-gradient-to-br from-blue-50 to-white p-8\">\r\n        <div className=\"w-full max-w-md\">\r\n          <h2 className=\"text-3xl font-bold mb-3\">\r\n            {isShopifyLogin ? \"Connect Your Shopify Store\" : isLogin ? \"Welcome Back\" : \"Create an Account\"}\r\n          </h2>\r\n          <p className=\"mb-8\">\r\n            {isShopifyLogin\r\n              ? \"Enter your Shopify store name to connect\"\r\n              : isLogin\r\n                ? \"Sign in to access your marketing dashboard\"\r\n                : \"Join us to view all your marketing data in one place\"}\r\n          </p>\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {isShopifyLogin ? (\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Label htmlFor=\"shop\">Shopify Store Name</Label>\r\n                  <TooltipProvider>\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <HelpCircle className=\"h-4 w-4 text-muted-foreground cursor-help\" />\r\n                      </TooltipTrigger>\r\n                      <TooltipContent className=\"max-w-xs p-3\">\r\n                        <div className=\"space-y-2 text-xs\">\r\n                          <p className=\"font-semibold mb-2\">How to get your store name:</p>\r\n                          <ul className=\"list-disc list-inside space-y-1.5 ml-1\">\r\n                            <li>Visit your store URL and add <code className=\"bg-muted px-1 py-0.5 rounded text-[10px] text-black\">/admin</code>, then paste the full URL</li>\r\n                            <li>Or paste just the store name (last part of the URL)</li>\r\n                            <li>Or enter: <code className=\"bg-muted px-1 py-0.5 rounded text-[10px] text-black\">storename.myshopify.com</code></li>\r\n                          </ul>\r\n                        </div>\r\n                      </TooltipContent>\r\n                    </Tooltip>\r\n                  </TooltipProvider>\r\n                </div>\r\n                <div className=\"relative\">\r\n                  <Store className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                  <Input\r\n                    id=\"shop\"\r\n                    type=\"text\"\r\n                    value={shop}\r\n                    onChange={(e) => setShop(e.target.value)}\r\n                    placeholder=\"your-store-name\"\r\n                    required\r\n                    className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                {errors.shop && <p className=\"text-red-500 text-sm\">{errors.shop}</p>}\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {!isLogin && (\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"username\">Username</Label>\r\n                    <div className=\"relative\">\r\n                      <User className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                      <Input\r\n                        id=\"username\"\r\n                        type=\"text\"\r\n                        value={username}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                        placeholder=\"Enter your username\"\r\n                        required={!isLogin}\r\n                        className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                      />\r\n                    </div>\r\n                    {errors.username && <p className=\"text-red-500 text-sm\">{errors.username}</p>}\r\n                  </div>\r\n                )}\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"email\">Email</Label>\r\n                  <div className=\"relative\">\r\n                    <Mail className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                    <Input\r\n                      id=\"email\"\r\n                      type=\"email\"\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      placeholder=\"Enter your email\"\r\n                      required\r\n                      className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  {errors.email && <p className=\"text-red-500 text-sm\">{errors.email}</p>}\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <div className=\"relative\">\r\n                    <Lock className=\"absolute left-3 top-3 h-5 w-5\" />\r\n                    <Input\r\n                      id=\"password\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      placeholder=\"Enter your password\"\r\n                      required\r\n                      className=\"pl-10 border-blue-300 focus:border-blue-500 focus:ring-blue-500\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword(!showPassword)}\r\n                      className=\"absolute right-3 top-3\"\r\n                    >\r\n                      {showPassword ? <Eye className=\"h-5 w-5\" /> : <EyeOff className=\"h-5 w-5\" />}\r\n                    </button>\r\n                  </div>\r\n                  {errors.password && <p className=\"text-red-500 text-sm\">{errors.password}</p>}\r\n                </div>\r\n              </>\r\n            )}\r\n            <Button type=\"submit\" className=\"w-full text-white\">\r\n              {isShopifyLogin ? \"Connect Shopify Store\" : isLogin ? \"Sign In\" : \"Sign Up\"}\r\n            </Button>\r\n          </form>\r\n\r\n          {!isShopifyLogin && (\r\n            <div className=\"flex flex-col md:flex-row gap-3 items-center justify-center mt-6 w-full \">\r\n              <div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full flex items-center justify-center space-x-2\"\r\n                  onClick={handleGoogleLogin}\r\n                >\r\n                  <FcGoogle className=\"h-5 w-5\" />\r\n                  <span>Continue with Google</span>\r\n                </Button>\r\n              </div>\r\n              <div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"w-full flex items-center justify-center space-x-2\"\r\n                  onClick={toggleShopifyLogin}\r\n                >\r\n                  <Store className=\"h-5 w-5 text-[#95BF47]\" />\r\n                  <span>Continue with Shopify</span>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <p className=\"mt-6 text-center text-sm\">\r\n            {isShopifyLogin ? (\r\n              <>\r\n                <button onClick={toggleShopifyLogin} className=\"font-semibold hover:underline\">\r\n                  Back to {isLogin ? \"Sign In\" : \"Sign Up\"}\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n                <button onClick={toggleForm} className=\"font-semibold hover:underline\">\r\n                  {isLogin ? \"Sign Up\" : \"Sign In\"}\r\n                </button>\r\n              </>\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import * as React from \"react\"\r\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-background text-foreground\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <Cross2Icon className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n","import { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"@/components/ui/toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { IBrand, IBrandState } from '@/interfaces';\r\n\r\nconst initialState: IBrandState = {\r\n  selectedBrandId: null,\r\n  brands: [],\r\n};\r\n\r\nconst brandSlice = createSlice({\r\n  name: 'brand',\r\n  initialState,\r\n  reducers: {\r\n    setSelectedBrandId: (state, action: PayloadAction<string | null>) => {\r\n      state.selectedBrandId = action.payload;\r\n    },\r\n    setBrands: (state, action: PayloadAction<IBrand[]>) => {\r\n      state.brands = action.payload;\r\n    },\r\n    deleteBrand: (state, action: PayloadAction<string>) => {\r\n      state.brands = state.brands.filter(brand => brand._id !== action.payload);\r\n      // If the deleted brand was selected, clear the selection\r\n      if (state.selectedBrandId === action.payload) {\r\n        state.selectedBrandId = null;\r\n      }\r\n    },\r\n    resetBrand: (state) => {\r\n      state.selectedBrandId = null;\r\n      state.brands = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setSelectedBrandId, setBrands, deleteBrand, resetBrand } = brandSlice.actions;\r\nexport default brandSlice.reducer;\r\n","export default \"__VITE_ASSET__BTkxAs8a__\"","import * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n","import { ILogoProps } from \"@/interfaces\";\r\n\r\nexport const Ga4Logo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\r\n        <rect x=\"17\" y=\"2\" width=\"2rem\" height=\"2rem\" rx=\"2.5\" fill=\"#F9AB00\"></rect>\r\n        <path d=\"M9.5 13.5C9.5 12.1193 10.6193 11 12 11C13.3807 11 14.5 12.1193 14.5 13.5V19.5C14.5 20.8807 13.3807 22 12 22C10.6193 22 9.5 20.8807 9.5 19.5V13.5Z\" fill=\"#E37400\"></path>\r\n        <path d=\"M2 19.5C2 18.1193 3.11929 17 4.5 17C5.88071 17 7 18.1193 7 19.5C7 20.8807 5.88071 22 4.5 22C3.11929 22 2 20.8807 2 19.5Z\" fill=\"#E37400\"></path><path d=\"M6.92162 10C6.36184 10 5.95724 9.68838 5.95724 9.05977V8.55474H3.2304C2.49881 8.55474 2 8.1088 2 7.45332C2 7.07723 2.12193 6.70651 2.40459 6.22297C2.93666 5.29349 3.57403 4.31565 4.31116 3.23573C4.92637 2.31162 5.39747 2 6.20111 2C7.2209 2 7.88044 2.54265 7.88044 3.38617V7.02351H8.19082C8.72842 7.02351 9 7.34587 9 7.79181C9 8.23774 8.72288 8.55474 8.19082 8.55474H7.88044V9.05977C7.88044 9.68838 7.47585 10 6.92162 10ZM6.01267 7.09335V3.48287H5.97387C5.0095 4.8368 4.34996 5.83076 3.7015 7.03962V7.09335H6.01267Z\" fill=\"#E37400\"></path>\r\n    </svg>\r\n);\r\n\r\nexport const ShopifyLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg viewBox=\"0 0 64 64\" style={{ height, width }}\r\n        xmlns=\"http://www.w3.org/2000/svg\" ><g>\r\n            <g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-11.703,9.951-12.889,15.008    c-3.078,0.956-5.266,1.638-5.542,1.728C9.943,18.42,9.89,18.474,9.667,20.1C9.495,21.331,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#95C675\" /></g><g><path d=\"M51.759,12.659c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631    c-0.36-0.362-1.063-0.254-1.337-0.171c-0.039,0.011-0.715,0.222-1.834,0.567c-1.096-3.167-3.027-6.077-6.426-6.077    c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844c-7.919,0-9.873,9.951-11.059,15.008    c-3.078,0.956-5.44,6.219-5.719,6.307c-1.719,0.542-1.772,0.596-1.996,2.223C11.148,25.91,5,56.264,5,56.264l35.022,6.594    L59,58.731c0,0-6.661-45.261-6.703-45.572C52.255,12.849,51.983,12.677,51.759,12.659z M33.034,10.88    c0,0.119-0.002,0.231-0.002,0.344c-1.928,0.601-4.02,1.251-6.121,1.906c1.179-4.57,3.387-6.78,5.32-7.613    C32.716,6.743,33.034,8.505,33.034,10.88z M29.876,3.278c0.346,0,0.688,0.116,1.018,0.345c-2.539,1.199-5.258,4.224-6.408,10.261    c-1.679,0.522-3.319,1.034-4.838,1.506C20.994,10.783,24.188,3.278,29.876,3.278z M31.241,30.19c0,0-2.05-1.099-4.561-1.099    c-3.686,0-3.872,2.324-3.872,2.908c0,3.195,8.287,4.42,8.287,11.903c0,5.888-3.714,9.678-8.726,9.678    c-6.012,0-9.088-3.761-9.088-3.761l1.609-5.345c0,0,3.16,2.729,5.83,2.729c1.74,0,2.449-1.38,2.449-2.387    c0-4.168-6.799-4.354-6.799-11.203c0-5.761,4.116-11.341,12.428-11.341c3.199,0,4.783,0.923,4.783,0.923L31.241,30.19z     M35.11,10.578c0-0.211,0.002-0.417,0.002-0.644c0-1.966-0.273-3.551-0.709-4.807c1.752,0.219,2.919,2.223,3.67,4.528    C37.194,9.931,36.194,10.241,35.11,10.578z\" fill=\"#79B259\" /></g><path d=\"M40.022,62.857L59,58.731c0,0-6.661-45.261-6.703-45.572c-0.042-0.311-0.313-0.482-0.538-0.5   c-0.221-0.021-4.94-0.371-4.94-0.371s-3.28-3.271-3.639-3.631c-0.192-0.194-0.479-0.249-0.75-0.251   c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839L40.022,62.857z\" fill=\"#55932C\" /><path d=\"M33.583,2.977c-0.094,0-0.191,0.004-0.289,0.01c-0.966-1.283-2.164-1.844-3.199-1.844   c-7.887,0-11.674,9.873-12.875,14.947l2.447-0.759c1.354-4.609,4.545-12.053,10.209-12.053c0.346,0,0.688,0.116,1.018,0.345   c-2.532,1.195-5.244,4.209-6.398,10.213l2.43-0.75c1.182-4.541,3.381-6.739,5.307-7.569c0.484,1.227,0.803,2.988,0.803,5.363   c0,0.108,0,0.211-0.002,0.314l2.078-0.643c0-0.2,0.002-0.4,0.002-0.617c0-1.966-0.273-3.551-0.709-4.807   c1.746,0.218,2.912,2.213,3.662,4.508l1.938-0.601C38.906,5.876,36.976,2.977,33.583,2.977z\" fill=\"#4A7A2B\" /><path d=\"M47.611,12.348c-0.474-0.037-0.793-0.06-0.793-0.06s-3.28-3.271-3.639-3.631   c-0.192-0.194-0.479-0.249-0.75-0.251c-0.72,1.22-0.571,3.537-0.571,3.537l-2.232,50.839l0.396,0.075l10.098-2.196L47.611,12.348z\" fill=\"#4C822A\" />\r\n        </g></svg>\r\n);\r\n\r\nexport const FacebookLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg style={{ height, width }} fill=\"#1877F2\" viewBox=\"0 0 24 24\">\r\n        <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n    </svg>\r\n);\r\n\r\nexport const GoogleLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg viewBox=\"0 0 24 24\" style={{ height, width }}>\r\n        <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n        <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n        <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n    </svg>\r\n)\r\nexport const WhiteGa4Logo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 256 256\"\r\n      style={{ width, height }}\r\n      fill=\"#ffffff\"\r\n    >\r\n      <g\r\n        fill=\"#ffffff\"\r\n        fillRule=\"nonzero\"\r\n        stroke=\"none\"\r\n        strokeWidth=\"1\"\r\n        strokeLinecap=\"butt\"\r\n        strokeLinejoin=\"miter\"\r\n        strokeMiterlimit=\"10\"\r\n        fontFamily=\"none\"\r\n        fontWeight=\"none\"\r\n        fontSize=\"none\"\r\n        textAnchor=\"none\"\r\n        style={{ mixBlendMode: 'normal' }}\r\n      >\r\n        <g transform=\"scale(5.12,5.12)\">\r\n          <path d=\"M35,3c-2.206,0 -4,1.794 -4,4v10h-10c-2.19733,0 -4,1.80267 -4,4v10h-10c-2.19733,0 -4,1.80267 -4,4v8c0,2.19733 1.80267,4 4,4h24h1h11c2.206,0 4,-1.794 4,-4v-36c0,-2.206 -1.794,-4 -4,-4zM21,19h10v26h-24c-1.11667,0 -2,-0.88333 -2,-2v-8c0,-1.11667 0.88333,-2 2,-2h11c0.55226,-0.00006 0.99994,-0.44774 1,-1v-11c0,-1.11667 0.88333,-2 2,-2z\" />\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n\r\n  export const WhiteGoogleAdsLogo: React.FC<ILogoProps> = ({ width = '1.25rem', height = '1.25rem' }) => (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 50 50\"\r\n      style={{ width, height }}\r\n      fill=\"#ffffff\"\r\n    >\r\n      <path d=\"M 25.167969 5.0058594 C 24.781877 4.9968865 24.394532 5.014912 24.007812 5.0625 C 22.976561 5.1894012 21.954004 5.5214624 21 6.0722656 C 19.738126 6.8008205 18.867614 7.8795934 18.189453 9.0625 L 18.074219 8.9960938 L 4.0742188 32.996094 L 4.1894531 33.0625 C 3.5013617 34.243015 3 35.539748 3 37 C 3 41.406432 6.5935644 45 11 45 C 13.946182 45 16.422265 43.319288 17.810547 40.9375 L 17.925781 41.003906 L 25 28.876953 L 32.074219 41.003906 C 34.278505 44.817 39.185255 46.130214 43 43.927734 C 46.816027 41.724515 48.130947 36.816015 45.927734 33 L 45.927734 32.998047 L 31.927734 9 C 30.481872 6.4957324 27.870611 5.0686695 25.167969 5.0058594 z M 25.130859 6.9960938 C 27.155284 7.0392142 29.104113 8.1100176 30.195312 10 L 30.197266 10.001953 L 30.197266 10.003906 L 44.197266 34.003906 C 45.856861 36.883192 44.878669 40.533286 42 42.195312 C 39.120015 43.8581 35.467467 42.879973 33.804688 40 L 33.802734 39.998047 L 19.804688 16 L 19.804688 15.998047 L 19.802734 15.996094 C 18.143139 13.116808 19.121331 9.4667144 22 7.8046875 C 22.719996 7.3889907 23.488252 7.1380832 24.261719 7.0410156 C 24.551769 7.0046153 24.841656 6.9899337 25.130859 6.9960938 z M 17.212891 14.441406 C 17.372969 15.315284 17.603702 16.188437 18.072266 17 L 18.072266 17.001953 L 23.841797 26.892578 L 18.728516 35.658203 C 18.065728 31.912371 14.931107 29 11 29 C 10.084587 29 9.236334 29.238188 8.4160156 29.523438 L 17.212891 14.441406 z M 11 31 C 14.325556 31 17 33.674446 17 37 C 17 40.325554 14.325556 43 11 43 C 7.6744439 43 5 40.325554 5 37 C 5 33.674446 7.6744439 31 11 31 z\" />\r\n    </svg>\r\n  );","import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <Cross2Icon className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogTrigger,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","import { Check, Star, Calendar, Clock } from \"lucide-react\"\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\r\nimport type { RootState } from \"@/store\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { pricingPlans, apphandle, baseURL } from \"@/data/constant\"\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { format } from \"date-fns\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\n// import { Alert, AlertDescription } from \"@/components/ui/alert\"\r\n\r\n\r\ninterface PricingModalProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n}\r\n\r\ninterface Subscription {\r\n  id: string\r\n  planName: string\r\n  price: number\r\n  status: string\r\n  chargeId: string\r\n  trialEndsOn: string\r\n  trialDaysRemaining: number\r\n  billingOn: string\r\n  daysUntilBilling: number\r\n  createdAt: string\r\n}\r\n\r\nexport default function PricingModal({ open, onOpenChange }: PricingModalProps) {\r\n  const { selectedBrandId, brands } = useSelector((state: RootState) => state.brand)\r\n  const [subscription, setSubscription] = useState<Subscription | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const selectedBrand = brands.find((brand) => brand._id === selectedBrandId)\r\n  const shopifyStoreName = selectedBrand?.shopifyAccount?.shopName?.replace(\".myshopify.com\", \"\") || \"\"\r\n  const handle = apphandle || \"parallels\"\r\n\r\n  const brandId = useSelector((state:RootState)=>state.brand.selectedBrandId);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      fetchSubscriptionDetails()\r\n    }\r\n  }, [open])\r\n\r\n  const fetchSubscriptionDetails = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const response = await axios.get(`${baseURL}/api/pricing/details/${brandId}`,{withCredentials: true })\r\n      setSubscription(response.data)\r\n    } catch (err) {\r\n      console.error(\"Error fetching subscription details:\", err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n\r\n  const getPlanIdFromName = (planName: string): string => {\r\n    const planMap: Record<string, string> = {\r\n      \"Free Plan\": \"FREE\",\r\n      \"Startup Plan\": \"STARTUP\",\r\n      \"Growth Plan\": \"GROWTH\",\r\n    }\r\n    return planMap[planName] || \"FREE\"\r\n  }\r\n\r\n  const currentPlanId = subscription ? getPlanIdFromName(subscription.planName) : null\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-5xl p-0 overflow-auto max-h-[90vh]\">\r\n        <DialogHeader className=\"p-6 border-b\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <DialogTitle className=\"text-2xl font-bold text-center\">Find Your Perfect Plan</DialogTitle>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        {loading ? (\r\n          <div className=\"px-6 pt-6\">\r\n            <Skeleton className=\"h-24 w-full rounded-lg\" />\r\n          </div>\r\n        ) : subscription ? (\r\n          <div className=\"px-6\">\r\n            <div className=\"bg-slate-50 rounded-lg p-4 border border-slate-200\">\r\n              <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-slate-800 flex items-center\">\r\n                    Current Plan:{\" \"}\r\n                    <span\r\n                      className={`ml-2 ${\r\n                        currentPlanId === \"FREE\"\r\n                          ? \"text-teal-600\"\r\n                          : currentPlanId === \"STARTUP\"\r\n                            ? \"text-violet-600\"\r\n                            : \"text-rose-600\"\r\n                      }`}\r\n                    >\r\n                      {subscription.planName}\r\n                    </span>\r\n                  </h3>\r\n                  <p className=\"text-slate-600 mt-1\">\r\n                    Status: <span className=\"font-medium text-green-600 capitalize\">{subscription.status}</span>\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                  {subscription.trialDaysRemaining > 0 && (\r\n                    <div className=\"flex items-center bg-amber-50 text-amber-700 px-4 py-2 rounded-md border border-amber-200\">\r\n                      <Clock className=\"h-4 w-4 mr-2\" />\r\n                      <div>\r\n                        <p className=\"text-sm font-medium\">Trial ends in {subscription.trialDaysRemaining} days</p>\r\n                        <p className=\"text-xs\">{format(new Date(subscription.trialEndsOn), \"MMM dd, yyyy\")}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex items-center bg-blue-50 text-blue-700 px-4 py-2 rounded-md border border-blue-200\">\r\n                    <Calendar className=\"h-4 w-4 mr-2\" />\r\n                    <div>\r\n                      <p className=\"text-sm font-medium\">Next billing in {subscription.daysUntilBilling} days</p>\r\n                      <p className=\"text-xs\">{format(new Date(subscription.billingOn), \"MMM dd, yyyy\")}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // <div className=\"px-6 pt-6\">\r\n          //   <Alert variant=\"destructive\">\r\n          //     <AlertCircle className=\"h-4 w-4\" />\r\n          //     <AlertDescription>Unable to load subscription information. Please try again later.</AlertDescription>\r\n          //   </Alert>\r\n          // </div>\r\n          <></>\r\n        )}\r\n\r\n        <div className=\"p-6\">\r\n          <div className=\"grid lg:grid-cols-3 gap-6\">\r\n            {pricingPlans.map((plan) => {\r\n              const isCurrentPlan = currentPlanId === plan.id\r\n\r\n              return (\r\n                <div\r\n                  key={plan.id}\r\n                  className={`relative bg-white rounded-xl overflow-hidden border transition-all duration-300 hover:shadow-lg ${\r\n                    isCurrentPlan\r\n                      ? \"border-2 border-blue-500 shadow-md\"\r\n                      : plan.isPopular && !isCurrentPlan\r\n                        ? \"border-slate-200 shadow-md hover:scale-105\"\r\n                        : \"border-slate-100 hover:scale-105\"\r\n                  }`}\r\n                >\r\n                  {/* Current Plan Badge */}\r\n                  {isCurrentPlan && (\r\n                    <div className=\"absolute top-0 right-0 bg-blue-500 text-white text-xs font-semibold py-1 px-3 rounded-bl-lg\">\r\n                      CURRENT PLAN\r\n                    </div>\r\n                  )}\r\n\r\n                  {plan.isPopular && !isCurrentPlan && (\r\n                    <div className=\"absolute top-0 left-0 bg-amber-500 text-white text-xs font-semibold py-1 px-3 rounded-br-lg\">\r\n                      <Star className=\"h-3.5 w-3.5 fill-white inline-block mr-1\" /> POPULAR\r\n                    </div>\r\n                  )}\r\n\r\n                  <div\r\n                    className={`p-6 flex flex-col items-center ${\r\n                      plan.id === \"FREE\"\r\n                        ? \"bg-gradient-to-b from-teal-50 to-white\"\r\n                        : plan.id === \"STARTUP\"\r\n                          ? \"bg-gradient-to-b from-violet-50 to-white\"\r\n                          : \"bg-gradient-to-b from-rose-50 to-white\"\r\n                    }`}\r\n                  >\r\n\r\n                    <h3 className=\"text-xl font-bold text-slate-800\">{plan.title}</h3>\r\n\r\n                    <div className=\"flex items-baseline mt-4\">\r\n                      <span\r\n                        className={`text-4xl font-bold ${\r\n                          plan.id === \"FREE\"\r\n                            ? \"text-teal-600\"\r\n                            : plan.id === \"STARTUP\"\r\n                              ? \"text-violet-600\"\r\n                              : \"text-rose-600\"\r\n                        }`}\r\n                      >\r\n                        {plan.price}\r\n                      </span>\r\n                      {plan.period && <span className=\"text-slate-500 ml-1\">{plan.period}</span>}\r\n                    </div>\r\n\r\n                    <p className=\"mt-3 text-slate-600 text-sm text-center\">{plan.description}</p>\r\n                  </div>\r\n\r\n                  <div className=\"w-full h-px bg-slate-100\"></div>\r\n\r\n                  <div className=\"p-6 bg-white\">\r\n                    <ul className=\"space-y-4\">\r\n                      {plan.features.map((feature, index) => (\r\n                        <li key={index} className=\"flex items-start\">\r\n                          <div\r\n                            className={`flex-shrink-0 rounded-full p-0.5 mt-0.5 ${\r\n                              plan.id === \"FREE\"\r\n                                ? \"bg-teal-100 text-teal-600\"\r\n                                : plan.id === \"STARTUP\"\r\n                                  ? \"bg-violet-100 text-violet-600\"\r\n                                  : \"bg-rose-100 text-rose-600\"\r\n                            }`}\r\n                          >\r\n                            <Check className=\"h-4 w-4\" />\r\n                          </div>\r\n                          <span className=\"ml-3 text-slate-700 text-sm\">{feature}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n\r\n                    <div className=\"mt-8\">\r\n                      <a href={`https://admin.shopify.com/store/${shopifyStoreName}/charges/${handle}/pricing_plans`}>\r\n                        <button\r\n                          className={`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${\r\n                            isCurrentPlan\r\n                              ? \"bg-slate-200 text-slate-700 cursor-default\"\r\n                              : plan.id === \"FREE\"\r\n                                ? \"bg-teal-600 hover:bg-teal-700 text-white\"\r\n                                : plan.id === \"STARTUP\"\r\n                                  ? \"bg-violet-600 hover:bg-violet-700 text-white\"\r\n                                  : \"bg-rose-600 hover:bg-rose-700 text-white\"\r\n                          }`}\r\n                          disabled={isCurrentPlan}\r\n                        >\r\n                          {isCurrentPlan ? \"Current Plan\" : plan.buttonText}\r\n                        </button>\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\"\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronUp,\r\n  ChevronDown,\r\n  LogOut,\r\n  User2Icon,\r\n  Store,\r\n  CalendarRange,\r\n  LineChart,\r\n  Plus,\r\n  Home,\r\n  Crown, Clapperboard, Calculator,\r\n  Target,\r\n  ShoppingCart\r\n} from \"lucide-react\"\r\nimport { NavLink, useLocation, useNavigate } from \"react-router-dom\"\r\nimport { setSelectedBrandId, setBrands, resetBrand } from \"@/store/slices/BrandSlice.ts\"\r\nimport axios from \"axios\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\nimport Logo from \"@/assets/messold-icon.png\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store/index.ts\"\r\nimport { clearUser } from \"@/store/slices/UserSlice.ts\"\r\nimport { baseURL } from \"@/data/constant.ts\"\r\nimport type { IBrand } from \"@/interfaces\"\r\nimport {  WhiteGoogleAdsLogo } from \"@/data/logo.tsx\"\r\nimport { FaMeta } from \"react-icons/fa6\"\r\nimport PricingModal from \"../../pages/Pricing/Pricing.tsx\"\r\n\r\ninterface DashboardItem {\r\n  name: string;\r\n  path: string;\r\n  icon?: React.ReactNode;\r\n  subItems?: Array<{\r\n    name: string;\r\n    path: string;\r\n  }>;\r\n}\r\n\r\ninterface SubItem {\r\n  name: string;\r\n  path: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport default function CollapsibleSidebar() {\r\n  const [isExpanded, setIsExpanded] = useState(true)\r\n  const [isPricingOpen, setIsPricingOpen] = useState(false)\r\n  const [isInitialLoad, setIsInitialLoad] = useState(false)\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  const sidebarRef = useRef<HTMLDivElement>(null)\r\n\r\n  const dispatch = useDispatch()\r\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId)\r\n  const brands = useSelector((state: RootState) => state.brand.brands)\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n\r\n  // Fetch brands\r\n  const fetchBrands = useCallback(async () => {\r\n    try {\r\n      if (!user?.brands || user.brands.length === 0) {\r\n        console.warn(\"No brand IDs found in user context.\")\r\n        return\r\n      }\r\n\r\n      const response = await axios.post(\r\n        `${baseURL}/api/brands/filter`,\r\n        { brandIds: user.brands },\r\n        { withCredentials: true },\r\n      )\r\n\r\n      dispatch(setBrands(response.data))\r\n\r\n      if (!selectedBrandId && response.data.length > 0) {\r\n        dispatch(setSelectedBrandId(response.data[0]._id))\r\n        // For first load after login, navigate to dashboard\r\n        if (isInitialLoad) {\r\n          navigate('/dashboard')\r\n          setIsInitialLoad(false)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching brands:\", error)\r\n    }\r\n  }, [user?.brands, dispatch, selectedBrandId, isInitialLoad, navigate])\r\n\r\n  useEffect(() => {\r\n    fetchBrands()\r\n  }, [fetchBrands])\r\n\r\n  const toggleSidebar = () => setIsExpanded((prev) => !prev)\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const response = await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true })\r\n      if (response.status === 200) {\r\n        dispatch(clearUser())\r\n        dispatch(resetBrand())\r\n        console.log(\"Logged out redirected to home page\")\r\n        navigate(\"/\")\r\n        setIsInitialLoad(true)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const pathParts = location.pathname.split(\"/\")\r\n    if (pathParts[2]) {\r\n      dispatch(setSelectedBrandId(pathParts[2]))\r\n    }\r\n  }, [location.pathname, dispatch])\r\n\r\n  const getCurrentPathType = () => {\r\n    const pathParts = location.pathname.split(\"/\")\r\n    if (pathParts.length >= 2) {\r\n      return pathParts[1]\r\n    }\r\n    return 'dashboard'\r\n  }\r\n\r\n  const handleBrandChange = (brandId: string) => {\r\n    dispatch(setSelectedBrandId(brandId))\r\n\r\n    if (!isInitialLoad) {\r\n      const currentPathType = getCurrentPathType()\r\n\r\n      if (currentPathType === 'dashboard') {\r\n        navigate('/dashboard')\r\n        return\r\n      }\r\n\r\n      const pathParts = location.pathname.split(\"/\")\r\n      if (pathParts.length >= 3) {\r\n        pathParts[2] = brandId\r\n        navigate(pathParts.join('/'))\r\n      } else {\r\n        navigate(`/${currentPathType}/${brandId}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handlePricing = () => {\r\n    setIsPricingOpen(true);\r\n  }\r\n\r\n  const allDashboards = [\r\n    { name: \"Dashboard\", path: `/dashboard`, icon: <Home size={20} /> },\r\n    { name: \"Marketing Insights\", path: `/marketing-insights/${selectedBrandId}`, icon: <CalendarRange size={20} /> },\r\n    { name: \"D2C Calculator\", path: `/d2c-calculator/${selectedBrandId}`, icon: <Calculator size={20} /> },\r\n    { name: \"Creatives Library\", path: `/creatives-library/${selectedBrandId}`, icon: <Clapperboard size={20} /> },\r\n    { name: \"Ad Metrics\", path: `/admetrics/${selectedBrandId}`, icon: <LineChart size={20} /> },\r\n    { name: \"E-Commerce Reports\", path: `/ecommerce-reports/${selectedBrandId}` , icon: <ShoppingCart size={20} />},\r\n    { name: \"Conversion Reports\", path: `/conversion-reports/${selectedBrandId}` , icon: <Target size={20} />},\r\n    {\r\n      name: \"Meta Ads\",\r\n      path: `#`,\r\n      icon: <FaMeta size={20} />,\r\n      subItems: [\r\n        { name: \"Campaign Analysis\", path: `/meta-campaigns/${selectedBrandId}` },\r\n        { name: \"Interest Reports\", path: `/meta-interest/${selectedBrandId}` },\r\n        { name: \"Performance Reports\", path: `/meta-reports/${selectedBrandId}` },\r\n      ],\r\n    },\r\n    { name: \"Google Ads\", path: `/google-reports/${selectedBrandId}`, icon: <WhiteGoogleAdsLogo /> },\r\n    //{ name: \"Performance Metrics\", path: `/performance-metrics`, icon: <Target size={20} /> },\r\n  ]\r\n\r\n  const isItemDisabled = (item: DashboardItem | SubItem): boolean => {\r\n    if (!selectedBrandId) return true\r\n\r\n    const currentBrand = brands.find((b: IBrand) => b._id === selectedBrandId)\r\n    if (\r\n      (item.name === \"Analytics Dashboard\" || item.name === \"Campaign Metrics\") &&\r\n      !currentBrand?.fbAdAccounts &&\r\n      !currentBrand?.googleAdAccount\r\n    ) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div\r\n        ref={sidebarRef}\r\n        className={`bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 text-white transition-all duration-300 ease-in-out flex flex-col shadow-2xl relative ${\r\n          isExpanded ? \"w-60\" : \"w-16\"\r\n        }`}\r\n        style={{ height: \"100vh\" }}\r\n      >\r\n\r\n                {/* Header Section */}\r\n        <div className=\"flex-shrink-0 p-4 border-b border-slate-700/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div \r\n              className=\"flex items-center cursor-pointer group\" \r\n              onClick={() => navigate(\"/dashboard\")}\r\n            >\r\n              <div className=\"relative\">\r\n                <img src={Logo || \"/placeholder.svg\"} alt=\"Messold Logo\" className=\"h-8 w-8 rounded-lg shadow-lg\" />\r\n                <div className=\"absolute inset-0 bg-blue-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\r\n              </div>\r\n              {isExpanded && (\r\n                <span className=\"ml-3 text-lg font-bold text-slate-200\">\r\n                  Parallels\r\n                </span>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Toggle button - only show when expanded */}\r\n            {isExpanded && (\r\n              <button\r\n                onClick={toggleSidebar}\r\n                className=\"p-0.5 rounded-md text-white hover:text-slate-50 border border-slate-200 hover:bg-slate-700/30 transition-all duration-200 opacity-60 hover:opacity-100\"\r\n                title=\"Collapse sidebar\"\r\n              >\r\n                <ChevronLeft size={14} />\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Toggle button for collapsed state - positioned above logo */}\r\n          {!isExpanded && (\r\n            <div className=\"flex justify-center mt-3\">\r\n              <button\r\n                onClick={toggleSidebar}\r\n                className=\"p-0.5 rounded-md text-white border border-slate-200 hover:text-slate-50 hover:bg-slate-700/30 transition-all duration-200 opacity-60 hover:opacity-100\"\r\n                title=\"Expand sidebar\"\r\n              >\r\n                <ChevronRight size={14} />\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Navigation Section */}\r\n        <div className=\"flex-1 overflow-hidden\">\r\n          <ScrollArea className={`h-full ${isExpanded ? \"px-3\" : \"px-2\"}`}>\r\n            <nav className=\"space-y-2 py-4\">\r\n              {/* Brand Selector */}\r\n              <div className=\"mb-6\">\r\n                                 <SidebarItem\r\n                   icon={<Store size={20} className=\"text-slate-300\" />}\r\n                  text={\r\n                    selectedBrandId\r\n                      ? brands.find((b: IBrand) => b._id === selectedBrandId)?.name.replace(/_/g, \" \") || \"Select Brand\"\r\n                      : \"Your Brands\"\r\n                  }\r\n                  isExpanded={isExpanded}\r\n                  openIcon={<ChevronUp size={16} />}\r\n                  closeIcon={<ChevronDown size={16} />}\r\n                  isSelected={!!selectedBrandId}\r\n                  tooltipContent=\"Brand Management\"\r\n                  autoOpenOnSelect={false}\r\n                >\r\n                  {brands.map((brand: IBrand) => (\r\n                    <SidebarChild\r\n                      key={brand._id}\r\n                      path={`#`}\r\n                      text={brand.name.replace(/_/g, \" \")}\r\n                      onClick={() => handleBrandChange(brand._id)}\r\n                      isSelected={selectedBrandId === brand._id}\r\n                    />\r\n                  ))}\r\n                  <div className=\"mx-3 mt-2\">\r\n                    <button className=\"w-full flex items-center justify-center gap-2 px-3 py-2 text-xs text-slate-400 hover:text-slate-200 transition-colors duration-200 border border-dashed border-slate-600 rounded-lg hover:border-slate-400 hover:bg-slate-600/30\">\r\n                      <Plus size={14} />\r\n                      <span>Add Brand</span>\r\n                    </button>\r\n                  </div>\r\n                </SidebarItem>\r\n              </div>\r\n\r\n              {/* Main Navigation */}\r\n              <div className=\"space-y-1\">\r\n                {allDashboards.map((item: DashboardItem, index: number) => {\r\n                  const isAnySubItemSelected = item.subItems?.some((subItem) => location.pathname === subItem.path)\r\n                  const isMainItemActive = (location.pathname.startsWith(item.path) && item.path !== \"#\") || isAnySubItemSelected\r\n\r\n                  return (\r\n                    <div key={index}>\r\n                      <SidebarItem\r\n                        icon={item.icon}\r\n                        text={item.name}\r\n                        isExpanded={isExpanded}\r\n                        openIcon={<ChevronDown size={16} />}\r\n                        closeIcon={<ChevronDown size={16} />}\r\n                        isSelected={Boolean(isMainItemActive)}\r\n                        tooltipContent={item.name}\r\n                        onClick={() => {\r\n                          if (!isItemDisabled(item) && item.path && item.path !== \"#\" && !item.subItems) {\r\n                            navigate(item.path)\r\n                          }\r\n                        }}\r\n                        disabled={isItemDisabled(item)}\r\n                      >\r\n                        {item.subItems?.map((subItem, subIndex) => {\r\n                          const disabled = isItemDisabled(subItem) || false;\r\n                          return (\r\n                            <SidebarChild\r\n                              key={subIndex}\r\n                              path={subItem.path}\r\n                              text={subItem.name}\r\n                              isSelected={location.pathname === subItem.path}\r\n                              disabled={disabled}\r\n                            />\r\n                          );\r\n                        })}\r\n                      </SidebarItem>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </nav>\r\n          </ScrollArea>\r\n        </div>\r\n\r\n        {/* Footer Section */}\r\n        <div className={`flex-shrink-0 border-t border-slate-700/50 space-y-1 ${isExpanded ? \"p-3\" : \"p-2\"}`}>\r\n          <PricingButton isExpanded={isExpanded} handlePricing={handlePricing} />\r\n          <UserProfile isExpanded={isExpanded} user={user} />\r\n          <LogoutButton handleLogout={handleLogout} isExpanded={isExpanded} />\r\n        </div>\r\n      </div>\r\n      <PricingModal open={isPricingOpen} onOpenChange={setIsPricingOpen} />\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\n// Enhanced SidebarChild component\r\ninterface SidebarChildProps {\r\n  path: string\r\n  text: string\r\n  onClick?: () => void\r\n  disabled?: boolean\r\n  isSelected?: boolean\r\n  children?: React.ReactNode\r\n}\r\n\r\nfunction SidebarChild({\r\n  path,\r\n  text,\r\n  onClick,\r\n  disabled = false,\r\n  isSelected = false,\r\n  children,\r\n}: SidebarChildProps): JSX.Element {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const hasChildren = React.Children.count(children) > 0\r\n\r\n  const handleToggle = () => {\r\n    if (hasChildren) {\r\n      setIsOpen((prev) => !prev)\r\n    }\r\n  }\r\n\r\n  const isChildSelected = React.Children.toArray(children).some((child: any) => child?.props?.isSelected)\r\n  const isActive = isSelected || isChildSelected\r\n\r\n  useEffect(() => {\r\n    if (isActive) {\r\n      setIsOpen(true)\r\n    }\r\n  }, [isActive])\r\n\r\n  const baseClasses = `flex items-center text-xs w-full px-4 py-3 rounded-lg transition-all duration-200 ${\r\n    isActive \r\n      ? \"text-white bg-slate-600/30  shadow-lg\" \r\n      : \"text-slate-300 hover:text-white hover:bg-slate-700/50\"\r\n  } ${disabled ? \"cursor-not-allowed opacity-50\" : \"cursor-pointer\"}`\r\n\r\n  const content = (\r\n    <>\r\n      <div className=\"flex items-center justify-between w-full\">\r\n        <span className=\"font-medium capitalize\">{text}</span>\r\n        {hasChildren && <span className=\"ml-2\">{isOpen ? <ChevronUp size={14} /> : <ChevronDown size={14} />}</span>}\r\n      </div>\r\n    </>\r\n  )\r\n\r\n  const childItem = disabled ? (\r\n    <div className={baseClasses}>{content}</div>\r\n  ) : (\r\n    <NavLink\r\n      to={path}\r\n      className={baseClasses}\r\n      onClick={(e) => {\r\n        if (path === \"/#\" || !path || path === \"#\") {\r\n          e.preventDefault()\r\n        }\r\n        if (hasChildren) {\r\n          handleToggle()\r\n        }\r\n        if (onClick) {\r\n          onClick()\r\n        }\r\n      }}\r\n    >\r\n      {content}\r\n    </NavLink>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {childItem}\r\n      {isOpen && hasChildren && (\r\n        <div className=\"relative pl-4 mt-1\">\r\n          <div className=\"absolute top-0 left-4 w-px h-full bg-slate-600/50\" />\r\n          {children}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Enhanced SidebarItem component\r\ninterface SidebarItemProps {\r\n  icon?: React.ReactNode\r\n  text: string\r\n  isExpanded: boolean\r\n  openIcon?: React.ReactNode\r\n  closeIcon?: React.ReactNode\r\n  children?: React.ReactNode\r\n  isSelected: boolean\r\n  tooltipContent: string\r\n  onClick?: () => void\r\n  disabled?: boolean\r\n  autoOpenOnSelect?: boolean\r\n}\r\n\r\nfunction SidebarItem({\r\n  icon,\r\n  text,\r\n  isExpanded,\r\n  openIcon,\r\n  closeIcon,\r\n  children,\r\n  isSelected,\r\n  tooltipContent,\r\n  onClick,\r\n  disabled,\r\n  autoOpenOnSelect = true,\r\n}: SidebarItemProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const hasChildren = React.Children.count(children) > 0\r\n\r\n  const handleToggle = () => {\r\n    if (hasChildren) {\r\n      setIsOpen((prev) => !prev)\r\n    }\r\n  }\r\n\r\n  const isChildSelected = React.Children.toArray(children).some((child: any) => {\r\n    if (child?.props?.isSelected) return true\r\n    if (child?.props?.children) {\r\n      return React.Children.toArray(child.props.children).some((grandchild: any) => grandchild?.props?.isSelected)\r\n    }\r\n    return false\r\n  })\r\n\r\n  const isActive = isSelected || isChildSelected\r\n\r\n  useEffect(() => {\r\n    if (autoOpenOnSelect && isActive) {\r\n      setIsOpen(true)\r\n    }\r\n  }, [isActive, autoOpenOnSelect])\r\n\r\n  const content = (\r\n    <div\r\n      onClick={() => {\r\n        if (hasChildren) {\r\n          handleToggle()\r\n        }\r\n        if (!disabled && onClick) {\r\n          onClick()\r\n        }\r\n      }}\r\n      className={`flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 cursor-pointer group capitalize ${\r\n        isActive \r\n          ? \"text-white bg-slate-600/30 border-l-2 border-slate-400 shadow-lg\" \r\n          : \"text-slate-300 hover:text-white hover:bg-slate-700/50\"\r\n      } ${disabled ? \"cursor-not-allowed opacity-50\" : \"\"}`}\r\n    >\r\n             <span className={`mr-3 transition-colors duration-200 ${\r\n         isActive ? \"text-slate-300\" : \"text-slate-400 group-hover:text-slate-300\"\r\n       }`}>\r\n        {icon}\r\n      </span>\r\n      {isExpanded && <span className=\"text-sm font-medium flex-1 capitalize\">{text}</span>}\r\n      {isExpanded && hasChildren && (\r\n        <span className=\"text-slate-400 group-hover:text-white transition-colors\">\r\n          {isOpen ? openIcon : closeIcon}\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{content}</TooltipTrigger>\r\n          <TooltipContent side=\"right\" className=\"bg-slate-800 border-slate-700\">\r\n            <p className=\"font-medium\">{tooltipContent}</p>\r\n            {React.Children.map(children, (child) => (\r\n              <div className=\"relative\">{child}</div>\r\n            ))}\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        content\r\n      )}\r\n      {isOpen && isExpanded && (\r\n        <div className=\"relative pl-4 mt-1\">\r\n          <div className=\"absolute top-0 left-4 w-px h-full bg-slate-600/50\" />\r\n          {React.Children.map(children, (child) => (\r\n            <div>{child}</div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Enhanced UserProfile component\r\ninterface UserProfileProps {\r\n  isExpanded: boolean\r\n  user: any\r\n}\r\n\r\nfunction UserProfile({ isExpanded, user }: UserProfileProps) {\r\n  const navigate = useNavigate()\r\n  const userProfileContent = (\r\n    <div\r\n      onClick={() => navigate(\"/profile\")}\r\n      className={`flex items-center gap-3 py-2.5 rounded-lg text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all duration-200 cursor-pointer group ${isExpanded ? \"px-3\" : \"px-2\"}`}\r\n    >\r\n      <div className=\"p-1.5 rounded-lg bg-slate-700/50 group-hover:bg-blue-600/20 transition-colors duration-200\">\r\n        <User2Icon size={18} className=\"text-slate-400 group-hover:text-blue-400 transition-colors\" />\r\n      </div>\r\n      {isExpanded && (\r\n        <div className=\"flex-1\">\r\n          <span className=\"text-sm font-medium\">{user?.username || \"User\"}</span>\r\n          <div className=\"text-xs text-slate-400\">View Profile</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{userProfileContent}</TooltipTrigger>\r\n          <TooltipContent side=\"right\" className=\"bg-slate-800 border-slate-700\">\r\n            <p className=\"font-medium\">{user?.username || \"User\"}</p>\r\n            <p className=\"text-sm text-slate-400\">View Profile</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        userProfileContent\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Enhanced LogoutButton component\r\ninterface LogoutButtonProps {\r\n  handleLogout: () => void\r\n  isExpanded: boolean\r\n}\r\n\r\nfunction LogoutButton({ handleLogout, isExpanded }: LogoutButtonProps) {\r\n  const logoutContent = (\r\n    <div\r\n      onClick={handleLogout}\r\n      className={`flex items-center gap-3 py-2.5 rounded-lg text-slate-300 hover:bg-red-600/20 hover:text-red-400 transition-all duration-200 cursor-pointer group ${isExpanded ? \"px-3\" : \"px-2\"}`}\r\n    >\r\n      <div className=\"p-1.5 rounded-lg bg-slate-700/50 group-hover:bg-red-600/20 transition-colors duration-200\">\r\n        <LogOut size={18} className=\"text-slate-400 group-hover:text-red-400 transition-colors\" />\r\n      </div>\r\n      {isExpanded && (\r\n        <div className=\"flex-1\">\r\n          <span className=\"text-sm font-medium\">Logout</span>\r\n          <div className=\"text-xs text-slate-400\">Sign out</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{logoutContent}</TooltipTrigger>\r\n          <TooltipContent side=\"right\" className=\"bg-slate-800 border-slate-700\">\r\n            <p className=\"font-medium\">Logout</p>\r\n            <p className=\"text-sm text-slate-400\">Sign out</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        logoutContent\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Enhanced PricingButton component\r\ninterface pricingButtonProps {\r\n  handlePricing: () => void\r\n  isExpanded: boolean\r\n}\r\n\r\nfunction PricingButton({ handlePricing, isExpanded }: pricingButtonProps) {\r\n  const pricingContent = (\r\n    <div\r\n      onClick={handlePricing}\r\n      className={`flex items-center gap-3 py-2.5 rounded-lg text-slate-300 hover:bg-yellow-600/20 hover:text-yellow-400 transition-all duration-200 cursor-pointer group ${isExpanded ? \"px-3\" : \"px-2\"}`}\r\n    >\r\n      <div className=\"p-1.5 rounded-lg bg-slate-700/50 group-hover:bg-yellow-600/20 transition-colors duration-200\">\r\n        <Crown size={18} className=\"text-slate-400 group-hover:text-yellow-400 transition-colors\" />\r\n      </div>\r\n      {isExpanded && (\r\n        <div className=\"flex-1\">\r\n          <span className=\"text-sm font-medium\">Pricing</span>\r\n          <div className=\"text-xs text-slate-400\">View Plans</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {!isExpanded ? (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>{pricingContent}</TooltipTrigger>\r\n          <TooltipContent side=\"right\" className=\"bg-slate-800 border-slate-700\">\r\n            <p className=\"font-medium\">Pricing</p>\r\n            <p className=\"text-sm text-slate-400\">View Plans</p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      ) : (\r\n        pricingContent\r\n      )}\r\n    </div>\r\n  )\r\n}","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border bg-card text-card-foreground shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-3\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-4 pt-3\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n","// AdAccountMetrics.js\r\nimport React from 'react';\r\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {  HelpCircle } from 'lucide-react';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\r\nimport { Campaign, GoogleCampaign } from '../Dashboard/interfaces';\r\nimport { FacebookLogo, GoogleLogo } from '@/data/logo';\r\n\r\n\r\n// Define the type for each metric\r\nexport interface Metric {\r\n  label: string;\r\n  value: string | number;\r\n  tooltipContent?: string\r\n\r\n}\r\n\r\n// Define the props for the AdAccountMetrics component\r\ninterface AdAccountMetricsProps {\r\n  title?: string;\r\n  metrics: Metric[];\r\n  date: DateRange;\r\n  isLoading: boolean;\r\n  icon?: 'Facebook' | 'Google' | '';\r\n  tooltipContent?: string\r\n  errorMessage?: string;\r\n}\r\n\r\nexport interface DateRange {\r\n  from?: Date;\r\n  to?: Date;\r\n}\r\n\r\ninterface MetricCardProps extends Metric {\r\n  date: DateRange;\r\n  icon?: 'Facebook' | 'Google' | ''\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst MetricCardSkeleton: React.FC = () => {\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          <Skeleton className=\"w-4 h-4 rounded-full\" />\r\n          <Skeleton className=\"h-6 w-24\" />\r\n        </div>\r\n        <Skeleton className=\"h-4 w-32 mt-2\" />\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Skeleton className=\"h-8 w-20 mt-2\" />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n\r\n// MetricCard component to render each metric using ShadCN Card\r\nconst MetricCard: React.FC<MetricCardProps> = ({ label, value, date, icon, tooltipContent }) => {\r\n  const formatDate = (dateValue: Date | undefined) => {\r\n    if (!dateValue) return \"\";\r\n    if (typeof dateValue === \"string\") {\r\n      dateValue = new Date(dateValue); // Convert string to Date\r\n    }\r\n    return dateValue.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\r\n  };\r\n\r\n  return (\r\n    <Card className=\"transition-transform transform hover:scale-105 hover:border hover:border-blue-600\">\r\n      <CardHeader className='flex flex-col items-start justify-start'>\r\n        <div className=\"flex flex-row items-center gap-2\">\r\n          {icon === 'Facebook' ? (\r\n            <FacebookLogo width=\"1rem\" height=\"1rem\" />\r\n          ) : icon === 'Google' ? (\r\n            <GoogleLogo width=\"1rem\" height=\"1rem\" />\r\n          ) : null}\r\n\r\n          <div className=\"text-base font-medium\">{label}</div>\r\n\r\n          {tooltipContent && (\r\n            <TooltipProvider>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button className=\"p-0 m-0\" aria-label={`Info about ${label}`}>\r\n                    <HelpCircle className=\"w-3 h-3 text-gray-400\" />\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent className=\"w-64 p-0 bg-white text-black border shadow-sm\">\r\n                  <div className=\"p-2 font-semibold border-black\">{label}</div>\r\n                  <div className=\"w-full h-[0.5px] bg-black\" />\r\n                  <div className=\"p-2\">{tooltipContent}</div>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"text-xs text-gray-500 font-bold\">\r\n          {formatDate(date.from)}\r\n          {date.from && date.to ? ' - ' : ''}\r\n          {formatDate(date.to)}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <p className=\"text-lg lg:text-xl 2xl:text-2xl font-bold text-teal-800\">{value}</p>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n};\r\n\r\n\r\nconst AdAccountMetricsCard: React.FC<AdAccountMetricsProps> = ({ title, metrics = [], date, isLoading = false, icon, errorMessage }) => {\r\n  if (errorMessage && !isLoading) {\r\n    return (\r\n      <section className={title ? 'mt-10' : ''}>\r\n        <Card className=\"p-4\">\r\n          <CardHeader><h2 className=\"text-xl font-semibold flex items-center space-x-2\">\r\n            {title && (\r\n              <>\r\n                {icon === 'Facebook' ? (\r\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n                  </svg>\r\n                )}\r\n                <span>{title}</span>\r\n              </>\r\n            )}\r\n          </h2>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-red-600 text-sm\">{errorMessage}</p>\r\n          </CardContent>\r\n        </Card>\r\n      </section>\r\n    );\r\n  }\r\n  return (\r\n    <section className={title ? 'mt-10' : ''}>\r\n      <h2 className=\"text-xl font-semibold mb-4 flex items-center space-x-2\">\r\n        {title && (\r\n          <>\r\n            {icon === 'Facebook' ? (\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n              </svg>\r\n            ) : (\r\n              <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n                <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n              </svg>\r\n            )}\r\n            <span>{title}</span>\r\n          </>\r\n        )}\r\n      </h2>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\">\r\n        {isLoading\r\n          ? Array(metrics.length).fill(0).map((_, index) => <MetricCardSkeleton key={index} />)\r\n          : metrics.map((metric, index) => (\r\n            <>\r\n              <MetricCard key={index} label={metric.label} value={metric.value} date={date} icon={icon} tooltipContent={metric.tooltipContent} />\r\n            </>\r\n          ))\r\n        }\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default AdAccountMetricsCard;\r\n\r\nexport const CampaignGrid = ({ campaigns, isLoading, icon }: { campaigns: (Campaign | GoogleCampaign)[], isLoading: boolean, icon: string }) => {\r\n  return isLoading ? (\r\n    <div>Loading...</div>\r\n  ) : (\r\n    <Card className=\" p-4 my-4  hover:border hover:border-blue-600\">\r\n      <div className='flex items-center space-x-2 mb-3'>\r\n        {icon === 'Facebook' ? (\r\n          <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n            <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n          </svg>\r\n        ) : (\r\n          <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\">\r\n            <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n            <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n            <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n          </svg>\r\n        )}\r\n        <h3 className=\"text-lg font-semibold\">Campaign Performance</h3>\r\n      </div>\r\n\r\n      {/* Wrapper for scrolling */}\r\n      <div className=\"overflow-x-auto max-h-[280px] overflow-y-auto\">\r\n        <table className=\"min-w-full table-auto border-collapse bg-white shadow-md rounded-lg\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100 text-left text-sm font-medium text-gray-700 sticky top-0\">\r\n              <th className=\"px-6 py-3\">Campaign Name</th>\r\n              <th className=\"px-6 py-3 text-center\">Spend ()</th>\r\n              <th className=\"px-6 py-3 text-center\">ROAS</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {campaigns.map((campaign: Campaign | GoogleCampaign, index) => {\r\n              const spendValue = parseFloat(String(campaign.spend));\r\n              let roas = null;\r\n              if (typeof campaign.purchase_roas === 'string') {\r\n                roas = campaign.purchase_roas;\r\n              } else if (Array.isArray(campaign.purchase_roas)) {\r\n                roas = campaign.purchase_roas[0]?.value;\r\n              }\r\n              const roasValue = roas ? parseFloat(String(roas)) : null;\r\n\r\n              return (\r\n                <tr\r\n                  key={index}\r\n                  className={`border-t text-sm ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\r\n                    }`}\r\n                >\r\n                  <td className=\"px-6 py-3 line-clamp-2\" title={String(campaign.campaign_name)}>\r\n                    {campaign.campaign_name}\r\n                  </td>\r\n                  <td className=\"px-6 py-3 text-center text-gray-700 font-semibold\">\r\n                  {spendValue.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-6 py-3 text-center\">\r\n                    {roasValue !== null ? (\r\n                      <span className=\"inline-flex items-center rounded-full font-medium\">\r\n                        {roasValue.toFixed(2)}\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-gray-500\">N/A</span>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n","import * as React from \"react\"\r\nimport { ChevronLeftIcon, ChevronRightIcon } from \"@radix-ui/react-icons\"\r\nimport { DayPicker } from \"react-day-picker\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"px-3\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-xs font-medium\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell: \"text-muted-foreground rounded-md w-7 font-normal text-[0.6rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: cn(\r\n          \"relative p-0 text-center text-[0.7rem] focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\r\n          props.mode === \"range\"\r\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\r\n            : \"[&:has([aria-selected])]:rounded-md\",\r\n        ),\r\n        day: cn(buttonVariants({ variant: \"ghost\" }), \"h-7 w-7 p-0 font-normal aria-selected:opacity-100 text-[0.7rem]\"),\r\n        day_range_start: \"day-range-start\",\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-black text-white hover:bg-black hover:text-white focus:bg-black focus:text-white\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-gray-400 opacity-50  aria-selected:bg-gray-400/50 aria-selected:text-accent-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-accent-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-gray-100 aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: () => <ChevronLeftIcon className=\"h-4 w-4\" />,\r\n        IconRight: () => <ChevronRightIcon className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = \"Calendar\"\r\n\r\nexport { Calendar }\r\n","import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverAnchor = PopoverPrimitive.Anchor\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"start\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\r\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <CheckIcon className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface DateRange {\r\n  from?: string; // Primary date range start\r\n  to?: string;  // Primary date range end\r\n  compareFrom?: string; // Optional comparison date range start\r\n  compareTo?: string;   // Optional comparison date range end\r\n}\r\n\r\nconst initialState: DateRange = {\r\n  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString(),\r\n  to: new Date().toISOString(),\r\n};\r\n\r\n// Create the Redux slice\r\nconst dateSlice = createSlice({\r\n  name: \"date\",\r\n  initialState,\r\n  reducers: {\r\n    setDate: (state, action: PayloadAction<{\r\n      from?: string; \r\n      to?: string; \r\n      compareFrom?: string; \r\n      compareTo?: string;\r\n    }>) => {\r\n      // Update primary date range\r\n      state.from = action.payload.from;\r\n      state.to = action.payload.to;\r\n\r\n      // Update comparison date range\r\n      state.compareFrom = action.payload.compareFrom;\r\n      state.compareTo = action.payload.compareTo;\r\n    },\r\n    clearDate: (state) => {\r\n      // Reset to initial state\r\n      state.from = undefined;\r\n      state.to = undefined;\r\n      state.compareFrom = undefined;\r\n      state.compareTo = undefined;\r\n    },\r\n  },\r\n});\r\n\r\n// Export actions and reducer\r\nexport const { setDate, clearDate } = dateSlice.actions;\r\nexport default dateSlice.reducer;","import { useState, useMemo, useCallback } from \"react\"\r\nimport { createSelector } from \"@reduxjs/toolkit\"\r\nimport { CalendarIcon } from \"lucide-react\"\r\nimport { addDays,startOfMonth, endOfMonth, endOfYear, format, startOfYear, subDays, subMonths, subYears, parse } from \"date-fns\"\r\nimport type { DateRange } from \"react-day-picker\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { setDate, clearDate } from \"@/store/slices/DateSlice\"\r\nimport type { RootState } from \"@/store\"\r\n\r\ntype DatePickerWithRangeProps = {\r\n  defaultDate?: DateRange\r\n  resetToFirstPage?: () => void\r\n}\r\n\r\n// Memoized selector\r\nconst selectDateRange = createSelector(\r\n  (state: RootState) => state.date?.from,\r\n  (state: RootState) => state.date?.to,\r\n  (from, to) => ({\r\n    from,\r\n    to,\r\n  }),\r\n)\r\n\r\nexport function DatePickerWithRange({ defaultDate, resetToFirstPage }: DatePickerWithRangeProps) {\r\n  const dispatch = useDispatch()\r\n  const dateRange = useSelector(selectDateRange)\r\n\r\n  // Memoize the initial date\r\n  const initialDate = useMemo(() => {\r\n    if (dateRange) {\r\n      return {\r\n        from: dateRange.from ? new Date(dateRange.from) : undefined,\r\n        to: dateRange.to ? new Date(dateRange.to) : undefined,\r\n      }\r\n    }\r\n    return defaultDate\r\n      ? {\r\n          from: defaultDate.from ? new Date(defaultDate.from) : undefined,\r\n          to: defaultDate.to ? new Date(defaultDate.to) : undefined,\r\n        }\r\n      : undefined\r\n  }, [dateRange, defaultDate])\r\n\r\n  const [tempDate, setTempDate] = useState<DateRange | undefined>(initialDate)\r\n  const [compareDate, setCompareDate] = useState<DateRange | undefined>()\r\n  const [open, setOpen] = useState(false)\r\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null)\r\n  const [isCompareEnabled, setIsCompareEnabled] = useState(false)\r\n  const [calendarMode, setCalendarMode] = useState<'primary' | 'comparison'>('primary')\r\n\r\n  // Manual date input states\r\n  const [manualFromDate, setManualFromDate] = useState(\r\n    tempDate?.from ? format(tempDate.from, \"yyyy-MM-dd\") : \"\"\r\n  )\r\n  const [manualToDate, setManualToDate] = useState(\r\n    tempDate?.to ? format(tempDate.to, \"yyyy-MM-dd\") : \"\"\r\n  )\r\n  const [manualCompareFromDate, setManualCompareFromDate] = useState(\"\")\r\n  const [manualCompareToDate, setManualCompareToDate] = useState(\"\")\r\n\r\n  // Dates calculation\r\n  const dates = useMemo(() => {\r\n    const today = new Date()\r\n    const daysSinceSunday = today.getDay()\r\n    const startOfThisWeek = subDays(today, daysSinceSunday)\r\n    const endOfThisWeek = addDays(startOfThisWeek, 6)\r\n    const startOfThisMonth = new Date(today.getFullYear(), today.getMonth(), 1)\r\n    const endOfThisMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0)\r\n    const startOfLastWeek = subDays(startOfThisWeek, 7)\r\n    const endOfLastWeek = subDays(startOfThisWeek, 1)\r\n    const quarter = Math.floor(today.getMonth() / 3)\r\n    const startOfThisQuarter = new Date(today.getFullYear(), quarter * 3, 1)\r\n    const endOfThisQuarter = new Date(today.getFullYear(), (quarter + 1) * 3, 0)\r\n\r\n    const lastQuarter = today.getMonth() < 3 ? 3 : Math.floor((today.getMonth() - 3) / 3)\r\n    const lastQuarterYear = today.getMonth() < 3 ? today.getFullYear() - 1 : today.getFullYear()\r\n    const startOfLastQuarter = new Date(lastQuarterYear, lastQuarter * 3, 1)\r\n    const endOfLastQuarter = new Date(lastQuarterYear, (lastQuarter + 1) * 3, 0)\r\n\r\n    return {\r\n      today,\r\n      startOfThisWeek,\r\n      endOfThisWeek,\r\n      startOfThisMonth,\r\n      endOfThisMonth,\r\n      startOfLastWeek,\r\n      endOfLastWeek,\r\n      startOfThisQuarter,\r\n      endOfThisQuarter,\r\n      startOfLastQuarter,\r\n      endOfLastQuarter,\r\n    }\r\n  }, [])\r\n\r\n  // Date parsing utility\r\n  const parseManualDate = useCallback((dateString: string): Date | undefined => {\r\n    try {\r\n      const parsedDate = parse(dateString, \"yyyy-MM-dd\", new Date())\r\n      return !isNaN(parsedDate.getTime()) ? parsedDate : undefined\r\n    } catch {\r\n      return undefined\r\n    }\r\n  }, [])\r\n\r\n  // Handle manual date input for primary range\r\n  const handleManualDateInput = useCallback(() => {\r\n    const fromDate = parseManualDate(manualFromDate)\r\n    const toDate = parseManualDate(manualToDate)\r\n\r\n    if (fromDate && toDate) {\r\n      setTempDate({ from: fromDate, to: toDate })\r\n      setSelectedPreset(null)\r\n    }\r\n  }, [manualFromDate, manualToDate, parseManualDate])\r\n\r\n  // Handle manual date input for compare range\r\n  const handleManualCompareDateInput = useCallback(() => {\r\n    const fromDate = parseManualDate(manualCompareFromDate)\r\n    const toDate = parseManualDate(manualCompareToDate)\r\n\r\n    if (fromDate && toDate) {\r\n      setCompareDate({ from: fromDate, to: toDate })\r\n    }\r\n  }, [manualCompareFromDate, manualCompareToDate, parseManualDate])\r\n\r\n\r\n  // Preset range setter\r\n  const setPresetRange = useCallback((from: Date, to: Date) => {\r\n    if (calendarMode === 'primary') {\r\n      const newRange = { from, to }\r\n      setTempDate(newRange)\r\n      \r\n      // Update manual date inputs \r\n      setManualFromDate(format(from, \"yyyy-MM-dd\"))\r\n      setManualToDate(format(to, \"yyyy-MM-dd\"))\r\n    } else if (calendarMode === 'comparison') {\r\n      const newCompareRange = { from, to }\r\n      setCompareDate(newCompareRange)\r\n      \r\n      // Update comparison manual date inputs\r\n      setManualCompareFromDate(format(from, \"yyyy-MM-dd\"))\r\n      setManualCompareToDate(format(to, \"yyyy-MM-dd\"))\r\n    }\r\n    \r\n    setSelectedPreset(null)\r\n  }, [calendarMode])\r\n\r\n  // Presets\r\n  const presets = useMemo(\r\n    () => [\r\n      { label: \"Today\", fn: () => setPresetRange(dates.today, dates.today) },\r\n      { label: \"Yesterday\", fn: () => setPresetRange(subDays(dates.today, 1), subDays(dates.today, 1)) },\r\n      { label: \"This Week\", fn: () => setPresetRange(dates.startOfThisWeek, dates.endOfThisWeek) },\r\n      { label: \"Last 7 Days\", fn: () => setPresetRange(subDays(dates.today, 6), dates.today) },\r\n      { label: \"Last week\", fn: () => setPresetRange(dates.startOfLastWeek, dates.endOfLastWeek) },\r\n      { label: \"Last 30 Days\", fn: () => setPresetRange(subDays(dates.today, 29), dates.today) },\r\n      { label: \"This Month\", fn: () => setPresetRange(dates.startOfThisMonth, dates.today) },\r\n      { label: \"Last Month\", fn: () => setPresetRange(startOfMonth(subMonths(dates.today, 1)), endOfMonth(subMonths(dates.today, 1))) },\r\n      { label: \"Last 3 Months\", fn: () => setPresetRange(subMonths(dates.today, 3), dates.today) },\r\n      { label: \"Last 6 Months\", fn: () => setPresetRange(subMonths(dates.today, 6), dates.today) },\r\n      { label: \"This Quarter\", fn: () => setPresetRange(dates.startOfThisQuarter, dates.endOfThisQuarter) },\r\n      { label: \"Last Quarter\", fn: () => setPresetRange(dates.startOfLastQuarter, dates.endOfLastQuarter) },\r\n      { label: \"This Year\", fn: () => setPresetRange(new Date(new Date().getFullYear(), 0, 1), dates.today) },\r\n      { label: \"Last 365 Days\", fn: () => setPresetRange(subDays(dates.today, 365), dates.today) },\r\n      {\r\n        label: \"Last Year\",\r\n        fn: () => setPresetRange(subYears(startOfYear(new Date()), 1), subYears(endOfYear(new Date()), 1)),\r\n      },\r\n    ],\r\n    [dates, setPresetRange],\r\n  )\r\n\r\n  // Calendar select handler\r\n  const handleCalendarSelect = useCallback((range: DateRange | undefined) => {\r\n    if (calendarMode === 'primary') {\r\n      if (range?.from && !range.to) {\r\n        setTempDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to && range.from > range.to) {\r\n        setTempDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to) {\r\n        setTempDate(range)\r\n        // Update manual inputs for range\r\n        setManualFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualToDate(format(range.to, \"yyyy-MM-dd\"))\r\n      } else {\r\n        setTempDate(undefined)\r\n        // Clear manual inputs\r\n        setManualFromDate(\"\")\r\n        setManualToDate(\"\")\r\n      }\r\n      setSelectedPreset(null)\r\n    } else {\r\n      // Comparison date range handling\r\n      if (range?.from && !range.to) {\r\n        setCompareDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to && range.from > range.to) {\r\n        setCompareDate({ from: range.from, to: range.from })\r\n        // Update manual input for single date\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.from, \"yyyy-MM-dd\"))\r\n      } else if (range?.from && range?.to) {\r\n        setCompareDate(range)\r\n        // Update manual inputs for range\r\n        setManualCompareFromDate(format(range.from, \"yyyy-MM-dd\"))\r\n        setManualCompareToDate(format(range.to, \"yyyy-MM-dd\"))\r\n      } else {\r\n        setCompareDate(undefined)\r\n        // Clear manual inputs\r\n        setManualCompareFromDate(\"\")\r\n        setManualCompareToDate(\"\")\r\n      }\r\n    }\r\n  }, [calendarMode])\r\n\r\n  // Date range formatter\r\n  const formatDateRange = useCallback(\r\n    (range: DateRange | undefined) => {\r\n      if (!range) {\r\n        return defaultDate && defaultDate.from && defaultDate.to\r\n          ? `${format(defaultDate.from, \"LLL dd, y\")} - ${format(defaultDate.to, \"LLL dd, y\")}`\r\n          : \"Pick a date\"\r\n      }\r\n      if (range.from) {\r\n        if (range.to) {\r\n          return `${format(range.from, \"LLL dd, y\")} - ${format(range.to, \"LLL dd, y\")}`\r\n        }\r\n        return format(range.from, \"LLL dd, y\")\r\n      }\r\n      return \"Pick a date\"\r\n    },\r\n    [defaultDate],\r\n  )\r\n\r\n  // Clear date range\r\n  const clearDateRange = useCallback(() => {\r\n    setTempDate(undefined)\r\n    setCompareDate(undefined)\r\n    setSelectedPreset(null)\r\n    setIsCompareEnabled(false)\r\n    setManualFromDate(\"\")\r\n    setManualToDate(\"\")\r\n    setManualCompareFromDate(\"\")\r\n    setManualCompareToDate(\"\")\r\n    dispatch(clearDate())\r\n    if (resetToFirstPage) {\r\n      resetToFirstPage()\r\n    }\r\n    setOpen(false)\r\n  }, [dispatch, resetToFirstPage])\r\n\r\n  // Update handler\r\n  const handleUpdate = useCallback(() => {\r\n    if (tempDate) {\r\n      dispatch(\r\n        setDate({\r\n          from: tempDate.from ? tempDate.from.toISOString() : undefined,\r\n          to: tempDate.to ? tempDate.to.toISOString() : undefined,\r\n          compareFrom: isCompareEnabled && compareDate?.from ? compareDate.from.toISOString() : undefined,\r\n          compareTo: isCompareEnabled && compareDate?.to ? compareDate.to.toISOString() : undefined,\r\n        }),\r\n      )\r\n    }\r\n    if (resetToFirstPage) {\r\n      resetToFirstPage()\r\n    }\r\n    setOpen(false)\r\n  }, [dispatch, resetToFirstPage, tempDate, compareDate, isCompareEnabled])\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          className={cn(\r\n            \"w-[250px] justify-start text-left font-normal\",\r\n            !tempDate && !defaultDate && \"text-muted-foreground\",\r\n            \"hover:bg-muted/50 transition-colors rounded-lg border-muted-foreground/20\"\r\n          )}\r\n        >\r\n          <CalendarIcon className=\"mr-2 h-4 w-4 text-primary\" />\r\n          {formatDateRange(tempDate)}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-auto p-0 max-w-[650px]\" align=\"start\">\r\n        <div className=\"flex flex-col md:flex-row\">\r\n          {/* Preset selection column */}\r\n          <div className=\"border-r p-3 w-full md:w-[150px] overflow-y-auto bg-gradient-to-b from-muted/50 to-muted/10\" style={{ maxHeight: \"400px\" }}>\r\n            <div className=\"space-y-1.5\">\r\n              <h1 className=\"text-sm pb-2 font-semibold border-b border-border/50 text-black\">Quick Select</h1>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-1 gap-1\">\r\n                {presets.map((preset) => (\r\n                  <Button\r\n                    key={preset.label}\r\n                    size=\"sm\"\r\n                    variant={selectedPreset === preset.label ? \"default\" : \"ghost\"}\r\n                    className={cn(\r\n                      \"w-full justify-start text-xs font-normal h-8 rounded-md\",\r\n                      selectedPreset === preset.label \r\n                        ? \"bg-primary text-primary-foreground\" \r\n                        : \"hover:bg-muted text-muted-foreground hover:text-foreground\",\r\n                    )}\r\n                    onClick={() => {\r\n                      preset.fn()\r\n                      setSelectedPreset(preset.label)\r\n                    }}\r\n                  >\r\n                    {preset.label}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Calendar and input section */}\r\n          <div className=\"p-3 flex-grow\">\r\n            <div className=\"flex items-center space-x-2 mb-3\">\r\n              <Checkbox \r\n                id=\"compare-toggle\"\r\n                checked={isCompareEnabled}\r\n                onCheckedChange={() => setIsCompareEnabled(!isCompareEnabled)}\r\n                className=\"text-primary\"\r\n              />\r\n              <label htmlFor=\"compare-toggle\" className=\"text-sm font-medium\">Compare with another period</label>\r\n            </div>\r\n\r\n            {/* Date Range Inputs */}\r\n            <div className=\"grid gap-3 mb-3\">\r\n              <div className=\"space-y-2\">\r\n                <h2 className=\"text-xs font-medium text-muted-foreground\">Primary Range</h2>\r\n                <div className=\"flex space-x-2\">\r\n                  <div className=\"flex-1 relative\">\r\n                    <Input \r\n                      placeholder=\"YYYY-MM-DD\" \r\n                      value={manualFromDate}\r\n                      onChange={(e) => setManualFromDate(e.target.value)}\r\n                      onBlur={handleManualDateInput}\r\n                      onClick={() => {\r\n                        setCalendarMode('primary')\r\n                      }}\r\n                      className=\"h-8 pl-10 text-xs rounded-md\"\r\n                    />\r\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\r\n                  </div>\r\n                  <div className=\"flex-1 relative\">\r\n                    <Input \r\n                      placeholder=\"YYYY-MM-DD\" \r\n                      value={manualToDate}\r\n                      onChange={(e) => setManualToDate(e.target.value)}\r\n                      onBlur={handleManualDateInput}\r\n                      onClick={() => {\r\n                        setCalendarMode('primary')\r\n                      }}\r\n                      className=\"h-8 pl-10 text-xs rounded-md\"\r\n                    />\r\n                    <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Compare Date Range Inputs */}\r\n              {isCompareEnabled && (\r\n                <div className=\"space-y-2\">\r\n                  <h2 className=\"text-xs font-medium text-muted-foreground\">Comparison Range</h2>\r\n                  <div className=\"flex space-x-2\">\r\n                    <div className=\"flex-1 relative\">\r\n                      <Input \r\n                        placeholder=\"YYYY-MM-DD\" \r\n                        value={manualCompareFromDate}\r\n                        onChange={(e) => setManualCompareFromDate(e.target.value)}\r\n                        onBlur={handleManualCompareDateInput}\r\n                        onClick={() => {\r\n                          setCalendarMode('comparison')\r\n                        }}\r\n                        className=\"h-8 pl-10 text-xs rounded-md\"\r\n                      />\r\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">From</span>\r\n                    </div>\r\n                    <div className=\"flex-1 relative\">\r\n                      <Input \r\n                        placeholder=\"YYYY-MM-DD\" \r\n                        value={manualCompareToDate}\r\n                        onChange={(e) => setManualCompareToDate(e.target.value)}\r\n                        onBlur={handleManualCompareDateInput}\r\n                        onClick={() => {\r\n                          setCalendarMode('comparison')\r\n                        }}\r\n                        className=\"h-8 pl-10 text-xs rounded-md\"\r\n                      />\r\n                      <span className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">To</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n\r\n            {/* Calendar */}\r\n            <div className=\"border rounded-lg p-2 bg-background/80 shadow-sm\">\r\n              <Calendar\r\n                initialFocus\r\n                mode=\"range\"\r\n                defaultMonth={\r\n                  calendarMode === 'primary' \r\n                    ? (tempDate?.from || defaultDate?.from || dates.today)\r\n                    : (compareDate?.from || dates.today)\r\n                }\r\n                selected={calendarMode === 'primary' ? tempDate : compareDate}\r\n                onSelect={handleCalendarSelect}\r\n                numberOfMonths={2}\r\n                disabled={(date) =>\r\n                  date > new Date() || date < new Date(\"2023-01-01\")\r\n                }\r\n                className=\"rounded-md\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Action Buttons */}\r\n        <div className=\"border-t p-2 flex justify-end gap-2 bg-muted/10\">\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\" \r\n            onClick={clearDateRange}\r\n            className=\"rounded-md h-8 text-xs\"\r\n          >\r\n            Clear\r\n          </Button>\r\n          <Button \r\n            size=\"sm\" \r\n            onClick={handleUpdate}\r\n            className=\"rounded-md h-8 text-xs bg-primary hover:bg-primary/90\"\r\n          >\r\n            Apply\r\n          </Button>\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nexport type LocaleType = \"en-IN\" | \"en-US\";\r\n\r\n\r\ninterface LocaleState {\r\n  locale: LocaleType;\r\n}\r\n\r\n\r\nconst initialState: LocaleState = {\r\n  locale: \"en-IN\"\r\n};\r\n\r\n// Create the slice\r\nconst localeSlice = createSlice({\r\n  name: 'locale',\r\n  initialState,\r\n  reducers: {\r\n    setLocale: (state, action: PayloadAction<LocaleType>) => {\r\n      state.locale = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setLocale } = localeSlice.actions;\r\n\r\nexport default localeSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  type: 'success' | 'error' | 'info' | 'warning';\r\n  title: string;\r\n  message: string;\r\n  brandId?: string;\r\n  timestamp: string;\r\n  isRead: boolean;\r\n  actionUrl?: string;\r\n}\r\n\r\ninterface NotificationState {\r\n  notifications: Notification[];\r\n  unreadCount: number;\r\n  isSoundEnabled: boolean;\r\n}\r\n\r\nconst initialState: NotificationState = {\r\n  notifications: [],\r\n  unreadCount: 0,\r\n  isSoundEnabled: true,\r\n};\r\n\r\nconst notificationSlice = createSlice({\r\n  name: 'notifications',\r\n  initialState,\r\n  reducers: {\r\n    addNotification: (state, action: PayloadAction<Omit<Notification, 'id' | 'timestamp' | 'isRead'>>) => {\r\n      const newNotification: Notification = {\r\n        ...action.payload,\r\n        id: Date.now().toString(),\r\n        timestamp: new Date().toISOString(),\r\n        isRead: false,\r\n      };\r\n      \r\n      state.notifications.unshift(newNotification); \r\n      state.unreadCount += 1;\r\n      \r\n\r\n      if (state.notifications.length > 50) {\r\n        state.notifications = state.notifications.slice(0, 50);\r\n      }\r\n    },\r\n    \r\n    markAsRead: (state, action: PayloadAction<string>) => {\r\n      const notification = state.notifications.find(n => n.id === action.payload);\r\n      if (notification && !notification.isRead) {\r\n        notification.isRead = true;\r\n        state.unreadCount = Math.max(0, state.unreadCount - 1);\r\n      }\r\n    },\r\n    \r\n    markAllAsRead: (state) => {\r\n      state.notifications.forEach(notification => {\r\n        notification.isRead = true;\r\n      });\r\n      state.unreadCount = 0;\r\n    },\r\n    \r\n    removeNotification: (state, action: PayloadAction<string>) => {\r\n      const notification = state.notifications.find(n => n.id === action.payload);\r\n      if (notification && !notification.isRead) {\r\n        state.unreadCount = Math.max(0, state.unreadCount - 1);\r\n      }\r\n      state.notifications = state.notifications.filter(n => n.id !== action.payload);\r\n    },\r\n    \r\n    clearAllNotifications: (state) => {\r\n      state.notifications = [];\r\n      state.unreadCount = 0;\r\n    },\r\n    \r\n    toggleSound: (state) => {\r\n      state.isSoundEnabled = !state.isSoundEnabled;\r\n    },\r\n    \r\n    setSoundEnabled: (state, action: PayloadAction<boolean>) => {\r\n      state.isSoundEnabled = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  addNotification,\r\n  markAsRead,\r\n  markAllAsRead,\r\n  removeNotification,\r\n  clearAllNotifications,\r\n  toggleSound,\r\n  setSoundEnabled,\r\n} = notificationSlice.actions;\r\n\r\nexport default notificationSlice.reducer; ","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../store';\r\nimport { \r\n  markAsRead, \r\n  markAllAsRead, \r\n  removeNotification, \r\n  clearAllNotifications,\r\n  toggleSound \r\n} from '../../store/slices/NotificationSlice';\r\nimport { Bell, X, Volume2, VolumeX} from 'lucide-react';\r\nimport { Button } from '../ui/button';\r\nimport { Badge } from '../ui/badge';\r\nimport { ScrollArea } from '../ui/scroll-area';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\nconst HeaderNotificationDropdown: React.FC = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const dispatch = useDispatch();\r\n  \r\n  const { notifications, unreadCount, isSoundEnabled } = useSelector(\r\n    (state: RootState) => state.notifications\r\n  );\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleNotificationClick = (notificationId: string) => {\r\n    dispatch(markAsRead(notificationId));\r\n  };\r\n\r\n  const handleRemoveNotification = (e: React.MouseEvent, notificationId: string) => {\r\n    e.stopPropagation();\r\n    dispatch(removeNotification(notificationId));\r\n  };\r\n\r\n  const handleMarkAllAsRead = () => {\r\n    dispatch(markAllAsRead());\r\n  };\r\n\r\n  const handleClearAll = () => {\r\n    dispatch(clearAllNotifications());\r\n  };\r\n\r\n  const handleToggleSound = () => {\r\n    dispatch(toggleSound());\r\n  };\r\n\r\n  const getNotificationIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'success':\r\n        return '';\r\n      case 'error':\r\n        return '';\r\n      case 'warning':\r\n        return '';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getNotificationColor = (type: string) => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'border-green-200 bg-green-50';\r\n      case 'error':\r\n        return 'border-red-200 bg-red-50';\r\n      case 'warning':\r\n        return 'border-yellow-200 bg-yellow-50';\r\n      default:\r\n        return 'border-blue-200 bg-blue-50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      {/* Notification Bell Button */}\r\n      <Button\r\n        variant=\"outline\"\r\n        size=\"icon\"\r\n        className=\"relative transition-transform duration-300 ease-in-out hover:scale-105\"\r\n        onClick={() => setIsOpen(!isOpen)}\r\n      >\r\n        <Bell className=\"h-4 w-4\" />\r\n        {unreadCount > 0 && (\r\n          <Badge \r\n            variant=\"destructive\" \r\n            className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center\"\r\n          >\r\n            {unreadCount > 99 ? '99+' : unreadCount}\r\n          </Badge>\r\n        )}\r\n      </Button>\r\n\r\n      {/* Dropdown */}\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n            <h3 className=\"font-semibold text-gray-900\">Notifications</h3>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={handleToggleSound}\r\n                className=\"h-8 w-8\"\r\n              >\r\n                {isSoundEnabled ? (\r\n                  <Volume2 className=\"h-4 w-4\" />\r\n                ) : (\r\n                  <VolumeX className=\"h-4 w-4\" />\r\n                )}\r\n              </Button>\r\n              {unreadCount > 0 && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={handleMarkAllAsRead}\r\n                  className=\"text-xs\"\r\n                >\r\n                  Mark all read\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Notifications List */}\r\n          <ScrollArea className=\"max-h-96\">\r\n            {notifications.length === 0 ? (\r\n              <div className=\"p-4 text-center text-gray-500\">\r\n                No notifications\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-2\">\r\n                {notifications.map((notification) => (\r\n                  <div\r\n                    key={notification.id}\r\n                    className={`p-3 rounded-lg border mb-2 cursor-pointer transition-colors hover:bg-gray-50 group ${\r\n                      notification.isRead ? 'opacity-75' : ''\r\n                    } ${getNotificationColor(notification.type)}`}\r\n                    onClick={() => handleNotificationClick(notification.id)}\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-start gap-3 flex-1\">\r\n                        <span className=\"text-lg\">\r\n                          {getNotificationIcon(notification.type)}\r\n                        </span>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <h4 className={`font-medium text-sm ${\r\n                            notification.isRead ? 'text-gray-600' : 'text-gray-900'\r\n                          }`}>\r\n                            {notification.title}\r\n                          </h4>\r\n                          <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">\r\n                            {notification.message}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-400 mt-2\">\r\n                            {formatDistanceToNow(new Date(notification.timestamp), { \r\n                              addSuffix: true \r\n                            })}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={(e) => handleRemoveNotification(e, notification.id)}\r\n                        className=\"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                      >\r\n                        <X className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </ScrollArea>\r\n\r\n          {/* Footer */}\r\n          {notifications.length > 0 && (\r\n            <div className=\"flex items-center justify-between p-3 border-t border-gray-200\">\r\n              <span className=\"text-xs text-gray-500\">\r\n                {notifications.length} notification{notifications.length !== 1 ? 's' : ''}\r\n              </span>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={handleClearAll}\r\n                className=\"text-xs text-red-600 hover:text-red-700\"\r\n              >\r\n                Clear all\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeaderNotificationDropdown; ","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface FilterValue {\r\n  value: number;\r\n  operator: string;\r\n}\r\n\r\ninterface ConversionFiltersState {\r\n  [componentId: string]: {\r\n    [key: string]: FilterValue | null;\r\n  };\r\n}\r\n\r\nconst initialState: ConversionFiltersState = {};\r\n\r\nconst conversionFiltersSlice = createSlice({\r\n  name: 'conversionFilters',\r\n  initialState,\r\n  reducers: {\r\n    setFilter: (\r\n      state,\r\n      action: PayloadAction<{\r\n        componentId: string;\r\n        column: string;\r\n        filter: FilterValue | null;\r\n      }>\r\n    ) => {\r\n      const { componentId, column, filter } = action.payload;\r\n      \r\n      // Only create new reference if needed\r\n      if (!state[componentId]) {\r\n        state[componentId] = {};\r\n      }\r\n      \r\n      // Only update if value actually changed\r\n      if (JSON.stringify(state[componentId][column]) !== JSON.stringify(filter)) {\r\n        state[componentId][column] = filter;\r\n      }\r\n    },\r\n    \r\n    clearFilters: (state, action: PayloadAction<string>) => {\r\n      const componentId = action.payload;\r\n      // Only delete if filters exist\r\n      if (Object.keys(state[componentId] || {}).length > 0) {\r\n        state[componentId] = {};\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setFilter, clearFilters } = conversionFiltersSlice.actions;\r\nexport default conversionFiltersSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CampaignGroup {\r\n  id: string;\r\n  name: string;\r\n  campaigns: string[];\r\n  color: string;\r\n}\r\n\r\ninterface AccountCampaignGroups {\r\n  [accountId: string]: {\r\n    groups: CampaignGroup[];\r\n    selectedCampaigns: string[];\r\n    editingGroupId: string | null;\r\n    expandedGroups: string[];\r\n    isCreatingGroup: boolean;\r\n  };\r\n}\r\n\r\ninterface CampaignGroupsState {\r\n  accounts: AccountCampaignGroups;\r\n}\r\n\r\nconst defaultAccountState = {\r\n  groups: [],\r\n  selectedCampaigns: [],\r\n  editingGroupId: null,\r\n  expandedGroups: [],\r\n  isCreatingGroup: false\r\n};\r\n\r\n// Initialize account state if it doesn't exist\r\nconst initializeAccountState = (state: CampaignGroupsState, accountId: string) => {\r\n  if (!state.accounts) {\r\n    state.accounts = {};\r\n  }\r\n  if (!state.accounts[accountId]) {\r\n    state.accounts[accountId] = { ...defaultAccountState };\r\n  }\r\n};\r\n\r\nconst campaignGroupsSlice = createSlice({\r\n  name: 'campaignGroups',\r\n  initialState: { accounts: {} } as CampaignGroupsState,\r\n  reducers: {\r\n    createGroup: (state, action: PayloadAction<{ accountId: string; name: string; campaigns: string[]; color: string }>) => {\r\n      const { accountId, name, campaigns, color } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      \r\n      const newGroup: CampaignGroup = {\r\n        id: Date.now().toString(),\r\n        name,\r\n        campaigns,\r\n        color\r\n      };\r\n      state.accounts[accountId].groups.push(newGroup);\r\n      state.accounts[accountId].selectedCampaigns = [];\r\n      state.accounts[accountId].isCreatingGroup = false;\r\n    },\r\n    deleteGroup: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].groups = state.accounts[accountId].groups.filter(group => group.id !== groupId);\r\n      if (state.accounts[accountId].editingGroupId === groupId) {\r\n        state.accounts[accountId].editingGroupId = null;\r\n      }\r\n    },\r\n    addCampaignToGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\r\n      const { accountId, groupId, campaignName } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\r\n      if (group && !group.campaigns.includes(campaignName)) {\r\n        group.campaigns.push(campaignName);\r\n      }\r\n    },\r\n    removeCampaignFromGroup: (state, action: PayloadAction<{ accountId: string; groupId: string; campaignName: string }>) => {\r\n      const { accountId, groupId, campaignName } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const group = state.accounts[accountId].groups.find(g => g.id === groupId);\r\n      if (group) {\r\n        group.campaigns = group.campaigns.filter(c => c !== campaignName);\r\n      }\r\n    },\r\n    setSelectedCampaigns: (state, action: PayloadAction<{ accountId: string; campaigns: string[] }>) => {\r\n      const { accountId, campaigns } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].selectedCampaigns = campaigns;\r\n    },\r\n    toggleEditingGroup: (state, action: PayloadAction<{ accountId: string; groupId: string | null }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].editingGroupId = groupId;\r\n    },\r\n    toggleGroupExpansion: (state, action: PayloadAction<{ accountId: string; groupId: string }>) => {\r\n      const { accountId, groupId } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      const expandedGroups = state.accounts[accountId].expandedGroups;\r\n      if (expandedGroups.includes(groupId)) {\r\n        state.accounts[accountId].expandedGroups = expandedGroups.filter(id => id !== groupId);\r\n      } else {\r\n        state.accounts[accountId].expandedGroups.push(groupId);\r\n      }\r\n    },\r\n    setIsCreatingGroup: (state, action: PayloadAction<{ accountId: string; isCreating: boolean }>) => {\r\n      const { accountId, isCreating } = action.payload;\r\n      initializeAccountState(state, accountId);\r\n      state.accounts[accountId].isCreatingGroup = isCreating;\r\n      if (!isCreating) {\r\n        state.accounts[accountId].selectedCampaigns = [];\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  createGroup,\r\n  deleteGroup,\r\n  addCampaignToGroup,\r\n  removeCampaignFromGroup,\r\n  setSelectedCampaigns,\r\n  toggleEditingGroup,\r\n  toggleGroupExpansion,\r\n  setIsCreatingGroup\r\n} = campaignGroupsSlice.actions;\r\n\r\nexport default campaignGroupsSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CampaignLabelsState {\r\n  labels: {\r\n    [accountId: string]: {\r\n      [campaignId: string]: string[];\r\n    }\r\n  };\r\n  isAddingLabel: boolean;\r\n}\r\n\r\nconst initialState: CampaignLabelsState = {\r\n  labels: {},\r\n  isAddingLabel: false,\r\n};\r\n\r\nconst campaignLabelsSlice = createSlice({\r\n  name: 'campaignLabels',\r\n  initialState,\r\n  reducers: {\r\n    addLabelToCampaign: (\r\n      state, \r\n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\r\n    ) => {\r\n      const { accountId, campaignId, label } = action.payload;\r\n      \r\n      // Initialize account if it doesn't exist\r\n      if (!state.labels[accountId]) {\r\n        state.labels[accountId] = {};\r\n      }\r\n      \r\n      // Initialize campaign if it doesn't exist\r\n      if (!state.labels[accountId][campaignId]) {\r\n        state.labels[accountId][campaignId] = [];\r\n      }\r\n      \r\n      // Add label if it doesn't already exist\r\n      if (!state.labels[accountId][campaignId].includes(label)) {\r\n        state.labels[accountId][campaignId].push(label);\r\n      }\r\n    },\r\n    \r\n    removeLabelFromCampaign: (\r\n      state, \r\n      action: PayloadAction<{ accountId: string; campaignId: string; label: string }>\r\n    ) => {\r\n      const { accountId, campaignId, label } = action.payload;\r\n      \r\n      if (state.labels[accountId] && state.labels[accountId][campaignId]) {\r\n        state.labels[accountId][campaignId] = state.labels[accountId][campaignId]\r\n          .filter(l => l !== label);\r\n      }\r\n    },\r\n    \r\n    toggleAddingLabel: (state, action: PayloadAction<boolean>) => {\r\n      state.isAddingLabel = action.payload;\r\n    },\r\n    \r\n    // Optional: Add utility actions for account-level operations\r\n    clearAccountLabels: (state, action: PayloadAction<string>) => {\r\n      const accountId = action.payload;\r\n      if (state.labels[accountId]) {\r\n        state.labels[accountId] = {};\r\n      }\r\n    },\r\n    deleteLabel: (state, action: PayloadAction<{ accountId: string; label: string }>) => {\r\n      const { accountId, label } = action.payload;\r\n      \r\n      if (state.labels[accountId]) {\r\n        Object.keys(state.labels[accountId]).forEach((campaignId) => {\r\n          state.labels[accountId][campaignId] = state.labels[accountId][campaignId].filter(\r\n            (l) => l !== label\r\n          );\r\n          \r\n          // If the campaign has no more labels after deletion, remove it from the object\r\n          if (state.labels[accountId][campaignId].length === 0) {\r\n            delete state.labels[accountId][campaignId];\r\n          }\r\n        });\r\n    \r\n        // If the account has no more campaigns with labels, remove the account entry\r\n        if (Object.keys(state.labels[accountId]).length === 0) {\r\n          delete state.labels[accountId];\r\n        }\r\n      }\r\n    }\r\n,    \r\n    \r\n    // Optional: Copy labels between campaigns in the same account\r\n    copyLabels: (\r\n      state,\r\n      action: PayloadAction<{ \r\n        accountId: string; \r\n        sourceCampaignId: string; \r\n        targetCampaignId: string \r\n      }>\r\n    ) => {\r\n      const { accountId, sourceCampaignId, targetCampaignId } = action.payload;\r\n      \r\n      if (state.labels[accountId] && \r\n          state.labels[accountId][sourceCampaignId]) {\r\n        \r\n        if (!state.labels[accountId][targetCampaignId]) {\r\n          state.labels[accountId][targetCampaignId] = [];\r\n        }\r\n        \r\n        // Copy labels from source to target (avoiding duplicates)\r\n        state.labels[accountId][sourceCampaignId].forEach(label => {\r\n          if (!state.labels[accountId][targetCampaignId].includes(label)) {\r\n            state.labels[accountId][targetCampaignId].push(label);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport const { \r\n  addLabelToCampaign, \r\n  removeLabelFromCampaign, \r\n  toggleAddingLabel,\r\n  clearAccountLabels,\r\n  copyLabels,deleteLabel\r\n} = campaignLabelsSlice.actions;\r\n\r\nexport default campaignLabelsSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface TutorialState {\r\n  isFirstTimeLogin: boolean;\r\n  activeTutorial: string | null;\r\n  isTutorialActive: boolean;\r\n  activeTutorialStep: number;\r\n  tutorialQueue: string[]; // Array of tutorial IDs to play in sequence\r\n  completedTutorials: Record<string, boolean>;\r\n}\r\n\r\nconst initialState: TutorialState = {\r\n  isFirstTimeLogin: false,\r\n  activeTutorial: null,\r\n  isTutorialActive: false,\r\n  activeTutorialStep: 0,\r\n  tutorialQueue: [],\r\n  completedTutorials: {}\r\n};\r\n\r\nconst tutorialSlice = createSlice({\r\n  name: 'tutorial',\r\n  initialState,\r\n  reducers: {\r\n    // Set first-time login status\r\n    setFirstTimeLogin: (state, action: PayloadAction<boolean>) => {\r\n      state.isFirstTimeLogin = action.payload;\r\n    },\r\n\r\n    // Queue multiple tutorials to play in sequence\r\n    queueTutorials: (state, action: PayloadAction<string[]>) => {\r\n      // Filter out tutorials that are already in the queue or are the active tutorial\r\n      const newTutorials = action.payload.filter(id => \r\n        !state.tutorialQueue.includes(id) && id !== state.activeTutorial\r\n      );\r\n      \r\n      if (newTutorials.length === 0) {\r\n        console.log('No new tutorials to queue');\r\n        return;\r\n      }\r\n      \r\n      // Add new tutorials to the beginning of the queue\r\n      state.tutorialQueue = [...newTutorials, ...state.tutorialQueue];\r\n      console.log(`Queued tutorials: ${newTutorials.join(', ')}, Queue is now: ${state.tutorialQueue.join(', ')}`);\r\n      \r\n      // If no tutorial is active, start the first one in queue\r\n      if (!state.isTutorialActive && state.tutorialQueue.length > 0) {\r\n        state.activeTutorial = state.tutorialQueue[0];\r\n        state.tutorialQueue = state.tutorialQueue.slice(1);\r\n        state.isTutorialActive = true;\r\n        state.activeTutorialStep = 0;\r\n        console.log(`Auto-starting tutorial: ${state.activeTutorial}`);\r\n      }\r\n    },\r\n\r\n    // Start a specific tutorial\r\n    startTutorial: (state, action: PayloadAction<string>) => {\r\n      state.activeTutorial = action.payload;\r\n      state.isTutorialActive = true;\r\n      state.activeTutorialStep = 0;\r\n      console.log(`Manually starting tutorial: ${action.payload}`);\r\n    },\r\n\r\n    // Move to the next tutorial in queue\r\n    nextTutorial: (state) => {\r\n      // Mark current tutorial as completed if one is active\r\n      if (state.activeTutorial) {\r\n        state.completedTutorials[state.activeTutorial] = true;\r\n        console.log(`Completed tutorial: ${state.activeTutorial}`);\r\n      }\r\n      \r\n      console.log(`nextTutorial called, queue length: ${state.tutorialQueue.length}, queue: [${state.tutorialQueue.join(', ')}]`);\r\n      \r\n      // Check if there are more tutorials in queue\r\n      if (state.tutorialQueue.length > 0) {\r\n        state.activeTutorial = state.tutorialQueue[0];\r\n        state.tutorialQueue = state.tutorialQueue.slice(1);\r\n        state.activeTutorialStep = 0;\r\n        state.isTutorialActive = true;\r\n        \r\n        console.log(`Starting next tutorial: ${state.activeTutorial}, remaining queue: [${state.tutorialQueue.join(', ')}]`);\r\n      } else {\r\n        // No more tutorials, stop the tutorial mode\r\n        state.activeTutorial = null;\r\n        state.isTutorialActive = false;\r\n        \r\n        console.log('No more tutorials in queue, stopping tutorial mode');\r\n      }\r\n    },\r\n\r\n    // Update current step in the active tutorial\r\n    setTutorialStep: (state, action: PayloadAction<number>) => {\r\n      state.activeTutorialStep = action.payload;\r\n    },\r\n\r\n    // Stop current tutorial and clear queue\r\n    stopTutorial: (state) => {\r\n      // Mark current tutorial as completed if there is one active\r\n      if (state.activeTutorial) {\r\n        state.completedTutorials[state.activeTutorial] = true;\r\n        console.log(`Tutorial stopped, marking ${state.activeTutorial} as completed`);\r\n      }\r\n      \r\n      state.isTutorialActive = false;\r\n      state.activeTutorial = null;\r\n      state.tutorialQueue = [];\r\n      state.activeTutorialStep = 0;\r\n      \r\n      console.log('Tutorial stopped, queue cleared');\r\n    },\r\n\r\n    // Complete first-time login\r\n    completeFirstTimeLogin: (state) => {\r\n      state.isFirstTimeLogin = false;\r\n    },\r\n    \r\n    // Reset tutorial for a specific ID\r\n    resetTutorial: (state, action: PayloadAction<string>) => {\r\n      if (state.completedTutorials[action.payload]) {\r\n        state.completedTutorials[action.payload] = false;\r\n      }\r\n    },\r\n    \r\n    // Reset all tutorials\r\n    resetAllTutorials: (state) => {\r\n      state.completedTutorials = {};\r\n    }\r\n  }\r\n});\r\n\r\n// Export actions\r\nexport const { \r\n  setFirstTimeLogin, \r\n  queueTutorials,\r\n  startTutorial, \r\n  nextTutorial,\r\n  setTutorialStep,\r\n  stopTutorial, \r\n  completeFirstTimeLogin,\r\n  resetTutorial,\r\n  resetAllTutorials\r\n} = tutorialSlice.actions;\r\n\r\nexport default tutorialSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from '..';\r\n\r\ninterface TokenErrorState {\r\n  fbToken: boolean;\r\n  googleAnalyticsToken: boolean;\r\n  googleAdsToken: boolean;\r\n}\r\n\r\nconst initialState: TokenErrorState = {\r\n  fbToken: false,\r\n  googleAnalyticsToken: false,\r\n  googleAdsToken: false,\r\n};\r\n\r\n\r\nconst tokenErrorSlice = createSlice({\r\n  name: 'tokenError',\r\n  initialState,\r\n  reducers: {\r\n    setFbTokenError: (state, action: PayloadAction<boolean>) => {\r\n      state.fbToken = action.payload;\r\n    },\r\n    \r\n    setGoogleAnalyticsTokenError: (state, action: PayloadAction<boolean>) => {\r\n      state.googleAnalyticsToken = action.payload;\r\n    },\r\n    \r\n    setGoogleAdsTokenError: (state, action: PayloadAction<boolean>) => {\r\n      state.googleAdsToken = action.payload;\r\n    },\r\n    \r\n    resetAllTokenErrors: (state) => {\r\n      state.fbToken = false;\r\n      state.googleAnalyticsToken = false;\r\n      state.googleAdsToken = false;\r\n    },\r\n  },\r\n});\r\n\r\n\r\nexport const {\r\n  setFbTokenError,\r\n  setGoogleAnalyticsTokenError,\r\n  setGoogleAdsTokenError,\r\n  resetAllTokenErrors,\r\n} = tokenErrorSlice.actions;\r\n\r\n\r\nexport const selectFbTokenError = (state: RootState) => state.tokenError.fbToken;\r\nexport const selectGoogleAnalyticsTokenError = (state: RootState) => state.tokenError.googleAnalyticsToken;\r\nexport const selectGoogleAdsTokenError = (state: RootState) => state.tokenError.googleAdsToken;\r\nexport const selectAnyTokenError = (state: RootState) => \r\n  state.tokenError.fbToken || \r\n  state.tokenError.googleAnalyticsToken || \r\n  state.tokenError.googleAdsToken;\r\n\r\nexport default tokenErrorSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nexport interface FilterCondition {\r\n  column: string;\r\n  operator: '>' | '<' | '=' | '>=' | '<=';\r\n  value: string | number;\r\n}\r\n\r\ninterface InterestFilterState {\r\n  filters: {\r\n    [tableId: string]: FilterCondition[];\r\n  };\r\n}\r\n\r\nconst initialState: InterestFilterState = {\r\n  filters: {}\r\n};\r\n\r\nconst interestFilterSlice = createSlice({\r\n  name: 'interestFilter',\r\n  initialState,\r\n  reducers: {\r\n    addFilter: (state, action: PayloadAction<{ tableId: string; filter: FilterCondition }>) => {\r\n      const { tableId, filter } = action.payload;\r\n      const currentFilters = state.filters[tableId] || [];\r\n      state.filters = {\r\n        ...state.filters,\r\n        [tableId]: [...currentFilters, filter]\r\n      };\r\n    },\r\n    removeFilter: (state, action: PayloadAction<{ tableId: string; index: number }>) => {\r\n      const { tableId, index } = action.payload;\r\n      const currentFilters = state.filters[tableId] || [];\r\n      state.filters = {\r\n        ...state.filters,\r\n        [tableId]: currentFilters.filter((_, i) => i !== index)\r\n      };\r\n    },\r\n    updateFilter: (state, action: PayloadAction<{ tableId: string; index: number; filter: FilterCondition }>) => {\r\n      const { tableId, index, filter } = action.payload;\r\n      const currentFilters = state.filters[tableId] || [];\r\n      state.filters = {\r\n        ...state.filters,\r\n        [tableId]: currentFilters.map((f, i) => i === index ? filter : f)\r\n      };\r\n    },\r\n    clearFilters: (state, action: PayloadAction<{ tableId: string }>) => {\r\n      const { tableId } = action.payload;\r\n      state.filters = {\r\n        ...state.filters,\r\n        [tableId]: []\r\n      };\r\n    },\r\n  },\r\n});\r\n\r\nexport const { addFilter, removeFilter, updateFilter, clearFilters } = interestFilterSlice.actions;\r\nexport default interestFilterSlice.reducer; ","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface BrandFormState {\r\n  brandName: string;\r\n  connectedAccounts: Record<string, string[]>;\r\n  googleAdsConnections: {\r\n    clientId: string;\r\n    managerId?: string;\r\n  }[];\r\n  ga4Id: string;\r\n  fbAdId: string[];\r\n  shop: string;\r\n  shopifyAccessToken: string;\r\n}\r\n\r\nconst initialState: BrandFormState = {\r\n  brandName: '',\r\n  connectedAccounts: {},\r\n  googleAdsConnections: [],\r\n  ga4Id: '',\r\n  fbAdId: [],\r\n  shop: '',\r\n  shopifyAccessToken: ''\r\n};\r\n\r\nconst brandFormSlice = createSlice({\r\n  name: 'brandForm',\r\n  initialState,\r\n  reducers: {\r\n    setBrandFormData: (state, action: PayloadAction<BrandFormState>) => {\r\n      return { ...state, ...action.payload };\r\n    },\r\n    clearBrandFormData: () => {\r\n      return initialState;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setBrandFormData, clearBrandFormData } = brandFormSlice.actions;\r\nexport default brandFormSlice.reducer; ","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport conversionFiltersReducer from \"./slices/ConversionFilterSlice\";\r\nimport brandReducer from \"./slices/BrandSlice.ts\"\r\nimport userReducer from \"./slices/UserSlice.ts\"\r\nimport dateReducer from \"./slices/DateSlice.ts\"\r\nimport campaignGroupsReducer from './slices/CampaignGroupSlice.ts';\r\nimport campaignLabelsReducer from './slices/campaignLabelsSlice.ts';\r\nimport tutorialsReducer from \"./slices/TutorialSlice.ts\"\r\nimport localReducer from \"./slices/LocalSlice.ts\"\r\nimport tokenErrorReducer from './slices/TokenSllice';\r\nimport interestFilterReducer from './slices/interestFilterSlice';\r\nimport brandFormReducer from './slices/BrandFormSlice';\r\nimport notificationReducer from './slices/NotificationSlice';\r\n\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  conversionFilters: conversionFiltersReducer,\r\n  brand: brandReducer, \r\n  user: userReducer, \r\n  date: dateReducer,\r\n  campaignGroups: campaignGroupsReducer,\r\n  campaignLabels: campaignLabelsReducer,\r\n  tutorials: tutorialsReducer,\r\n  locale: localReducer,\r\n  tokenError: tokenErrorReducer,\r\n  interestFilter: interestFilterReducer,\r\n  brandForm: brandFormReducer,\r\n  notifications: notificationReducer,\r\n});\r\n\r\n\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  storage,\r\n  whitelist: [\"tokenError\", \"conversionFilters\", \"brand\", \"user\", \"date\" , \"campaignGroups\", \"campaignLabels\", \"tutorials\",\"locale\",\"interestFilter\", \"brandForm\", \"notifications\"], // Added notifications to persist\r\n  transforms: [\r\n    // Custom transform for notifications to limit storage size\r\n    {\r\n      in: (state: any) => {\r\n        if (state.notifications && state.notifications.notifications) {\r\n          // Keep only last 50 notifications and filter out old ones (older than 7 days)\r\n          const oneWeekAgo = new Date();\r\n          oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\r\n          \r\n          const filteredNotifications = state.notifications.notifications\r\n            .filter((notification: any) => new Date(notification.timestamp) > oneWeekAgo)\r\n            .slice(0, 50);\r\n          \r\n          return {\r\n            ...state,\r\n            notifications: {\r\n              ...state.notifications,\r\n              notifications: filteredNotifications,\r\n              unreadCount: filteredNotifications.filter((n: any) => !n.isRead).length\r\n            }\r\n          };\r\n        }\r\n        return state;\r\n      },\r\n      out: (state: any) => state\r\n    }\r\n  ]\r\n};\r\n\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\n\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [\"persist/PERSIST\", \"persist/REHYDRATE\", \"persist/REGISTER\"],\r\n      },\r\n    }),\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import { io, Socket } from 'socket.io-client';\r\nimport { store } from '../store';\r\nimport { addNotification } from '../store/slices/NotificationSlice';\r\n\r\n// Singleton socket instance\r\nlet socket: Socket | null = null;\r\nlet isConnecting = false;\r\nlet isConnected = false;\r\nlet currentUserId: string | null = null;\r\nlet currentBrandId: string | null = null;\r\nlet reconnectAttempts = 0;\r\nconst maxReconnectAttempts = 5;\r\nlet reconnectTimer: NodeJS.Timeout | null = null;\r\n\r\nconst baseURL = import.meta.env.PROD \r\n  ? import.meta.env.VITE_API_URL \r\n  : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\nconsole.log('Socket Service Environment:', {\r\n  PROD: import.meta.env.PROD,\r\n  baseURL: baseURL\r\n});\r\n\r\n// Initialize socket connection\r\nexport const initializeSocket = (userId?: string, brandId?: string) => {\r\n  console.log(' initializeSocket called with:', { userId, brandId, isConnecting, isConnected });\r\n  \r\n  // Prevent multiple simultaneous connections\r\n  if (isConnecting) {\r\n    console.log(' Connection already in progress, skipping...');\r\n    return;\r\n  }\r\n\r\n  // Update current user and brand\r\n  if (userId) currentUserId = userId;\r\n  if (brandId) currentBrandId = brandId;\r\n  \r\n  // If already connected, just handle room changes\r\n  if (socket?.connected && isConnected) {\r\n    console.log(' Socket already connected, handling room changes...');\r\n    handleRoomChanges();\r\n    return;\r\n  }\r\n\r\n  // Clean up existing socket if any\r\n  if (socket && !socket.connected) {\r\n    console.log(' Cleaning up disconnected socket...');\r\n    socket.removeAllListeners();\r\n    socket = null;\r\n    isConnected = false;\r\n  }\r\n\r\n  createSocketConnection();\r\n};\r\n\r\nconst createSocketConnection = () => {\r\n  console.log(' Creating new socket connection to:', baseURL);\r\n  console.log(' Connection details:', {\r\n    withCredentials: true,\r\n    transports: ['polling', 'websocket'],\r\n    timeout: 20000,\r\n    autoConnect: true,\r\n    reconnection: false,\r\n    forceNew: true\r\n  });\r\n  \r\n  isConnecting = true;\r\n  reconnectAttempts++;\r\n\r\n  // Clear any existing reconnect timer\r\n  if (reconnectTimer) {\r\n    clearTimeout(reconnectTimer);\r\n    reconnectTimer = null;\r\n  }\r\n\r\n  socket = io(baseURL, {\r\n    withCredentials: true,\r\n    transports: ['polling', 'websocket'], // Match server configuration\r\n    timeout: 20000,\r\n    autoConnect: true,\r\n    reconnection: false, // Handle reconnection manually\r\n    forceNew: true, // Force new connection\r\n    extraHeaders: {\r\n      // Ensure cookies are sent with the connection\r\n      'X-Requested-With': 'XMLHttpRequest'\r\n    }\r\n  });\r\n\r\n  // Connection successful\r\n  socket.on('connect', () => {\r\n    console.log(' Socket connected successfully:', socket?.id);\r\n    isConnecting = false;\r\n    isConnected = true;\r\n    reconnectAttempts = 0;\r\n    \r\n    handleRoomChanges();\r\n  });\r\n\r\n  // Connection failed\r\n  socket.on('connect_error', (error) => {\r\n    console.error(' Socket connection error:', error);\r\n    isConnecting = false;\r\n    isConnected = false;\r\n    \r\n    handleConnectionError(error);\r\n  });\r\n\r\n  // Disconnected\r\n  socket.on('disconnect', (reason) => {\r\n    console.log(' Socket disconnected, reason:', reason);\r\n    isConnecting = false;\r\n    isConnected = false;\r\n    \r\n    // Only attempt reconnection for certain disconnect reasons\r\n    if (reason === 'io server disconnect') {\r\n      console.log('Server initiated disconnect, not reconnecting');\r\n      return;\r\n    }\r\n    \r\n    attemptReconnection();\r\n  });\r\n\r\n  // Socket errors\r\n  socket.on('error', (error) => {\r\n    console.error(' Socket error:', error);\r\n  });\r\n\r\n  // Setup event listeners\r\n  setupEventListeners();\r\n};\r\n\r\nconst handleConnectionError = (error: any) => {\r\n  console.error('Connection error details:', {\r\n    message: error.message,\r\n    name: error.name,\r\n    type: error.type,\r\n    code: error.code\r\n  });\r\n  \r\n  // Check for authentication errors\r\n  if (error.message?.includes('Authentication') || error.message?.includes('Unauthorized')) {\r\n    console.error(' Authentication failed for socket connection');\r\n    \r\n    // Show user-friendly notification\r\n    store.dispatch(addNotification({\r\n      type: 'error',\r\n      title: 'Connection Error',\r\n      message: 'Authentication failed. Please log in again.'\r\n    }));\r\n    \r\n    // Don't attempt reconnection for auth errors\r\n    return;\r\n  }\r\n  \r\n  // Check for server errors\r\n  if (error.message?.includes('server error')) {\r\n    console.error(' Server error detected - check server logs');\r\n  }\r\n  \r\n  // Check for network errors\r\n  if (error.message?.includes('Network Error') || error.message?.includes('timeout')) {\r\n    console.error(' Network error detected');\r\n  }\r\n  \r\n  attemptReconnection();\r\n};\r\n\r\nconst attemptReconnection = () => {\r\n  if (reconnectAttempts >= maxReconnectAttempts) {\r\n    console.error(' Max reconnection attempts reached, giving up');\r\n    return;\r\n  }\r\n  \r\n  const delay = Math.min(1000 * Math.pow(2, reconnectAttempts), 30000); // Exponential backoff\r\n  console.log(` Attempting reconnection in ${delay}ms (attempt ${reconnectAttempts + 1}/${maxReconnectAttempts})`);\r\n  \r\n  reconnectTimer = setTimeout(() => {\r\n    if (!isConnected && !isConnecting) {\r\n      createSocketConnection();\r\n    }\r\n  }, delay);\r\n};\r\n\r\nconst handleRoomChanges = () => {\r\n  if (!socket?.connected) {\r\n    console.warn(' Socket not connected, cannot handle room changes');\r\n    return;\r\n  }\r\n\r\n  // Join user room if userId is provided\r\n  if (currentUserId) {\r\n    console.log(' Joining user room:', currentUserId);\r\n    socket.emit('join-user-room', currentUserId);\r\n  }\r\n  \r\n  // Join brand room if brandId is provided\r\n  if (currentBrandId) {\r\n    console.log(' Joining brand room:', currentBrandId);\r\n    socket.emit('join-brand-room', currentBrandId);\r\n  }\r\n};\r\n\r\nconst setupEventListeners = () => {\r\n  if (!socket) return;\r\n\r\n  // Listen for brand-specific notifications\r\n  socket.on('brand-notification', (data) => {\r\n    console.log(' Brand notification received:', data);\r\n    handleNotification(data);\r\n  });\r\n\r\n  // Listen for user-specific notifications\r\n  socket.on('notification', (data) => {\r\n    console.log(' User notification received:', data);\r\n    handleNotification(data);\r\n  });\r\n\r\n  // Ping-pong for connection health\r\n  socket.on('pong', (data) => {\r\n    console.log(' Pong received:', data);\r\n  });\r\n};\r\n\r\n// Handle incoming notifications\r\nconst handleNotification = (data: any) => {\r\n  const { type, data: notificationData } = data;\r\n  \r\n  let notificationType: 'success' | 'error' | 'info' | 'warning' = 'info';\r\n  let title = 'Notification';\r\n  let message = 'You have a new notification';\r\n\r\n  // Map notification types to UI-friendly formats\r\n  switch (type) {\r\n    case 'metrics-calculation-complete':\r\n      notificationType = notificationData.success ? 'success' : 'error';\r\n      title = 'Metrics Calculation';\r\n      message = notificationData.success \r\n        ? 'Metrics calculation completed successfully!' \r\n        : `Calculation failed: ${notificationData.message}`;\r\n      break;\r\n      \r\n    case 'metrics-calculation-error':\r\n      notificationType = 'error';\r\n      title = 'Calculation Error';\r\n      message = `Error calculating metrics: ${notificationData.error}`;\r\n      break;\r\n      \r\n    default:\r\n      title = 'System Notification';\r\n      message = notificationData.message || 'You have a new notification';\r\n  }\r\n\r\n  // Add notification to Redux store\r\n  store.dispatch(addNotification({\r\n    type: notificationType,\r\n    title,\r\n    message,\r\n    brandId: notificationData.brandId,\r\n    actionUrl: notificationData.actionUrl,\r\n  }));\r\n\r\n  // Play notification sound if enabled\r\n  playNotificationSound();\r\n};\r\n\r\n// Play notification sound\r\nconst playNotificationSound = () => {\r\n  const { isSoundEnabled } = store.getState().notifications;\r\n  \r\n  if (isSoundEnabled) {\r\n    try {\r\n      const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n      \r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      \r\n      oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\r\n      oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);\r\n      \r\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\r\n      \r\n      oscillator.start(audioContext.currentTime);\r\n      oscillator.stop(audioContext.currentTime + 0.2);\r\n    } catch (error) {\r\n      console.warn(' Could not play notification sound:', error);\r\n    }\r\n  }\r\n};\r\n\r\n// Join brand room\r\nexport const joinBrandRoom = (brandId: string) => {\r\n  console.log(' joinBrandRoom called with:', brandId);\r\n  \r\n  currentBrandId = brandId;\r\n  \r\n  if (socket?.connected && isConnected) {\r\n    console.log(` Emitting join-brand-room for brand: ${brandId}`);\r\n    socket.emit('join-brand-room', brandId);\r\n  } else {\r\n    console.warn(' Socket not connected, will join brand room after connection');\r\n  }\r\n};\r\n\r\n// Leave brand room\r\nexport const leaveBrandRoom = (brandId: string) => {\r\n  if (socket?.connected && isConnected) {\r\n    socket.emit('leave-brand-room', brandId);\r\n    console.log(` Left brand room: ${brandId}`);\r\n  }\r\n};\r\n\r\n// Disconnect socket\r\nexport const disconnectSocket = () => {\r\n  console.log(' Disconnecting socket...');\r\n  \r\n  if (reconnectTimer) {\r\n    clearTimeout(reconnectTimer);\r\n    reconnectTimer = null;\r\n  }\r\n  \r\n  if (socket) {\r\n    socket.removeAllListeners();\r\n    socket.disconnect();\r\n    socket = null;\r\n  }\r\n  \r\n  isConnecting = false;\r\n  isConnected = false;\r\n  currentUserId = null;\r\n  currentBrandId = null;\r\n  reconnectAttempts = 0;\r\n};\r\n\r\n// Check if socket is connected\r\nexport const isSocketConnected = (): boolean => {\r\n  return !!(socket?.connected && isConnected);\r\n};\r\n\r\n// Send ping to test connection\r\nexport const pingSocket = () => {\r\n  if (socket?.connected && isConnected) {\r\n    socket.emit('ping');\r\n  }\r\n};\r\n\r\n// Get socket instance (for advanced usage)\r\nexport const getSocket = (): Socket | null => {\r\n  return socket;\r\n};\r\n\r\n// Get connection status\r\nexport const getConnectionStatus = () => {\r\n  return {\r\n    isConnected: isConnected,\r\n    isConnecting: isConnecting,\r\n    socketId: socket?.id || null,\r\n    currentUserId: currentUserId,\r\n    currentBrandId: currentBrandId,\r\n    reconnectAttempts: reconnectAttempts\r\n  };\r\n};","import { useEffect, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { \r\n  initializeSocket, \r\n  joinBrandRoom, \r\n  leaveBrandRoom, \r\n  disconnectSocket, \r\n  isSocketConnected \r\n} from '../services/socketService';\r\n\r\nexport const useSocketConnection = () => {\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId);\r\n  \r\n  // Refs to track previous values and prevent multiple calls\r\n  const previousBrandId = useRef<string | null>(null);\r\n  const previousUserId = useRef<string | null>(null);\r\n  const isInitializedRef = useRef(false);\r\n  const isInitializingRef = useRef(false);\r\n\r\n  // Debug logging\r\n  console.log('useSocketConnection - Current state:', {\r\n    hasUser: !!user,\r\n    userId: user?.id,\r\n    selectedBrandId,\r\n    previousBrandId: previousBrandId.current,\r\n    isInitialized: isInitializedRef.current,\r\n    isInitializing: isInitializingRef.current,\r\n    isSocketConnected: isSocketConnected()\r\n  });\r\n\r\n  // Main socket initialization effect\r\n  useEffect(() => {\r\n    const currentUserId = user?.id;\r\n    \r\n    // If no user, cleanup and return\r\n    if (!currentUserId) {\r\n      console.log(' No user ID available, cleaning up socket connection');\r\n      if (isInitializedRef.current) {\r\n        disconnectSocket();\r\n        isInitializedRef.current = false;\r\n        isInitializingRef.current = false;\r\n        previousUserId.current = null;\r\n        previousBrandId.current = null;\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Check if user changed\r\n    const userChanged = previousUserId.current !== currentUserId;\r\n    const isFirstTime = !isInitializedRef.current;\r\n    const socketNotConnected = !isSocketConnected();\r\n\r\n    // Only initialize if:\r\n    // 1. First time with valid user\r\n    // 2. User changed  \r\n    // 3. Socket is not connected and not currently initializing\r\n    const shouldInitialize = (isFirstTime || userChanged || socketNotConnected) && !isInitializingRef.current;\r\n\r\n    if (shouldInitialize) {\r\n      console.log(' Initializing socket connection for user:', currentUserId, 'brand:', selectedBrandId);\r\n      console.log(' Initialization reason:', { isFirstTime, userChanged, socketNotConnected });\r\n      \r\n      isInitializingRef.current = true;\r\n      \r\n      try {\r\n        initializeSocket(currentUserId, selectedBrandId || undefined);\r\n        isInitializedRef.current = true;\r\n        previousUserId.current = currentUserId;\r\n        previousBrandId.current = selectedBrandId;\r\n      } catch (error) {\r\n        console.error(' Error initializing socket connection:', error);\r\n        isInitializingRef.current = false;\r\n      }\r\n    } else {\r\n      console.log(' Skipping socket initialization:', { \r\n        shouldInitialize, \r\n        isFirstTime, \r\n        userChanged, \r\n        socketNotConnected, \r\n        isInitializing: isInitializingRef.current \r\n      });\r\n    }\r\n\r\n    // Reset initializing flag after a short delay to allow connection to establish\r\n    const resetInitializingFlag = setTimeout(() => {\r\n      isInitializingRef.current = false;\r\n    }, 1000);\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      clearTimeout(resetInitializingFlag);\r\n      // Only disconnect on unmount, not on re-renders\r\n    };\r\n  }, [user?.id]); // Only depend on user.id, not selectedBrandId\r\n\r\n  // Separate effect for brand changes\r\n  useEffect(() => {\r\n    const currentBrandId = selectedBrandId;\r\n    const brandChanged = previousBrandId.current !== currentBrandId;\r\n    \r\n    // Only handle brand changes if socket is connected and brand actually changed\r\n    if (brandChanged && isSocketConnected() && isInitializedRef.current) {\r\n      console.log(' Brand changed from', previousBrandId.current, 'to', currentBrandId);\r\n      \r\n      try {\r\n        // Leave previous brand room if it exists\r\n        if (previousBrandId.current) {\r\n          console.log(' Leaving previous brand room:', previousBrandId.current);\r\n          leaveBrandRoom(previousBrandId.current);\r\n        }\r\n        \r\n        // Join new brand room if it exists\r\n        if (currentBrandId) {\r\n          console.log(' Joining new brand room:', currentBrandId);\r\n          joinBrandRoom(currentBrandId);\r\n        }\r\n        \r\n        // Update the ref\r\n        previousBrandId.current = currentBrandId;\r\n      } catch (error) {\r\n        console.error(' Error handling brand change:', error);\r\n      }\r\n    } else if (brandChanged) {\r\n      console.log(' Skipping brand change:', { \r\n        brandChanged, \r\n        isSocketConnected: isSocketConnected(), \r\n        isInitialized: isInitializedRef.current \r\n      });\r\n    }\r\n  }, [selectedBrandId]);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      try {\r\n        console.log(' Component unmounting, disconnecting socket');\r\n        disconnectSocket();\r\n        isInitializedRef.current = false;\r\n        isInitializingRef.current = false;\r\n        previousUserId.current = null;\r\n        previousBrandId.current = null;\r\n      } catch (error) {\r\n        console.error(' Error disconnecting socket on unmount:', error);\r\n      }\r\n    };\r\n  }, []); // Empty dependency array - only run on mount/unmount\r\n\r\n  return {\r\n    isConnected: isSocketConnected(),\r\n  };\r\n};","import { Settings, RefreshCw} from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { DatePickerWithRange } from \"./DatePickerWithRange\";\r\nimport { Popover, PopoverTrigger, PopoverContent } from \"@/components/ui/popover\";\r\n// import HeaderTutorialButton from \"../Tutorial/HeaderTutorialButton\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setLocale } from \"@/store/slices/LocalSlice\";\r\nimport { RootState } from \"@/store\";\r\nimport HeaderNotificationDropdown from \"./HeaderNotificationDropdown\";\r\nimport { useSocketConnection } from \"../../hooks/useSocketConnection\";\r\n\r\ninterface HeaderProps {\r\n  title: string;\r\n  Icon: React.ComponentType<{ className?: string }>;\r\n  showDatePicker?: boolean;\r\n  showSettings?: boolean;\r\n  showRefresh?: boolean;\r\n  isLoading?: boolean;\r\n  handleManualRefresh?: () => void;\r\n}\r\n \r\nexport default function Header({\r\n  title,\r\n  Icon,\r\n  showDatePicker = false,\r\n  showSettings = false,\r\n  showRefresh = false,\r\n  isLoading = false,\r\n  handleManualRefresh,\r\n}: HeaderProps) {\r\n\r\n  const dispatch = useDispatch();\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n  // Initialize socket connection for notifications\r\n  useSocketConnection();\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-40 bg-white border-b px-6 py-3 transition-all duration-300\">\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* Left Section */}\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"rounded-lg bg-secondary p-2 transition-transform duration-300 ease-in-out hover:scale-110\">\r\n            <Icon className=\"h-6 w-6 text-secondary-foreground\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-secondary-foreground to-primary\">\r\n            {title}\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Right Section */}\r\n        <div className=\"flex flex-row items-center space-x-2\">\r\n          {showDatePicker && (\r\n            <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n              <DatePickerWithRange\r\n                defaultDate={{\r\n                  from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                  to: new Date()\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showRefresh && (\r\n            <div className=\"md:flex items-center hidden\">\r\n              <Button onClick={handleManualRefresh} disabled={isLoading} className=\"flex items-center\">\r\n                <RefreshCw className={`h-4 w-4 ${isLoading ? \"animate-spin\" : \"\"}`} />\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Notification Dropdown */}\r\n          <HeaderNotificationDropdown />\r\n\r\n\r\n          {/* Rest of the component remains the same */}\r\n          {showSettings && (\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" size=\"icon\">\r\n                  <Settings className=\"h-4 w-4\" />\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent>\r\n                <div className=\"grid gap-2\">\r\n                  <h3 className=\"font-medium\">Locale Settings</h3>\r\n                  <div className=\"flex flex-col space-y-2\">\r\n                    <label className=\"cursor-pointer\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"locale\"\r\n                        value=\"en-IN\"\r\n                        checked={locale === \"en-IN\"}\r\n                        onChange={() => dispatch(setLocale(\"en-IN\"))}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Indian Formatting\r\n                    </label>\r\n                    <label className=\"cursor-pointer\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"locale\"\r\n                        value=\"en-US\"\r\n                        checked={locale === \"en-US\"}\r\n                        onChange={() => dispatch(setLocale(\"en-US\"))}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Western Formatting\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </PopoverContent>\r\n            </Popover>\r\n          )}\r\n          {/* <HeaderTutorialButton /> */}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}","import { useEffect, useState } from \"react\"\r\nimport { CheckCircle } from \"lucide-react\"\r\n\r\nexport default function Loader({ isLoading }: { isLoading: boolean }) {\r\n  const [progress, setProgress] = useState(0)\r\n  const [messageIndex, setMessageIndex] = useState(0)\r\n  const [isComplete, setIsComplete] = useState(false)\r\n\r\n  // Loading messages\r\n  const loadingMessages = [\r\n    \"Just a moment, we're getting things ready...\",\r\n    \"Almost there, hang tight!\",\r\n    \"Brewing some magic for you...\",\r\n    \"The best things are worth waiting for...\",\r\n    \"Gathering all the awesome stuff...\",\r\n    \"Just putting on the finishing touches...\",\r\n    \"We're working our digital magic...\",\r\n    \"Your experience is being crafted...\",\r\n    \"Just a few more seconds of patience...\",\r\n    \"You're going to love what's coming...\",\r\n  ]\r\n\r\n  useEffect(() => {\r\n    // Progress bar animation - stops at 95% until loading is complete\r\n    const progressInterval = setInterval(() => {\r\n      setProgress((prev) => {\r\n        // Cap at 95% during loading\r\n        if (isLoading && prev >= 95) {\r\n          return 95;\r\n        }\r\n        \r\n        // Jump to 100% when loading completes\r\n        if (!isLoading && prev < 100) {\r\n          clearInterval(progressInterval);\r\n          setProgress(100);\r\n          setTimeout(() => {\r\n            setIsComplete(true);\r\n          }, 300);\r\n          return 100;\r\n        }\r\n        \r\n        // Normal progress increase\r\n        if (prev < 95) {\r\n          return prev + 1;\r\n        }\r\n        \r\n        return prev;\r\n      });\r\n    }, 80);\r\n\r\n\r\n    // Message changing animation\r\n    const messageInterval = setInterval(() => {\r\n      if (!isComplete) {\r\n        setMessageIndex((prev) => (prev + 1) % loadingMessages.length);\r\n      }\r\n    }, 2500);\r\n\r\n    return () => {\r\n      clearInterval(progressInterval);\r\n      clearInterval(messageInterval);\r\n    };\r\n  }, [isLoading, isComplete]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center bg-white text-black text-center px-4 z-50 min-h-screen\">\r\n      {/* Animated Text */}\r\n      <div className=\"h-20 flex items-center justify-center mb-6 overflow-hidden\">\r\n        <h3 key={messageIndex} className=\"text-xl font-medium text-black/80 animate-fadeIn\">\r\n          {isComplete ? \"Ready!\" : loadingMessages[messageIndex]}\r\n        </h3>\r\n      </div>\r\n\r\n      {/* Progress Bar Container */}\r\n      <div className=\"relative w-full max-w-md mx-auto mb-4\">\r\n        <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-primary rounded-full transition-all duration-300 ease-out\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Percentage */}\r\n      <div className=\"flex justify-between items-center text-sm text-gray-500 font-mono mb-8 w-full max-w-md\">\r\n        <span>Loading</span>\r\n        <span>{progress}%</span>\r\n      </div>\r\n\r\n      {/* Success Message */}\r\n      {isComplete && (\r\n        <div className=\"mt-6 animate-fadeIn\">\r\n          <div className=\"text-xl font-medium text-primary flex items-center justify-center gap-2\">\r\n            <CheckCircle className=\"w-5 h-5\" />\r\n            <span>You've arrived! Welcome.</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* CSS for animations */}\r\n      <style>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        \r\n        .animate-fadeIn {\r\n          animation: fadeIn 0.5s ease-in forwards;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  )\r\n}","import axios, { AxiosInstance, AxiosError } from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { \r\n  setFbTokenError, \r\n  setGoogleAdsTokenError, \r\n  setGoogleAnalyticsTokenError \r\n} from '@/store/slices/TokenSllice';\r\nimport { store } from '@/store';\r\nimport { clearUser } from '@/store/slices/UserSlice';\r\nimport { resetBrand } from '@/store/slices/BrandSlice';\r\nimport { baseURL } from '@/data/constant';\r\n\r\nconst createAxiosInstance = (): AxiosInstance => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  \r\n  const axiosInstance: AxiosInstance = axios.create({\r\n    baseURL: import.meta.env.PROD\r\n      ? import.meta.env.VITE_API_URL as string\r\n      : import.meta.env.VITE_LOCAL_API_URL as string,\r\n    withCredentials: true,\r\n  });\r\n  \r\n  // Response interceptor\r\n  axiosInstance.interceptors.response.use(\r\n    (response) => {\r\n      // Reset token errors on successful responses based on URL\r\n      if (response.config?.url?.includes('/meta')) {\r\n        dispatch(setFbTokenError(false));\r\n      } else if (response.config?.url?.includes('/analytics')) {\r\n        dispatch(setGoogleAnalyticsTokenError(false));\r\n      } else if (response.config?.url?.includes('/google')) {\r\n        dispatch(setGoogleAdsTokenError(false));\r\n      }\r\n      \r\n      return response;\r\n    },\r\n    (error: AxiosError) => {\r\n      if (error.response?.status === 401) {\r\n        console.log('401 Unauthorized - Token expired or invalid');\r\n        \r\n        // Clear Redux state\r\n        store.dispatch(clearUser());\r\n        store.dispatch(resetBrand());\r\n        \r\n        // Call logout API\r\n        axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true })\r\n          .catch(() => {\r\n            // Ignore logout API errors\r\n          });\r\n        \r\n        // Navigate to login page\r\n        navigate('/login');\r\n      } else if (error.response?.status === 403) {\r\n        if (error.config?.url?.includes('/meta')) {\r\n          dispatch(setFbTokenError(true));\r\n        } else if (error.config?.url?.includes('/analytics')) {\r\n          dispatch(setGoogleAnalyticsTokenError(true));\r\n        } else if (error.config?.url?.includes('/google')) {\r\n          dispatch(setGoogleAdsTokenError(true));\r\n        } else {\r\n          console.warn('Token error occurred but type could not be determined:', error);\r\n        }\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n  \r\n  return axiosInstance;\r\n};\r\n\r\nexport const useAxiosInstance = () => {\r\n  return createAxiosInstance();\r\n};\r\n\r\nexport default createAxiosInstance;","import { useState, useEffect } from 'react';\r\nimport axios, { AxiosError } from 'axios';\r\nimport { Search, Check } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { FacebookLogo, GoogleLogo, Ga4Logo } from \"@/data/logo\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { setBrands } from '@/store/slices/BrandSlice';\r\n\r\n\r\ninterface PlatformModalProps {\r\n  platform: string;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  brandId: string;\r\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\r\n}\r\n\r\ninterface GoogleAdsAccount {\r\n  name: string;\r\n  clientId: string;\r\n  managerId?: string;\r\n  hidden?: boolean;\r\n}\r\n\r\n\r\ninterface GoogleAnalyticsAccount {\r\n  propertyName: string;\r\n  propertyId: string;\r\n}\r\n\r\ninterface FacebookAdsAccount {\r\n  adname: string;\r\n  id: string;\r\n}\r\n\r\nexport default function PlatformModal({\r\n  platform,\r\n  open,\r\n  onOpenChange,\r\n  brandId,\r\n  onSuccess\r\n}: PlatformModalProps) {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\r\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\r\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\r\n  const [showLoginButton, setShowLoginButton] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [connectedAccounts, setConnectedAccounts] = useState<string[]>([]);\r\n  const [selectedAccounts, setSelectedAccounts] = useState<string[]>([]);\r\n\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  const dispatch = useDispatch();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n\r\n  // Check URL parameters for modal opening\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const modalToOpen = params.get('openModal');\r\n    \r\n    if (modalToOpen && onOpenChange) {\r\n      switch (modalToOpen.toLowerCase()) {\r\n        case 'googleads':\r\n          if (platform.toLowerCase() === 'google ads') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n        case 'googleanalytics':\r\n          if (platform.toLowerCase() === 'google analytics') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n        case 'facebook':\r\n          if (platform.toLowerCase() === 'facebook') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n      }\r\n      \r\n      // Remove the modal parameter from URL\r\n      params.delete('openModal');\r\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\r\n      window.history.replaceState({}, '', newUrl);\r\n    }\r\n  }, [platform, onOpenChange]);\r\n\r\n  useEffect(() => {\r\n    const fetchConnectedAccounts = async () => {\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/brands/${brandId}`, {\r\n          withCredentials: true,\r\n        });\r\n        const brand = response.data;\r\n\r\n        const connectedIds: string[] = [];\r\n        if (brand.fbAdAccounts?.length) connectedIds.push(...brand.fbAdAccounts);\r\n        if (brand.googleAdAccount) connectedIds.push(brand.googleAdAccount);\r\n        if (brand.ga4Account?.PropertyID) connectedIds.push(brand.ga4Account.PropertyID);\r\n\r\n        setConnectedAccounts(connectedIds);\r\n      } catch (error) {\r\n        console.error('Error fetching connected accounts:', error);\r\n      }\r\n    };\r\n\r\n    if (open && brandId) {\r\n      fetchConnectedAccounts();\r\n    }\r\n  }, [brandId, open]);\r\n\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      if (!open) return;\r\n\r\n      setLoading(true);\r\n      try {\r\n        let endpoint = '';\r\n        let accountsSetter: any = null;\r\n\r\n        switch (platform.toLowerCase()) {\r\n          case 'google ads':\r\n            endpoint = `/api/setup/google-accounts/${brandId}`;\r\n            accountsSetter = setGoogleAdsAccounts;\r\n            break;\r\n          case 'google analytics':\r\n            endpoint = `/api/setup/ga4-propertyIds/${brandId}`;\r\n            accountsSetter = setGoogleAnalyticsAccounts;\r\n            break;\r\n          case 'facebook':\r\n            endpoint = `/api/setup/fb-ad-accounts/${brandId}`;\r\n            accountsSetter = setFacebookAdsAccounts;\r\n            break;\r\n        }\r\n        console.log(`Calling API: ${baseURL}${endpoint} with brandId: ${brandId}`);\r\n\r\n        if (!endpoint) {\r\n          throw new Error('Invalid platform');\r\n        }\r\n        const response = await axios.get(\r\n          `${baseURL}${endpoint}`,\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          if (platform.toLowerCase() === 'google ads') {\r\n            accountsSetter(response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden));\r\n          } else if (platform.toLowerCase() === 'google analytics') {\r\n            accountsSetter(response.data.propertiesList || []);\r\n          } else if (platform.toLowerCase() === 'facebook') {\r\n            accountsSetter(response.data.adAccounts || []);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        handleError(error as AxiosError, setShowLoginButton);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAccounts();\r\n  }, [platform, brandId, open]);\r\n\r\n  const handleError = (error: unknown, setShowLoginButton: (value: boolean) => void) => {\r\n    const axiosError = error as AxiosError;\r\n\r\n    if (axiosError.response) {\r\n      const { status, data } = axiosError.response;\r\n      const code = axiosError.code;\r\n      if (status === 400) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 403) {\r\n        setShowLoginButton(true);\r\n      } else if (status === 401 || code === 'TOKEN_EXPIRED') {\r\n        alert('Your Google session has expired. Please log in again.');\r\n        setShowLoginButton(true);\r\n      } else {\r\n        console.error('Unhandled Error Status:', status);\r\n        console.error('Error Message:', data);\r\n      }\r\n    } else if (axiosError.request) {\r\n      console.error('No response received:', axiosError.request);\r\n    } else {\r\n      console.error('Unexpected Error:', axiosError.message);\r\n    }\r\n  };\r\n\r\n  const updateBrandWithAccount = async (accountIds: string[], accountNames: string[], managerIds: (string | undefined)[]) => {\r\n    try {\r\n      let updateData = {};\r\n      \r\n      switch (platform.toLowerCase()) {\r\n        case 'facebook':\r\n          // Get current brand to append to existing accounts\r\n          const currentBrand = brands.find(brand => brand._id === brandId);\r\n          const existingFbAccounts = currentBrand?.fbAdAccounts || [];\r\n          const newFbAccounts = [...new Set([...existingFbAccounts, ...accountIds])];\r\n          updateData = { fbAdAccounts: newFbAccounts };\r\n          break;\r\n        case 'google ads':\r\n          // Get current brand to append to existing accounts\r\n          const currentBrandForGoogle = brands.find(brand => brand._id === brandId);\r\n          const existingGoogleAccounts = currentBrandForGoogle?.googleAdAccount || [];\r\n          const newGoogleAccounts = accountIds.map((accountId, index) => ({\r\n            clientId: accountId,\r\n            managerId: managerIds[index] || ''\r\n          }));\r\n          // Merge existing and new accounts, avoiding duplicates\r\n          const mergedGoogleAccounts = [...existingGoogleAccounts];\r\n          newGoogleAccounts.forEach(newAccount => {\r\n            const exists = mergedGoogleAccounts.some(existing => \r\n              existing.clientId === newAccount.clientId && existing.managerId === newAccount.managerId\r\n            );\r\n            if (!exists) {\r\n              mergedGoogleAccounts.push({\r\n                clientId: newAccount.clientId,\r\n                managerId: newAccount.managerId || ''\r\n              });\r\n            }\r\n          });\r\n          updateData = { googleAdAccount: mergedGoogleAccounts };\r\n          break;\r\n        case 'google analytics':\r\n          // For GA4, we typically only have one account, but we can support multiple\r\n          const currentBrandForGA = brands.find(brand => brand._id === brandId);\r\n          const existingGAAccount = currentBrandForGA?.ga4Account?.PropertyID;\r\n          if (!existingGAAccount) {\r\n            updateData = { ga4Account: { PropertyID: accountIds[0] } };\r\n          } else {\r\n            // If GA4 account already exists, we might want to replace it or handle differently\r\n            updateData = { ga4Account: { PropertyID: accountIds[0] } };\r\n          }\r\n          break;\r\n      }\r\n  \r\n      const response = await axios.patch(\r\n        `${baseURL}/api/brands/update/${brandId}`,\r\n        updateData,\r\n        { withCredentials: true }\r\n      );\r\n  \r\n      if (response.status === 200) {\r\n        \r\n        const updatedBrand = response.data;\r\n        \r\n        \r\n        const updatedBrands = brands.map(brand => \r\n          brand._id === brandId ? updatedBrand : brand\r\n        );\r\n        \r\n        dispatch(setBrands(updatedBrands));\r\n        \r\n        // Call onSuccess for each account\r\n        accountIds.forEach((accountId, index) => {\r\n          onSuccess?.(platform, accountNames[index], accountId);\r\n        });\r\n        \r\n        // Don't automatically close modal - let handleConnectSelected handle it\r\n        // setSelectedAccounts([]);\r\n        // onOpenChange(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating brand:', error);\r\n    }\r\n  };\r\n\r\n  // const handleConnect = async (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\r\n  //   let accountId: string;\r\n\r\n  //   if ('clientId' in account) {\r\n  //     accountId = account.clientId;\r\n  //   } else if ('propertyId' in account) {\r\n  //     accountId = account.propertyId;\r\n  //   } else if ('id' in account) {\r\n  //     accountId = account.id;\r\n  //   } else {\r\n  //     return;\r\n  //   }\r\n\r\n  //   // Instead of immediately connecting, add to selected accounts\r\n  //   setSelectedAccounts(prev => {\r\n  //     if (prev.includes(accountId)) {\r\n  //       return prev.filter(id => id !== accountId);\r\n  //     } else {\r\n  //       return [...prev, accountId];\r\n  //     }\r\n  //   });\r\n  // };\r\n\r\n  const handleAccountSelection = (accountId: string) => {\r\n    setSelectedAccounts(prev => {\r\n      if (prev.includes(accountId)) {\r\n        return prev.filter(id => id !== accountId);\r\n      } else {\r\n        return [...prev, accountId];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleConnectSelected = async () => {\r\n    if (selectedAccounts.length === 0) return;\r\n\r\n    const selectedAccountData = selectedAccounts.map(accountId => {\r\n      const account = filteredAccounts()?.find(acc => {\r\n        if (platform.toLowerCase() === 'google ads') {\r\n          return (acc as GoogleAdsAccount).clientId === accountId;\r\n        } else if (platform.toLowerCase() === 'facebook') {\r\n          return (acc as FacebookAdsAccount).id === accountId;\r\n        } else {\r\n          return (acc as GoogleAnalyticsAccount).propertyId === accountId;\r\n        }\r\n      });\r\n\r\n      if (!account) return null;\r\n\r\n      let displayName: string;\r\n      let managerId: string | undefined;\r\n\r\n      if ('clientId' in account) {\r\n        managerId = account.managerId;\r\n        displayName = managerId\r\n          ? `${account.name} (${account.clientId}/${managerId})`\r\n          : `${account.name} (${account.clientId})`;\r\n      } else if ('propertyId' in account) {\r\n        displayName = `${account.propertyName} (${account.propertyId})`;\r\n      } else if ('id' in account) {\r\n        displayName = `${account.adname}`;\r\n      } else {\r\n        return null;\r\n      }\r\n\r\n      return { accountId, displayName, managerId };\r\n    }).filter(Boolean);\r\n\r\n    if (selectedAccountData.length > 0) {\r\n      const accountIds = selectedAccountData.map(data => data!.accountId);\r\n      const accountNames = selectedAccountData.map(data => data!.displayName);\r\n      const managerIds = selectedAccountData.map(data => data!.managerId);\r\n\r\n      await updateBrandWithAccount(accountIds, accountNames, managerIds);\r\n      \r\n      // Show success message\r\n      console.log(`Successfully connected ${selectedAccountData.length} account(s)`);\r\n      \r\n      // Reset selected accounts and close modal\r\n      setSelectedAccounts([]);\r\n      onOpenChange(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleAdLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/google?context=googleAdSetup&source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      const { authUrl } = response.data;\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const handleGoogleAnalyticsLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/google?context=googleAnalyticsSetup&source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      const { authUrl } = response.data;\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const handleFbLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      if (response.data.success) {\r\n        window.location.href = response.data.authURL;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Facebook Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const filteredAccounts = () => {\r\n    if (platform.toLowerCase() === 'google ads') {\r\n      if (!googleAdsAccounts || googleAdsAccounts.length === 0) {\r\n        return [];\r\n      }\r\n      return googleAdsAccounts.filter((account) => {\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n          (account.name && account.name.toLowerCase().includes(searchLower)) ||\r\n          (account.clientId && account.clientId.toLowerCase().includes(searchLower)) ||\r\n          (account.managerId && account.managerId.toLowerCase().includes(searchLower))\r\n        );\r\n      });\r\n    } else if (platform.toLowerCase() === 'google analytics') {\r\n      if (!googleAnalyticsAccounts || googleAnalyticsAccounts.length === 0) {\r\n        return [];\r\n      }\r\n      return googleAnalyticsAccounts.filter((account) => {\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n          (account.propertyName && account.propertyName.toLowerCase().includes(searchLower)) ||\r\n          (account.propertyId && account.propertyId.toLowerCase().includes(searchLower))\r\n        );\r\n      });\r\n    } else if (platform.toLowerCase() === 'facebook') {\r\n      if (!facebookAdsAccounts || facebookAdsAccounts.length === 0) {\r\n        return [];\r\n      }\r\n      return facebookAdsAccounts.filter((account) => {\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n          (account.adname && account.adname.toLowerCase().includes(searchLower)) ||\r\n          (account.id && account.id.toLowerCase().includes(searchLower))\r\n        );\r\n      });\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[600px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Connect {platform} Account</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          {loading ? (\r\n            <div className=\"flex justify-center py-4\">Loading...</div>\r\n          ) : showLoginButton ? (\r\n            <Button\r\n              size=\"sm\"\r\n              onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : platform.toLowerCase()=== 'google ads' ? handleGoogleAdLogin : handleGoogleAnalyticsLogin}\r\n              className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\r\n            >\r\n              {platform.toLowerCase() === 'google ads' && (\r\n                <>\r\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your Google Ads account\r\n                </>\r\n              )}\r\n              {platform.toLowerCase() === 'google analytics' && (\r\n                <>\r\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your GA4 account\r\n                </>\r\n              )}\r\n              {platform.toLowerCase() === 'facebook' && (\r\n                <>\r\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                  Connect to your Facebook account\r\n                </>\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <>\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n                <Input\r\n                  type=\"text\"\r\n                  placeholder=\"Search accounts...\"\r\n                  className=\"pl-10\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n              \r\n              {/* Selected accounts section - sticky at top */}\r\n              {selectedAccounts.length > 0 && (\r\n                <div className=\"sticky top-0 z-10 p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-blue-800\">\r\n                      {selectedAccounts.length} account(s) selected\r\n                    </span>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => {\r\n                          setSelectedAccounts([]);\r\n                          onOpenChange(false);\r\n                        }}\r\n                        className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={handleConnectSelected}\r\n                        className=\"bg-blue-600 hover:bg-blue-700\"\r\n                      >\r\n                        Save ({selectedAccounts.length})\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Scrollable accounts list */}\r\n              <div className=\"max-h-[50vh] overflow-auto\">\r\n                {(() => {\r\n                  const filtered = filteredAccounts();  \r\n                  if (!filtered || filtered.length === 0) {\r\n                    return (\r\n                      <div className=\"text-center py-4 text-gray-500\">\r\n                        {searchTerm ? 'No accounts found matching your search.' : 'No accounts available.'}\r\n                      </div>\r\n                    );\r\n                  }\r\n                  \r\n                  return filtered.map((account, _) => {\r\n                    const isGoogleAds = platform.toLowerCase() === 'google ads';\r\n                    const isFacebook = platform.toLowerCase() === 'facebook';\r\n\r\n                    const accountId = isGoogleAds\r\n                      ? (account as GoogleAdsAccount).clientId\r\n                      : isFacebook\r\n                        ? (account as FacebookAdsAccount).id\r\n                        : (account as GoogleAnalyticsAccount).propertyId;\r\n\r\n                    const managerId = isGoogleAds\r\n                      ? (account as GoogleAdsAccount).managerId\r\n                      : undefined;\r\n\r\n                    const accountName = isGoogleAds\r\n                      ? (account as GoogleAdsAccount).name\r\n                      : isFacebook\r\n                        ? (account as FacebookAdsAccount).adname\r\n                        : (account as GoogleAnalyticsAccount).propertyName;\r\n\r\n                    // Create unique key to prevent duplicates\r\n                    const uniqueKey = isGoogleAds && managerId \r\n                      ? `${accountId}-${managerId}`\r\n                      : accountId;\r\n\r\n                    const platformLogo = isGoogleAds ? (\r\n                      <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                    ) : isFacebook ? (\r\n                      <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                    ) : (\r\n                      <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                    );\r\n\r\n                    const isConnected = connectedAccounts.includes(accountId);\r\n                    const isSelected = selectedAccounts.includes(accountId);\r\n\r\n                    const displayText = isGoogleAds && managerId\r\n                      ? `${accountName} (${accountId}/${managerId})`\r\n                      : isFacebook\r\n                        ? `${accountName}`\r\n                        : `${accountName} (${accountId})`;\r\n\r\n                    return (\r\n                      <div\r\n                        key={uniqueKey}\r\n                        className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\r\n                      >\r\n                        <div className=\"flex items-center gap-3\">\r\n                     \r\n                          <span>\r\n                            <div className=\"flex flex-row items-center gap-3\">\r\n                              {platformLogo}\r\n                              {displayText}\r\n                            </div>\r\n                          </span>\r\n                        </div>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={() => handleAccountSelection(accountId)}\r\n                          disabled={isConnected}\r\n                          className={isConnected ? \"bg-gray-400\" : isSelected ? \"bg-green-600\" : \"bg-blue-600\"}\r\n                        >\r\n                          {isConnected && <Check className=\"h-4 w-4 mr-2\" />}\r\n                          {isConnected ? 'Connected' : isSelected ? 'Selected' : 'Select'}\r\n                        </Button>\r\n                      </div>\r\n                    );\r\n                  });\r\n                })()}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport axios from \"axios\"\r\nimport { Loader2, Building, MessageSquare, Send, X, AlertCircle, Briefcase } from \"lucide-react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { RootState } from \"@/store\"\r\n\r\nconst baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n\r\ninterface TicketFormProps {\r\n  onClose: () => void\r\n}\r\n\r\nfunction TicketForm({ onClose }: TicketFormProps) {\r\n  const [form, setForm] = useState({\r\n    brandName: \"\",\r\n    description: \"\",\r\n    departmentId: \"\",\r\n  })\r\n\r\n  const [departments, setDepartments] = useState<Array<{ id: string; name: string }>>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [submitting, setSubmitting] = useState(false)\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n  const [zohoNotConfigured, setZohoNotConfigured] = useState(false)\r\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId)\r\n  const brandName = useSelector((state: RootState) => state.brand.brands.find((brand) => brand._id === selectedBrandId)?.name)\r\n\r\n  // Sync form state with Redux brandName\r\n  useEffect(() => {\r\n    if (brandName) {\r\n      setForm((prev) => ({ ...prev, brandName: brandName }))\r\n    }\r\n  }, [brandName])\r\n\r\n  useEffect(() => {\r\n    const fetchDepartments = async () => {\r\n      setLoading(true)\r\n      setZohoNotConfigured(false)\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/zoho/departments`, { withCredentials: true })\r\n        if (response.data && response.data.departments && response.data.departments.length > 0) {\r\n          setDepartments(response.data.departments)\r\n          // Automatically set the first department\r\n          setForm((prev) => ({ ...prev, departmentId: response.data.departments[0].id }))\r\n        }\r\n      } catch (error: any) {\r\n        console.error(\"Error fetching departments:\", error)\r\n        if (error.response?.status === 401 || error.response?.data?.message?.includes('Zoho integration not configured')) {\r\n          setZohoNotConfigured(true)\r\n        } else {\r\n          setErrors({\r\n            form: \"Failed to load departments. Please try again later.\"\r\n          })\r\n        }\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchDepartments()\r\n  }, [])\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target\r\n    setForm((prev) => ({ ...prev, [name]: value }))\r\n\r\n    // Clear error when field is updated\r\n    if (errors[name]) {\r\n      setErrors((prev) => {\r\n        const newErrors = { ...prev }\r\n        delete newErrors[name]\r\n        return newErrors\r\n      })\r\n    }\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    // Use brandName from Redux if form.brandName is empty\r\n    const currentBrandName = form.brandName || brandName || \"\"\r\n    if (!currentBrandName.trim()) newErrors.brandName = \"Brand name is required\"\r\n    if (!form.description.trim()) newErrors.description = \"Description is required\"\r\n    if (!form.departmentId) {\r\n      newErrors.departmentId = \"Department is required\"\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n\r\n    setSubmitting(true)\r\n\r\n    try {\r\n      // Use brandName from Redux if form.brandName is empty\r\n      const finalBrandName = (form.brandName || brandName || \"\").trim();\r\n      \r\n      // Final validation before submit\r\n      if (!finalBrandName) {\r\n        setErrors({ brandName: \"Brand name is required\" });\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      const submitData = {\r\n        brandName: finalBrandName,\r\n        description: form.description.trim(),\r\n        departmentId: form.departmentId\r\n      };\r\n\r\n      console.log('Submitting ticket with data:', {\r\n        brandName: submitData.brandName,\r\n        hasDescription: !!submitData.description,\r\n        departmentId: submitData.departmentId\r\n      });\r\n\r\n      const response = await axios.post(`${baseURL}/api/zoho/create-ticket`, submitData,{withCredentials: true})\r\n\r\n      if (response.data.success) {\r\n        onClose()\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error submitting ticket:\", error)\r\n      setErrors({\r\n        form: \"There was an error submitting your tickets. Please try again.\",\r\n      })\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n      <div className=\"bg-slate-800 px-6 py-4 flex justify-between items-center\">\r\n        <h2 className=\"text-xl font-semibold text-white flex items-center\">\r\n          <MessageSquare className=\"mr-2 h-5 w-5\" />\r\n          Submit your requirements\r\n        </h2>\r\n        <button onClick={onClose} className=\"text-slate-300 hover:text-white transition-colors\">\r\n          <X className=\"h-6 w-6\" />\r\n        </button>\r\n      </div>\r\n\r\n      {zohoNotConfigured && (\r\n        <div className=\"mx-6 mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md\">\r\n          <div className=\"flex items-start\">\r\n            <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5\" />\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"text-sm font-semibold text-yellow-800 mb-1\">Zoho Integration Not Configured</h3>\r\n              <p className=\"text-sm text-yellow-700 mb-2\">\r\n                The Zoho integration needs to be set up before you can submit tickets. Please contact your administrator to configure Zoho.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {errors.form && !zohoNotConfigured && (\r\n        <div className=\"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-start\">\r\n          <AlertCircle className=\"h-5 w-5 text-red-500 mr-2 flex-shrink-0 mt-0.5\" />\r\n          <span className=\"text-red-700 text-sm\">{errors.form}</span>\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\r\n        {/* Brand Name */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"brandName\">\r\n            Brand Name <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <Building className=\"h-5 w-5 text-slate-400\" />\r\n            </div>\r\n            <input\r\n              id=\"brandName\"\r\n              name=\"brandName\"\r\n              type=\"text\"\r\n              value={form.brandName || brandName || \"\"}\r\n              onChange={handleChange}\r\n              readOnly={!!brandName}\r\n              className={`pl-10 block w-full px-3 py-2.5 border ${errors.brandName ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500 ${brandName ? \"bg-slate-50 cursor-not-allowed\" : \"\"}`}\r\n              placeholder=\"Your brand name\"\r\n            />\r\n          </div>\r\n          {errors.brandName && <p className=\"mt-1 text-sm text-red-600\">{errors.brandName}</p>}\r\n        </div>\r\n\r\n        {/* Department - Auto-selected from API */}\r\n        {!loading && departments.length > 0 && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-1\">\r\n              Department\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <Briefcase className=\"h-5 w-5 text-slate-400\" />\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={departments.find(dept => dept.id === form.departmentId)?.name || departments[0]?.name || \"No department available\"}\r\n                readOnly\r\n                className=\"pl-10 block w-full px-3 py-2.5 border border-slate-300 rounded-md shadow-sm bg-slate-50 cursor-not-allowed text-slate-600\"\r\n              />\r\n            </div>\r\n            {errors.departmentId && <p className=\"mt-1 text-sm text-red-600\">{errors.departmentId}</p>}\r\n          </div>\r\n        )}\r\n\r\n        {/* Description */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-1\" htmlFor=\"description\">\r\n            Description <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <textarea\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={form.description}\r\n            onChange={handleChange}\r\n            rows={5}\r\n            className={`block w-full px-3 py-2.5 border ${errors.description ? \"border-red-300 bg-red-50\" : \"border-slate-300\"} rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500`}\r\n            placeholder=\"Please provide detailed information about your requirements\"\r\n          />\r\n          {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\r\n        </div>\r\n\r\n        {/* Action buttons */}\r\n        <div className=\"flex gap-4 pt-2\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={submitting || zohoNotConfigured}\r\n            className={`flex-1 bg-slate-700 text-white py-2.5 px-4 rounded-md hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors ${\r\n              submitting || zohoNotConfigured ? \"opacity-70 cursor-not-allowed\" : \"\"\r\n            }`}\r\n          >\r\n            {submitting ? (\r\n              <span className=\"flex items-center justify-center gap-2\">\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                Submitting...\r\n              </span>\r\n            ) : (\r\n              <span className=\"flex items-center justify-center gap-2\">\r\n                <Send className=\"w-4 h-4\" />\r\n                Submit Ticket\r\n              </span>\r\n            )}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"flex-1 bg-white text-slate-700 py-2.5 px-4 border border-slate-300 rounded-md hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TicketForm\r\n\r\n","import { useEffect, useState } from 'react';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { Ga4Logo } from '@/data/logo';\r\n\r\ninterface ConversionFunnelCardProps {\r\n  onNavigate: () => void;\r\n  brandId: string;\r\n  startDate?: string; // Format: YYYY-MM-DD\r\n  endDate?: string;   // Format: YYYY-MM-DD\r\n}\r\n\r\ninterface ConsolidatedData {\r\n  startDate: string;\r\n  endDate: string;\r\n  Sessions: number;\r\n  'Add To Cart': number;\r\n  'Add To Cart Rate': string;\r\n  Checkouts: number;\r\n  'Checkout Rate': string;\r\n  Purchases: number;\r\n  'Purchase Rate': string;\r\n}\r\n\r\nfunction ConversionFunnelCard({ onNavigate, brandId, startDate, endDate }: ConversionFunnelCardProps) {\r\n  const [funnelData, setFunnelData] = useState<ConsolidatedData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  useEffect(() => {\r\n    const fetchFunnelData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Use provided dates or default to current month\r\n        let apiStartDate = startDate;\r\n        let apiEndDate = endDate;\r\n        \r\n        if (!apiStartDate || !apiEndDate) {\r\n          const now = new Date();\r\n          const start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n          const end = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n          \r\n          const formatDate = (date: Date) => {\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth() + 1).padStart(2, '0');\r\n            const day = String(date.getDate()).padStart(2, '0');\r\n            return `${year}-${month}-${day}`;\r\n          };\r\n          \r\n          apiStartDate = formatDate(start);\r\n          apiEndDate = formatDate(end);\r\n        }\r\n\r\n        const response = await axiosInstance.post(\r\n          `/api/highlights/conversion-funnel/${brandId}`,\r\n          {\r\n            startDate: apiStartDate,\r\n            endDate: apiEndDate\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data && response.data.success && response.data.data) {\r\n          setFunnelData(response.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching conversion funnel data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (brandId) {\r\n      fetchFunnelData();\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div \r\n        className=\"bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer flex flex-col h-[380px]\"\r\n        onClick={onNavigate}\r\n      >\r\n        <div className=\"p-4 border-b border-slate-100 flex-shrink-0\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"p-2 bg-blue-50 rounded-lg\">\r\n                <Ga4Logo width=\"1.2rem\" height=\"1.2rem\" />\r\n              </div>\r\n              <h3 className=\"font-semibold text-slate-800\">E-Commerce Funnel</h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-4 animate-pulse space-y-4 flex-1 overflow-y-auto\">\r\n          <div className=\"h-48 bg-slate-100 rounded\"></div>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"h-16 bg-slate-100 rounded\"></div>\r\n            <div className=\"h-16 bg-slate-100 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!funnelData) {\r\n    return (\r\n      <div \r\n        className=\"bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer flex flex-col h-[450px]\"\r\n        onClick={onNavigate}\r\n      >\r\n        <div className=\"p-4 border-b border-slate-100 flex-shrink-0\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"p-2 bg-blue-50 rounded-lg\">\r\n              <Ga4Logo width=\"1.2rem\" height=\"1.2rem\" />\r\n            </div>\r\n            <h3 className=\"font-semibold text-slate-800\">E-Commerce Funnel</h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-4 flex-1 flex items-center justify-center overflow-y-auto\">\r\n          <div className=\"text-center text-slate-400\">\r\n            <p className=\"text-sm\">No data available</p>\r\n            <p className=\"text-xs mt-1\">Connect Google Analytics to see metrics</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Prepare data for area chart - showing progression through funnel\r\n  const chartData = [\r\n    {\r\n      stage: 'Sessions',\r\n      count: funnelData.Sessions,\r\n      rate: '-'\r\n    },\r\n    {\r\n      stage: 'Add To Cart',\r\n      count: funnelData['Add To Cart'],\r\n      rate: funnelData['Add To Cart Rate']\r\n    },\r\n    {\r\n      stage: 'Checkouts',\r\n      count: funnelData.Checkouts,\r\n      rate: funnelData['Checkout Rate']\r\n    },\r\n    {\r\n      stage: 'Purchases',\r\n      count: funnelData.Purchases,\r\n      rate: funnelData['Purchase Rate']\r\n    }\r\n  ];\r\n\r\n  // Custom tooltip\r\n  const CustomTooltip = ({ active, payload }: any) => {\r\n    if (active && payload && payload.length) {\r\n      const data = payload[0].payload;\r\n      return (\r\n        <div className=\"bg-white border border-slate-200 rounded-lg shadow-lg p-3\">\r\n          <p className=\"font-semibold text-slate-700 mb-2\">{data.stage}</p>\r\n          <div className=\"space-y-1 text-sm\">\r\n            <div className=\"flex items-center justify-between gap-4\">\r\n              <span className=\"text-slate-600\">Count:</span>\r\n              <span className=\"font-bold\">{data.count.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between gap-4\">\r\n              <span className=\"text-slate-600\">Rate:</span>\r\n              <span className=\"font-bold\">{data.rate}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group flex flex-col h-[380px]\"\r\n      onClick={onNavigate}\r\n    >\r\n      <div className=\"p-4 border-b border-slate-100 flex-shrink-0\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors\">\r\n              <Ga4Logo width=\"1.2rem\" height=\"1.2rem\" />\r\n            </div>\r\n            <h3 className=\"font-semibold text-slate-800\">E-Commerce Funnel</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"p-4 space-y-4 flex-1 overflow-y-auto\">\r\n        {/* Area Chart - Funnel Progression */}\r\n        <div className=\"h-56\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <AreaChart data={chartData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n              <defs>\r\n                <linearGradient id=\"colorCount\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.8}/>\r\n                  <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0.1}/>\r\n                </linearGradient>\r\n              </defs>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\r\n              <XAxis \r\n                dataKey=\"stage\" \r\n                tick={{ fontSize: 11 }}\r\n                stroke=\"#64748b\"\r\n              />\r\n              <YAxis \r\n                tick={{ fontSize: 11 }}\r\n                stroke=\"#64748b\"\r\n              />\r\n              <Tooltip content={<CustomTooltip />} />\r\n              <Legend \r\n                wrapperStyle={{ fontSize: '12px' }}\r\n                iconType=\"circle\"\r\n              />\r\n              <Area \r\n                type=\"monotone\" \r\n                dataKey=\"count\" \r\n                stroke=\"#3b82f6\" \r\n                strokeWidth={3}\r\n                fillOpacity={1} \r\n                fill=\"url(#colorCount)\"\r\n                name=\"Count\"\r\n              />\r\n            </AreaChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n    \r\n\r\n        {/* Footer */}\r\n        <div className=\"pt-2 border-t border-slate-100 flex-shrink-0\">\r\n          <p className=\"text-xs text-slate-500 text-center\">\r\n            Click to view detailed analytics \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConversionFunnelCard;\r\n\r\n","import { useEffect, useState } from 'react';\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { TrendingUp } from 'lucide-react';\r\nimport { DashboardCard } from '../dashboard';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface MonthlyMetric {\r\n    period: string;\r\n    totalSales: number;\r\n    metaSpend: number;\r\n    googleSpend: number;\r\n    totalSpend: number;\r\n    metaROAS: number;\r\n    grossROI: number;\r\n  }\r\n  \r\n  export default function MarketingInsightsCard({ onNavigate, brandId }: { onNavigate: () => void; brandId: string }) {\r\n    const [metrics, setMetrics] = useState<MonthlyMetric[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const axiosInstance = createAxiosInstance();\r\n  \r\n    useEffect(() => {\r\n      const fetchMetrics = async () => {\r\n        try {\r\n          setLoading(true);\r\n          const response = await axiosInstance.get(`/api/highlights/marketing/${brandId}`);\r\n          if (response.data.success) {\r\n            setMetrics(response.data.monthlyMetrics);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching marketing insights:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n  \r\n      if (brandId) {\r\n        fetchMetrics();\r\n      }\r\n    }, [brandId]);\r\n  \r\n    const formatCurrency = (value: number) => {\r\n      // if (value >= 1000) return `${(value / 1000).toFixed(1)}`;\r\n      return `${value.toFixed(0)}`;\r\n    };\r\n  \r\n    if (loading) {\r\n      return (\r\n        <DashboardCard\r\n          title=\"Marketing Insights\"\r\n          icon={<TrendingUp className=\"h-5 w-5 text-purple-600\" />}\r\n          onNavigate={onNavigate}\r\n        >\r\n          <div className=\"animate-pulse space-y-2\">\r\n            <div className=\"h-8 bg-slate-100 rounded\"></div>\r\n            <div className=\"h-20 bg-slate-100 rounded\"></div>\r\n            <div className=\"h-20 bg-slate-100 rounded\"></div>\r\n          </div>\r\n        </DashboardCard>\r\n      );\r\n    }\r\n  \r\n    if (!metrics || metrics.length === 0) {\r\n      return (\r\n        <DashboardCard\r\n          title=\"Marketing Insights\"\r\n          icon={<TrendingUp className=\"h-5 w-5 text-purple-600\" />}\r\n          onNavigate={onNavigate}\r\n        >\r\n          <div className=\"text-center py-8 text-slate-400\">\r\n            <p className=\"text-sm\">No data available</p>\r\n            <p className=\"text-xs mt-1\">Monthly metrics will appear here</p>\r\n          </div>\r\n        </DashboardCard>\r\n      );\r\n    }\r\n  \r\n    // Get dynamic columns from the first metric (exclude period, month, year)\r\n    const getColumns = () => {\r\n      if (metrics.length === 0) return [];\r\n      const excludeFields = ['period', 'month', 'year'];\r\n      return Object.keys(metrics[0]).filter(key => !excludeFields.includes(key));\r\n    };\r\n  \r\n    const columns = getColumns();\r\n  \r\n    // Format column headers\r\n    const formatColumnHeader = (key: string) => {\r\n      const headerMap: Record<string, string> = {\r\n        totalSales: 'Total Sales',\r\n        totalRefunds: 'Total Refunds',\r\n        metaSpend: 'Meta Spend',\r\n        metaRevenue: 'Meta Sales',\r\n        metaROAS: 'Meta ROAS',\r\n        googleSpend: 'Google Spend',\r\n        googleSales: 'Google Sales',\r\n        googleROAS: 'Google ROAS',\r\n        totalSpend: 'Total Ad Spend',\r\n        grossROI: 'Gross ROI'\r\n      };\r\n      return headerMap[key] || key;\r\n    };\r\n  \r\n    // Format cell value based on column type\r\n    const formatCellValue = (key: string, value: number) => {\r\n      if (key.toLowerCase().includes('roas') || key.toLowerCase().includes('roi')) {\r\n        return value.toFixed(2) + 'x';\r\n      }\r\n      return formatCurrency(value);\r\n    };\r\n  \r\n    // Get cell color class based on value and column\r\n    const getCellColorClass = (key: string, value: number) => {\r\n      if (key === 'grossROI') {\r\n        if (value >= 2) return 'text-green-600 font-bold';\r\n        if (value >= 1) return 'text-amber-600 font-semibold';\r\n        return 'text-red-600 font-semibold';\r\n      }\r\n      if (key === 'metaROAS') {\r\n        if (value >= 3) return 'text-green-600 font-semibold';\r\n        if (value >= 2) return 'text-amber-600';\r\n        return 'text-slate-600';\r\n      }\r\n      if (key === 'totalSales') return 'font-semibold text-slate-800';\r\n      return 'text-slate-600';\r\n    };\r\n  \r\n    return (\r\n      <DashboardCard\r\n        title=\"Marketing Insights\"\r\n        icon={<TrendingUp className=\"h-5 w-5 text-purple-600\" />}\r\n        onNavigate={onNavigate}\r\n      >\r\n        <div className=\"flex flex-col h-full\">\r\n          <div className=\"overflow-x-auto -mx-2 flex-1\">\r\n            <table className=\"w-full text-xs\">\r\n              <thead className=\"sticky top-0 bg-white z-10\">\r\n                <tr className=\"border-b border-slate-200\">\r\n                  <th className=\"text-left p-2 font-semibold text-slate-600 sticky left-0 bg-white\">Period</th>\r\n                  {columns.map((column) => (\r\n                    <th key={column} className=\"text-right p-2 font-semibold text-slate-600 whitespace-nowrap\">\r\n                      {formatColumnHeader(column)}\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {metrics.map((metric, idx) => (\r\n                  <tr \r\n                    key={`${metric.period}-${idx}`}\r\n                    className={cn(\r\n                      \"border-b border-slate-100 hover:bg-slate-50 transition-colors\",\r\n                      idx === 0 && \"bg-blue-50/30\"\r\n                    )}\r\n                  >\r\n                    <td className=\"p-2 font-medium text-slate-700 sticky left-0 bg-white whitespace-nowrap\">\r\n                      {metric.period}\r\n                      {idx === 0 && <span className=\"ml-1 text-blue-600 text-[10px]\"></span>}\r\n                    </td>\r\n                    {columns.map((column) => (\r\n                      <td \r\n                        key={column}\r\n                        className={cn(\"p-2 text-right whitespace-nowrap\", getCellColorClass(column, metric[column as keyof MonthlyMetric] as number))}\r\n                      >\r\n                        {formatCellValue(column, metric[column as keyof MonthlyMetric] as number)}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n  \r\n          <div className=\"mt-4 pt-3 border-t border-slate-100 flex-shrink-0\">\r\n            <p className=\"text-xs text-slate-500 text-center\">\r\n              Click to view full monthly breakdown \r\n            </p>\r\n          </div>\r\n        </div>\r\n      </DashboardCard>\r\n    );\r\n  }","import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { FacebookLogo, GoogleLogo, Ga4Logo } from \"@/data/logo\";\r\nimport { RefreshCw, Minimize2, Maximize2, ArrowUpIcon, ArrowDownIcon } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport type Trend = \"up\" | \"down\" | \"neutral\";\r\nexport type Period = \"yesterday\" | \"last7Days\" | \"last30Days\";\r\nexport type Source = \"meta\" | \"google\" | \"analytics\";\r\nexport type Platform = \"Facebook\" | \"Google Ads\" | \"Google Analytics\";\r\n\r\nexport interface MetricData {\r\n    current: number;\r\n    previous: number;\r\n    change: number;\r\n    trend: Trend;\r\n  }\r\n  \r\n  export interface MetricsData {\r\n    [metric: string]: MetricData;\r\n  }\r\n  \r\n  export interface PerformanceSummary {\r\n    success: boolean;\r\n    periodData: {\r\n      [key in Period]: MetricsData;\r\n    };\r\n  }\r\n  \r\n\r\n// Dynamic Performance Table Component\r\nexport default function PerformanceTable({ \r\n    performanceData,\r\n    apiStatus,\r\n    onRefresh,\r\n    loading\r\n  }: { \r\n    performanceData: {\r\n      meta?: PerformanceSummary['periodData'];\r\n      google?: PerformanceSummary['periodData'];\r\n      analytics?: PerformanceSummary['periodData'];\r\n    };\r\n    apiStatus: {\r\n      meta: boolean;\r\n      google: boolean;\r\n      analytics: boolean;\r\n    };\r\n    onRefresh: () => void;\r\n    loading: boolean;\r\n  }) {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const periodLabels: Record<Period, string> = {\r\n      \"yesterday\": \"Yesterday\",\r\n      \"last7Days\": \"Last 7 Days\",\r\n      \"last30Days\": \"Last 30 Days\"\r\n    };\r\n  \r\n    const metricLabels: Record<string, string> = {\r\n      metaspend: 'Meta Spend',\r\n      metaroas: 'Meta ROAS',\r\n      googlespend: 'Google Spend',\r\n      googleroas: 'Google ROAS',\r\n      sessions: 'Sessions',\r\n      addToCarts: 'Add to Carts',\r\n      checkouts: 'Checkouts',\r\n      purchases: 'Purchases',\r\n      addToCartRate: 'Add to Cart Rate',\r\n      checkoutRate: 'Checkout Rate',\r\n      purchaseRate: 'Purchase Rate'\r\n    };\r\n  \r\n    // Get platform logo\r\n    const getPlatformLogo = (metricKey: string) => {\r\n      if (metricKey.startsWith('meta')) return <FacebookLogo width={\"1rem\"} height={\"1rem\"} />;\r\n      if (metricKey.startsWith('google')) return <GoogleLogo width={\"1rem\"} height={\"1rem\"} />;\r\n      return <Ga4Logo width={\"1rem\"} height={\"1rem\"} />;\r\n    };\r\n  \r\n    // Collect all unique metrics across all periods and sources\r\n    const getAllMetrics = () => {\r\n      const metricsSet = new Set<string>();\r\n      \r\n      ['yesterday', 'last7Days', 'last30Days'].forEach((period) => {\r\n        if (performanceData.meta?.[period as Period] && apiStatus.meta) {\r\n          Object.keys(performanceData.meta[period as Period]).forEach(key => metricsSet.add(key));\r\n        }\r\n        if (performanceData.google?.[period as Period] && apiStatus.google) {\r\n          Object.keys(performanceData.google[period as Period]).forEach(key => metricsSet.add(key));\r\n        }\r\n        if (performanceData.analytics?.[period as Period] && apiStatus.analytics) {\r\n          Object.keys(performanceData.analytics[period as Period]).forEach(key => metricsSet.add(key));\r\n        }\r\n      });\r\n  \r\n      return Array.from(metricsSet);\r\n    };\r\n  \r\n    const allMetrics = getAllMetrics();\r\n  \r\n    // Get metric data for a specific period\r\n    const getMetricData = (period: Period, metricKey: string): MetricData | null => {\r\n      // Check meta\r\n      if (performanceData.meta?.[period]?.[metricKey] && apiStatus.meta) {\r\n        return performanceData.meta[period][metricKey];\r\n      }\r\n      // Check google\r\n      if (performanceData.google?.[period]?.[metricKey] && apiStatus.google) {\r\n        return performanceData.google[period][metricKey];\r\n      }\r\n      // Check analytics\r\n      if (performanceData.analytics?.[period]?.[metricKey] && apiStatus.analytics) {\r\n        return performanceData.analytics[period][metricKey];\r\n      }\r\n      return null;\r\n    };\r\n  \r\n    const formatMetricValue = (value: number, metricKey: string) => {\r\n      if (metricKey.toLowerCase().includes('roas') || metricKey.toLowerCase().includes('rate')) {\r\n        return value.toFixed(2);\r\n      }\r\n      return value >= 1000 ? Math.round(value).toLocaleString() : value;\r\n    };\r\n  \r\n    if (allMetrics.length === 0) {\r\n      return (\r\n        <div className=\"bg-white border rounded-lg shadow-md p-6\">\r\n          <div className=\"text-center text-slate-500 py-8\">\r\n            No performance data available. Connect your platforms to see metrics.\r\n          </div>\r\n          </div>\r\n        );\r\n      }\r\n  \r\n    const periods: Period[] = ['yesterday', 'last7Days', 'last30Days'];\r\n    const DEFAULT_VISIBLE_ROWS = 4;\r\n    const visibleMetrics = isExpanded ? allMetrics : allMetrics.slice(0, DEFAULT_VISIBLE_ROWS);\r\n    const hasMoreRows = allMetrics.length > DEFAULT_VISIBLE_ROWS;\r\n  \r\n    return (\r\n      <div className=\"bg-white border rounded-lg shadow-md p-6 overflow-x-auto\">\r\n        {/* Header with Title and Action Buttons */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-slate-800\">Performance Overview</h2>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              onClick={onRefresh}\r\n              disabled={loading}\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              className=\"hover:bg-slate-100\"\r\n              title=\"Refresh data\"\r\n            >\r\n              <RefreshCw className={cn(\"h-4 w-4\", loading && \"animate-spin\")} />\r\n            </Button>\r\n            {hasMoreRows && (\r\n              <Button\r\n                onClick={() => setIsExpanded(!isExpanded)}\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"hover:bg-slate-100\"\r\n                title={isExpanded ? \"Collapse table\" : \"Expand table\"}\r\n              >\r\n                {isExpanded ? (\r\n                  <Minimize2 className=\"h-4 w-4\" />\r\n                ) : (\r\n                  <Maximize2 className=\"h-4 w-4\" />\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        <table className=\"w-full border-collapse\">\r\n          <thead>\r\n            <tr className=\"border-b-2 border-slate-200\">\r\n              <th className=\"text-left p-3 font-semibold text-slate-700 bg-slate-50 sticky left-0 z-10 min-w-[180px]\">\r\n                Metric\r\n              </th>\r\n              {periods.map((period) => (\r\n                <th key={period} className=\"text-center p-3 font-semibold text-slate-700 bg-slate-50 min-w-[220px]\">\r\n                  <div className=\"mb-2\">{periodLabels[period]}</div>\r\n                  <div className=\"flex justify-around text-xs font-normal text-slate-500\">\r\n                    <span className=\"w-16\">Current</span>\r\n                    <span className=\"w-16\">Previous</span>\r\n                    <span className=\"w-16\">Change</span>\r\n                  </div>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"transition-all duration-300\">\r\n            {visibleMetrics.map((metricKey, metricIdx) => (\r\n              <tr \r\n                key={metricKey} \r\n                className={cn(\r\n                  \"border-b border-slate-100 hover:bg-slate-50 transition-colors\",\r\n                  metricIdx % 2 === 0 ? \"bg-white\" : \"bg-slate-25\"\r\n                )}\r\n              >\r\n                <td className=\"p-3 font-medium text-slate-800 bg-slate-50 sticky left-0 z-10 border-r border-slate-200\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {getPlatformLogo(metricKey)}\r\n                    <span>{metricLabels[metricKey] || metricKey}</span>\r\n                  </div>\r\n                </td>\r\n                {periods.map((period) => {\r\n                  const data = getMetricData(period, metricKey);\r\n                  \r\n                  if (!data) {\r\n                    return (\r\n                      <td key={period} className=\"p-3 text-center text-slate-400 text-sm\">\r\n                        <div className=\"flex justify-around\">\r\n                          <span className=\"w-16\">-</span>\r\n                          <span className=\"w-16\">-</span>\r\n                          <span className=\"w-16\">-</span>\r\n                        </div>\r\n                      </td>\r\n                    );\r\n                  }\r\n  \r\n                  return (\r\n                    <td key={period} className=\"p-3\">\r\n                      <div className=\"flex justify-around items-center text-sm\">\r\n                        {/* Current Value */}\r\n                        <div className=\"w-16 text-center font-semibold text-slate-800\">\r\n                          {formatMetricValue(data.current, metricKey)}\r\n                        </div>\r\n                        \r\n                        {/* Previous Value */}\r\n                        <div className=\"w-16 text-center text-slate-600\">\r\n                          {formatMetricValue(data.previous, metricKey)}\r\n        </div>\r\n  \r\n                        {/* Change */}\r\n                        <div className={cn(\r\n                          \"w-16 text-center font-medium flex items-center justify-center gap-1\",\r\n                          {\r\n                            \"text-green-600\": data.trend === \"up\",\r\n                            \"text-red-600\": data.trend === \"down\",\r\n                            \"text-slate-600\": data.trend === \"neutral\"\r\n                          }\r\n                        )}>\r\n                          {data.trend === \"up\" && <ArrowUpIcon className=\"h-3 w-3\" />}\r\n                          {data.trend === \"down\" && <ArrowDownIcon className=\"h-3 w-3\" />}\r\n                          <span className=\"text-xs\">{Math.abs(data.change)}%</span>\r\n                        </div>\r\n        </div>\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        \r\n        {/* Footer indicator when collapsed */}\r\n        {!isExpanded && hasMoreRows && (\r\n          <div className=\"mt-4 text-center\">\r\n            <Button\r\n              onClick={() => setIsExpanded(true)}\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className=\"text-slate-600 hover:text-slate-900\"\r\n            >\r\n              <Maximize2 className=\"h-4 w-4 mr-2\" />\r\n              Show {allMetrics.length - DEFAULT_VISIBLE_ROWS} more metrics\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }","import { useEffect, useState } from 'react';\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from 'recharts';\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { ShopifyLogo } from '@/data/logo';\r\nimport { DashboardCard } from '../dashboard';\r\n\r\ninterface PaymentOrdersCardProps {\r\n  onNavigate: () => void;\r\n  brandId: string;\r\n  startDate?: string; // Format: YYYY-MM-DD\r\n  endDate?: string;   // Format: YYYY-MM-DD\r\n}\r\n\r\ninterface PaymentOrderData {\r\n  month: string;\r\n  monthName: string;\r\n  codOrderCount: number;\r\n  prepaidOrderCount: number;\r\n  totalOrderCount: number;\r\n}\r\n\r\nfunction PaymentOrdersCard({ onNavigate, brandId, startDate, endDate }: PaymentOrdersCardProps) {\r\n  const [paymentData, setPaymentData] = useState<PaymentOrderData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  useEffect(() => {\r\n    const fetchPaymentData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Use provided dates or default to current month\r\n        let apiStartDate = startDate;\r\n        let apiEndDate = endDate;\r\n        \r\n        if (!apiStartDate || !apiEndDate) {\r\n          const now = new Date();\r\n          const start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n          const end = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n          \r\n          const formatDate = (date: Date) => {\r\n            const year = date.getFullYear();\r\n            const month = String(date.getMonth() + 1).padStart(2, '0');\r\n            const day = String(date.getDate()).padStart(2, '0');\r\n            return `${year}-${month}-${day}`;\r\n          };\r\n          \r\n          apiStartDate = formatDate(start);\r\n          apiEndDate = formatDate(end);\r\n        }\r\n\r\n        const response = await axiosInstance.post(\r\n          `/api/shopify/payment-orders/${brandId}`,\r\n          {\r\n            startDate: apiStartDate,\r\n            endDate: apiEndDate\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data && response.data.success && response.data.data) {\r\n          setPaymentData(response.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching payment orders data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (brandId) {\r\n      fetchPaymentData();\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Calculate totals across all months\r\n  const totalCOD = paymentData.reduce((sum, item) => sum + (item.codOrderCount || 0), 0);\r\n  const totalPrepaid = paymentData.reduce((sum, item) => sum + (item.prepaidOrderCount || 0), 0);\r\n  const totalOrders = totalCOD + totalPrepaid;\r\n\r\n  // Prepare data for pie chart\r\n  const chartData = [\r\n    {\r\n      name: 'COD Orders',\r\n      value: totalCOD,\r\n      color: '#155E95' // blue-800\r\n    },\r\n    {\r\n      name: 'Prepaid Orders',\r\n      value: totalPrepaid,\r\n      color: '#80C4E9' // blue-500\r\n    }\r\n  ];\r\n\r\n  // Custom tooltip component\r\n  const CustomTooltip = ({ active, payload }: any) => {\r\n    if (active && payload && payload.length) {\r\n      const data = payload[0];\r\n      const percentage = totalOrders > 0 ? ((data.value / totalOrders) * 100).toFixed(1) : 0;\r\n      return (\r\n        <div className=\"bg-white border border-slate-200 rounded-lg shadow-lg p-3\">\r\n          <p className=\"font-semibold text-slate-700 mb-2\">{data.name}</p>\r\n          <div className=\"space-y-1 text-sm\">\r\n            <div className=\"flex items-center justify-between gap-4\">\r\n              <span className=\"text-slate-600\">Orders:</span>\r\n              <span className=\"font-bold\">{data.value.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between gap-4\">\r\n              <span className=\"text-slate-600\">Percentage:</span>\r\n              <span className=\"font-bold\">{percentage}%</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Custom label function\r\n  const renderLabel = (entry: any) => {\r\n    const percentage = totalOrders > 0 ? ((entry.value / totalOrders) * 100).toFixed(1) : 0;\r\n    return `${percentage}%`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardCard\r\n        title=\"Payment Orders\"\r\n        icon={<ShopifyLogo width=\"1.25rem\" height=\"1.25rem\" />}\r\n        onNavigate={onNavigate}\r\n      >\r\n        <div className=\"animate-pulse space-y-4\">\r\n          <div className=\"h-48 bg-slate-100 rounded\"></div>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"h-16 bg-slate-100 rounded\"></div>\r\n            <div className=\"h-16 bg-slate-100 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </DashboardCard>\r\n    );\r\n  }\r\n\r\n  if (!paymentData || paymentData.length === 0 || totalOrders === 0) {\r\n    return (\r\n      <DashboardCard\r\n        title=\"Payment Orders\"\r\n        icon={<ShopifyLogo width=\"1.25rem\" height=\"1.25rem\" />}\r\n        onNavigate={onNavigate}\r\n      >\r\n        <div className=\"flex items-center justify-center h-full\">\r\n          <div className=\"text-center text-slate-400\">\r\n            <p className=\"text-sm\">No data available</p>\r\n            <p className=\"text-xs mt-1\">No orders found in the selected period</p>\r\n          </div>\r\n        </div>\r\n      </DashboardCard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardCard\r\n      title=\"Payment Orders\"\r\n      icon={<ShopifyLogo width=\"1.25rem\" height=\"1.25rem\" />}\r\n      onNavigate={onNavigate}\r\n    >\r\n      <div className=\"space-y-4\">\r\n        {/* Pie Chart */}\r\n        <div className=\"h-56\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <PieChart>\r\n              <Pie\r\n                data={chartData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                labelLine={false}\r\n                label={renderLabel}\r\n                outerRadius={80}\r\n                fill=\"#8884d8\"\r\n                dataKey=\"value\"\r\n              >\r\n                {chartData.map((entry) => (\r\n                  <Cell key={`cell-${entry.name}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip content={<CustomTooltip />} />\r\n              <Legend \r\n                wrapperStyle={{ fontSize: '12px' }}\r\n                iconType=\"circle\"\r\n                formatter={(value) => {\r\n                  const data = chartData.find(d => d.name === value);\r\n                  return data ? `${value} (${data.value.toLocaleString()})` : value;\r\n                }}\r\n              />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* Summary Stats */}\r\n        <div className=\"grid grid-cols-2 gap-4 pt-2 border-t border-slate-100\">\r\n          <div className=\"text-center\">\r\n            <div className=\"flex items-center justify-center gap-2 mb-1\">\r\n              <div className=\"w-3 h-3 rounded-full bg-blue-800\"></div>\r\n              <p className=\"text-xs text-slate-600\">COD</p>\r\n            </div>\r\n            <p className=\"text-lg font-bold text-slate-800\">{totalCOD.toLocaleString()}</p>\r\n            <p className=\"text-xs text-slate-500\">\r\n              {totalOrders > 0 ? ((totalCOD / totalOrders) * 100).toFixed(1) : 0}%\r\n            </p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"flex items-center justify-center gap-2 mb-1\">\r\n              <div className=\"w-3 h-3 rounded-full bg-blue-500\"></div>\r\n              <p className=\"text-xs text-slate-600\">Prepaid</p>\r\n            </div>\r\n            <p className=\"text-lg font-bold text-slate-800\">{totalPrepaid.toLocaleString()}</p>\r\n            <p className=\"text-xs text-slate-500\">\r\n              {totalOrders > 0 ? ((totalPrepaid / totalOrders) * 100).toFixed(1) : 0}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </DashboardCard>\r\n  );\r\n}\r\n\r\nexport default PaymentOrdersCard;\r\n\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport {\r\n\r\n  PlusCircle,\r\n  \r\n  ChevronRight,\r\n  X\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport createAxiosInstance from \"../ConversionReportPage/components/axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport { useSelector } from \"react-redux\";\r\nimport type { RootState } from \"@/store\";\r\nimport { FacebookLogo, GoogleLogo, Ga4Logo } from \"@/data/logo\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport PlatformModal from \"@/components/dashboard_component/PlatformModal\";\r\nimport TicketForm from \"@/components/dashboard_component/TicketForm\";\r\nimport ConversionFunnelCard from \"./components/ConversionFunnelCard\";\r\nimport MarketingInsightsCard from \"./components/MarketingInsightsCard\";\r\nimport PerformanceTable from \"./components/PerformanceTable\";\r\nimport { Platform, PerformanceSummary } from \"./components/PerformanceTable\";\r\nimport PaymentOrdersCard from \"./components/PaymentOrdersCard\";\r\n\r\n\r\n\r\n// Component to display a card for connecting platforms\r\nexport function ConnectPlatformCard({ \r\n  platform, \r\n  onClick \r\n}: { \r\n  platform: Platform; \r\n  onClick: () => void;\r\n}) {\r\n  const getPlatformLogo = () => {\r\n    switch (platform) {\r\n      case \"Facebook\":\r\n        return <FacebookLogo width={\"2rem\"} height={\"2rem\"} />;\r\n      case \"Google Ads\":\r\n        return <GoogleLogo width={\"2rem\"} height={\"2rem\"} />;\r\n      case \"Google Analytics\":\r\n        return <Ga4Logo width={\"2rem\"} height={\"2rem\"} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center p-6 border rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer\" onClick={onClick}>\r\n      <div className=\"mb-3\">\r\n        {getPlatformLogo()}\r\n      </div>\r\n      <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">Connect {platform}</h3>\r\n      <p className=\"text-sm text-slate-500 text-center mb-4\">\r\n        Get better insights by connecting your {platform} account\r\n      </p>\r\n      <Button variant=\"outline\" className=\"gap-2\">\r\n        <PlusCircle className=\"h-4 w-4\" />\r\n        Connect\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n// Generic Dashboard Card Component\r\ninterface DashboardCardProps {\r\n  title: string;\r\n  icon: React.ReactNode;\r\n  children: React.ReactNode;\r\n  onNavigate: () => void;\r\n  className?: string;\r\n}\r\n\r\nexport function DashboardCard({ title, icon, children, onNavigate, className }: DashboardCardProps) {\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"bg-white border rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group flex flex-col h-[380px]\",\r\n        className\r\n      )}\r\n      onClick={onNavigate}\r\n    >\r\n      <div className=\"p-4 border-b border-slate-100 flex-shrink-0\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors\">\r\n              {icon}\r\n            </div>\r\n            <h3 className=\"font-semibold text-slate-800\">{title}</h3>\r\n          </div>\r\n          <ChevronRight className=\"h-5 w-5 text-slate-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 flex-1 overflow-y-auto\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Main dashboard component\r\nconst SummaryDashboard: React.FC = () => {\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const brandId = useSelector((state: RootState) => state.brand.selectedBrandId);\r\n\r\n  const userName = user?.username;\r\n  const [loading, setLoading] = useState(false);\r\n  const [performanceData, setPerformanceData] = useState<{\r\n    meta?: PerformanceSummary['periodData'];\r\n    google?: PerformanceSummary['periodData'];\r\n    analytics?: PerformanceSummary['periodData'];\r\n  }>({});\r\n\r\n  const navigate = useNavigate();\r\n  \r\n  // Track API call success/failure status\r\n  const [apiStatus, setApiStatus] = useState({\r\n    meta: true,\r\n    google: true,\r\n    analytics: true\r\n  });\r\n\r\n  // State for platform modal\r\n  const [platformModalOpen, setPlatformModalOpen] = useState(false);\r\n  const [selectedPlatform, setSelectedPlatform] = useState<Platform | null>(null);\r\n\r\n  // State for banner visibility\r\n  const [bannerVisible, setBannerVisible] = useState(true);\r\n\r\n  // State for help desk modal\r\n  const [helpDeskModalOpen, setHelpDeskModalOpen] = useState(false);\r\n\r\n  // Check URL parameters for modal opening\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const modalToOpen = params.get('openModal');\r\n    \r\n    if (modalToOpen && brandId) {\r\n      let platformToOpen: Platform | null = null;\r\n      \r\n      switch (modalToOpen.toLowerCase()) {\r\n        case 'googleads':\r\n          platformToOpen = 'Google Ads';\r\n          break;\r\n        case 'googleanalytics':\r\n          platformToOpen = 'Google Analytics';\r\n          break;\r\n        case 'facebook':\r\n          platformToOpen = 'Facebook';\r\n          break;\r\n      }\r\n      \r\n      if (platformToOpen) {\r\n        setSelectedPlatform(platformToOpen);\r\n        setPlatformModalOpen(true);\r\n        \r\n        // Remove the modal parameter from URL\r\n        params.delete('openModal');\r\n        const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\r\n        window.history.replaceState({}, '', newUrl);\r\n      }\r\n    }\r\n  }, [brandId]);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const fetchPerformanceData = useCallback(async () => {\r\n    if (!brandId) {\r\n      console.log('No brand ID available, skipping API calls');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setPerformanceData({});\r\n    setApiStatus({\r\n      meta: true,\r\n      google: true,\r\n      analytics: true\r\n    });\r\n\r\n    try {\r\n      const metaPromise = axiosInstance.get(\r\n        `api/summary/facebook-ads/${brandId}`,\r\n        { withCredentials: true }\r\n      ).catch(error => {\r\n        console.error('Error fetching Meta data:', error);\r\n        setApiStatus(prev => ({ ...prev, meta: false }));\r\n        return { data: { success: false } };\r\n      });\r\n\r\n      const googlePromise = axiosInstance.get(\r\n        `api/summary/google-ads/${brandId}`,\r\n        { withCredentials: true }\r\n      ).catch(error => {\r\n        console.error('Error fetching Google data:', error);\r\n        setApiStatus(prev => ({ ...prev, google: false }));\r\n        return { data: { success: false } };\r\n      });\r\n\r\n      const analyticsPromise = axiosInstance.get(\r\n        `api/summary/analytics/${brandId}`,\r\n        { withCredentials: true }\r\n      ).catch(error => {\r\n        console.error('Error fetching Analytics data:', error);\r\n        setApiStatus(prev => ({ ...prev, analytics: false }));\r\n        return { data: { success: false } };\r\n      });\r\n      \r\n      const [metaResponse, googleResponse, analyticsResponse] = await Promise.all([\r\n        metaPromise,\r\n        googlePromise,\r\n        analyticsPromise\r\n      ]);\r\n\r\n      setPerformanceData({\r\n        meta: metaResponse.data.success ? metaResponse.data.periodData : undefined,\r\n        google: googleResponse.data.success ? googleResponse.data.periodData : undefined,\r\n        analytics: analyticsResponse.data.success ? analyticsResponse.data.periodData : undefined\r\n      });\r\n      \r\n      // Update API status based on response success property\r\n      setApiStatus({\r\n        meta: metaResponse.data.success,\r\n        google: googleResponse.data.success,\r\n        analytics: analyticsResponse.data.success\r\n      });\r\n    } catch (error) {\r\n      console.error('Error in fetchPerformanceData:', error);\r\n      // If we had an overall error, mark all APIs as failed\r\n      setApiStatus({\r\n        meta: false,\r\n        google: false,\r\n        analytics: false\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId]);\r\n\r\n  const handleConnectPlatform = (platform: Platform) => {\r\n    setSelectedPlatform(platform);\r\n    setPlatformModalOpen(true);\r\n  };\r\n\r\n  const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\r\n    console.log(`Successfully connected ${platform} - ${accountName} (${accountId})`);\r\n    // Refresh data to show the newly connected platform\r\n    fetchPerformanceData();\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPerformanceData();\r\n  }, [fetchPerformanceData]);\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  // Check if any platform is not connected\r\n  const allConnected = apiStatus.meta && apiStatus.google && apiStatus.analytics;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 text-slate-900\">\r\n      <div className=\"mx-auto p-6 max-w-7xl\">\r\n        <div className=\"mb-6 animate-fade-up\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"h-12 w-1 bg-blue-500 rounded-full\" />\r\n              <div>\r\n                <h1 className=\"text-2xl lg:text-3xl font-bold tracking-tight\">Welcome Back, {userName}</h1>\r\n                <p className=\"text-slate-500 mt-1\">Here's your performance overview</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-row items-center gap-3\">\r\n              {/* <HeaderTutorialButton /> */}\r\n           \r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Requirements Banner */}\r\n        {bannerVisible && (\r\n          <div className=\"mb-6 animate-fade-up\">\r\n            <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg shadow-lg p-6 relative overflow-hidden\">\r\n              <button\r\n                onClick={() => setBannerVisible(false)}\r\n                className=\"absolute top-4 right-4 text-white hover:text-blue-100 transition-colors\"\r\n                aria-label=\"Close banner\"\r\n              >\r\n                <X className=\"h-5 w-5\" />\r\n              </button>\r\n              <div className=\"flex items-start gap-4 pr-8\">\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-semibold mb-2\">\r\n                    Have Custom Requirements?\r\n                  </h3>\r\n                  <p className=\"text-blue-50\">\r\n                    If you have any requirements, fill the form and we will try to integrate in 15 days.\r\n                  </p>\r\n                </div>\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  className=\"bg-white text-blue-600 hover:bg-blue-50 font-medium\"\r\n                  onClick={() => setHelpDeskModalOpen(true)}\r\n                >\r\n                  Fill Form\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Missing Platforms Section */}\r\n        {!allConnected && (\r\n          <div className=\"mb-8 animate-fade-up\">\r\n            <div className=\"bg-white border rounded-lg shadow-md p-6 space-y-6\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-xl font-bold text-slate-800\">\r\n                  Connect Your Platforms\r\n                </h2>\r\n              </div>\r\n              <p className=\"text-slate-600\">\r\n                Connect your advertising and analytics platforms to see all your performance data in one place.\r\n              </p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                {!apiStatus.meta && (\r\n                  <ConnectPlatformCard \r\n                    platform=\"Facebook\" \r\n                    onClick={() => handleConnectPlatform(\"Facebook\")} \r\n                  />\r\n                )}\r\n                {!apiStatus.google && (\r\n                  <ConnectPlatformCard \r\n                    platform=\"Google Ads\" \r\n                    onClick={() => handleConnectPlatform(\"Google Ads\")} \r\n                  />\r\n                )}\r\n                {!apiStatus.analytics && (\r\n                  <ConnectPlatformCard \r\n                    platform=\"Google Analytics\" \r\n                    onClick={() => handleConnectPlatform(\"Google Analytics\")} \r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Performance Table */}\r\n        <PerformanceTable \r\n          performanceData={performanceData}\r\n          apiStatus={apiStatus}\r\n          onRefresh={fetchPerformanceData}\r\n          loading={loading}\r\n        />\r\n\r\n        {/* Dashboard Quick Links Section */}\r\n        <div className=\"mt-8\">\r\n          <div className=\"mb-6\">\r\n            <h2 className=\"text-xl font-bold text-slate-800\">Quick Insights</h2>\r\n            <p className=\"text-sm text-slate-500 mt-1\">Click any card to explore detailed reports</p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          \r\n            {/* Conversion Funnel Card */}\r\n            {brandId && (\r\n              <ConversionFunnelCard \r\n                onNavigate={() => navigate(`/ecommerce-reports/${brandId}`)}\r\n                brandId={brandId}\r\n              />\r\n            )}\r\n\r\n            {/* Marketing Insights Card - Monthly Metrics */}\r\n            {brandId && (\r\n              <MarketingInsightsCard \r\n                onNavigate={() => navigate(`/marketing-insights/${brandId}`)}\r\n                brandId={brandId}\r\n              />\r\n            )}\r\n\r\n            {/* Payment Orders Card - COD vs Prepaid */}\r\n            {brandId && (\r\n              <PaymentOrdersCard \r\n                onNavigate={() => navigate(`/reports/${brandId}`)}\r\n                brandId={brandId}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Platform Connection Modal */}\r\n      {selectedPlatform && brandId && (\r\n        <PlatformModal\r\n          platform={selectedPlatform}\r\n          open={platformModalOpen}\r\n          onOpenChange={setPlatformModalOpen}\r\n          brandId={brandId}\r\n          onSuccess={handlePlatformModalSuccess}\r\n        />\r\n      )}\r\n\r\n      {/* Help Desk Modal */}\r\n      {helpDeskModalOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <TicketForm onClose={() => setHelpDeskModalOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SummaryDashboard;","\r\nimport { ConnectPlatformCard } from '../../GeneralisedDashboard/dashboard';\r\nimport { useState } from 'react';\r\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\r\nimport { useParams } from 'react-router-dom';\r\nimport Header from '@/components/dashboard_component/Header';\r\nimport { LineChart } from 'lucide-react';\r\n\r\nexport default function ConnectAccountsPage() {\r\n  const [isPlatformModalOpen, setIsPlatformModalOpen] = useState(false);\r\n  const [selectedPlatform, setSelectedPlatform] = useState<'Facebook' | 'Google Ads' | null>(null);\r\n  const { brandId } = useParams();\r\n\r\n  const handleConnectPlatform = (platform: 'Facebook' | 'Google Ads') => {\r\n    setSelectedPlatform(platform);\r\n    setIsPlatformModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <Header\r\n        title=\"AdMetrics Dashboard\"\r\n        Icon={LineChart}\r\n        showDatePicker={false}\r\n        showSettings={false}\r\n        showRefresh={false}\r\n        isLoading={false}\r\n      />\r\n\r\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\r\n        <div className=\"text-center mb-12\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\r\n            Connect Your Advertising Accounts\r\n          </h1>\r\n          <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\r\n            Connect your Facebook and Google Ads accounts to start tracking your advertising performance metrics in one place.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12\">\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:border-blue-500 transition-colors\">\r\n            <ConnectPlatformCard \r\n              platform=\"Facebook\" \r\n              onClick={() => handleConnectPlatform(\"Facebook\")} \r\n            />\r\n            <div className=\"mt-4 text-sm text-gray-600\">\r\n              <h3 className=\"font-semibold mb-2\">Facebook Ads Benefits:</h3>\r\n              <ul className=\"list-disc list-inside space-y-1\">\r\n                <li>Track ad spend and performance</li>\r\n                <li>Monitor ROAS and conversions</li>\r\n                <li>Analyze audience insights</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:border-blue-500 transition-colors\">\r\n            <ConnectPlatformCard \r\n              platform=\"Google Ads\" \r\n              onClick={() => handleConnectPlatform(\"Google Ads\")} \r\n            />\r\n            <div className=\"mt-4 text-sm text-gray-600\">\r\n              <h3 className=\"font-semibold mb-2\">Google Ads Benefits:</h3>\r\n              <ul className=\"list-disc list-inside space-y-1\">\r\n                <li>Track campaign performance</li>\r\n                <li>Monitor conversion rates</li>\r\n                <li>Analyze keyword performance</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center space-x-2 text-gray-500 mb-8\">\r\n            <div className=\"h-px w-16 bg-gray-300\"></div>\r\n            <span>or</span>\r\n            <div className=\"h-px w-16 bg-gray-300\"></div>\r\n          </div>\r\n          <p className=\"text-gray-600\">\r\n            Need help? Contact our support team for assistance with connecting your accounts.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <PlatformModal\r\n        open={isPlatformModalOpen}\r\n        onOpenChange={setIsPlatformModalOpen}\r\n        platform={selectedPlatform || 'Facebook'}\r\n        brandId={brandId || ''}\r\n      />\r\n    </div>\r\n  );\r\n} ","import { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { format } from \"date-fns\"\r\nimport { Blend, LineChart } from \"lucide-react\"\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\"\r\nimport AdAccountMetricsCard from \"./AdAccountsMetricsCard.tsx\"\r\nimport { AdAccountData, GoogleAdAccountData } from '@/pages/Dashboard/interfaces.ts'\r\nimport Header from '@/components/dashboard_component/Header.tsx';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store/index.ts';\r\nimport Loader from '@/components/dashboard_component/loader.tsx';\r\nimport createAxiosInstance from '../ConversionReportPage/components/axiosInstance.ts';\r\nimport { GoogleLogo } from '@/data/logo.tsx';\r\nimport { ConnectPlatformCard } from '../GeneralisedDashboard/dashboard.tsx';\r\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\r\nimport ConnectAccountsPage from './Components/ConnectAccountsPage.tsx';\r\n\r\nexport default function Dashboard() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [fbAdAccountsMetrics, setFbAdAccountsMetrics] = useState<AdAccountData[]>([]);\r\n  const [googleAdMetrics, setGoogleAdMetrics] = useState<GoogleAdAccountData>();\r\n  const [isPlatformModalOpen, setIsPlatformModalOpen] = useState(false);\r\n  const [selectedPlatform, setSelectedPlatform] = useState<'Facebook' | 'Google Ads' | null>(null);\r\n  \r\n  const locale = useSelector((state:RootState) => state.locale.locale)\r\n  const { brandId } = useParams();\r\n  const navigate = useNavigate();\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  \r\n  const [rawMetrics, setRawMetrics] = useState({\r\n    totalSpent: 0,\r\n    totalRevenue: 0,\r\n    totalROAS: 0,\r\n    totalPurchases: 0,\r\n    totalCTR: 0,\r\n    totalCPC: 0,\r\n    totalCPM: 0,\r\n    totalCPP: 0,\r\n  });\r\n \r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGoogleAdAccount = Boolean(selectedBrand?.googleAdAccount?.length);\r\n  const hasFbAdAccount = Boolean(selectedBrand?.fbAdAccounts?.length);\r\n  const hasAnyAdAccounts = hasGoogleAdAccount || hasFbAdAccount;\r\n  const userId = user?.id;\r\n\r\n  const fetchFacebookData = async (startDate: string, endDate: string) => {\r\n    try {\r\n      const fbAdResponse = await axiosInstance.post(\r\n        `/api/metrics/fbAd/${brandId}`,\r\n        { startDate, endDate, userId },\r\n        { withCredentials: true }\r\n      );\r\n      return fbAdResponse.data.data;\r\n    } catch (fbError) {\r\n      console.error('Error fetching Facebook ad data:', fbError);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchGoogleData = async (startDate: string, endDate: string) => {\r\n    try {\r\n      const googleAdResponse = await axiosInstance.post(\r\n        `/api/metrics/googleAdAndCampaign/${brandId}`,\r\n        { startDate, endDate },\r\n        { withCredentials: true }\r\n      );\r\n      return googleAdResponse.data?.data || [];\r\n    } catch (googleError) {\r\n      console.error('Error fetching Google ad data:', googleError);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchAdData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n      const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n      const [fbData, googleData] = await Promise.all([\r\n        fetchFacebookData(startDate, endDate),\r\n        fetchGoogleData(startDate, endDate)\r\n      ]);\r\n\r\n      setFbAdAccountsMetrics(fbData);\r\n      setGoogleAdMetrics(googleData);\r\n      calculateAggregatedMetrics(fbData, googleData);\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching ad data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [navigate, date, brandId, userId]);\r\n\r\n  useEffect(() => {\r\n    fetchAdData();\r\n  }, [fetchAdData]);\r\n\r\n  useEffect(() => {\r\n    fetchAdData();\r\n    const intervalId = setInterval(fetchAdData, 3 * 60 * 60 * 1000); // 3 hours\r\n    return () => clearInterval(intervalId);\r\n}, [fetchAdData]);\r\n\r\n  const calculateFacebookMetrics = (fbData: AdAccountData[]) => {\r\n    let totalSpent = 0;\r\n    let totalRevenue = 0;\r\n    let totalPurchases = 0;\r\n    let totalClicks = 0;\r\n    let totalImpressions = 0;\r\n\r\n    if (fbData?.length) {\r\n      fbData.forEach(account => {\r\n        totalSpent += parseFloat(String(account.spend || '0'));\r\n        totalRevenue += parseFloat(String(account.Revenue?.value || '0'));\r\n        totalPurchases += parseFloat(String(account.purchases?.value || '0'));\r\n        totalClicks += parseFloat(String(account.clicks || '0'));\r\n        totalImpressions += parseFloat(String(account.impressions || '0'));\r\n      });\r\n    }\r\n\r\n    return { totalSpent, totalRevenue, totalPurchases, totalClicks, totalImpressions };\r\n  };\r\n\r\n  const calculateGoogleMetrics = (googleData: GoogleAdAccountData | undefined) => {\r\n    let totalSpent = 0;\r\n    let totalRevenue = 0;\r\n    let totalPurchases = 0;\r\n    let totalClicks = 0;\r\n    let totalImpressions = 0;\r\n\r\n    if (googleData?.adMetrics) {\r\n      totalSpent += parseFloat(googleData.adMetrics.totalSpend || '0');\r\n      totalRevenue += parseFloat(googleData.adMetrics.totalConversionsValue || '0');\r\n      totalPurchases += parseFloat(googleData.adMetrics.totalConversions || '0');\r\n      totalClicks += parseFloat(googleData.adMetrics.totalClicks || '0');\r\n      totalImpressions += parseFloat(googleData.adMetrics.totalImpressions || '0');\r\n    }\r\n\r\n    return { totalSpent, totalRevenue, totalPurchases, totalClicks, totalImpressions };\r\n  };\r\n\r\n  const calculateAggregatedMetrics = useCallback((fbData: AdAccountData[], googleData: GoogleAdAccountData | undefined) => {\r\n    const fbMetrics = calculateFacebookMetrics(fbData);\r\n    const googleMetrics = calculateGoogleMetrics(googleData);\r\n\r\n    const totalSpent = fbMetrics.totalSpent + googleMetrics.totalSpent;\r\n    const totalRevenue = fbMetrics.totalRevenue + googleMetrics.totalRevenue;\r\n    const totalPurchases = fbMetrics.totalPurchases + googleMetrics.totalPurchases;\r\n    const totalClicks = fbMetrics.totalClicks + googleMetrics.totalClicks;\r\n    const totalImpressions = fbMetrics.totalImpressions + googleMetrics.totalImpressions;\r\n\r\n    setRawMetrics({\r\n      totalSpent,\r\n      totalRevenue,\r\n      totalROAS: totalRevenue / totalSpent || 0,\r\n      totalPurchases,\r\n      totalCTR: (totalClicks / totalImpressions) * 100 || 0,\r\n      totalCPC: totalSpent / totalClicks || 0,\r\n      totalCPM: (totalSpent * 1000) / totalImpressions || 0,\r\n      totalCPP: totalPurchases > 0 ? (totalSpent / totalPurchases) : 0,\r\n    });\r\n  }, []);\r\n\r\n  const formattedMetrics = useMemo(() => {\r\n    return {\r\n      totalSpent: ` ${rawMetrics.totalSpent.toLocaleString(locale)}`,\r\n      totalRevenue: ` ${rawMetrics.totalRevenue.toLocaleString(locale)}`,\r\n      totalROAS: Number((rawMetrics.totalROAS).toFixed(2)).toLocaleString(locale),\r\n      totalPurchases: rawMetrics.totalPurchases.toLocaleString(locale),\r\n      totalCTR: `${Number((rawMetrics.totalCTR).toFixed(2)).toLocaleString(locale)} %`,\r\n      totalCPC: Number((rawMetrics.totalCPC).toFixed(2)).toLocaleString(locale),\r\n      totalCPM: Number((rawMetrics.totalCPM).toFixed(2)).toLocaleString(locale),\r\n      totalCPP: Number((rawMetrics.totalCPP).toFixed(2)).toLocaleString(locale),\r\n    };\r\n  }, [rawMetrics, locale]);\r\n\r\n  const metrics = [\r\n    {\r\n      label: 'Amount Spent',\r\n      value: formattedMetrics.totalSpent,\r\n      tooltipContent: 'The sum of ad spends for all advertising platforms',\r\n    },\r\n    {\r\n      label: 'Revenue',\r\n      value: formattedMetrics.totalRevenue,\r\n      tooltipContent: 'Revenue from Ads Purchases',\r\n    },\r\n    {\r\n      label: 'ROAS (Ads only)',\r\n      value: formattedMetrics.totalROAS,\r\n      tooltipContent: 'Blended ROAS = Ads Purchases value / Blended Ad Spend',\r\n    },\r\n    {\r\n      label: 'Ads Purchases',\r\n      value: formattedMetrics.totalPurchases,\r\n      tooltipContent: 'Ads Purchases = Fb Ads Purchase + Google Conversions',\r\n    },\r\n    {\r\n      label: 'CPC',\r\n      value: formattedMetrics.totalCPC,\r\n      tooltipContent:\r\n        'Average CPC from all advertising platforms = (Blended Ad Spend / Blended Clicks)',\r\n    },\r\n    {\r\n      label: 'CPM',\r\n      value: formattedMetrics.totalCPM,\r\n      tooltipContent:\r\n        'Average CPM from all advertising platforms = (Blended Ad Spend * 1000 / Blended Impressions)',\r\n    },\r\n    {\r\n      label: 'CTR',\r\n      value: formattedMetrics.totalCTR,\r\n      tooltipContent:\r\n        'Average CTR from all advertising platforms = (Blended Clicks / Blended Impressions)*100',\r\n    },\r\n    {\r\n      label: 'CPP',\r\n      value: formattedMetrics.totalCPP,\r\n      tooltipContent:\r\n        'Average CPP from all advertising platforms = (Blended Ad Spend / Blended Purchases)',\r\n    },\r\n  ];\r\n\r\n  const googleMetrics = [\r\n    {\r\n      label: 'Total Cost',\r\n      value: googleAdMetrics\r\n        ? ` ${parseFloat(googleAdMetrics?.adMetrics?.totalSpend || '0').toLocaleString(locale)}`\r\n        : ' 0',\r\n    },\r\n    {\r\n      label: 'Conversion Value',\r\n      value: googleAdMetrics ? ` ${parseFloat(googleAdMetrics?.adMetrics?.totalConversionsValue).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'ROAS',\r\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.roas).toLocaleString(locale) : '0.00',\r\n    },\r\n    {\r\n      label: 'Conversions',\r\n      value: googleAdMetrics ? parseFloat(googleAdMetrics?.adMetrics?.totalConversions).toLocaleString(locale) : '0',\r\n    },\r\n    {\r\n      label: 'CPC',\r\n      value: googleAdMetrics ? ` ${parseFloat(googleAdMetrics?.adMetrics?.totalCPC).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'CPM',\r\n      value: googleAdMetrics ? ` ${parseFloat(googleAdMetrics?.adMetrics?.totalCPM).toLocaleString(locale)}` : ' 0',\r\n    },\r\n    {\r\n      label: 'CTR',\r\n      value: googleAdMetrics ? `${parseFloat(googleAdMetrics?.adMetrics?.totalCTR).toLocaleString(locale)} %` : ' 0',\r\n    },\r\n    {\r\n      label: 'Cost Per Conversion',\r\n      value: googleAdMetrics ? ` ${parseFloat(googleAdMetrics?.adMetrics?.totalCostPerConversion).toLocaleString(locale)}` : ' 0',\r\n    },\r\n  ]\r\n\r\n  const handleConnectPlatform = (platform: 'Facebook' | 'Google Ads') => {\r\n    setSelectedPlatform(platform);\r\n    setIsPlatformModalOpen(true);\r\n  };\r\n\r\n  const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\r\n    console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n    // Refresh the page or refetch data to show the newly connected account\r\n    window.location.reload();\r\n  };\r\n\r\n  // If no accounts are connected, show the connect accounts page\r\n  if (!hasAnyAdAccounts) {\r\n    return <ConnectAccountsPage />;\r\n  }\r\n\r\n  if(isLoading){\r\n    return <Loader isLoading={isLoading} />\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <Header\r\n        title=\"AdMetrics Dashboard\"\r\n        Icon={LineChart}\r\n        showDatePicker={true}\r\n        showSettings={true}\r\n        showRefresh={true}\r\n        isLoading={false}\r\n        handleManualRefresh={() => {\r\n          fetchAdData();\r\n        }}\r\n      />\r\n\r\n      {!hasAnyAdAccounts && (\r\n        <div className=\"p-4 md:p-6 lg:px-8 space-y-6\">\r\n          <div className=\"text-center mb-8\">\r\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-2\">Connect Your Ad Accounts</h2>\r\n            <p className=\"text-gray-600\">Connect your advertising accounts to start tracking your metrics</p>\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto\">\r\n            <ConnectPlatformCard \r\n              platform=\"Facebook\" \r\n              onClick={() => handleConnectPlatform(\"Facebook\")} \r\n            />\r\n            <ConnectPlatformCard \r\n              platform=\"Google Ads\" \r\n              onClick={() => handleConnectPlatform(\"Google Ads\")} \r\n            />\r\n          </div>\r\n\r\n          <div className=\"text-center mt-8\">\r\n            <div className=\"inline-flex items-center space-x-2 text-gray-500\">\r\n              <div className=\"h-px w-16 bg-gray-300\"></div>\r\n              <span>or</span>\r\n              <div className=\"h-px w-16 bg-gray-300\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <PlatformModal\r\n        open={isPlatformModalOpen}\r\n        onOpenChange={setIsPlatformModalOpen}\r\n        platform={selectedPlatform || 'Facebook'}\r\n        brandId={brandId || ''}\r\n        onSuccess={handlePlatformModalSuccess}\r\n      />\r\n\r\n      {/* Main content */}\r\n      <main className=\"p-4 md:p-6 lg:px-8\">\r\n        {!hasAnyAdAccounts ? <></> : (\r\n          <div className=\"space-y-2\">\r\n            {/* Blended summary */}\r\n            <section id='all'>\r\n              <h2 className=\"text-xl font-semibold flex flex-row items-center justify-between\">\r\n                <div className='flex flex-row items-center space-x-2'>\r\n                  <Blend className=\"h-5 w-5\" />\r\n                  <span>Blended summary</span>\r\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                  </svg>\r\n                  <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5\" >\r\n                    <path d=\"M13.5437 4.24116L13.5441 4.24138C13.904 4.43971 14.2179 4.70303 14.4689 5.01529C14.7198 5.3275 14.903 5.68264 15.009 6.0601L15.4904 5.92486L15.009 6.0601C15.115 6.43752 15.1422 6.83078 15.0891 7.21776C15.0361 7.60457 14.9038 7.97861 14.6989 8.31855C14.6988 8.31873 14.6987 8.31891 14.6986 8.3191L8.41444 18.701C7.9918 19.3741 7.30557 19.868 6.49825 20.0687C5.68937 20.2699 4.83087 20.1586 4.10949 19.7614C3.38872 19.3646 2.86649 18.7168 2.64727 17.9633C2.42868 17.212 2.5264 16.4083 2.92214 15.7226L9.20689 5.33823C9.20695 5.33813 9.20702 5.33802 9.20708 5.33792C9.62451 4.65082 10.3142 4.14383 11.1301 3.93599C11.9464 3.72804 12.8151 3.83872 13.5437 4.24116Z\" fill=\"#FFB70A\" stroke=\"#FFB70A\"></path>\r\n                    <path d=\"M21.5404 15.4544L15.24 5.04127C14.7453 4.25097 13.9459 3.67817 13.0138 3.44633C12.0817 3.21448 11.0917 3.34215 10.2572 3.80182C9.4226 4.26149 8.8103 5.01636 8.55224 5.90372C8.29418 6.79108 8.41102 7.73988 8.87757 8.54562L15.178 18.9587C15.6726 19.749 16.4721 20.3218 17.4042 20.5537C18.3362 20.7855 19.3262 20.6579 20.1608 20.1982C20.9953 19.7385 21.6076 18.9836 21.8657 18.0963C22.1238 17.2089 22.0069 16.2601 21.5404 15.4544Z\" fill=\"#3B8AD8\"></path>\r\n                    <path d=\"M9.23018 16.2447C9.07335 15.6884 8.77505 15.1775 8.36166 14.7572C7.94827 14.3369 7.43255 14.0202 6.86011 13.835C6.28768 13.6499 5.67618 13.6021 5.07973 13.6958C4.48328 13.7895 3.92026 14.0219 3.44049 14.3723C2.96071 14.7227 2.57898 15.1804 2.32906 15.7049C2.07914 16.2294 1.96873 16.8045 2.00762 17.3794C2.0465 17.9542 2.23347 18.5111 2.55199 19.0007C2.8705 19.4902 3.31074 19.8975 3.83376 20.1863C4.46363 20.5354 5.1882 20.6983 5.91542 20.6542C6.64264 20.6101 7.33969 20.361 7.91802 19.9386C8.49636 19.5162 8.92988 18.9395 9.16351 18.2817C9.39715 17.624 9.42035 16.915 9.23018 16.2447Z\" fill=\"#2CAA14\"></path>\r\n                  </svg>\r\n                </div>\r\n              </h2>\r\n              <AdAccountMetricsCard\r\n                metrics={metrics}\r\n                date={{\r\n                  from: date.from ? new Date(date.from) : undefined,\r\n                  to: date.to ? new Date(date.to) : undefined\r\n                }}\r\n                isLoading={isLoading}\r\n              />\r\n            </section>\r\n          </div>\r\n        )}\r\n\r\n        {fbAdAccountsMetrics?.length > 0 && fbAdAccountsMetrics.map((accountMetrics, index) => {\r\n          const fbmetrics = [\r\n            { label: 'Amount Spent', value: ` ${parseFloat(String(accountMetrics.spend || '0')).toLocaleString(locale)}` },\r\n            {\r\n              label: 'Revenue',\r\n              value: ` ${parseFloat(String(accountMetrics.Revenue?.value || '0')).toLocaleString(locale)}`\r\n            },\r\n            {\r\n              label: 'ROAS (Ads only)',\r\n              value: accountMetrics.purchase_roas && accountMetrics.purchase_roas.length > 0\r\n                ? parseFloat(String(accountMetrics.purchase_roas[0].value)).toLocaleString(locale, {\r\n                    minimumFractionDigits: 2,\r\n                    maximumFractionDigits: 2\r\n                  })\r\n                : '0'\r\n            },\r\n            { label: 'Ads Purchases', value: accountMetrics.purchases?.value || '0' },\r\n            { label: 'CPC (All clicks)', value: ` ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpc || '0'))}` },\r\n            { label: 'CPM', value: ` ${new Intl.NumberFormat(locale, { minimumFractionDigits: 2 }).format(parseFloat(accountMetrics.cpm || '0'))}` },\r\n            { label: 'CTR', value: `${parseFloat(accountMetrics.ctr || '0').toFixed(2)} %` },\r\n            { label: 'Cost per Purchase (All)', value: ` ${new Intl.NumberFormat(locale).format(parseFloat(accountMetrics.cpp || '0'))}` },\r\n          ];\r\n\r\n          return (\r\n            <div key={index} id=\"facebook\">\r\n              <AdAccountMetricsCard\r\n                icon=\"Facebook\"\r\n                title={`Facebook - ${accountMetrics.account_name}`}\r\n                metrics={fbmetrics}\r\n                date={{\r\n                  from: date.from ? new Date(date.from) : undefined,\r\n                  to: date.to ? new Date(date.to) : undefined\r\n                }}\r\n                isLoading={isLoading}\r\n                errorMessage={accountMetrics.message}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {!hasFbAdAccount && (\r\n          <div className=\"space-y-2\">\r\n            <section className='mt-10' id=\"facebook\">\r\n              <div className='flex flex-row gap-2 items-center'>\r\n                <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"#1877F2\">\r\n                  <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n                </svg>\r\n                <h3 className=\"text-lg font-semibold\">Facebook Ad Metrics</h3>\r\n              </div>\r\n\r\n              <div className=\"text-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\r\n                <p className=\"mb-4\">No Facebook Ad Account connected for this brand.</p>\r\n                <button\r\n                  onClick={() => handleConnectPlatform('Facebook')}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Connect Facebook Ads\r\n                </button>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        )}\r\n\r\n        {hasFbAdAccount && !hasGoogleAdAccount && (\r\n          <div className=\"space-y-2\">\r\n            <section className='mt-10' id=\"google\">\r\n              <div className='flex flex-row gap-2 items-center'>\r\n                <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\r\n                <h3 className=\"text-lg font-semibold\">Google Ad Metrics</h3>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col items-center justify-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\r\n                <p className=\"mb-4\">No Google Ad Account connected for this brand.</p>\r\n                <button\r\n                  onClick={() => handleConnectPlatform('Google Ads')}\r\n                  className=\"flex flex-row items-center justify-center gap-3 px-4 py-2 border-2 border-green-800 text-blackk rounded-md transition-colors\"\r\n                >\r\n                  <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\r\n                  Connect Google Ads\r\n                </button>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        )}\r\n\r\n        {googleAdMetrics && Object.keys(googleAdMetrics).length > 0 && (\r\n          <div key=\"google\" id=\"google\">\r\n            <AdAccountMetricsCard\r\n              icon=\"Google\"\r\n              title={`Google Ads - ${googleAdMetrics?.adAccountName}`}\r\n              metrics={googleMetrics}\r\n              date={{\r\n                from: date.from ? new Date(date.from) : undefined,\r\n                to: date.to ? new Date(date.to) : undefined\r\n              }}\r\n              isLoading={isLoading}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {!hasGoogleAdAccount && !hasFbAdAccount && (\r\n          <div className=\"space-y-2\">\r\n            <section className='mt-10' id=\"google\">\r\n              <div className='flex flex-row gap-2 items-center'>\r\n                <GoogleLogo width={\"1.5rem\"} height={\"1.5rem\"} />\r\n                <h3 className=\"text-lg font-semibold\">Google Ad Metrics</h3>\r\n              </div>\r\n\r\n              <div className=\"text-center text-gray-500 mt-4 bg-white p-6 rounded-md\">\r\n                <p className=\"mb-4\">No Google Ad Account connected for this brand.</p>\r\n                <button\r\n                  onClick={() => handleConnectPlatform('Google Ads')}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Connect Google Ads\r\n                </button>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { useState } from 'react';\r\nimport { FaHeadset } from \"react-icons/fa\";\r\nimport TicketForm from './TicketForm'; \r\n\r\nconst HelpDeskModal = () => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setIsModalOpen(true)}\r\n        className=\"fixed bottom-8 right-8 z-30 flex items-center gap-2 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200 group\"\r\n      >\r\n        <FaHeadset className=\"w-5 h-5 group-hover:animate-pulse\" />\r\n      </button>\r\n      \r\n      {isModalOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n  \r\n              <TicketForm onClose={() => setIsModalOpen(false)} />\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HelpDeskModal;","import React from \"react\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar.tsx\";\r\nimport Dashboard from \"./dashboard.tsx\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal.tsx\";\r\n\r\n\r\nconst AnalyticsDashboard: React.FC = () => {\r\n  return (\r\n    <div className=\"flex h-screen\"> \r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <Dashboard />\r\n     <HelpDeskModal />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n","import React, { useEffect } from \"react\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\nimport SummaryDashboard from \"./dashboard\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst GeneralDashboard: React.FC = () => {\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate('/');\r\n            return;\r\n        }\r\n\r\n    }, [user, navigate]);\r\n\r\n    // If user is not authenticated or has no brands, don't render anything\r\n    if (!user || !user.brands || user.brands.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    // Show summary dashboard for users with brands\r\n    return (\r\n        <div className=\"flex h-screen relative\">\r\n          <CollapsibleSidebar />\r\n          <div className=\"flex-1 h-screen overflow-auto\">\r\n            <SummaryDashboard />\r\n          </div>\r\n          <HelpDeskModal />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GeneralDashboard;","import { useEffect, useState } from \"react\"\r\nimport { Link, useParams } from \"react-router-dom\"\r\nimport { ArrowRight, BarChart3, CalendarRange, LineChart, PieChart } from \"lucide-react\"\r\nimport Header from \"@/components/dashboard_component/Header\"\r\n\r\nexport default function DataBuilding() {\r\n  const { brandId } = useParams<{ brandId: string }>()\r\n  const [loadingText, setLoadingText] = useState(\"Fetching table data\")\r\n  const loadingMessages = [\r\n    \"Fetching table data\",\r\n    \"Processing sales records\",\r\n    \"Aggregating metrics\",\r\n    \"Organizing table columns\",\r\n    \"Calculating performance indicators\",\r\n    \"Preparing data tables\",\r\n  ]\r\n\r\n  // Cycle through loading messagesb\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setLoadingText((prev) => {\r\n        const currentIndex = loadingMessages.indexOf(prev)\r\n        const nextIndex = (currentIndex + 1) % loadingMessages.length\r\n        return loadingMessages[nextIndex]\r\n      })\r\n    }, 2500)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"bg-slate-50 flex flex-col w-full min-h-screen\">\r\n        <Header title=\"Marketing Insights Tracker\" Icon={CalendarRange} showDatePicker={true} />\r\n        <main className=\"container max-w-6xl mx-auto px-4 py-8 flex flex-col h-screen justify-center\">\r\n        <div className=\"w-full text-center mb-12\">\r\n          <h1 className=\"text-xl md:text-4xl font-bold text-primary mb-3\">Preparing your dashboard...</h1>\r\n\r\n          {/* Animated loading text */}\r\n          <div className=\"h-8 my-8\">\r\n            <p className=\"text-base md:text-lg text-violet-600 font-medium animate-pulse\">{loadingText}...</p>\r\n          </div>\r\n\r\n          <p className=\"text-sm md:text-base text-gray-700 max-w-4xl mx-auto mb-2\">\r\n            We're loading data from the past two years up to yesterday. Going forward, new data will update daily.\r\n          </p>\r\n\r\n          <p className=\"text-sm md:text-base text-gray-500 max-w-4xl mx-auto mb-8\">\r\n            This process may take <span className=\"font-medium\">1-2 hours</span> to complete.\r\n          </p>\r\n\r\n          <p className=\"text-sm md:text-base text-gray-700 max-w-4xl mx-auto mb-10\">\r\n            In the meantime, you can explore these dashboards:\r\n          </p>\r\n\r\n          {/* Dashboard Links - Horizontal Layout */}\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center mt-6\">\r\n            {/* AdMetrics Hub Card */}\r\n            <Link\r\n              to={`/admetrics/${brandId}`}\r\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\r\n            >\r\n              <div className=\"p-5 flex flex-col items-center text-center\">\r\n                <div className=\"w-12 h-12 rounded-full bg-violet-100 flex items-center justify-center mb-3\">\r\n                  <BarChart3 className=\"w-6 h-6 text-violet-600\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">AdMetrics Hub</h3>\r\n                <div className=\"flex items-center text-violet-600 text-sm font-medium\">\r\n                  <span>View dashboard</span>\r\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n\r\n            {/* Ecommerce Insights Card */}\r\n            <Link\r\n              to={`/ecommerce-reports/${brandId}`}\r\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\r\n            >\r\n              <div className=\"p-5 flex flex-col items-center text-center\">\r\n                <div className=\"w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center mb-3\">\r\n                  <PieChart className=\"w-6 h-6 text-pink-600\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Ecommerce Insights</h3>\r\n                <div className=\"flex items-center text-pink-600 text-sm font-medium\">\r\n                  <span>View dashboard</span>\r\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n\r\n            {/* Campaign Analysis Card */}\r\n            <Link\r\n              to={`/meta-campaigns/${brandId}`}\r\n              className=\"bg-white rounded-lg shadow-md border-2 overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] group flex-1 max-w-xs mx-auto sm:mx-0\"\r\n            >\r\n              <div className=\"p-5 flex flex-col items-center text-center\">\r\n                <div className=\"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3\">\r\n                  <LineChart className=\"w-6 h-6 text-blue-600\" />\r\n                </div>\r\n                <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Campaign Analysis</h3>\r\n                <div className=\"flex items-center text-blue-600 text-sm font-medium\">\r\n                  <span>View dashboard</span>\r\n                  <ArrowRight className=\"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n","export const formatCurrency = (amount: number, currencyCode: string = 'USD'): string => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: currencyCode,\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  }).format(amount);\r\n};\r\n\r\n\r\nexport const formatPercentage = (value: number): string => {\r\n  return `${value.toFixed(2)}%`;\r\n}; ","import React, { useEffect, useMemo, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { format } from \"date-fns\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\"\r\nimport {ChevronDown, Download, Maximize, Minimize,} from \"lucide-react\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@radix-ui/react-tooltip\"\r\nimport { Card, CardContent } from \"@/components/ui/card\"\r\nimport { FacebookLogo, GoogleLogo, ShopifyLogo } from \"@/data/logo.tsx\"\r\nimport { useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\"\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\"\r\nimport type { ITooltipHeaderProps, IMonthlyAggregate } from \"@/interfaces/index\"\r\nimport Loader from \"@/components/dashboard_component/loader\"\r\nimport { baseURL } from \"@/data/constant\"\r\nimport DataBuilding from \"./components/DataBuilding\"\r\nimport { formatCurrency as formatCurrencyUtil } from '@/utils/currency'\r\nimport HeaderNotificationDropdown from \"@/components/dashboard_component/HeaderNotificationDropdown\"\r\n\r\n\r\nexport const formatCurrency = (amount: number, currencyCode: string = 'USD'): string => {\r\n  return formatCurrencyUtil(amount, currencyCode);\r\n};\r\n\r\nfunction TooltipHeader({\r\n  title,\r\n  tooltip,\r\n  colSpan = 1,\r\n  rowSpan,\r\n  isSubHeader = false,\r\n  isImportant = false,\r\n  isFirstInSection = false, // Add this new prop\r\n}: Readonly<ITooltipHeaderProps & { isImportant?: boolean; isFirstInSection?: boolean }>) {\r\n  return (\r\n    <th\r\n      className={`\r\n        ${isSubHeader ? \"text-xs font-medium\" : \"font-semibold text-sm\"}\r\n        text-center whitespace-nowrap p-2\r\n        ${isSubHeader ? \"bg-slate-100\" : \"bg-slate-200\"}\r\n        ${isImportant ? \"bg-blue-50 !font-bold text-blue-800\" : \"\"}\r\n        relative overflow-hidden\r\n        ${!isSubHeader ? \"sticky top-0 z-10\" : \"\"}\r\n        font-inter border-b border-r border-slate-300\r\n        ${isFirstInSection ? \"border-l-2 border-l-slate-300 shadow-sm\" : \"\"}\r\n      `}\r\n      colSpan={colSpan}\r\n      rowSpan={rowSpan}\r\n    >\r\n      <TooltipProvider>\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <span\r\n              className={`\r\n                flex items-center justify-center gap-1 cursor-help\r\n                ${isImportant ? \"text-blue-800\" : \"\"}\r\n              `}\r\n            >\r\n              {isImportant && <span className=\"text-blue-500\"></span>}\r\n              {title}\r\n            </span>\r\n          </TooltipTrigger>\r\n          <TooltipContent className=\"mb-3 z-20 w-fit\">\r\n            <div className=\"text-gray-700 bg-white p-2 rounded-md text-sm border shadow-lg max-w-fit\">\r\n              {isImportant && <div className=\"font-semibold text-blue-600 mb-1\">Key Metric</div>}\r\n              {tooltip}\r\n            </div>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      </TooltipProvider>\r\n    </th>\r\n  )\r\n}\r\n\r\n// Excel-like cell component\r\nfunction Cell({\r\n  children,\r\n  isNumeric = false,\r\n  isHeader = false,\r\n  isSticky = false,\r\n  isExpanded = false,\r\n  isImportant = false,\r\n  isFirstInSection = false, // Add this new prop\r\n  className = \"\",\r\n}: {\r\n  children?: React.ReactNode\r\n  isNumeric?: boolean\r\n  isHeader?: boolean\r\n  isSticky?: boolean\r\n  isExpanded?: boolean\r\n  isImportant?: boolean\r\n  isFirstInSection?: boolean\r\n  className?: string\r\n}) {\r\n  return (\r\n    <td\r\n      className={`\r\n        border-b border-r border-slate-200\r\n        ${isNumeric ? \"text-right font-roboto tabular-nums\" : \"text-left\"} \r\n        ${isHeader ? \"font-medium font-dm-sans\" : \"\"}\r\n        ${isSticky ? \"sticky z-10\" : \"\"}\r\n        ${isExpanded ? \"bg-blue-50/30\" : \"bg-white hover:bg-slate-50/80\"}\r\n        ${isSticky && isExpanded ? \"bg-blue-50/30\" : \"\"}\r\n        ${isImportant ? \"font-semibold text-blue-700\" : \"\"}\r\n        ${isFirstInSection ? \"border-l-2 border-l-slate-300 shadow-sm\" : \"\"}\r\n        transition-colors\r\n        ${className}\r\n      `}\r\n    >\r\n      {children}\r\n    </td>\r\n  )\r\n}\r\n\r\nexport const ExcelMetricsPage: React.FC = () => {\r\n  const [metricsData, setMetricsData] = useState<IMonthlyAggregate[]>([])\r\n  const [loading, setLoading] = useState<boolean>(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [isFullScreen, setIsFullScreen] = useState<boolean>(false)\r\n  const [currency, setCurrency] = useState<string>('USD')\r\n  const dateFrom = useSelector((state: RootState) => state.date.from)\r\n  const dateTo = useSelector((state: RootState) => state.date.to)\r\n  const [expandedMonths, setExpandedMonths] = useState<string[]>([])\r\n  const { brandId } = useParams()\r\n\r\n  const date = useMemo(\r\n    () => ({\r\n      from: dateFrom,\r\n      to: dateTo,\r\n    }),\r\n    [dateFrom, dateTo],\r\n  )\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\"\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\"\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen)\r\n  }\r\n\r\n  const getTableHeight = () => {\r\n    if (isFullScreen) {\r\n      return \"h-screen\"\r\n    }\r\n    return \"h-full\"\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true)\r\n      setError(null)\r\n      try {\r\n        const queryParams: Record<string, string> = {}\r\n\r\n        if (startDate) queryParams.startDate = startDate\r\n        if (endDate) queryParams.endDate = endDate\r\n\r\n        // Fetch currency first\r\n        const currencyResponse = await axios.get(`${baseURL}/api/brands/currency/${brandId}`, {\r\n          withCredentials: true,\r\n        })\r\n        setCurrency(currencyResponse.data)\r\n\r\n        // Then fetch metrics data\r\n        const reportResponse = await axios.get(`${baseURL}/api/report/${brandId}`, {\r\n          params: queryParams,\r\n          withCredentials: true,\r\n        })\r\n        const metricsData: IMonthlyAggregate[] = reportResponse.data.data\r\n        setMetricsData(metricsData)\r\n      } catch (err) {\r\n        console.error(err)\r\n        const message =\r\n          axios.isAxiosError(err) && err.response?.data?.message ? err.response.data.message : \"Something went wrong\"\r\n        setError(message)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchData()\r\n  }, [brandId, startDate, endDate, baseURL])\r\n\r\n  const toggleMonth = (monthYear: string) => {\r\n    setExpandedMonths((prev) => (prev.includes(monthYear) ? prev.filter((m) => m !== monthYear) : [...prev, monthYear]))\r\n  }\r\n\r\n  const formatCurrency = (value: number) => {\r\n    return formatCurrencyUtil(value, currency);\r\n  }\r\n\r\n  const formatPercentage = (value: number) => {\r\n    return `${value.toFixed(2)}`\r\n  }\r\n\r\n  const processedData = useMemo(() => {\r\n    const safeDivide = (numerator: number, denominator: number) => (denominator ? numerator / denominator : 0)\r\n\r\n    return metricsData.map((monthData: IMonthlyAggregate) => {\r\n      const processedDailyMetrics = monthData.dailyMetrics.map((daily) => ({\r\n        ...daily,\r\n        metaROAS: safeDivide(daily.metaRevenue, daily.metaSpend),\r\n        googleSales: (daily.googleSpend) * (daily.googleROAS),\r\n        adSales: (daily.totalSpend) * (daily.grossROI || 0),\r\n        ROI: safeDivide(daily.totalSales, daily.totalSpend),\r\n      }))\r\n\r\n      const metaSales = processedDailyMetrics.reduce((sum, daily) => sum + (daily.metaRevenue || 0), 0)\r\n      const googleSales = processedDailyMetrics.reduce((sum, daily) => sum + daily.googleSales, 0)\r\n      const totalAdSales = metaSales + googleSales || 0\r\n\r\n      return {\r\n        ...monthData,\r\n        metaSales,\r\n        googleSales,\r\n        totalAdSales,\r\n        metaROAS: safeDivide(metaSales, monthData.metaSpend),\r\n        googleROAS: safeDivide(googleSales, monthData.googleSpend),\r\n        grossROI: safeDivide(totalAdSales, monthData.totalSpend),\r\n        netROI: safeDivide(monthData.shopifySales, monthData.totalSpend),\r\n        ROI: safeDivide(monthData.totalSales, monthData.totalSpend),\r\n        dailyMetrics: processedDailyMetrics,\r\n      }\r\n    })\r\n  }, [metricsData])\r\n\r\n  useMemo(() => {\r\n    if (!processedData.length) return null\r\n\r\n    const totalSales = processedData.reduce((sum, month) => sum + month.totalSales, 0)\r\n    const totalSpend = processedData.reduce((sum, month) => sum + month.totalSpend, 0)\r\n    const totalROI = totalSpend ? totalSales / totalSpend : 0\r\n    const metaSpend = processedData.reduce((sum, month) => sum + month.metaSpend, 0)\r\n    const googleSpend = processedData.reduce((sum, month) => sum + month.googleSpend, 0)\r\n    const metaSales = processedData.reduce((sum, month) => sum + month.metaSales, 0)\r\n    const googleSales = processedData.reduce((sum, month) => sum + month.googleSales, 0)\r\n    const metaROAS = metaSpend ? metaSales / metaSpend : 0\r\n    const googleROAS = googleSpend ? googleSales / googleSpend : 0\r\n\r\n    return {\r\n      totalSales,\r\n      totalSpend,\r\n      totalROI,\r\n      metaSpend,\r\n      googleSpend,\r\n      metaSales,\r\n      googleSales,\r\n      metaROAS,\r\n      googleROAS,\r\n    }\r\n  }, [processedData])\r\n\r\n  const renderTable = (): React.ReactNode => {\r\n    if (error) {\r\n      return <div className=\"rounded-lg bg-red-50 p-4 text-red-600 border border-red-200\">{error}</div>\r\n    }\r\n\r\n    return (\r\n      <div className=\"border rounded-lg shadow-sm overflow-hidden bg-white h-full flex flex-col font-karla\">\r\n        <div className={`${getTableHeight()} overflow-auto flex-1`}>\r\n          <table className=\"w-full border-collapse font-inter\">\r\n            <thead className=\"sticky top-0 z-20\">\r\n              <tr>\r\n                <th className=\"w-10 sticky left-0 z-30 bg-slate-200 border-b border-r border-slate-300\" rowSpan={2} />\r\n                <th\r\n                  className=\"sticky left-[40px] z-20 text-center whitespace-nowrap p-2 font-semibold text-sm bg-slate-200 border-b border-r border-slate-300 border-l-2 border-l-slate-300 \"\r\n                  rowSpan={2}\r\n                >\r\n                  Date\r\n                </th>\r\n                <TooltipHeader\r\n                  title=\"Shopify (Actual Sales Data)\"\r\n                  tooltip=\"Shopify Metrics\"\r\n                  colSpan={3}\r\n                  isFirstInSection={true}\r\n                />\r\n                <TooltipHeader title=\"Meta + Google\" tooltip=\"Meta + Google\" colSpan={3} isFirstInSection={true} />\r\n                <TooltipHeader\r\n                  title=\"Meta (Facebook & Instagram Ads)\"\r\n                  tooltip=\"Meta Metrics\"\r\n                  colSpan={3}\r\n                  isFirstInSection={true}\r\n                />\r\n                <TooltipHeader title=\"Google Ads\" tooltip=\"Google Metrics\" colSpan={3} isFirstInSection={true} />\r\n              </tr>\r\n              <tr>\r\n                {/* <TooltipHeader\r\n                  title=\"Net Sales\"\r\n                  tooltip=\"Net Sales = Gross Sales - Discount\"\r\n                  isSubHeader\r\n                  isFirstInSection={true}\r\n                />\r\n                <TooltipHeader\r\n                  title=\"Net ROI\"\r\n                  tooltip=\"Net ROI = Net Sales / Total Spend\"\r\n                  isSubHeader\r\n                  isImportant={true}\r\n                /> */}\r\n                <TooltipHeader title=\"Total Sales\" tooltip=\"Total Sales\" isSubHeader isFirstInSection={true} />\r\n                <TooltipHeader title=\"Total Returns\" tooltip=\"Net Returns + Shipping Returned + Return Fees + Taxes Returned\" isSubHeader />\r\n                <TooltipHeader\r\n                  title=\"ROAS\"\r\n                  tooltip=\"ROAS = Total Sales / Total Spend\"\r\n                  isSubHeader\r\n                  isImportant={true}\r\n                />\r\n                <TooltipHeader\r\n                  title=\"Spend\"\r\n                  tooltip=\"Total Spent = Meta Spent + Google Spent\"\r\n                  isSubHeader\r\n                  isFirstInSection={true}\r\n                />\r\n                <TooltipHeader title=\"Sales\" tooltip=\"Sales = (MetaSales + GoogleSales)\" isSubHeader />\r\n                <TooltipHeader\r\n                  title=\"ROI\"\r\n                  tooltip=\"ROI = (MetaSales + GoogleSales)/ Total Spent\"\r\n                  isSubHeader\r\n                  isImportant={true}\r\n                />\r\n                <TooltipHeader title=\"Spend\" tooltip=\"Meta Spent\" isSubHeader isFirstInSection={true} />\r\n                <TooltipHeader title=\"Sales\" tooltip=\"Meta Sales = Meta Spent * Meta ROAS\" isSubHeader />\r\n                <TooltipHeader title=\"ROAS\" tooltip=\"Meta ROAS\" isSubHeader isImportant={true} />\r\n                <TooltipHeader title=\"Spend\" tooltip=\"Google Spent\" isSubHeader isFirstInSection={true} />\r\n                <TooltipHeader title=\"Sales\" tooltip=\"Google Sales = Google Spent * Google ROAS\" isSubHeader />\r\n                <TooltipHeader title=\"ROAS\" tooltip=\"Google ROAS\" isSubHeader isImportant={true} />\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {processedData.map((monthData: any) => {\r\n                const monthYear = `${monthData.year}-${monthData.month.toString().padStart(2, \"0\")}`\r\n                const isExpanded = expandedMonths.includes(monthYear)\r\n                return (\r\n                  <React.Fragment key={monthYear}>\r\n                    <tr\r\n                      className={`\r\n                        ${isExpanded ? \"bg-blue-50\" : \"bg-white hover:bg-slate-50/80\"} \r\n                        cursor-pointer transition-colors \r\n                      `}\r\n                      onClick={() => toggleMonth(monthYear)}\r\n                    >\r\n                      <Cell isSticky isExpanded={isExpanded} className=\"w-10 px-2 py-2 sticky left-0\">\r\n                        <div\r\n                          className={`\r\n                            w-6 h-6 rounded-full flex items-center justify-center\r\n                            transition-all duration-300 transform\r\n                            ${isExpanded ? \"rotate-180 bg-blue-500\" : \"bg-blue-100 hover:bg-blue-200\"}\r\n                          `}\r\n                        >\r\n                          <ChevronDown className={`w-4 h-4 ${isExpanded ? \"text-white\" : \"text-blue-500\"}`} />\r\n                        </div>\r\n                      </Cell>\r\n                      <Cell\r\n                        isHeader\r\n                        isSticky\r\n                        isExpanded={isExpanded}\r\n                        className=\"sticky left-[40px] px-3 py-2.5 whitespace-nowrap bg-slate-50/80 text-sm border-l-2 border-l-slate-300 \"\r\n                      >\r\n                        {format(new Date(monthData.year, monthData.month - 1), \"MMM yyyy\")}\r\n                      </Cell>\r\n                      {/* <Cell\r\n                        isNumeric\r\n                        isExpanded={isExpanded}\r\n                        className=\"px-3 py-2.5 font-medium text-sm\"\r\n                        isFirstInSection={true}\r\n                      >\r\n                        {formatCurrency(monthData.shopifySales)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\r\n                        {formatPercentage(monthData.netROI)}\r\n                      </Cell> */}\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 font-medium text-sm\" isFirstInSection={true}>\r\n                        {formatCurrency(monthData.totalSales)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\r\n                        {formatCurrency(monthData.refundAmount)}\r\n                      </Cell>\r\n\r\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\r\n                        {formatPercentage(monthData.ROI)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\r\n                        {formatCurrency(monthData.totalSpend)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\r\n                        {formatCurrency(monthData.totalAdSales)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\r\n                        {formatPercentage(monthData.grossROI)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\r\n                        {formatCurrency(monthData.metaSpend)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\r\n                        {formatCurrency(monthData.metaSales)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\r\n                        {formatPercentage(monthData.metaROAS)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\" isFirstInSection={true}>\r\n                        {formatCurrency(monthData.googleSpend)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} className=\"px-3 py-2.5 text-sm\">\r\n                        {formatCurrency(monthData.googleSales)}\r\n                      </Cell>\r\n                      <Cell isNumeric isExpanded={isExpanded} isImportant className=\"px-3 py-2.5 text-sm\">\r\n                        {formatPercentage(monthData.googleROAS)}\r\n                      </Cell>\r\n                    </tr>\r\n                    {isExpanded &&\r\n                      monthData.dailyMetrics.map((daily: any) => (\r\n                        <tr key={daily._id} className=\"bg-slate-50/50 hover:bg-slate-100/50 transition-colors\">\r\n                          <Cell isSticky className=\"w-10 px-2 py-1.5 sticky left-0 bg-slate-50/50\" />\r\n                          <Cell\r\n                            isSticky\r\n                            className=\"sticky left-[40px] px-3 py-1.5 text-xs text-gray-600 bg-slate-50/80 border-l-2 border-l-slate-300 \"\r\n                          >\r\n                            {format(new Date(daily.date), \"dd/MM/yyyy\")}\r\n                          </Cell>\r\n                          {/* <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\r\n                            {formatCurrency(daily.shopifySales)}\r\n                          </Cell>\r\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\r\n                            {formatPercentage(daily.netROI)}\r\n                          </Cell> */}\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\r\n                            {formatCurrency(daily.totalSales)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\r\n                            {formatCurrency(daily.refundAmount)}\r\n                          </Cell>\r\n\r\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\r\n                            {formatPercentage(daily.ROI)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\r\n                            {formatCurrency(daily.totalSpend)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\r\n                            {formatCurrency(daily.adSales)}\r\n                          </Cell>\r\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\r\n                            {formatPercentage(daily.grossROI)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\r\n                            {formatCurrency(daily.metaSpend)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\r\n                            {formatCurrency(daily.metaRevenue)}\r\n                          </Cell>\r\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\r\n                            {formatPercentage(daily.metaROAS)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\" isFirstInSection={true}>\r\n                            {formatCurrency(daily.googleSpend)}\r\n                          </Cell>\r\n                          <Cell isNumeric className=\"px-3 py-1.5 text-xs\">\r\n                            {formatCurrency(daily.googleSales)}\r\n                          </Cell>\r\n                          <Cell isNumeric isImportant className=\"px-3 py-1.5 text-xs\">\r\n                            {formatPercentage(daily.googleROAS)}\r\n                          </Cell>\r\n                        </tr>\r\n                      ))}\r\n                  </React.Fragment>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderContent = () => {\r\n    if (loading) return <Loader isLoading={loading} />\r\n    if (error === \"No metrics data available yet. Please try again later.\") return <DataBuilding />\r\n    return (\r\n      <div className=\"flex-1 h-screen overflow-hidden bg-slate-100 flex flex-col\">\r\n        <div className=\"p-3 flex-1 flex flex-col min-h-0\">\r\n          {/* Combined Date Controls and Metrics Table Card */}\r\n          <Card\r\n            id=\"metrics-table\"\r\n            className={`${isFullScreen ? \"fixed inset-0 z-50 m-0 rounded-none\" : \"\"} shadow-md flex-1 flex flex-col min-h-0`}\r\n          >\r\n            <CardContent className=\"p-2 md:p-3 flex-1 flex flex-col min-h-0\">\r\n              {/* Date and Controls Section */}\r\n              <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between mb-3 gap-4 flex-shrink-0\">\r\n                <div className=\"flex flex-col md:flex-row items-start md:items-center gap-4\">\r\n                  <h2 className=\"text-xl font-semibold text-slate-800\">Cross-Platform Performance</h2>\r\n                  <div className=\"flex flex-row gap-3 items-center\">\r\n                  <ShopifyLogo width={20} height={20} />\r\n                    <FacebookLogo width={20} height={20} />\r\n                    <GoogleLogo width={20} height={20} />\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex flex-row items-center gap-3\">\r\n                  <DatePickerWithRange\r\n                    defaultDate={{\r\n                      from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                      to: new Date(),\r\n                    }}\r\n                  />\r\n                  <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\" className=\"bg-white\">\r\n                    {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                  </Button>\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"gap-2 bg-white\">\r\n                    <Download className=\"h-4 w-4\" />\r\n                    Export\r\n                  </Button>\r\n                  <HeaderNotificationDropdown />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Metrics Table */}\r\n              <div className=\"flex-1 overflow-hidden min-h-0\">\r\n                {renderTable()}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n      {renderContent()}\r\n      </div>\r\n      <HelpDeskModal />\r\n    </div>\r\n  )\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n","import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDownIcon className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUpIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDownIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport { PlusCircle, Edit2, X, Trash2 } from 'lucide-react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { format, endOfMonth } from \"date-fns\"\r\nimport { Bar, BarChart, ResponsiveContainer, XAxis, YAxis, Tooltip } from 'recharts'\r\nimport { cn } from \"@/lib/utils\"\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { baseURL } from '@/data/constant'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/store'\r\n\r\n\r\n\r\n// Define types for better type safety\r\ninterface MetricsData {\r\n  spend: number;\r\n  Revenue: number;\r\n  purchase_roas: string;\r\n  individualAccounts?: Array<{\r\n    accountId: string;\r\n    spend: number;\r\n    purchase_roas: string;\r\n    Revenue: string | number;\r\n  }>;\r\n}\r\n\r\ninterface BrandTarget {\r\n  brandId: string;\r\n  name: string;\r\n  source: string;\r\n  targetSales: number;\r\n  targetSpend: number;\r\n  targetROAS: number;\r\n  targetDate: Date;\r\n}\r\n\r\nexport default function BrandPerformanceDashboard() {\r\n  const brands = useSelector((state: RootState) => state.brand.brands)\r\n  const [selectedBrands, setSelectedBrands] = useState<Array<BrandTarget>>([])\r\n  const [newBrand, setNewBrand] = useState<BrandTarget>({\r\n    brandId: '',\r\n    name: '',\r\n    source: '',\r\n    targetSales: 0,\r\n    targetSpend: 0,\r\n    targetROAS: 0,\r\n    targetDate: endOfMonth(new Date())\r\n  })\r\n  const [editingBrand, setEditingBrand] = useState<string | null>(null)\r\n  const [editData, setEditData] = useState<BrandTarget | null>(null)\r\n  const [achievedMetrics, setAchievedMetrics] = useState<{ [key: string]: { meta: MetricsData, google: MetricsData } }>({})\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const getMetaMetrics = useCallback(async (brandId: string) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/performance/metaMetrics/${brandId}`,\r\n        { withCredentials: true }\r\n      );\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching Meta metrics data:', error);\r\n      if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        navigate('/');\r\n      }\r\n      return { success: false, data: { spend: 0, Revenue: 0, purchase_roas: \"0.00\" } };\r\n    }\r\n  }, [baseURL, navigate]);\r\n\r\n  const getGoogleAdMetrics = useCallback(async (brandId: string) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/performance/googleAdMetrics/${brandId}`,\r\n        { withCredentials: true }\r\n      );\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching Google metrics data:', error);\r\n      return { success: false, data: { spend: 0, Revenue: 0, purchase_roas: \"0.00\" } };\r\n    }\r\n  }, [baseURL]);\r\n  \r\n  \r\n  const fetchMetricsData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const metricsData: { [key: string]: { meta: MetricsData, google: MetricsData } } = {};\r\n      await Promise.all(\r\n        selectedBrands.map(async (brand) => {\r\n          const [metaResponse, googleResponse] = await Promise.all([\r\n            getMetaMetrics(brand.brandId),\r\n            getGoogleAdMetrics(brand.brandId)\r\n          ]);\r\n          \r\n          metricsData[brand.brandId] = {\r\n            meta: metaResponse.success ? metaResponse.data : { spend: 0, Revenue: 0, purchase_roas: \"0.00\" },\r\n            google: googleResponse.success ? googleResponse.data : { spend: 0, Revenue: 0, purchase_roas: \"0.00\" }\r\n          };\r\n        })\r\n      );\r\n      setAchievedMetrics(metricsData);\r\n    } catch (error) {\r\n      console.error('Error fetching metrics data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [selectedBrands, getMetaMetrics, getGoogleAdMetrics]);\r\n  \r\n  useEffect(() => {\r\n    if (selectedBrands.length > 0) {\r\n      fetchMetricsData();\r\n    }\r\n  }, [fetchMetricsData, selectedBrands]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target\r\n    setNewBrand(prev => ({ ...prev, [name]: ['brandId', 'name'].includes(name) ? value : Number(value) }))\r\n  }\r\n\r\n  const handleSourceChange = (value: string) => {\r\n    setNewBrand(prev => ({ ...prev, source: value }))\r\n  }\r\n\r\n  const handleAddBrand = async () => {\r\n    const brandToAdd = brands.find(b => String(b._id) === String(newBrand.brandId));\r\n\r\n    if (brandToAdd) {\r\n      try {\r\n        const newBrandTarget = {\r\n          brandId: brandToAdd._id,\r\n          name: brandToAdd.name,\r\n          source: newBrand.source,\r\n          targetSales: newBrand.targetSales,\r\n          targetSpend: newBrand.targetSpend,\r\n          targetROAS: newBrand.targetROAS,\r\n          targetDate: newBrand.targetDate,\r\n        };\r\n\r\n        const response = await axios.post(`${baseURL}/api/performance/addTarget`, newBrandTarget, { withCredentials: true });\r\n\r\n        setSelectedBrands(prev => [...prev, response.data]);\r\n        setNewBrand({\r\n          brandId: '',\r\n          name: '',\r\n          source: '',\r\n          targetSales: 0,\r\n          targetSpend: 0,\r\n          targetROAS: 0,\r\n          targetDate: endOfMonth(new Date())\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error adding brand:', error);\r\n      }\r\n    } else {\r\n      console.log(\"Brand not found\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (brandId: string) => {\r\n    const brandToEdit = selectedBrands.find(b => b.brandId === brandId)\r\n    if (brandToEdit) {\r\n      setEditingBrand(brandId)\r\n      setEditData({ ...brandToEdit, targetDate: new Date(brandToEdit.targetDate) })\r\n    }\r\n  }\r\n\r\n  const handleSaveEdit = async (brandId: string) => {\r\n    if (editData) {\r\n      try {\r\n        const response = await axios.patch(`${baseURL}/api/performance/updateTarget/${brandId}`, editData, { withCredentials: true });\r\n        setSelectedBrands(prev => prev.map(brand =>\r\n          brand.brandId === brandId ? { ...brand, ...response.data } : brand\r\n        ));\r\n\r\n        setEditingBrand(null);\r\n        setEditData(null);\r\n\r\n        alert('Brand updated successfully!');\r\n      } catch (error) {\r\n        console.error('Error saving brand edit:', error);\r\n        alert('Failed to update brand');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingBrand(null)\r\n    setEditData(null)\r\n  }\r\n\r\n  const handleDelete = async (brandId: string) => {\r\n    try {\r\n      await axios.delete(`${baseURL}/api/performance/deleteTarget/${brandId}`, { withCredentials: true });\r\n      setSelectedBrands(prev => prev.filter(brand => brand.brandId !== brandId));\r\n      console.log('Brand deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting brand:', error);\r\n    }\r\n  };\r\n\r\n  const Loader = () => (\r\n    <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-blue-500\"></div>\r\n  )\r\n\r\n  const calculateMetrics = (brand: BrandTarget, source: 'meta' | 'google') => {\r\n    const metrics = achievedMetrics[brand.brandId]?.[source] || { spend: 0, Revenue: 0, purchase_roas: \"0.00\" }; \r\n    // Calculate spent metrics\r\n    const achievedSpend = metrics.spend || 0;\r\n    // Calculate sales metrics\r\n    const achievedSales = Number(metrics.Revenue) || 0;\r\n    const remainingSales = Math.max(brand.targetSales - achievedSales, 0).toFixed(2);\r\n    \r\n    // Calculate ROAS\r\n    const achievedROAS = parseFloat(metrics.purchase_roas) || 0;\r\n    \r\n    // Calculate days and per-day requirements\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const targetDate = new Date(brand.targetDate);\r\n    targetDate.setHours(0, 0, 0, 0);\r\n    const remainingDays = Math.max(Math.ceil((targetDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)), 0);\r\n    \r\n    const requiredSalesPerDay = remainingDays > 0 ? parseFloat(remainingSales) / remainingDays : 0;\r\n\r\n    return {\r\n      achievedSales,\r\n      remainingSales,\r\n      achievedSpend,\r\n      achievedROAS,\r\n      remainingDays,\r\n      requiredSalesPerDay,\r\n    }\r\n  }\r\n\r\n  const chartData = selectedBrands.map(brand => {\r\n    const metaMetrics = calculateMetrics(brand, 'meta');\r\n    const googleMetrics = calculateMetrics(brand, 'google');\r\n    return {\r\n      name: brand.name,\r\n      'Meta Achieved': metaMetrics.achievedSales,\r\n      'Meta Remaining': metaMetrics.remainingSales,\r\n      'Google Achieved': googleMetrics.achievedSales,\r\n      'Google Remaining': googleMetrics.remainingSales\r\n    }\r\n  });\r\n\r\n  // Filter brands by source\r\n  const metaBrands = selectedBrands.filter(brand => brand.source === 'Meta');\r\n  const googleBrands = selectedBrands.filter(brand => brand.source === 'Google');\r\n\r\n  useEffect(() => {\r\n    const fetchBrandTargets = async () => {\r\n      try {\r\n        const response = await axios.get(`${baseURL}/api/performance/brandTarget`, { withCredentials: true });\r\n        // Ensure targetDate is a Date object\r\n        const brands = response.data.map((brand: any) => ({\r\n          ...brand,\r\n          targetDate: new Date(brand.targetDate)\r\n        }));\r\n        setSelectedBrands(brands);\r\n      } catch (error) {\r\n        console.error('Error fetching brands:', error);\r\n      }\r\n    };\r\n\r\n    fetchBrandTargets();\r\n  }, [baseURL]);\r\n\r\n  const renderTable = (brands: BrandTarget[], source: 'meta' | 'google', title: string) => (\r\n    <Card className='mb-4'>\r\n      <CardHeader>\r\n        <CardTitle>{title} Performance Table</CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"overflow-x-auto\">\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Brand</TableHead>\r\n                <TableHead>Month</TableHead>\r\n                <TableHead>Target Spend</TableHead>\r\n                <TableHead>Target Sales</TableHead>\r\n                <TableHead>Target ROAS</TableHead>\r\n                <TableHead>Achieved Spend</TableHead>\r\n                <TableHead>Achieved Sales</TableHead>\r\n                <TableHead>Achieved ROAS</TableHead>\r\n                <TableHead>Remaining Sales</TableHead>\r\n                <TableHead>Remaining Days</TableHead>\r\n                <TableHead>Required Sales/Day</TableHead>\r\n                <TableHead>Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {brands.map(brand => {\r\n                const { \r\n                  achievedSales, \r\n                  remainingSales, \r\n                  achievedSpend, \r\n                  achievedROAS, \r\n                  remainingDays, \r\n                  requiredSalesPerDay \r\n                } = calculateMetrics(brand, source);\r\n                \r\n                const isEditing = editingBrand === brand.brandId;\r\n                \r\n                return (\r\n                  <TableRow key={brand.brandId}>\r\n                    <TableCell className=\"font-bold text-sm\">{brand.name}</TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <Popover>\r\n                          <PopoverTrigger asChild>\r\n                            <Button variant={\"outline\"}>\r\n                              {editData?.targetDate ? format(editData.targetDate, \"PPP\") : <span>Pick a date</span>}\r\n                            </Button>\r\n                          </PopoverTrigger>\r\n                          <PopoverContent className=\"w-auto p-0\">\r\n                            <Calendar\r\n                              mode=\"single\"\r\n                              selected={editData?.targetDate}\r\n                              onSelect={(date) => date && setEditData(prev => prev ? { ...prev, targetDate: date } : null)}\r\n                              initialFocus\r\n                            />\r\n                          </PopoverContent>\r\n                        </Popover>\r\n                      ) : (\r\n                        format(new Date(brand.targetDate), \"MMM yyyy\") \r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <Input\r\n                          type=\"number\"\r\n                          value={editData?.targetSpend}\r\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetSpend: Number(e.target.value) } : null)}\r\n                        />\r\n                      ) : (\r\n                        `${brand.targetSpend.toLocaleString()}`\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <Input\r\n                          type=\"number\"\r\n                          value={editData?.targetSales}\r\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetSales: Number(e.target.value) } : null)}\r\n                        />\r\n                      ) : (\r\n                        `${brand.targetSales.toLocaleString()}`\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <Input\r\n                          type=\"number\"\r\n                          step=\"0.01\"\r\n                          value={editData?.targetROAS}\r\n                          onChange={(e) => setEditData(prev => prev ? { ...prev, targetROAS: Number(e.target.value) } : null)}\r\n                        />\r\n                      ) : (\r\n                        brand.targetROAS.toFixed(2)\r\n                      )}\r\n                    </TableCell>\r\n                   \r\n                    <TableCell>{isLoading ? <Loader /> : `${achievedSpend.toLocaleString('en-IN')}`}</TableCell>\r\n                    <TableCell>{isLoading ? <Loader /> : `${achievedSales.toLocaleString('en-IN')}`}</TableCell>\r\n                    <TableCell>{isLoading ? <Loader /> : achievedROAS.toFixed(2)}</TableCell>\r\n                    <TableCell>{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(Number(remainingSales))}</TableCell>\r\n                    <TableCell>{remainingDays}</TableCell>\r\n                    <TableCell>{new Intl.NumberFormat('en-IN', { maximumFractionDigits: 2 }).format(requiredSalesPerDay)}</TableCell>\r\n                    <TableCell>\r\n                      {isEditing ? (\r\n                        <>\r\n                          <Button onClick={() => handleSaveEdit(brand.brandId)} className=\"mr-2\">Save</Button>\r\n                          <Button onClick={handleCancelEdit} variant=\"outline\"><X className=\"h-4 w-4\" /></Button>\r\n                        </>\r\n                      ) : (\r\n                        <div className='flex flex-row gap-1'>\r\n                          <Button size={\"sm\"} onClick={() => handleEdit(brand.brandId)} ><Edit2 className=\"h-2 w-2\" /></Button>\r\n                          <Button size={\"sm\"} onClick={() => handleDelete(brand.brandId)} variant=\"destructive\"><Trash2 className=\"h-2 w-2\" /></Button>\r\n                        </div>\r\n                      )}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                )\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen\">\r\n      <nav className=\"bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <h1 className=\"text-2xl font-bold\">Brands Performance Metrics</h1>\r\n        </div>\r\n      </nav>\r\n      <div className='container mx-auto p-4'>\r\n        <Card className=\"mb-4\">\r\n          <CardHeader>\r\n            <CardTitle>Add New Brand Target</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\r\n              <div>\r\n                <Label htmlFor=\"brandName\">Brand Name</Label>\r\n                <Select onValueChange={(value) => {\r\n                  const brand = brands.find(b => b._id === value);\r\n                  setNewBrand(prev => ({ \r\n                    ...prev, \r\n                    brandId: value,\r\n                    name: brand?.name || ''\r\n                  }));\r\n                }}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select brand\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {brands.map(brand => (\r\n                      <SelectItem key={brand._id} value={brand._id}>\r\n                        {brand.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"source\">Source</Label>\r\n                <Select onValueChange={handleSourceChange} value={newBrand.source}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select source\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Meta\">Meta</SelectItem>\r\n                    <SelectItem value=\"Google\">Google</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetSales\">Target Sales</Label>\r\n                <Input \r\n                  id=\"targetSales\" \r\n                  name=\"targetSales\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetSales} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target sales\" \r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetSpend\">Target Spend</Label>\r\n                <Input \r\n                  id=\"targetSpend\" \r\n                  name=\"targetSpend\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetSpend} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target spend\" \r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"targetROAS\">Target ROAS</Label>\r\n                <Input \r\n                  id=\"targetROAS\" \r\n                  name=\"targetROAS\" \r\n                  type=\"number\"\r\n                  value={newBrand.targetROAS} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Enter target ROAS\" \r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-end\">\r\n                <Button onClick={handleAddBrand} className=\"w-full\">\r\n                  <PlusCircle className=\"mr-2 h-4 w-4\" /> Add Brand Target\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <Label>Target Date</Label>\r\n              <Popover>\r\n                <PopoverTrigger asChild>\r\n                  <Button\r\n                    variant={\"outline\"}\r\n                    className={cn(\r\n                      \"w-full justify-start text-left font-normal mt-2\",\r\n                      !newBrand.targetDate && \"text-muted-foreground\"\r\n                    )}\r\n                  >\r\n                    {newBrand.targetDate ? format(newBrand.targetDate, \"PPP\") : <span>Pick a date</span>}\r\n                  </Button>\r\n                </PopoverTrigger>\r\n                <PopoverContent className=\"w-auto p-0\">\r\n                  <Calendar\r\n                    mode=\"single\"\r\n                    selected={newBrand.targetDate}\r\n                    onSelect={(date) => date && setNewBrand(prev => ({ ...prev, targetDate: date }))}\r\n                    initialFocus\r\n                  />\r\n                </PopoverContent>\r\n              </Popover>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {renderTable(metaBrands, 'meta', 'Meta')}\r\n        {renderTable(googleBrands, 'google', 'Google')}\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Sales Progress</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={chartData}>\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => `${Number(value).toLocaleString()}`} />\r\n                <Bar dataKey=\"Meta Achieved\" stackId=\"meta\" fill=\"#4ade80\" />\r\n                <Bar dataKey=\"Meta Remaining\" stackId=\"meta\" fill=\"#f87171\" />\r\n                <Bar dataKey=\"Google Achieved\" stackId=\"google\" fill=\"#60a5fa\" />\r\n                <Bar dataKey=\"Google Remaining\" stackId=\"google\" fill=\"#fbbf24\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport BrandPerformanceDashboard from \"./Dashboard\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\n const PerformanceDashboard : React.FC=()=>{\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <BrandPerformanceDashboard />\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default PerformanceDashboard;","import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react'\r\nimport { ArrowUp, ArrowDown, ArrowUpDown, Filter, ChevronLeft, X, CheckCircle, AlertCircle, RefreshCw, BarChart2, Tag, Layers, Package, ChevronDown, ChevronRight } from 'lucide-react';\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Skeleton } from '@/components/ui/skeleton'\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@radix-ui/react-tooltip'\r\nimport {GoogleLogo} from \"@/data/logo.tsx\"\r\nimport { Button } from '@/components/ui/button'\r\nimport { format } from \"date-fns\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\n\r\ntype Metrics = {\r\n    products: number\r\n    totalCost: number\r\n    ROAS: number,\r\n    conversions: number,\r\n    ConversionValue: number,\r\n    ConversionRate: number,\r\n    totalClicks: number,\r\n    ctr: number,\r\n    AvgCPC: number,\r\n}\r\n\r\ntype Category = {\r\n    name: string\r\n    metrics: Metrics\r\n    subcategories: Category[]\r\n}\r\n\r\ntype ColumnDef = {\r\n    id: string\r\n    header: string\r\n    accessorKey: string\r\n    cell: (value: any) => React.ReactNode\r\n}\r\n\r\ntype TabConfig = {\r\n    id: string\r\n    label: string\r\n    apiEndpoint: string\r\n    columns: ColumnDef[]\r\n    data: any[]\r\n    lastUpdated: number | null,\r\n}\r\n\r\nexport default function ProductTab() {\r\n    const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n    const { brandId } = useParams()\r\n\r\n    const [tabs, setTabs] = useState<TabConfig[]>([\r\n        { id: 'products', label: 'Products', apiEndpoint: `${baseURL}/api/segment/productMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'categories', label: 'Categories', apiEndpoint: `${baseURL}/api/segment/categoryMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'brands', label: 'Brands', apiEndpoint: `${baseURL}/api/segment/brandMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n        { id: 'productTypes', label: 'Product types', apiEndpoint: `${baseURL}/api/segment/typeMetrics/${brandId}`, columns: [], data: [], lastUpdated: null },\r\n    ])\r\n    const [activeTab, setActiveTab] = useState(tabs[0].id)\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set())\r\n    const [loading, setLoading] = useState(false)\r\n    const [filterApplied, setFilterApplied] = useState(false);\r\n    const rowsPerPage = 100\r\n    const [filterData, setFilterData] = useState<any>({});\r\n    const cacheRef = useRef<{ [key: string]: { data: any; timestamp: number } }>({});\r\n    const POLL_INTERVAL = 5 * 60 * 1000;\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    // Sorting state\r\n    const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n    const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n    const handleTabChange = (newTabId: string) => {\r\n        setActiveTab(newTabId);\r\n        setCurrentPage(1);\r\n        setExpandedCategories(new Set());\r\n    };\r\n\r\n    const fetchTabData = useCallback(\r\n        async (tabId: string, body: Record<string, any> = {}, isFilterApplied: boolean = false) => {\r\n            if (loading) return;\r\n\r\n            setLoading(true);\r\n\r\n            const tab = tabs.find(t => t.id === tabId);\r\n            if (!tab) {\r\n                console.warn(`Tab not found for ID: ${tabId}`);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const updatedBody = {\r\n                ...body,\r\n                ...(startDate && { startDate }),\r\n                ...(endDate && { endDate }),\r\n            };\r\n\r\n            const cacheKey = `${tabId}-${startDate || \"default\"}-${endDate || \"default\"}`;\r\n            const cachedData = cacheRef.current[cacheKey];\r\n            const now = Date.now();\r\n\r\n            if (!isFilterApplied && tabId === 'products') {\r\n                delete cacheRef.current[cacheKey];\r\n            }\r\n\r\n            if (!isFilterApplied && cachedData && now - cachedData.timestamp < POLL_INTERVAL) {\r\n                setTabs(prevTabs =>\r\n                    prevTabs.map(t =>\r\n                        t.id === tabId ? { ...t, data: cachedData.data, lastUpdated: cachedData.timestamp } : t\r\n                    )\r\n                );\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await axios.post(tab.apiEndpoint, updatedBody, { withCredentials: true });\r\n\r\n                if (response.data.success) {\r\n                    const result = response.data;\r\n                    const data = result[`${tabId}Data`] || [];\r\n                    console.log(\"New Data for Tab:\", tabId, data);\r\n\r\n                    const columns: ColumnDef[] = Object.keys(data[0] || {}).map(key => ({\r\n                        id: key,\r\n                        header: key.charAt(0).toUpperCase() + key.slice(1),\r\n                        accessorKey: key,\r\n                        cell: (value: any) => {\r\n                            if (key === 'issues' && Array.isArray(value)) {\r\n                                return value.length > 0 ? value[0].description : 'No issues';\r\n                            }\r\n                            return String(value);\r\n                        },\r\n                    }));\r\n\r\n                    console.log(\"Columns for Tab:\", columns);\r\n\r\n                    setTabs(prevTabs =>\r\n                        prevTabs.map(t =>\r\n                            t.id === tabId ? { ...t, columns, data, lastUpdated: now } : t\r\n                        )\r\n                    );\r\n\r\n                    cacheRef.current[cacheKey] = { data, timestamp: now };\r\n                } else {\r\n                    console.error(`Failed to fetch data for ${tabId}`);\r\n                }\r\n            } catch (error) {\r\n                console.error(`Error fetching data for ${tabId}:`, error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        },\r\n        [tabs, loading, cacheRef, startDate, endDate]\r\n    );\r\n\r\n    useEffect(() => {\r\n        const requestBody = {\r\n            ...filterData,\r\n            ...(startDate && { startDate }),\r\n            ...(endDate && { endDate }),\r\n        };\r\n\r\n        fetchTabData(activeTab, filterApplied ? requestBody : {}, filterApplied ? true : false);\r\n    }, [activeTab, date, filterApplied, filterData]);\r\n\r\n    const handleRowClick = (currentTab: string, rowData: Record<string, any>) => {\r\n        const tabColumnMapping: Record<string, string> = {\r\n            brands: 'Brand', // Column name to fetch value when on Brand tab\r\n            productTypes: 'Type', // Column name to fetch value when on Product types tab\r\n            categories: 'name', // Column name to fetch value when on Categories tab\r\n            products: 'status'\r\n        };\r\n\r\n        const bodyKeyMapping: Record<string, string> = {\r\n            brands: 'brands', // Key to send in the API request body when on Brand tab\r\n            productTypes: 'productType', // Key to send in the API request body when on Product types tab\r\n            categories: 'categoryName', // Key to send in the API request body when on Categories tab\r\n            products: 'status'\r\n        };\r\n\r\n        const columnToFetch = tabColumnMapping[currentTab];\r\n        const bodyKey = bodyKeyMapping[currentTab];\r\n\r\n        if (columnToFetch && bodyKey) {\r\n            const valueToSend = rowData[columnToFetch]; // Get value from the row based on the column name\r\n\r\n            if (valueToSend) {\r\n                const filterPayload: Record<string, any> = {\r\n                    [bodyKey]: valueToSend, // Add the main key-value pair\r\n                };\r\n\r\n                // Add the additional key for the 'categories' tab\r\n                if (currentTab === 'categories' && rowData.level) {\r\n                    filterPayload['categoryLevel'] = rowData.level; // Add the additional key\r\n                }\r\n\r\n                // Set filter state\r\n                setFilterData(filterPayload); // Set custom filter data\r\n                setFilterApplied(true); // Mark filter as applied\r\n                setActiveTab('products'); // Switch to the Products tab\r\n            } else {\r\n                console.warn(`No value found for column \"${columnToFetch}\" in row`, rowData);\r\n            }\r\n        } else {\r\n            console.warn(`No column or body key mapping found for tab: ${currentTab}`);\r\n        }\r\n    };\r\n\r\n    const toggleCategory = (categoryPath: string) => {\r\n        setExpandedCategories(prev => {\r\n            const newSet = new Set(prev)\r\n            if (newSet.has(categoryPath)) {\r\n                newSet.delete(categoryPath)\r\n            } else {\r\n                newSet.add(categoryPath)\r\n            }\r\n            return newSet\r\n        })\r\n    }\r\n\r\n    const renderCategoryRow = (category: Category, depth: number = 0, path: string = '') => {\r\n        const currentPath = path ? `${path}.${category.name}` : category.name\r\n        const isExpanded = expandedCategories.has(currentPath)\r\n\r\n        return (\r\n            <React.Fragment key={currentPath}>\r\n                <tr className={`${isExpanded ? 'bg-gray-100' : 'bg-white'}`}>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm flex items-center\">\r\n                        <div style={{ marginLeft: `${depth * 20}px` }} onClick={() => toggleCategory(currentPath)} className=\"flex items-center cursor-pointer\">\r\n                            {category.subcategories.length > 0 && (\r\n                                <button className=\"mr-2\">\r\n                                    {isExpanded ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\r\n                                </button>\r\n                            )}\r\n                            {category.name}\r\n                        </div>\r\n                    </td>\r\n                    <td\r\n                        className=\"px-4 py-2 whitespace-nowrap text-sm cursor-pointer text-blue-500 underline\"\r\n                        onClick={() => handleRowClick(activeTab, category)} // Adding handleRowClick to the Products column\r\n                    >\r\n                        {category.metrics.products}\r\n                    </td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalCost}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ROAS}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.conversions}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionValue}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ConversionRate}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.totalClicks}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.ctr}</td>\r\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm\">{category.metrics.AvgCPC}</td>\r\n                </tr>\r\n                {isExpanded &&\r\n                    category.subcategories.map(subCategory =>\r\n                        renderCategoryRow(subCategory, depth + 1, currentPath)\r\n                    )}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    const handleSort = (columnId: string) => {\r\n        if (sortColumn === columnId) {\r\n            setSortOrder(prevOrder => (prevOrder === 'asc' ? 'desc' : 'asc'));\r\n        } else {\r\n            setSortColumn(columnId);\r\n            setSortOrder('asc');\r\n        }\r\n    };\r\n    const getCurrentTabData = () => {\r\n        const currentTab = tabs.find(tab => tab.id === activeTab)\r\n        if (!currentTab || currentTab.id === 'categories') return { columns: [], data: [] }\r\n\r\n        let sortedData = currentTab.data;\r\n\r\n        if (sortColumn) {\r\n            sortedData = [...sortedData].sort((a, b) => {\r\n                const aValue = a[sortColumn];\r\n                const bValue = b[sortColumn];\r\n\r\n                if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n                    return sortOrder === 'asc' ? aValue - bValue : bValue - aValue;\r\n                }\r\n\r\n                const stringA = String(aValue || '').toLowerCase();\r\n                const stringB = String(bValue || '').toLowerCase();\r\n\r\n                if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\r\n                if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        const startIndex = (currentPage - 1) * rowsPerPage;\r\n        const endIndex = startIndex + rowsPerPage;\r\n        return {\r\n            columns: currentTab.columns,\r\n            data: sortedData.slice(startIndex, endIndex),\r\n        };\r\n    }\r\n\r\n    const { columns, data } = getCurrentTabData()\r\n    const totalPages = Math.ceil((tabs.find(tab => tab.id === activeTab)?.data.length || 0) / rowsPerPage)\r\n\r\n    const categoryColumns = [\r\n        { id: 'name', header: 'Name' },\r\n        { id: 'products', header: 'Products' },\r\n        { id: 'totalCost', header: 'Cost' },\r\n        { id: 'ROAS', header: 'ROAS' },\r\n        { id: 'conversions', header: 'Conversions' },\r\n        { id: 'ConversionValue', header: 'Conv. Value' },\r\n        { id: 'ConversionRate', header: 'Conv. Rate' },\r\n        { id: 'totalClicks', header: 'Clicks' },\r\n        { id: 'ctr', header: 'CTR' },\r\n        { id: 'AvgCPC', header: 'Avg CPC' },\r\n    ]\r\n\r\n    function TableSkeleton() {\r\n        return (\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full table-auto border-collapse\">\r\n                    <thead>\r\n                        <tr>\r\n                            {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, index) => (\r\n                                <th key={index} className=\"px-4 py-2 border-b\">\r\n                                    <Skeleton className={`h-4 ${width}`} />\r\n                                </th>\r\n                            ))}\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {Array.from({ length: 8 }).map((_, index) => (\r\n                            <tr key={index}>\r\n                                {['w-24', 'w-32', 'w-32', 'w-24', 'w-24', 'w-24'].map((width, idx) => (\r\n                                    <td key={idx} className=\"px-4 py-2 border-b\">\r\n                                        <Skeleton className={`h-4 ${width}`} />\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n    <div className='w-full'>\r\n        <div className='flex flex-row gap-2 items-center mb-4'>\r\n            <GoogleLogo />\r\n            <h1 className='text-xl font-bold text-gray-800'>Google Ads Product Insights</h1>\r\n        </div>\r\n        <div className='bg-white p-6 rounded-xl shadow-lg border border-gray-200'>\r\n            <div className=\"flex items-center justify-between border-b border-gray-200 pb-2 mb-2\">\r\n                <div className=\"flex space-x-2\" role=\"tablist\">\r\n                    {tabs.map(tab => (\r\n                        <Button\r\n                            key={tab.id}\r\n                            variant={activeTab === tab.id ? \"default\" : \"ghost\"}\r\n                            onClick={() => handleTabChange(tab.id)}\r\n                            className=\"relative\"\r\n                        >\r\n                            {tab.id === 'products' && <Package className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'categories' && <Layers className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'brands' && <Tag className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.id === 'productTypes' && <BarChart2 className=\"w-4 h-4 mr-2\" />}\r\n                            {tab.label}\r\n                            {activeTab === tab.id && (\r\n                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\" />\r\n                            )}\r\n                        </Button>\r\n                    ))}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <DatePickerWithRange\r\n                      \r\n                    />\r\n                    <Button variant=\"outline\" size=\"icon\">\r\n                        <Filter className={`h-4 w-4 ${filterApplied ? 'text-blue-600' : 'text-gray-600'}`} />\r\n                    </Button>\r\n                    <TooltipProvider>\r\n                        <Tooltip>\r\n                            <TooltipTrigger asChild>\r\n                                <Button variant=\"outline\" size=\"icon\" onClick={() => fetchTabData(activeTab, {}, false)}>\r\n                                    <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                </Button>\r\n                            </TooltipTrigger>\r\n                            {tabs.find(t => t.id === activeTab)?.lastUpdated && (\r\n                                <TooltipContent>\r\n                                    <p>Last updated: {new Date(tabs.find(t => t.id === activeTab)?.lastUpdated || 0).toLocaleString()}</p>\r\n                                </TooltipContent>\r\n                            )}\r\n                        </Tooltip>\r\n                    </TooltipProvider>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='space-y-4'>\r\n                {filterApplied && (\r\n                    <div className=\"flex items-center gap-2 w-fit p-2 bg-blue-50 rounded-full\">\r\n                        <span className=\"text-xs font-medium text-blue-700\">{Object.entries(filterData).map(([key, value]) => `${key}: ${value}`).join(', ')}</span>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => {\r\n                                setFilterApplied(false);\r\n                                setFilterData({});\r\n                                setActiveTab('products');\r\n                                cacheRef.current['products'] = null as any;\r\n                                fetchTabData('products', {}, false);\r\n                            }}\r\n                            className=\"text-blue-700 hover:text-blue-800 hover:bg-blue-100 p-1 h-auto\"\r\n                        >\r\n                            <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n                <div className=\"rounded-md border border-gray-200 overflow-hidden\">\r\n                    <div className=\"max-h-[350px] overflow-auto\">\r\n                        {loading ? <TableSkeleton /> : (\r\n                            <table className=\"w-full\">\r\n                                <thead className=\"sticky top-0 z-10 bg-[#4A628A]\">\r\n                                    <tr>\r\n                                        {(activeTab === 'categories' ? categoryColumns : columns).map(column => (\r\n                                            <th key={column.id} className=\"px-4 py-3 text-left text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[150px] cursor-pointer\" onClick={() => handleSort(column.id)}>\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                {column.header}\r\n                                                {sortColumn === column.id ? (\r\n                                                    sortOrder === 'asc' ? <ArrowUp className=\"h-4 w-4\" /> : <ArrowDown className=\"h-4 w-4\" />\r\n                                                ) : (\r\n                                                    <ArrowUpDown className=\"h-4 w-4\" />\r\n                                                )}\r\n                                            </div>\r\n                                        </th>\r\n                                        ))}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                    {activeTab === 'categories' ? (\r\n                                        tabs.find(tab => tab.id === 'categories')?.data.map((category: Category) =>\r\n                                            renderCategoryRow(category)\r\n                                        )\r\n                                    ) : (\r\n                                        data.map((row, i) => (\r\n                                            <tr key={i} className=\"hover:bg-gray-50\">\r\n                                                {columns.map((column) => {\r\n                                                    const value = column.cell(row[column.accessorKey]);\r\n                                                    const isIssuesColumn = column.id === 'issues';\r\n                                                    const isProductColumn = column.id === 'Products';\r\n                                                    const isStatusColumn = column.id === 'status';\r\n                                                    const isNoIssues = typeof value === 'string' && value.trim().toLowerCase() === 'no issues';\r\n\r\n                                                    const getStatusColor = (status: string) => {\r\n                                                        switch (status.trim().toUpperCase()) {\r\n                                                            case \"UNSPECIFIED\": return 'bg-gray-100 text-gray-800';\r\n                                                            case \"UNKNOWN\": return 'bg-yellow-100 text-yellow-800';\r\n                                                            case \"NOT_ELIGIBLE\": return 'bg-red-100 text-red-800';\r\n                                                            case \"ELIGIBLE_LIMITED\": return 'bg-orange-100 text-orange-800';\r\n                                                            case \"ELIGIBLE\": return 'bg-green-100 text-green-800';\r\n                                                            default: return 'bg-gray-100 text-gray-700';\r\n                                                        }\r\n                                                    };\r\n\r\n                                                    const renderCell = () => {\r\n                                                        if (isIssuesColumn) {\r\n                                                            return (\r\n                                                                <div className={`flex items-center ${isNoIssues ? 'text-green-600' : 'text-red-600'}`}>\r\n                                                                    {isNoIssues ? <CheckCircle className=\"w-4 h-4 mr-2\" /> : <AlertCircle className=\"w-4 h-4 mr-2\" />}\r\n                                                                    {value}\r\n                                                                </div>\r\n                                                            );\r\n                                                        }\r\n\r\n                                                        if (isStatusColumn) {\r\n                                                            const statusValue = value ? String(value) : '';\r\n                                                            const colorClass = getStatusColor(statusValue);\r\n                                                            return (\r\n                                                                <div className={`px-2 py-1.5 rounded-full text-xs font-medium w-full ${colorClass} cursor-pointer`} onClick={() => handleRowClick(activeTab, row)}>\r\n                                                                    {statusValue}\r\n                                                                </div>\r\n                                                            );\r\n                                                        }\r\n                                                        return column.cell ? column.cell(value) : value;\r\n                                                    };\r\n\r\n                                                    return (\r\n                                                        <td\r\n                                                            key={column.id}\r\n                                                            className={`px-4 py-2.5 text-sm whitespace-nowrap min-w-[150px] ${isProductColumn ? 'cursor-pointer text-blue-600 hover:text-blue-800' : ''}`}\r\n                                                            onClick={() => isProductColumn && handleRowClick(activeTab, row)}\r\n                                                        >\r\n                                                            {renderCell()}\r\n                                                        </td>\r\n                                                    );\r\n                                                })}\r\n                                            </tr>\r\n                                        ))\r\n                                    )}\r\n                                    {(activeTab === 'categories' ? tabs.find(tab => tab.id === 'categories')?.data.length === 0 : data.length === 0) && (\r\n                                        <tr>\r\n                                            <td\r\n                                                colSpan={(activeTab === 'categories' ? categoryColumns : columns).length}\r\n                                                className=\"px-4 py-2 text-sm text-gray-500 text-center\"\r\n                                            >\r\n                                                No data available\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50 border-t border-gray-200\">\r\n                        <div className=\"text-sm text-gray-700\">\r\n                            Showing {((currentPage - 1) * rowsPerPage) + 1} to {Math.min(currentPage * rowsPerPage, tabs.find(t => t.id === activeTab)?.data.length || 0)} of {tabs.find(t => t.id === activeTab)?.data.length || 0} entries\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                                disabled={currentPage === 1}\r\n                            >\r\n                                <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                                Previous\r\n                            </Button>\r\n                            <div className=\"text-sm text-gray-700\">\r\n                                Page {currentPage} of {totalPages}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                                disabled={currentPage === totalPages}\r\n                            >\r\n                                Next\r\n                                <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    );\r\n};      ","import { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nexport const TableSkeleton = () => (\r\n    <Table className=\"text-center min-w-full\">\r\n      <TableHeader className=\"bg-gray-200 sticky top-0 z-10\">\r\n        <TableRow>\r\n          {Array(8).fill(0).map((_, index) => (\r\n            <TableCell key={index} className=\"font-bold px-4 text-black min-w-[150px]\">\r\n              <Skeleton className=\"h-6 w-full\" />\r\n            </TableCell>\r\n          ))}\r\n        </TableRow>\r\n      </TableHeader>\r\n      <TableBody>\r\n        {Array(10).fill(0).map((_, rowIndex) => (\r\n          <TableRow key={rowIndex}>\r\n            {Array(8).fill(0).map((_, cellIndex) => (\r\n              <TableCell key={cellIndex} className=\"px-4 py-2 max-w-[200px]\">\r\n                <Skeleton className=\"h-6 w-full\" />\r\n              </TableCell>\r\n            ))}\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n  )","import { GoogleLogo } from '@/data/logo';\r\nimport { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport axios from 'axios'\r\nimport { useParams } from \"react-router-dom\";\r\nimport { ChevronLeft, ChevronRight, Search, Filter, RefreshCw, Zap, DollarSign, Percent, MousePointer, CreditCard, TrendingUp, Target, Users, Megaphone, ArrowUp, ArrowDown, ArrowUpDown } from 'lucide-react';\r\nimport { TableSkeleton } from \"@/components/dashboard_component/TableSkeleton\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { format } from \"date-fns\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\n\r\ninterface SearchTerm {\r\n  id: string;\r\n  searchTerm: string\r\n  matchType: string\r\n  status: string\r\n  campaignName: string\r\n  adGroup: string\r\n  impressions: number\r\n  clicks: number\r\n  ctr: string\r\n  cost: string\r\n  performance: string\r\n}\r\n\r\ninterface CampaignAdGroupPair {\r\n  campaignName: string;\r\n  adGroups: string[];\r\n}\r\n\r\nexport default function SearchTermTable() {\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  const { brandId } = useParams();\r\n  const [searchTerms, setSearchTerms] = useState<SearchTerm[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMoreData, setHasMoreData] = useState(true);\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [campaignAdGroupPairs, setCampaignAdGroupPairs] = useState<CampaignAdGroupPair[]>([]);\r\n  const [selectedCampaign, setSelectedCampaign] = useState<string>('all');\r\n  const [statusOptions, setStatusOptions] = useState<[]>([]);\r\n  const [selectedAdGroup, setSelectedAdGroup] = useState<string>('all');\r\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const rowsPerPage = 100;\r\n\r\n  const columns = [\r\n    { id: 'searchTerm', header: 'Search Term', icon: <Search className=\"w-4 h-4\" /> },\r\n    { id: 'matchType', header: 'Match Type', icon: <Zap className=\"w-4 h-4\" /> },\r\n    { id: 'status', header: 'Status', icon: <Filter className=\"w-4 h-4\" /> },\r\n    { id: 'campaignName', header: 'Campaign Name', icon: <Megaphone className=\"w-4 h-4\" /> },\r\n    { id: 'adGroupName', header: 'Ad Group', icon: <Users className=\"w-4 h-4\" /> },\r\n    { id: 'cost', header: 'Cost', icon: <DollarSign className=\"w-4 h-4\" /> },\r\n    { id: 'conversions', header: 'Conversions', icon: <Target className=\"w-4 h-4\" /> },\r\n    { id: 'conversionsValue', header: 'Conv. Value', icon: <TrendingUp className=\"w-4 h-4\" /> },\r\n    { id: 'conversionsRate', header: 'Conv. Rate', icon: <Percent className=\"w-4 h-4\" /> },\r\n    { id: 'clicks', header: 'Clicks', icon: <MousePointer className=\"w-4 h-4\" /> },\r\n    { id: 'ctr', header: 'CTR', icon: <Percent className=\"w-4 h-4\" /> },\r\n    { id: 'avg_cpc', header: 'Avg. CPC', icon: <CreditCard className=\"w-4 h-4\" /> },\r\n  ]\r\n\r\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n  const handleSort = (column: string) => {\r\n    if (sortColumn === column) {\r\n      setSortOrder(prevOrder => prevOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const sortedSearchTerms = useMemo(() => {\r\n    if (!sortColumn) return searchTerms;\r\n\r\n    return [...searchTerms].sort((a, b) => {\r\n      const aValue = a[sortColumn as keyof SearchTerm];\r\n      const bValue = b[sortColumn as keyof SearchTerm];\r\n\r\n      // Handle numeric comparisons\r\n      if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n        return sortOrder === 'asc' \r\n          ? aValue - bValue \r\n          : bValue - aValue;\r\n      }\r\n\r\n      // String comparison (case-insensitive)\r\n      const stringA = String(aValue).toLowerCase();\r\n      const stringB = String(bValue).toLowerCase();\r\n\r\n      if (stringA < stringB) return sortOrder === 'asc' ? -1 : 1;\r\n      if (stringA > stringB) return sortOrder === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [searchTerms, sortColumn, sortOrder]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Prepare request body\r\n      const requestBody = {\r\n        limit: rowsPerPage,\r\n        page: currentPage,\r\n        startDate,\r\n        endDate,\r\n        ...(selectedCampaign && selectedCampaign !== 'all' && { campaign: selectedCampaign }),\r\n        ...(selectedAdGroup && selectedAdGroup !== 'all' && { adGroup: selectedAdGroup }),\r\n        ...(selectedStatus && selectedStatus !== 'all' && { status: selectedStatus }),\r\n      };\r\n\r\n      // Make API request\r\n      const { data: response } = await axios.post(\r\n        `${baseURL}/api/segment/searchTermMetrics/${brandId}`,\r\n        requestBody,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.success) {\r\n        // Set data in state\r\n        setSearchTerms(response.data);\r\n        setTotalRecords(response.totalRecords);\r\n        setTotalPages(response.totalPages);\r\n        setHasMoreData(currentPage * rowsPerPage < response.totalRecords);\r\n        setCampaignAdGroupPairs(response.campaignAdGroupPairs);\r\n        setStatusOptions(response.statusOptions)\r\n      } else {\r\n        console.error('Failed to fetch search term metrics:', response.message);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching search term metrics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [\r\n    baseURL,\r\n    brandId,\r\n    currentPage,\r\n    rowsPerPage,\r\n    selectedCampaign,\r\n    selectedAdGroup,\r\n    selectedStatus,\r\n    startDate,\r\n    endDate\r\n  ]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 300000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  const handleCampaignChange = (value: string) => {\r\n    setSelectedCampaign(value);\r\n    setSelectedAdGroup('all');\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const handleAdGroupChange = (value: string) => {\r\n    setSelectedAdGroup(value);\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const handleStatusChange = (value: string) => {\r\n    setSelectedStatus(value);\r\n    setCurrentPage(1)\r\n  };\r\n\r\n  const filteredAdGroups = selectedCampaign !== 'all'\r\n    ? campaignAdGroupPairs?.find(pair => pair.campaignName === selectedCampaign)?.adGroups || []\r\n    : [];\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex flex-row gap-2 items-center mb-4\">\r\n        <GoogleLogo />\r\n        <h1 className=\"text-xl font-bold text-gray-800\">Google Ads Search Term Insights</h1>\r\n      </div>\r\n      <div className=\"bg-white rounded-xl overflow-hidden border border-gray-200 shadow-md\">\r\n        <div className=\"p-4\">\r\n          <div className=\"flex justify-between mb-4\">\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className=\"bg-white border-gray-300 hover:bg-gray-50 transition-colors duration-200\">\r\n                  <Filter className=\"w-4 h-4 mr-2\" />\r\n                  Filter\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-80\">\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <h3 className=\"font-medium mb-2\">Status</h3>\r\n                    <Select onValueChange={handleStatusChange} value={selectedStatus}>\r\n                      <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        {statusOptions.map((status) => (\r\n                          <SelectItem key={status} value={status}>{status}</SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-medium mb-2\">Campaign</h3>\r\n                    <Select onValueChange={handleCampaignChange} value={selectedCampaign}>\r\n                      <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select Campaign\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Campaigns</SelectItem>\r\n                        {campaignAdGroupPairs.map((pair) => (\r\n                          <SelectItem key={pair.campaignName} value={pair.campaignName}>{pair.campaignName}</SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  {selectedCampaign !== 'all' && (\r\n                    <div>\r\n                      <h3 className=\"font-medium mb-2\">Ad Group</h3>\r\n                      <Select\r\n                        disabled={selectedCampaign === 'all'}\r\n                        onValueChange={handleAdGroupChange}\r\n                        value={selectedAdGroup}\r\n                      >\r\n                        <SelectTrigger className=\"w-full\">\r\n                          <SelectValue placeholder=\"Select Ad Group\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"all\">All Ad Groups</SelectItem>\r\n                          {filteredAdGroups.map((adGroup) => (\r\n                            <SelectItem key={adGroup} value={adGroup}>{adGroup}</SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </PopoverContent>\r\n            </Popover>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <DatePickerWithRange\r\n              \r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100\"\r\n                onClick={fetchData}\r\n              >\r\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\r\n                Refresh\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"rounded-md border border-gray-200 overflow-hidden\">\r\n            <div className=\"max-h-[380px] overflow-auto rounded-lg\">\r\n              {loading ? (\r\n                <TableSkeleton />\r\n              ) : (\r\n                <table className=\"w-full text-center\">\r\n                  <thead className=\"sticky top-0 z-10 bg-[#4A628A] rounded-t-lg\">\r\n                    <tr>\r\n                      {columns.map((column) => (\r\n                        <th\r\n                          key={column.id}\r\n                          className=\"px-4 py-3 text-xs font-medium text-gray-50 uppercase tracking-wider min-w-[200px] cursor-pointer\"\r\n                          onClick={() => handleSort(column.id)}\r\n                        >\r\n                          <div className=\"flex items-center justify-center gap-1\">\r\n                            {column.icon}\r\n                            {column.header}\r\n                            {sortColumn === column.id ? (\r\n                              sortOrder === 'asc' ? <ArrowUp className=\"ml-1 w-4 h-6 text-[#ffffff]\" /> : <ArrowDown className=\"ml-1 w-4 h-6 text-[#ffffff]\" />\r\n                            ) : (\r\n                              <ArrowUpDown className=\"ml-1 w-4 h-6 text-gray-300\" />\r\n                            )}\r\n                          </div>\r\n                        </th>\r\n                      ))}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {sortedSearchTerms.map((row, i) => (\r\n                      <tr key={i} className=\"hover:bg-gray-50 transition-colors duration-150\">\r\n                        {columns.map((column) => {\r\n                          const value = row[column.id as keyof SearchTerm];\r\n                          const isStatusColumn = column.id === 'status';\r\n                          const isSearchTermColumn = column.id === 'searchTerm'\r\n\r\n                          const renderCell = () => {\r\n                            if (isStatusColumn) {\r\n                              const statusValue = value ? String(value) : '';\r\n                              const getStatusColor = (status: string) => {\r\n                                switch (status.trim().toUpperCase()) {\r\n                                  case 'ADDED':\r\n                                    return 'bg-green-100 text-green-800';\r\n                                  case 'NONE':\r\n                                    return 'bg-yellow-100 text-yellow-800';\r\n                                  default:\r\n                                    return 'bg-gray-100 text-gray-800';\r\n                                }\r\n                              };\r\n                              const colorClass = getStatusColor(statusValue);\r\n\r\n                              return (\r\n                                <div className={`px-2 py-1 rounded-full text-xs font-medium ${colorClass}`}>\r\n                                  {statusValue}\r\n                                </div>\r\n                              );\r\n                            }\r\n\r\n                            if (isSearchTermColumn) {\r\n                              const searchTermValue = value ? String(value) : '';\r\n                              const performance = row.performance;\r\n                              const isPerformingWell = performance === 'Best Performing Keyword';\r\n\r\n                              return (\r\n                                <div className=\"px-2 py-1 rounded-full font-medium flex flex-col items-center\">\r\n                                  <span className={`text-xs ${isPerformingWell ? 'text-green-600' : 'text-red-600'}`}>\r\n                                    {performance}\r\n                                  </span>\r\n                                  <span className=\"text-sm mt-1\">{searchTermValue}</span>\r\n                                </div>\r\n                              );\r\n                            }\r\n\r\n                            return value;\r\n                          };\r\n\r\n                          return (\r\n                            <td\r\n                              key={column.id}\r\n                              className=\"px-4 py-2.5 text-sm min-w-[200px]\"\r\n                            >\r\n                              {renderCell()}\r\n                            </td>\r\n                          );\r\n                        })}\r\n                      </tr>\r\n                    ))}\r\n                    {searchTerms.length === 0 && (\r\n                      <tr>\r\n                        <td\r\n                          colSpan={columns.length}\r\n                          className=\"px-4 py-2 text-sm text-gray-500 text-center\"\r\n                        >\r\n                          No data available\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center justify-between px-4 py-3 bg-gray-50\">\r\n              <div className=\"text-sm text-gray-600\">\r\n                Showing {((currentPage - 1) * rowsPerPage) + 1} to{' '}\r\n                {Math.min(currentPage * rowsPerPage, totalRecords || 0)} of{' '}\r\n                {totalRecords || 0} entries\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\r\n                >\r\n                  <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n                  Previous\r\n                </Button>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  Page {currentPage} of {totalPages}\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setCurrentPage((prev) => prev + 1)}\r\n                  disabled={!hasMoreData}\r\n                  className=\"text-gray-600 border-gray-200 hover:bg-gray-50\"\r\n                >\r\n                  Next\r\n                  <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import ProductTab from \"./component/ProductTab\";\r\nimport SearchTermTable from \"./component/SearchTermTable\";\r\nimport { useParams } from 'react-router-dom'\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\n\r\n\r\nexport default function Dashboard() {\r\n  const { brandId } = useParams()\r\n    if (!brandId) {\r\n        console.error(\"Brand ID is not defined\");\r\n        return <div>Error: Brand ID is missing</div>;\r\n    }\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen overflow-hidden\">\r\n       <nav className=\"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-4 md:px-6 lg:px-8\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0\">\r\n          <h1 className=\"text-2xl font-bold\">Segment Dashboard</h1>\r\n      \r\n        <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                  <DatePickerWithRange\r\n                  \r\n                    \r\n                  />\r\n                </div>\r\n                </div>\r\n      </nav>\r\n      <div className=\"flex flex-col p-6 gap-6 overflow-auto\">\r\n      <ProductTab />\r\n      <SearchTermTable />\r\n  </div>\r\n  \r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport Dashboard from \"./Dashboard\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\n const SegmentDashboard : React.FC=()=>{\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n        <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n       <Dashboard />\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\nexport default SegmentDashboard;","import { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport axios from 'axios';\r\nimport { baseURL } from '@/data/constant';\r\nimport { setBrands } from '@/store/slices/BrandSlice';\r\n\r\nexport const useBrandRefresh = () => {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n\r\n  const refreshBrands = useCallback(async () => {\r\n    try {\r\n      if (!user?.brands || user.brands.length === 0) {\r\n        console.warn(\"No brand IDs found in user context.\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post(\r\n        `${baseURL}/api/brands/filter`,\r\n        { brandIds: user.brands },\r\n        { withCredentials: true },\r\n      );\r\n\r\n      dispatch(setBrands(response.data));\r\n    } catch (error) {\r\n      console.error(\"Error refreshing brands:\", error);\r\n    }\r\n  }, [user?.brands, dispatch]);\r\n\r\n  return { refreshBrands };\r\n}; ","import { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useToast } from '../hooks/use-toast';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setUser } from '@/store/slices/UserSlice'\r\nimport { setBrands , setSelectedBrandId } from '@/store/slices/BrandSlice'\r\nimport { resetAllTokenErrors } from '@/store/slices/TokenSllice'\r\nimport { useBrandRefresh } from '@/hooks/useBrandRefresh';\r\nimport { RootState } from '@/store';\r\n\r\nconst GoogleCallback = () => {\r\n    const navigate = useNavigate();\r\n    const { toast } = useToast();\r\n    const dispatch = useDispatch();\r\n    const { refreshBrands } = useBrandRefresh();\r\n    const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n    const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId);\r\n\r\n    useEffect(() => {\r\n        const handleOauthCallback = async () => {\r\n            try {\r\n                const queryParams = new URLSearchParams(window.location.search);\r\n                const googletoken = queryParams.get('token');\r\n                const fbToken = queryParams.get('fbToken');\r\n                const googleAdRefreshToken = queryParams.get('googleadRefreshToken');\r\n                const googleAnalyticsRefreshToken = queryParams.get('googleanalyticsRefreshToken');\r\n                const zohoRefreshToken = queryParams.get('zohoToken');\r\n                const userId = queryParams.get('userId');\r\n                const appToken = queryParams.get('shopify_token');\r\n               \r\n\r\n                // Helper function for token update\r\n                const updateToken = async (url: string, token: string, type: string) => {\r\n                    try {\r\n                     \r\n                        // If we have a brandId, proceed with normal token update\r\n                        const response = await axios.put(\r\n                            `${baseURL}${url}/${type}?brandId=${selectedBrandId}`,\r\n                            {}, // Empty body since we are using query params\r\n                            { \r\n                                params: { [type]: token },\r\n                                withCredentials: true \r\n                            }\r\n                        );                        \r\n                        if (response.data.success) {\r\n                            console.log(`${type} token updated successfully`);\r\n                            // Reset all token errors when a token is successfully updated\r\n                            dispatch(resetAllTokenErrors());\r\n                            \r\n                            if (type === \"zohoToken\") {\r\n                                console.log(\"Zoho token updated, redirecting to /profile\");\r\n                                navigate('/profile');\r\n                            } else {\r\n                                const sourcePage = queryParams.get('source') || '/dashboard';\r\n                                let modalToOpen = '';\r\n                                \r\n                                // Determine which modal to open based on token type\r\n                                switch(type) {\r\n                                    case 'googleadRefreshToken':\r\n                                        modalToOpen = 'googleAds';\r\n                                        break;\r\n                                    case 'googleanalyticsRefreshToken':\r\n                                        modalToOpen = 'googleAnalytics';\r\n                                        break;\r\n                                    case 'fbToken':\r\n                                        modalToOpen = 'facebook';\r\n                                        break;\r\n                                }\r\n                                \r\n                                // Show success toast\r\n                                toast({\r\n                                    title: 'Success',\r\n                                    description: `${type} token updated successfully.`,\r\n                                    variant: 'default',\r\n                                });\r\n                                \r\n                                // Redirect to the source page with modal parameter if applicable\r\n                                if (modalToOpen) {\r\n                                    navigate(`${sourcePage}?openModal=${modalToOpen}`);\r\n                                } else {\r\n                                    navigate(sourcePage);\r\n                                }\r\n                                return true;\r\n                            }\r\n                            return true;\r\n                        } else {\r\n                            console.error(`Failed to update ${type} token`);\r\n                            toast({\r\n                                title: 'Update Failed',\r\n                                description: `Unable to update ${type} token.`,\r\n                                variant: 'destructive',\r\n                            });\r\n                            navigate('/dashboard');\r\n                            return false;\r\n                        }\r\n                    } catch (error: any) {\r\n                        console.error(`Error updating ${type} token:`, error);\r\n                        toast({\r\n                            title: 'Update Failed',\r\n                            description: error?.response?.data?.message || `Unable to update ${type} token.`,\r\n                            variant: 'destructive',\r\n                        });\r\n                        navigate('/');\r\n                        return false;\r\n                    }\r\n                };\r\n\r\n                if (googletoken) {\r\n                    console.log('Token found, proceeding with login');\r\n                    const login = await axios.post(`${baseURL}/api/auth/login/oauth?auth_token=${googletoken}`, { email: null, password: null });\r\n\r\n                    if (login.data.success) {\r\n                        console.log('Login successful');\r\n                        const user = login.data.user;\r\n\r\n                        dispatch(setUser(user));\r\n\r\n                        // For Google/Normal login users, check if they have brands\r\n                        if (!user.brands || user.brands.length === 0) {\r\n                            console.log('No brands found, redirecting to brand setup');\r\n                            navigate('/brand-setup');\r\n                        } else {\r\n                            console.log('Brands found, redirecting to dashboard');\r\n                            navigate('/dashboard');\r\n                        }\r\n                        return;\r\n                    } else {\r\n                        console.log('Login failed, redirecting to /');\r\n                        toast({\r\n                            title: 'Login Failed',\r\n                            description: 'Unable to authenticate with Google.',\r\n                            variant: 'destructive',\r\n                        });\r\n                        navigate('/');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n\r\n                if (fbToken) {\r\n                    await updateToken('/api/auth/updateTokens', fbToken, 'fbToken');\r\n                    return;\r\n                }\r\n\r\n                if (googleAdRefreshToken) {\r\n                    await updateToken('/api/auth/updateTokens', googleAdRefreshToken, 'googleadRefreshToken');\r\n                    return;\r\n                }\r\n\r\n                if (googleAnalyticsRefreshToken) {\r\n                    await updateToken('/api/auth/updateTokens', googleAnalyticsRefreshToken, 'googleanalyticsRefreshToken');\r\n                    return;\r\n                }\r\n\r\n                if (zohoRefreshToken) {\r\n                    await updateToken('/api/auth/updateTokens/zoho', zohoRefreshToken, 'zohoToken');\r\n                    return;\r\n                }\r\n\r\n                if (userId && appToken) {\r\n                    console.log('Token found, proceeding with user saving');\r\n                    const getUser = await axios.get(`${baseURL}/api/users/getuser/${userId}?token=${appToken}`);\r\n\r\n                    if (getUser.data.success) {\r\n                        const user = getUser.data.user;\r\n                        const brands = getUser.data.brands;\r\n\r\n                        dispatch(setUser(user));\r\n                        dispatch(setBrands(brands));\r\n                        dispatch(setSelectedBrandId(brands[0]._id));\r\n                        await refreshBrands();  \r\n                        \r\n                        // For Shopify login users, check if they have brands\r\n                        if (!user.brands || user.brands.length === 0) {\r\n                            console.log('No brands found, redirecting to brand setup');\r\n                            navigate('/brand-setup');\r\n                        } else {\r\n                            console.log('Brands found, redirecting to dashboard');\r\n                            navigate('/dashboard');\r\n                        }\r\n                        return;\r\n                    } else {\r\n                        console.log('Login failed, redirecting to /login');\r\n                        toast({\r\n                            title: 'Login Failed',\r\n                            description: 'Unable to authenticate with Google.',\r\n                            variant: 'destructive',\r\n                        });\r\n                        navigate('/login');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                console.log('No token present, redirecting to /login');\r\n                navigate('/login');\r\n\r\n            } catch (error) {\r\n                console.error('Error during OAuth callback:', error);\r\n                toast({\r\n                    title: 'Error',\r\n                    description: 'An error occurred while handling the login callback.',\r\n                    variant: 'destructive',\r\n                });\r\n                navigate('/login');\r\n            }\r\n        };\r\n\r\n        handleOauthCallback();\r\n    }, [navigate, setUser, toast, baseURL, selectedBrandId]);\r\n\r\n\r\n    return null;\r\n};\r\n\r\nexport default GoogleCallback;","\r\nimport * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n  Select,\r\n  SelectTrigger,\r\n  SelectValue,\r\n  SelectContent,\r\n  SelectItem,\r\n} from \"@/components/ui/select\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\r\nimport { ShopifyLogo, Ga4Logo } from \"@/data/logo\"\r\n\r\nexport type FunnelRow = {\r\n  id: string\r\n  day?: string\r\n  month?: string\r\n  date?: string\r\n  sessions: number\r\n  addToCart: number\r\n  addToCartRate: string\r\n  checkouts: number\r\n  checkoutRate: string\r\n  purchases: number\r\n  purchaseRate: string\r\n  aov?: number\r\n  averageItemsPerOrder?: number\r\n  codOrderCount?: number\r\n  prepaidOrderCount?: number\r\n}\r\n\r\ntype ColumnDef<T extends keyof FunnelRow = keyof FunnelRow> = {\r\n  key: T\r\n  header: string\r\n  width: number\r\n  minWidth?: number\r\n  maxWidth?: number\r\n  align?: \"left\" | \"right\" | \"center\"\r\n}\r\n\r\nconst allColumns: ColumnDef[] = [\r\n  { key: \"day\", header: \"Day\", width: 140, minWidth: 120 },\r\n  { key: \"month\", header: \"Month\", width: 140, minWidth: 120 },\r\n  { key: \"date\", header: \"Date\", width: 140, minWidth: 120 },\r\n  { key: \"sessions\", header: \"Sessions\", width: 120, minWidth: 110, align: \"right\" },\r\n  { key: \"addToCart\", header: \"Add To Cart\", width: 140, minWidth: 120, align: \"right\" },\r\n  { key: \"addToCartRate\", header: \"Add To Cart Rate\", width: 160, minWidth: 140, align: \"right\" },\r\n  { key: \"checkouts\", header: \"Checkouts\", width: 130, minWidth: 110, align: \"right\" },\r\n  { key: \"checkoutRate\", header: \"Checkout Rate\", width: 150, minWidth: 130, align: \"right\" },\r\n  { key: \"purchases\", header: \"Purchases\", width: 130, minWidth: 110, align: \"right\" },\r\n  { key: \"purchaseRate\", header: \"Purchase Rate\", width: 150, minWidth: 130, align: \"right\" },\r\n  { key: \"aov\", header: \"AOV\", width: 120, minWidth: 110, align: \"right\" },\r\n  { key: \"averageItemsPerOrder\", header: \"Avg Items/Order\", width: 150, minWidth: 130, align: \"right\" },\r\n  { key: \"codOrderCount\", header: \"COD Orders\", width: 130, minWidth: 110, align: \"right\" },\r\n  { key: \"prepaidOrderCount\", header: \"Prepaid Orders\", width: 150, minWidth: 130, align: \"right\" },\r\n]\r\n\r\nfunction clamp(n: number, min: number, max?: number) {\r\n  if (max != null) return Math.min(Math.max(n, min), max)\r\n  return Math.max(n, min)\r\n}\r\n\r\n// Helper function to get logo for a column\r\nfunction getColumnLogo(key: keyof FunnelRow): React.ReactNode | null {\r\n  // Shopify logo for AOV, Avg Items/Order, COD Orders, and Prepaid Orders\r\n  if (key === 'aov' || key === 'averageItemsPerOrder' || key === 'codOrderCount' || key === 'prepaidOrderCount') {\r\n    return <ShopifyLogo width=\"1rem\" height=\"1rem\" />\r\n  }\r\n  \r\n  // Analytics logo for other columns except month/day/date\r\n  if (key !== 'month' && key !== 'day' && key !== 'date') {\r\n    return <Ga4Logo width=\"1rem\" height=\"1rem\" />\r\n  }\r\n  \r\n  // No logo for month/day/date columns\r\n  return null\r\n}\r\n\r\ntype DragState = {\r\n  index: number\r\n  startX: number\r\n  startWidth: number\r\n}\r\n\r\nexport default function ReportTable({\r\n  rows,\r\n  initialPageSize = \"50\",\r\n  visibleColumns,\r\n  columnOrder,\r\n}: {\r\n  rows: FunnelRow[]\r\n  initialPageSize?: \"50\" | \"100\" | \"200\" | \"all\"\r\n  visibleColumns?: string[]\r\n  columnOrder?: string[]\r\n}) {\r\n\r\n  // Use column management props if provided, otherwise use all columns\r\n  const columns = React.useMemo(() => {\r\n    if (!visibleColumns || !columnOrder) {\r\n      console.log('No column management props, using all columns');\r\n      return allColumns;\r\n    }\r\n    \r\n    console.log('Column management props:', { visibleColumns, columnOrder });\r\n    \r\n    // Create a mapping from display names to column keys\r\n    const columnNameToKey: Record<string, keyof FunnelRow> = {\r\n      'Day': 'day',\r\n      'Month': 'month',\r\n      'Date': 'date',\r\n      'Sessions': 'sessions',\r\n      'Add To Cart': 'addToCart',\r\n      'Add To Cart Rate': 'addToCartRate',\r\n      'Checkouts': 'checkouts',\r\n      'Checkout Rate': 'checkoutRate',\r\n      'Purchases': 'purchases',\r\n      'Purchase Rate': 'purchaseRate',\r\n      'AOV': 'aov',\r\n      'Avg Items/Order': 'averageItemsPerOrder',\r\n      'COD Orders': 'codOrderCount',\r\n      'Prepaid Orders': 'prepaidOrderCount'\r\n    };\r\n    \r\n    // Filter and reorder columns based on column management\r\n    const filteredColumns = columnOrder\r\n      .filter((col: string) => visibleColumns.includes(col))\r\n      .map((col: string) => {\r\n        const columnKey = columnNameToKey[col];\r\n        const foundColumn = allColumns.find((c: ColumnDef) => c.key === columnKey);\r\n        console.log(`Mapping column \"${col}\" to key \"${columnKey}\", found:`, foundColumn);\r\n        return foundColumn;\r\n      })\r\n      .filter((col): col is ColumnDef => col !== undefined);\r\n\r\n  \r\n  // If no valid columns found, return all columns as fallback\r\n  const finalColumns = filteredColumns.length > 0 ? filteredColumns : allColumns;\r\n  \r\n  // Ensure we always have valid columns\r\n  if (finalColumns.some(col => !col || !col.key)) {\r\n    console.error('Invalid columns detected, falling back to all columns:', finalColumns);\r\n    return allColumns;\r\n  }\r\n  \r\n  return finalColumns;\r\n}, [visibleColumns, columnOrder]);\r\n\r\n  const [widths, setWidths] = React.useState<number[]>([])\r\n  const containerRef = React.useRef<HTMLDivElement>(null)\r\n  const [containerWidth, setContainerWidth] = React.useState<number>(0)\r\n  const columnsKeyRef = React.useRef<string>('')\r\n  const hasInitializedRef = React.useRef<boolean>(false)\r\n\r\n  // Measure container width\r\n  React.useEffect(() => {\r\n    const measureContainer = () => {\r\n      if (containerRef.current) {\r\n        setContainerWidth(containerRef.current.clientWidth)\r\n      }\r\n    }\r\n    \r\n    measureContainer()\r\n    window.addEventListener('resize', measureContainer)\r\n    return () => window.removeEventListener('resize', measureContainer)\r\n  }, [])\r\n\r\n  // Calculate widths to fill container width - recalculate on resize\r\n  React.useEffect(() => {\r\n    if (columns.length === 0 || containerWidth === 0) return\r\n    \r\n    const currentColumnsKey = columns.map(c => c.key).join(',')\r\n    \r\n    // If columns changed, reset to allow recalculation\r\n    if (currentColumnsKey !== columnsKeyRef.current) {\r\n      columnsKeyRef.current = currentColumnsKey\r\n      hasInitializedRef.current = false\r\n    }\r\n    \r\n    // Always recalculate when container width changes (including resize)\r\n    const defaultWidths = columns.map((c) => c.width)\r\n    const minWidths = columns.map((c) => c.minWidth || 80)\r\n    const totalDefaultWidth = defaultWidths.reduce((sum, w) => sum + w, 0)\r\n    const totalMinWidth = minWidths.reduce((sum, w) => sum + w, 0)\r\n    \r\n    // Distribute columns proportionally to fill container width\r\n    if (totalDefaultWidth > 0) {\r\n      // If minimum widths exceed container, scale them down\r\n      if (totalMinWidth > containerWidth) {\r\n        const scaleFactor = containerWidth / totalMinWidth\r\n        const scaledWidths = minWidths.map((w) => w * scaleFactor)\r\n        setWidths(scaledWidths)\r\n      } else {\r\n        // Scale default widths to fill container width\r\n        const scaleFactor = containerWidth / totalDefaultWidth\r\n        let scaledWidths = defaultWidths.map((w, index) => {\r\n          const scaled = w * scaleFactor\r\n          const minWidth = minWidths[index]\r\n          return Math.max(scaled, minWidth)\r\n        })\r\n        \r\n        // Adjust if total exceeds container due to minWidth constraints\r\n        let totalScaled = scaledWidths.reduce((sum, w) => sum + w, 0)\r\n        if (totalScaled > containerWidth) {\r\n          // Redistribute excess from flexible columns\r\n          const excess = totalScaled - containerWidth\r\n          const flexibleIndices: number[] = []\r\n          let flexibleTotal = 0\r\n          \r\n          for (let i = 0; i < scaledWidths.length; i++) {\r\n            const w = scaledWidths[i]\r\n            if (w > minWidths[i]) {\r\n              flexibleIndices.push(i)\r\n              flexibleTotal += w\r\n            }\r\n          }\r\n          \r\n          if (flexibleTotal > 0 && flexibleIndices.length > 0) {\r\n            scaledWidths = scaledWidths.map((w, i) => {\r\n              if (flexibleIndices.includes(i)) {\r\n                return w - (excess * (w / flexibleTotal))\r\n              }\r\n              return w\r\n            })\r\n          }\r\n        } else if (totalScaled < containerWidth) {\r\n          // If total is less than container, distribute the remaining space\r\n          const remaining = containerWidth - totalScaled\r\n          const flexibleIndices: number[] = []\r\n          let flexibleTotal = 0\r\n          \r\n          for (let i = 0; i < scaledWidths.length; i++) {\r\n            const w = scaledWidths[i]\r\n            if (w > minWidths[i]) {\r\n              flexibleIndices.push(i)\r\n              flexibleTotal += w\r\n            }\r\n          }\r\n          \r\n          // If no flexible columns, add to all columns proportionally\r\n          if (flexibleIndices.length === 0) {\r\n            const perColumn = remaining / scaledWidths.length\r\n            scaledWidths = scaledWidths.map(w => w + perColumn)\r\n          } else if (flexibleTotal > 0) {\r\n            // Distribute remaining to flexible columns proportionally\r\n            scaledWidths = scaledWidths.map((w, i) => {\r\n              if (flexibleIndices.includes(i)) {\r\n                return w + (remaining * (w / flexibleTotal))\r\n              }\r\n              return w\r\n            })\r\n          }\r\n        }\r\n        \r\n        // Final normalization to ensure exact sum equals containerWidth\r\n        const finalTotal = scaledWidths.reduce((sum, w) => sum + w, 0)\r\n        if (Math.abs(finalTotal - containerWidth) > 0.1) {\r\n          const adjustment = (containerWidth - finalTotal) / scaledWidths.length\r\n          scaledWidths = scaledWidths.map(w => w + adjustment)\r\n        }\r\n        \r\n        setWidths(scaledWidths)\r\n      }\r\n    } else {\r\n      setWidths(defaultWidths)\r\n    }\r\n    \r\n    hasInitializedRef.current = true\r\n  }, [columns, containerWidth])\r\n  \r\n  // Ensure widths array matches columns array length\r\n  const safeWidths = React.useMemo(() => {\r\n    return columns.map((col, index) => widths[index] || col.width);\r\n  }, [columns, widths]);\r\n  \r\n  // Calculate total table width - should match container width after normalization\r\n  const totalTableWidth = React.useMemo(() => {\r\n    return safeWidths.reduce((sum, width) => sum + width, 0);\r\n  }, [safeWidths]);\r\n  \r\n  const dragRef = React.useRef<DragState | null>(null)\r\n  const [resizingIndex, setResizingIndex] = React.useState<number | null>(null)\r\n\r\n  const [pageSize, setPageSize] = React.useState<\"50\" | \"100\" | \"200\" | \"all\">(\r\n    initialPageSize\r\n  )\r\n  const [page, setPage] = React.useState(1)\r\n\r\n  const totalRows = rows.length\r\n  const perPage = pageSize === \"all\" ? totalRows : Number(pageSize)\r\n  const totalPages = Math.max(1, Math.ceil((totalRows || 1) / (perPage || 1)))\r\n\r\n  React.useEffect(() => {\r\n    setPage((p) => clamp(p, 1, totalPages))\r\n  }, [totalPages])\r\n\r\n  const start = pageSize === \"all\" ? 0 : (page - 1) * perPage\r\n  const end = pageSize === \"all\" ? totalRows : Math.min(start + perPage, totalRows)\r\n  const currentRows = rows.slice(start, end)\r\n\r\n  React.useEffect(() => {\r\n    const onMove = (e: PointerEvent) => {\r\n      const drag = dragRef.current\r\n      if (!drag) return\r\n      const delta = e.clientX - drag.startX\r\n      const def = columns[drag.index]\r\n      // Functional update fixes the \"columns revert\" bug\r\n      setWidths((prev) => {\r\n        const next = [...prev]\r\n        next[drag.index] = clamp(\r\n          drag.startWidth + delta,\r\n          def.minWidth ?? 80,\r\n          def.maxWidth\r\n        )\r\n        return next\r\n      })\r\n    }\r\n    const onUp = () => {\r\n      dragRef.current = null\r\n      setResizingIndex(null)\r\n      document.body.style.cursor = \"\"\r\n      document.body.classList.remove(\"select-none\")\r\n    }\r\n    window.addEventListener(\"pointermove\", onMove)\r\n    window.addEventListener(\"pointerup\", onUp)\r\n    return () => {\r\n      window.removeEventListener(\"pointermove\", onMove)\r\n      window.removeEventListener(\"pointerup\", onUp)\r\n    }\r\n  }, [])\r\n\r\n  const startDrag = (e: React.PointerEvent, index: number) => {\r\n    dragRef.current = { index, startX: e.clientX, startWidth: widths[index] }\r\n    setResizingIndex(index)\r\n    document.body.style.cursor = \"col-resize\"\r\n    document.body.classList.add(\"select-none\")\r\n    ;(e.currentTarget as HTMLElement).setPointerCapture(e.pointerId)\r\n  }\r\n\r\n  const renderCell = (row: FunnelRow, key: keyof FunnelRow): React.ReactNode => {\r\n    // Handle COD and Prepaid Order Count - show percentage instead of count\r\n    if (key === 'codOrderCount' || key === 'prepaidOrderCount') {\r\n      const codCount = row.codOrderCount ?? 0\r\n      const prepaidCount = row.prepaidOrderCount ?? 0\r\n      const total = codCount + prepaidCount\r\n      \r\n      // If both are undefined or total is 0, show \"-\" or \"0%\"\r\n      if (row.codOrderCount === undefined && row.prepaidOrderCount === undefined) {\r\n        return \"-\"\r\n      }\r\n      \r\n      if (total === 0) {\r\n        return \"0%\"\r\n      }\r\n      \r\n      let percentage: number\r\n      let count: number\r\n      let label: string\r\n      \r\n      if (key === 'codOrderCount') {\r\n        percentage = (codCount / total) * 100\r\n        count = codCount\r\n        label = 'COD Orders'\r\n      } else {\r\n        percentage = (prepaidCount / total) * 100\r\n        count = prepaidCount\r\n        label = 'Prepaid Orders'\r\n      }\r\n      \r\n      return (\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <span className=\"cursor-default\">{percentage.toFixed(1)}%</span>\r\n          </TooltipTrigger>\r\n          <TooltipContent>\r\n            <p>\r\n              {label}: {count.toLocaleString()}\r\n            </p>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      )\r\n    }\r\n    \r\n    // Handle other columns normally\r\n    const v = row[key]\r\n    if (v === undefined) return \"-\"\r\n    if (typeof v === \"number\") return v.toLocaleString()\r\n    return v as string\r\n  }\r\n\r\n  // Safety check - ensure we have valid columns\r\n  if (!columns || columns.length === 0) {\r\n    console.error('No valid columns available, rendering empty table');\r\n    return <div>No columns available</div>;\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div className=\"w-full space-y-2\">\r\n        <div className=\"w-full rounded-lg border border-gray-200 bg-white overflow-hidden\">\r\n          <div \r\n            ref={containerRef}\r\n            className=\"overflow-x-auto overflow-y-auto\" \r\n            style={{ height: '90vh', width: '100%' }}\r\n          >\r\n            <table \r\n              className=\"table-fixed border-collapse text-sm w-full\" \r\n              style={{ \r\n                minWidth: `${totalTableWidth}px`\r\n              }}\r\n            >\r\n              <colgroup>\r\n                {safeWidths.map((w, i) => (\r\n                  <col key={String(columns[i]?.key || `col-${i}`)} style={{ width: w }} />\r\n                ))}\r\n              </colgroup>\r\n\r\n              <thead className=\"bg-gray-100 sticky top-0 z-50\">\r\n                <tr className=\"text-gray-600\">\r\n                  {columns.map((col, idx) => {\r\n                    if (!col || !col.key) {\r\n                      console.error('Invalid column at index', idx, col);\r\n                      return null;\r\n                    }\r\n                    \r\n                    const isFirst = idx === 0\r\n                    const active = resizingIndex === idx\r\n                    const columnLogo = getColumnLogo(col.key)\r\n                    \r\n                    return (\r\n                      <th\r\n                        key={String(col.key)}\r\n                        scope=\"col\"\r\n                        className={cn(\r\n                          \"relative h-11 align-middle border-b border-l last:border-r\",\r\n                          active ? \"border-blue-500\" : \"border-gray-200\",\r\n                          \"px-3 text-left font-medium bg-gray-100\",\r\n                          col.align === \"right\" && \"text-right\",\r\n                          isFirst &&\r\n                            \"sticky left-0 z-50 bg-gray-100 shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\"\r\n                        )}\r\n                      >\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {columnLogo && (\r\n                            <span className=\"flex-shrink-0\">\r\n                              {columnLogo}\r\n                            </span>\r\n                          )}\r\n                          <Tooltip>\r\n                            <TooltipTrigger asChild>\r\n                              <span className=\"truncate cursor-help\">{col.header}</span>\r\n                            </TooltipTrigger>\r\n                            <TooltipContent side=\"bottom\">\r\n                              <p>{col.header}</p>\r\n                            </TooltipContent>\r\n                          </Tooltip>\r\n                        </div>\r\n\r\n                      {/* Resize handle with blue active state */}\r\n                      <div\r\n                        role=\"separator\"\r\n                        aria-orientation=\"vertical\"\r\n                        aria-label={`Resize ${col.header} column`}\r\n                        onPointerDown={(e) => startDrag(e, idx)}\r\n                        className={cn(\r\n                          \"absolute inset-y-0 right-0 w-3 cursor-col-resize\",\r\n                          active\r\n                            ? \"bg-blue-500/15\"\r\n                            : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n                        )}\r\n                      >\r\n                        <div\r\n                          className={cn(\r\n                            \"absolute right-0 top-0 h-full w-px\",\r\n                            active ? \"bg-blue-500\" : \"bg-gray-200\"\r\n                          )}\r\n                        />\r\n                      </div>\r\n                    </th>\r\n                  )\r\n                })}\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody className=\"text-gray-700\">\r\n              {currentRows.map((row, rIdx) => (\r\n                <tr key={row.id} className={cn(rIdx % 2 === 1 && \"bg-gray-50/60\", \"hover:bg-blue-50 transition-colors duration-150\")}>\r\n                  {columns.map((col, cIdx) => {\r\n                    if (!col || !col.key) {\r\n                      console.error('Invalid column at index', cIdx, col);\r\n                      return null;\r\n                    }\r\n                    \r\n                    const isFirst = cIdx === 0\r\n                    const alignClass =\r\n                      col.align === \"right\"\r\n                        ? \"text-right\"\r\n                        : col.align === \"center\"\r\n                        ? \"text-center\"\r\n                        : \"text-left\"\r\n                    return (\r\n                      <td\r\n                        key={String(col.key)}\r\n                        className={cn(\r\n                          \"px-3 py-2 truncate tabular-nums\",\r\n                          \"border-b border-l last:border-r\",\r\n                          \"align-middle\",\r\n                          \"border-gray-200\",\r\n                          alignClass,\r\n                          isFirst &&\r\n                            \"sticky left-0 z-40 bg-transparent shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\"\r\n                        )}\r\n                        title={\r\n                          typeof (row as any)[col.key] === \"string\"\r\n                            ? ((row as any)[col.key] as string)\r\n                            : undefined\r\n                        }\r\n                      >\r\n                        {renderCell(row, col.key)}\r\n                      </td>\r\n                    )\r\n                  })}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          {/* Footer: rows per page + pagination - Inside scrollable area */}\r\n          <div \r\n            className=\"flex flex-col items-start justify-between gap-3 border-t border-gray-200 bg-gray-50 p-3 text-sm md:flex-row md:items-center mt-4 w-full\"\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-gray-600\">Rows per page:</span>\r\n              <Select\r\n                value={pageSize}\r\n                onValueChange={(v) => {\r\n                  setPageSize(v as \"50\" | \"100\" | \"200\" | \"all\")\r\n                  setPage(1)\r\n                }}\r\n              >\r\n                <SelectTrigger className=\"h-8 w-[100px]\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent align=\"start\" className=\"w-[140px]\">\r\n                  <SelectItem value=\"50\">50</SelectItem>\r\n                  <SelectItem value=\"100\">100</SelectItem>\r\n                  <SelectItem value=\"200\">200</SelectItem>\r\n                  <SelectItem value=\"all\">All</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"flex flex-1 items-center justify-end gap-3\">\r\n              <div className=\"text-gray-600\">\r\n                {totalRows === 0 ? \"0 of 0\" : <>{start + 1}&ndash;{end} of {totalRows}</>}\r\n              </div>\r\n              <div className=\"flex items-center gap-1\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"h-8 w-8\"\r\n                  onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                  disabled={page <= 1 || pageSize === \"all\"}\r\n                  aria-label=\"Previous page\"\r\n                >\r\n                  <ChevronLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n                <span className=\"min-w-[4rem] text-center text-gray-700\">\r\n                  {pageSize === \"all\" ? \"1 / 1\" : `${page} / ${totalPages}`}\r\n                </span>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"h-8 w-8\"\r\n                  onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\r\n                  disabled={page >= totalPages || pageSize === \"all\"}\r\n                  aria-label=\"Next page\"\r\n                >\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  )\r\n}\r\n","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport ReportTable from \"./ReportTable\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\n\r\n\r\ninterface EcommerceMetric {\r\n  \"Date\": string\r\n  \"Add To Cart\": string\r\n  \"Checkouts\": string\r\n  \"Sessions\": string\r\n  \"Purchases\": string\r\n  \"Purchase Rate\": string\r\n  \"Add To Cart Rate\": string\r\n  \"Checkout Rate\": string\r\n}\r\n\r\ninterface EcommerceMetricsProps {\r\n  dateRange: DateRange | undefined\r\n  visibleColumns: string[];\r\n  columnOrder: string[];\r\n  refreshTrigger: number;\r\n}\r\n\r\nconst EcommerceMetricsPage: React.FC<EcommerceMetricsProps> = ({ \r\n  dateRange: propDateRange, \r\n  visibleColumns,\r\n  columnOrder,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const compareFrom = useSelector((state: RootState) => state.date.compareFrom);\r\n  const compareTo = useSelector((state: RootState) => state.date.compareTo);\r\n  \r\n\r\n  const [data, setData] = useState<EcommerceMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const compareDate = useMemo(() => ({\r\n    from: compareFrom,\r\n    to: compareTo\r\n  }), [compareFrom, compareTo]);\r\n\r\n  const startDate = date?.from ? format(new Date(date.from), \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(new Date(date.to), \"yyyy-MM-dd\") : \"\";\r\n  const compareStartDate = compareDate?.from ? format(new Date(compareDate.from), \"yyyy-MM-dd\") : \"\";\r\n  const compareEndDate = compareDate?.to ? format(new Date(compareDate.to), \"yyyy-MM-dd\") : \"\";\r\n  \r\n  const dispatch = useDispatch();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Transform data to match ReportTable's expected format\r\n  const transformedData = useMemo(() => {\r\n    return data.map((item, index) => ({\r\n      id: `row-${index}`,\r\n      date: item.Date,\r\n      sessions: parseInt(item.Sessions) || 0,\r\n      addToCart: parseInt(item['Add To Cart']) || 0,\r\n      addToCartRate: item['Add To Cart Rate'] || '0%',\r\n      checkouts: parseInt(item['Checkouts']) || 0,\r\n      checkoutRate: item['Checkout Rate'] || '0%',\r\n      purchases: parseInt(item['Purchases']) || 0,\r\n      purchaseRate: item['Purchase Rate'] || '0%'\r\n    }));\r\n  }, [data]);\r\n\r\n\r\n\r\n  // Consolidate date range effects\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\r\n      }));\r\n    }\r\n  }, [propDateRange, dispatch]);\r\n\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const dateRanges = [];\r\n\r\n      // Always add primary date range\r\n      if (startDate && endDate) {\r\n        dateRanges.push({ \r\n          startDate: startDate, \r\n          endDate: endDate \r\n        });\r\n      }\r\n\r\n      // Add comparison date range if available and compare is enabled\r\n      if (compareStartDate && compareEndDate) {\r\n        dateRanges.push({\r\n          startDate: compareStartDate,\r\n          endDate: compareEndDate\r\n        });\r\n      }\r\n\r\n      // Only fetch if we have at least one date range\r\n      if (dateRanges.length > 0) {\r\n        const DailyAnalyticsResponse = await axiosInstance.post(\r\n          `/api/analytics/atcreport/${brandId}`,\r\n          {\r\n            dateRanges: dateRanges,\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const fetchedRanges = DailyAnalyticsResponse.data.ranges || [];\r\n    \r\n        // More flexible data handling\r\n        if (fetchedRanges.length > 0) {\r\n          // Check if the first range contains daily data or consolidated data\r\n          const isConsolidatedData = fetchedRanges[0].Date \r\n          \r\n          if (isConsolidatedData) {\r\n            // Consolidated data scenario\r\n            setData(fetchedRanges);\r\n          } else {\r\n            // Daily data scenario\r\n            setData(fetchedRanges[0]?.data || []);\r\n        \r\n          }\r\n\r\n       \r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching e-commerce metrics data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate, compareStartDate, compareEndDate, brandId]);\r\n\r\n  // Fetch data when dates or brandId change\r\n  useEffect(() => {\r\n    if (startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n  }, [startDate, endDate, brandId]); // Only depend on what actually triggers a new fetch\r\n\r\n  // Set up polling interval\r\n  useEffect(() => {\r\n    if (!startDate || !endDate) return;\r\n    \r\n    const intervalId = setInterval(() => {\r\n      fetchMetrics();\r\n    }, 15 * 60 * 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [startDate, endDate, brandId]); // Only depend on what affects the interval\r\n\r\n  // Listen for refresh trigger from parent\r\n  useEffect(() => {\r\n    if (refreshTrigger > 0 && startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n  }, [refreshTrigger, startDate, endDate, brandId]); // Only depend on what affects the refresh\r\n\r\n  if(isLoading){\r\n    return <Loader isLoading={isLoading} />\r\n  }\r\n\r\n  return (\r\n    <ReportTable \r\n      rows={transformedData} \r\n      initialPageSize=\"50\"\r\n      visibleColumns={visibleColumns}\r\n      columnOrder={columnOrder}\r\n    />\r\n  );\r\n};\r\n\r\nexport default EcommerceMetricsPage;","import { useState } from 'react';\r\nimport { AlertTriangle, BarChart3, LineChart, TrendingUp, ArrowRight, Facebook, PieChart } from 'lucide-react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport PlatformModal from '@/components/dashboard_component/PlatformModal';\r\n\r\nconst platformConfigs = {\r\n  'google analytics': {\r\n    title: \"Google analytics\",\r\n    description: \"Unlock powerful insights for your store\",\r\n    icon: <PieChart className=\"h-16 w-16 text-blue-500 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Real-time Analytics\",\r\n        description: \"Track visitor behavior as it happens\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Performance Metrics\",\r\n        description: \"Monitor your store's key metrics\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Growth Insights\",\r\n        description: \"Make data-driven decisions\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect GA4 Now\",\r\n    guideText: \"Need help setting up GA4?\"\r\n  },\r\n  'google ads': {\r\n    title: \"Google Ads\",\r\n    description: \"Supercharge your advertising performance\",\r\n    icon: <AlertTriangle className=\"h-16 w-16 text-red-500 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Campaign Tracking\",\r\n        description: \"Monitor ad performance in real-time\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Conversion Analytics\",\r\n        description: \"Track ROI and conversions\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Budget Optimization\",\r\n        description: \"Optimize spending across campaigns\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect Google Ads\",\r\n    guideText: \"New to Google Ads?\"\r\n  },\r\n  facebook: {\r\n    title: \"Facebook Ads\",\r\n    description: \"Scale your social media advertising\",\r\n    icon: <Facebook className=\"h-16 w-16 text-blue-600 animate-bounce\" />,\r\n    benefits: [\r\n      {\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Audience Insights\",\r\n        description: \"Understand your target audience\"\r\n      },\r\n      {\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n        title: \"Ad Performance\",\r\n        description: \"Track engagement and reach\"\r\n      },\r\n      {\r\n        icon: <TrendingUp className=\"h-8 w-8 text-primary\" />,\r\n        title: \"ROAS Tracking\",\r\n        description: \"Measure advertising return\"\r\n      }\r\n    ],\r\n    buttonText: \"Connect Facebook Ads\",\r\n    guideText: \"First time with Facebook Ads?\"\r\n  }\r\n};\r\n\r\ntype PlatformKeys = 'google analytics' | 'google ads' | 'facebook';\r\n\r\ninterface ConnectPlatformProps {\r\n  platform?: PlatformKeys;\r\n  brandId: string;\r\n  onSuccess?: (platform: string, accountName: string, accountId: string) => void;\r\n}\r\n\r\nconst ConnectPlatform: React.FC<ConnectPlatformProps> = ({ \r\n  platform = 'google analytics',\r\n  brandId,\r\n  onSuccess \r\n}) => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const config = platformConfigs[platform];\r\n\r\n  const handleConnect = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-3xl mx-auto w-full space-y-8\">\r\n          {/* Header Section */}\r\n          <div className=\"text-center space-y-4\">\r\n            <div className=\"flex justify-center\">\r\n              {config.icon}\r\n            </div>\r\n            <h1 className=\"text-4xl font-bold tracking-tight\">Connect {config.title}</h1>\r\n            <p className=\"text-xl text-muted-foreground\">\r\n              {config.description}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <Card className=\"p-6 bg-card/50 backdrop-blur-sm\">\r\n            <div className=\"space-y-6\">\r\n              <p className=\"text-lg text-center\">\r\n                You haven't connected {config.title} yet. You're missing out on valuable insights about your store's performance!\r\n              </p>\r\n\r\n              {/* Benefits Grid */}\r\n              <div className=\"grid md:grid-cols-3 gap-4 my-8\">\r\n                {config.benefits.map((benefit, index) => (\r\n                  <div key={index} className=\"flex flex-col items-center text-center p-4 space-y-2\">\r\n                    {benefit.icon}\r\n                    <h3 className=\"font-semibold\">{benefit.title}</h3>\r\n                    <p className=\"text-sm text-muted-foreground\">{benefit.description}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* CTA Button */}\r\n              <div className=\"flex justify-center\">\r\n                <Button \r\n                  size=\"lg\" \r\n                  className=\"group\"\r\n                  onClick={handleConnect}\r\n                >\r\n                  {config.buttonText}\r\n                  <ArrowRight className=\"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Footer Note */}\r\n          <p className=\"text-center text-sm text-muted-foreground\">\r\n            {config.guideText}{\" \"}\r\n            <a href=\"#\" className=\"text-primary hover:underline\">\r\n              Check out our guide\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <PlatformModal\r\n        platform={platform}\r\n        open={isModalOpen}\r\n        onOpenChange={setIsModalOpen}\r\n        brandId={brandId}\r\n        onSuccess={onSuccess}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ConnectPlatform;","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { DateRange } from \"react-day-picker\"\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport ReportTable from \"./ReportTable\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\n\r\ninterface DaywiseMetric {\r\n  \"Day\": string\r\n  \"Add To Cart\": string\r\n  \"Checkouts\": string\r\n  \"Sessions\": string\r\n  \"Purchases\": string\r\n  \"Purchase Rate\": string\r\n  \"Add To Cart Rate\": string\r\n  \"Checkout Rate\": string\r\n}\r\n\r\ninterface DaywiseMetricProps {\r\n  dateRange: DateRange | undefined;\r\n  visibleColumns: string[];\r\n  columnOrder: string[];\r\n  refreshTrigger: number;\r\n}\r\n\r\nconst DaywiseMetricsPage: React.FC<DaywiseMetricProps> = ({ \r\n  dateRange: propDateRange, \r\n   visibleColumns,\r\n  columnOrder,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [data, setData] = useState<DaywiseMetric[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { brandId } = useParams();\r\n\r\n  \r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  \r\n  const dispatch = useDispatch();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Transform data to match ReportTable's expected format\r\n  const transformedData = useMemo(() => {\r\n    const transformed = data.map((item, index) => {\r\n      const transformedItem = {\r\n        id: `row-${index}`,\r\n        day: item.Day,\r\n        sessions: parseInt(item.Sessions) || 0,\r\n        addToCart: parseInt(item['Add To Cart']) || 0,\r\n        addToCartRate: item['Add To Cart Rate'] || '0%',\r\n        checkouts: parseInt(item['Checkouts']) || 0,\r\n        checkoutRate: item['Checkout Rate'] || '0%',\r\n        purchases: parseInt(item['Purchases']) || 0,\r\n        purchaseRate: item['Purchase Rate'] || '0%'\r\n      };\r\n      return transformedItem;\r\n    });\r\n    return transformed;\r\n  }, [data]);\r\n\r\n  // Consolidate date handling into a single useEffect\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\r\n      }));\r\n    }\r\n  }, [propDateRange, dispatch]);\r\n\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(\r\n        `/api/analytics/dayAtcReport/${brandId}`,\r\n        {\r\n          startDate: startDate,\r\n          endDate: endDate,\r\n        },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.data && response.data.data) {\r\n        const fetchedData = response.data.data || [];\r\n        setData(fetchedData);\r\n\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching daywise metrics data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate, brandId]);\r\n\r\n   // Fetch data when dates or brandId change\r\n   useEffect(() => {\r\n    if (startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n  }, [startDate, endDate, brandId]); // Only depend on what actually triggers a new fetch\r\n\r\n  // Set up polling interval\r\n  useEffect(() => {\r\n    if (!startDate || !endDate) return;\r\n    \r\n    const intervalId = setInterval(() => {\r\n      fetchMetrics();\r\n    }, 15 * 60 * 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [startDate, endDate, brandId]); // Only depend on what affects the interval\r\n  // Listen for refresh trigger from parent\r\n \r\n  useEffect(() => {\r\n    if (refreshTrigger > 0 && startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n  }, [refreshTrigger, startDate, endDate, brandId]); // Only depend on what affects the refresh  // Listen for refresh trigger from parent\r\n\r\n\r\n  if(isLoading){\r\n    return <Loader isLoading={isLoading} />\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <ReportTable \r\n      rows={transformedData} \r\n      initialPageSize=\"50\"\r\n      visibleColumns={visibleColumns}\r\n      columnOrder={columnOrder}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DaywiseMetricsPage;","import { CalendarIcon, AlertTriangle, Clock } from \"lucide-react\"\r\nimport { DatePickerWithRange } from \"./DatePickerWithRange\"\r\n\r\nexport default function MissingDateWarning() {\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 p-6 overflow-hidden relative  flex justify-center items-center\">\r\n\r\n            <div className=\"max-w-3xl mx-auto relative\">\r\n                {/* Warning header */}\r\n                <div className=\"mb-8 text-center\">\r\n                    <div className=\"inline-flex items-center justify-center gap-2 mb-4 bg-amber-100 px-4 py-2 rounded-full\">\r\n                        <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\r\n                        <span className=\"text-amber-700 font-semibold text-sm\">Action Required</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-3xl md:text-4xl font-bold text-slate-800 mb-3\">\r\n                        Date Range <span className=\"text-amber-500\">Missing</span>\r\n                    </h1>\r\n\r\n                    <p className=\"text-slate-600 max-w-xl mx-auto\">\r\n                        Please select a date range to continue. We need this information to display your data correctly.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Main warning card */}\r\n                <div className=\"bg-white rounded-xl shadow-md border-l-4 border-amber-400 overflow-hidden\">\r\n                    <div className=\"p-6\">\r\n                        <div className=\"space-y-6\">\r\n                            {/* Date picker */}\r\n                            <div className=\"bg-slate-50 rounded-lg p-4 border border-slate-200\">\r\n                                <div className=\"flex items-center justify-between mb-4\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <CalendarIcon className=\"h-5 w-5 text-slate-500\" />\r\n                                        <h3 className=\"font-medium text-slate-700\">Select Dates</h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-xs text-slate-500 flex items-center gap-1\">\r\n                                        <Clock className=\"h-3 w-3\" />\r\n                                        <span>Last 24 months available</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <DatePickerWithRange />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { AlertCircle, Mail, ArrowRight } from 'lucide-react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport axios from 'axios';\r\n\r\n\r\ninterface NoAccessPageProps {\r\n  platform: string;\r\n  message: string;\r\n  icon?: React.ReactNode;\r\n  loginOptions: {\r\n    label: string;\r\n    context?: string;\r\n    provider: 'google' | 'facebook';\r\n  }[];\r\n}\r\n\r\nfunction NoAccessPage({ \r\n  platform, \r\n  message, \r\n  icon = <Mail className=\"w-8 h-8 text-red-600\" />,\r\n  loginOptions \r\n}: NoAccessPageProps) {\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n  \r\n  const handleLogin = async (provider: string, context?: string) => {\r\n    try {\r\n      let response;\r\n      \r\n      if (provider === 'google') {\r\n        response = await axios.get(\r\n          `${baseURL}/api/auth/google${context ? `?context=${context}` : ''}&source=${encodeURIComponent(window.location.pathname)}`, \r\n          { withCredentials: true }\r\n        );\r\n        const { authUrl } = response.data;\r\n        window.location.href = authUrl;\r\n      } else if (provider === 'facebook') {\r\n        response = await axios.get(\r\n          `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \r\n          { withCredentials: true }\r\n        );\r\n        if (response.data.success) {\r\n          window.location.href = response.data.authURL;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error getting ${provider} Auth URL:`, error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8\">\r\n        {/* Header Section */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            {icon}\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n            Hey there!\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            {message}\r\n          </p>\r\n        </div>\r\n\r\n\r\n        {user?.email && (\r\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <AlertCircle className=\"w-5 h-5 text-amber-500 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Currently signed in as:</p>\r\n                <p className=\"font-medium text-gray-900\">{user.email}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            Just a quick update to your {platform} token is needed to continue.\r\n          </p>\r\n          \r\n          {loginOptions.map((option, index) => (\r\n            <button \r\n              key={index}\r\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 group\"\r\n              onClick={() => handleLogin(option.provider, option.context)}\r\n            >\r\n              {option.label}\r\n              <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NoAccessPage;","import * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\r\n\r\nconst Sheet = SheetPrimitive.Root\r\n\r\nconst SheetTrigger = SheetPrimitive.Trigger\r\n\r\nconst SheetClose = SheetPrimitive.Close\r\n\r\nconst SheetPortal = SheetPrimitive.Portal\r\n\r\nconst SheetOverlay = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\r\n\r\nconst sheetVariants = cva(\r\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\r\n  {\r\n    variants: {\r\n      side: {\r\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\r\n        bottom:\r\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\r\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\r\n        right:\r\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      side: \"right\",\r\n    },\r\n  }\r\n)\r\n\r\ninterface SheetContentProps\r\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\r\n    VariantProps<typeof sheetVariants> {}\r\n\r\nconst SheetContent = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Content>,\r\n  SheetContentProps\r\n>(({ side = \"right\", className, children, ...props }, ref) => (\r\n  <SheetPortal>\r\n    <SheetOverlay />\r\n    <SheetPrimitive.Content\r\n      ref={ref}\r\n      className={cn(sheetVariants({ side }), className)}\r\n      {...props}\r\n    >\r\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\r\n        <Cross2Icon className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </SheetPrimitive.Close>\r\n      {children}\r\n    </SheetPrimitive.Content>\r\n  </SheetPortal>\r\n))\r\nSheetContent.displayName = SheetPrimitive.Content.displayName\r\n\r\nconst SheetHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetHeader.displayName = \"SheetHeader\"\r\n\r\nconst SheetFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetFooter.displayName = \"SheetFooter\"\r\n\r\nconst SheetTitle = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetTitle.displayName = SheetPrimitive.Title.displayName\r\n\r\nconst SheetDescription = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetDescription.displayName = SheetPrimitive.Description.displayName\r\n\r\nexport {\r\n  Sheet,\r\n  SheetPortal,\r\n  SheetOverlay,\r\n  SheetTrigger,\r\n  SheetClose,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetFooter,\r\n  SheetTitle,\r\n  SheetDescription,\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Search, GripVertical, Pin, PinOff, Columns3 } from \"lucide-react\";\r\n\r\ninterface ColumnManagementSheetProps {\r\n  visibleColumns: string[];\r\n  columnOrder: string[];\r\n  availableColumns?: string[];\r\n  frozenColumns?: string[];\r\n  onVisibilityChange: (columns: string[]) => void;\r\n  onOrderChange: (order: string[]) => void;\r\n  onFrozenChange?: (columns: string[]) => void;\r\n  viewPresets?: {\r\n    label: string;\r\n    columns: string[];\r\n  }[];\r\n  showViewPresets?: boolean;\r\n  activeViewPreset?: string | null;\r\n}\r\n\r\nconst ColumnManagementSheet: React.FC<ColumnManagementSheetProps> = ({ \r\n  visibleColumns, \r\n  columnOrder,\r\n  availableColumns,\r\n  frozenColumns = [],\r\n  onVisibilityChange,\r\n  onOrderChange,\r\n  onFrozenChange,\r\n  viewPresets = [],\r\n  showViewPresets = false,\r\n  activeViewPreset = null\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\r\n  const [dropTargetColumn, setDropTargetColumn] = useState<string | null>(null);\r\n\r\n  // Always use columnOrder for the display order, but filter by availableColumns if provided\r\n  const columnsToShow = availableColumns \r\n    ? columnOrder.filter(col => availableColumns.includes(col))\r\n    : columnOrder;\r\n  \r\n  const filteredColumns = columnsToShow.filter(column =>\r\n    column.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleDragStart = (column: string) => {\r\n    setDraggedColumn(column);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, column: string) => {\r\n    e.preventDefault();\r\n    if (column !== draggedColumn) {\r\n      setDropTargetColumn(column);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (targetColumn: string) => {\r\n    if (!draggedColumn || draggedColumn === targetColumn) return;\r\n\r\n    console.log('Drop event:', { draggedColumn, targetColumn });\r\n    console.log('Current columnOrder:', columnOrder);\r\n\r\n    // Create a new order array based on the current visible columns\r\n    const newOrder = [...columnOrder];\r\n    \r\n    // Find the indices in the original columnOrder\r\n    const draggedIdx = newOrder.indexOf(draggedColumn);\r\n    const targetIdx = newOrder.indexOf(targetColumn);\r\n    \r\n    console.log('Indices:', { draggedIdx, targetIdx });\r\n    \r\n    if (draggedIdx === -1 || targetIdx === -1) {\r\n      console.log('Invalid indices found');\r\n      return;\r\n    }\r\n\r\n    // Remove the dragged column from its current position\r\n    newOrder.splice(draggedIdx, 1);\r\n    \r\n    // Insert it at the target position\r\n    newOrder.splice(targetIdx, 0, draggedColumn);\r\n\r\n    console.log('New order:', newOrder);\r\n    onOrderChange(newOrder);\r\n    setDraggedColumn(null);\r\n    setDropTargetColumn(null);\r\n  };\r\n\r\n  const toggleColumnVisibility = (column: string) => {\r\n    const newVisibleColumns = visibleColumns.includes(column)\r\n      ? visibleColumns.filter(col => col !== column)\r\n      : [...visibleColumns, column];\r\n    onVisibilityChange(newVisibleColumns);\r\n  };\r\n\r\n  const toggleColumnFreeze = (column: string) => {\r\n    if (!onFrozenChange || column === 'Campaign') return; // Campaign column is always frozen\r\n    \r\n    const newFrozenColumns = frozenColumns.includes(column)\r\n      ? frozenColumns.filter(col => col !== column)\r\n      : [...frozenColumns, column];\r\n    onFrozenChange(newFrozenColumns);\r\n  };\r\n\r\n  return (\r\n    <Sheet>\r\n      <SheetTrigger asChild>\r\n        <Button variant=\"outline\" size=\"icon\" className=\"ml-2\">\r\n          <Columns3 className=\"w-4 h-4\" />\r\n        </Button>\r\n      </SheetTrigger>\r\n      <SheetContent className=\"w-[400px] sm:w-[540px]\">\r\n        <SheetHeader>\r\n          <SheetTitle>Column Management</SheetTitle>\r\n          <SheetDescription>\r\n            Select columns to display, drag to reorder, and pin columns to freeze them\r\n          </SheetDescription>\r\n        </SheetHeader>\r\n        \r\n        {/* Add View Presets Section */}\r\n        {showViewPresets && viewPresets.length > 0 && (\r\n          <div className=\"space-y-4 my-4\">\r\n            <h3 className=\"text-sm font-medium\">Quick Views</h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {viewPresets.map((preset, index) => (\r\n                <Button\r\n                  key={index}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => onVisibilityChange(preset.columns)}\r\n                  className={`text-xs ${\r\n                    activeViewPreset === preset.label\r\n                      ? 'bg-blue-50 border-blue-600 text-blue-700'\r\n                      : 'border-gray-300 hover:border-gray-400'\r\n                  }`}\r\n                >\r\n                  {preset.label}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n          \r\n          <div className=\"mt-4 space-y-4\">\r\n            <div className=\"flex items-center space-x-2 px-1\">\r\n              <Search className=\"w-4 h-4 text-slate-400\" />\r\n              <Input\r\n                placeholder=\"Search columns...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"h-8\"\r\n              />\r\n            </div>\r\n          \r\n          <div className=\"max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n            {filteredColumns.map(column => (\r\n              <div\r\n                key={column}\r\n                draggable\r\n                onDragStart={() => handleDragStart(column)}\r\n                onDragOver={(e) => handleDragOver(e, column)}\r\n                onDrop={() => handleDrop(column)}\r\n                onDragEnd={() => {\r\n                  setDraggedColumn(null);\r\n                  setDropTargetColumn(null);\r\n                }}\r\n                className={`flex items-center space-x-3 p-3 border-b border-slate-200 hover:bg-slate-50 cursor-move transition-colors\r\n                  ${draggedColumn === column ? 'opacity-50' : ''}\r\n                  ${dropTargetColumn === column ? 'bg-blue-50 border-blue-200' : ''}`}\r\n              >\r\n                <GripVertical className=\"w-4 h-4 text-slate-400\" />\r\n                <Checkbox\r\n                  id={`col-${column}`}\r\n                  checked={visibleColumns.includes(column)}\r\n                  onCheckedChange={() => toggleColumnVisibility(column)}\r\n                />\r\n                <label\r\n                  htmlFor={`col-${column}`}\r\n                  className=\"flex-1 text-sm font-medium leading-none cursor-pointer\"\r\n                >\r\n                  {column}\r\n                </label>\r\n                {onFrozenChange && (\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className={`px-2 ${column === 'Campaign' ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                    onClick={() => toggleColumnFreeze(column)}\r\n                    disabled={column === 'Campaign'}\r\n                  >\r\n                    {frozenColumns.includes(column) || column === 'Campaign' ? (\r\n                      <Pin className=\"w-4 h-4 text-blue-500\" />\r\n                    ) : (\r\n                      <PinOff className=\"w-4 h-4\" />\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </SheetContent>\r\n    </Sheet>\r\n  );\r\n};\r\n\r\nexport default ColumnManagementSheet;\r\n","import { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { format } from \"date-fns\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport ReportTable from \"./ReportTable\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\n\r\n\r\ninterface EcommerceMetric {\r\n  \"Month\": string\r\n  \"Add To Cart\": string\r\n  \"Checkouts\": string\r\n  \"Sessions\": string\r\n  \"Purchases\": string\r\n  \"Purchase Rate\": string\r\n  \"Add To Cart Rate\": string\r\n  \"Checkout Rate\": string\r\n}\r\n\r\ninterface EcommerceMetricsProps {\r\n  dateRange: DateRange | undefined\r\n  visibleColumns: string[];\r\n  columnOrder: string[];\r\n  refreshTrigger: number;\r\n}\r\n\r\nconst MonthlyMetricsPage: React.FC<EcommerceMetricsProps> = ({ \r\n  dateRange: propDateRange, \r\n  visibleColumns,\r\n  columnOrder,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const compareFrom = useSelector((state: RootState) => state.date.compareFrom);\r\n  const compareTo = useSelector((state: RootState) => state.date.compareTo);\r\n  \r\n\r\n  const [data, setData] = useState<EcommerceMetric[]>([]);\r\n  const [aovData, setAovData] = useState<any[]>([]);\r\n  const [paymentOrdersData, setPaymentOrdersData] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [apiErrors, setApiErrors] = useState<{\r\n    ecommerce: boolean;\r\n    aov: boolean;\r\n    paymentOrders: boolean;\r\n  }>({\r\n    ecommerce: false,\r\n    aov: false,\r\n    paymentOrders: false\r\n  });\r\n  const { brandId } = useParams();\r\n\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const compareDate = useMemo(() => ({\r\n    from: compareFrom,\r\n    to: compareTo\r\n  }), [compareFrom, compareTo]);\r\n\r\n  const startDate = date?.from ? format(new Date(date.from), \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(new Date(date.to), \"yyyy-MM-dd\") : \"\";\r\n  const compareStartDate = compareDate?.from ? format(new Date(compareDate.from), \"yyyy-MM-dd\") : \"\";\r\n  const compareEndDate = compareDate?.to ? format(new Date(compareDate.to), \"yyyy-MM-dd\") : \"\";\r\n  \r\n  const dispatch = useDispatch();\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  // Transform data to match ReportTable's expected format and merge AOV and payment orders data\r\n  const transformedData = useMemo(() => {\r\n    // If ecommerce API failed, return empty array or show error state\r\n    if (apiErrors.ecommerce && data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Create maps of AOV data by month for quick lookup\r\n    const aovMap = new Map<string, number>();\r\n    const avgItemsMap = new Map<string, number>();\r\n    console.log('AOV Data for mapping:', aovData);\r\n    aovData.forEach((aovItem) => {\r\n      // Match by monthName (e.g., \"Nov-2025\") or month (e.g., \"2025-11\")\r\n      let monthKey = '';\r\n      if (aovItem.monthName) {\r\n        monthKey = aovItem.monthName;\r\n        aovMap.set(monthKey, aovItem.aov || 0);\r\n        avgItemsMap.set(monthKey, aovItem.averageItemsPerOrder || 0);\r\n        console.log(`Mapped AOV: ${aovItem.monthName} = ${aovItem.aov}, Avg Items = ${aovItem.averageItemsPerOrder}`);\r\n      }\r\n      if (aovItem.month) {\r\n        // Convert \"2025-11\" to \"Nov-2025\" format for matching\r\n        const date = new Date(aovItem.month + '-01');\r\n        const monthName = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }).replace(' ', '-');\r\n        monthKey = monthName;\r\n        aovMap.set(monthKey, aovItem.aov || 0);\r\n        avgItemsMap.set(monthKey, aovItem.averageItemsPerOrder || 0);\r\n        console.log(`Mapped AOV from month: ${aovItem.month} -> ${monthName} = ${aovItem.aov}, Avg Items = ${aovItem.averageItemsPerOrder}`);\r\n      }\r\n    });\r\n\r\n    // Create maps of payment orders data by month for quick lookup\r\n    const codOrderMap = new Map<string, number>();\r\n    const prepaidOrderMap = new Map<string, number>();\r\n    console.log('Payment Orders Data for mapping:', paymentOrdersData);\r\n    paymentOrdersData.forEach((paymentItem) => {\r\n      // Match by monthName (e.g., \"Nov-2025\") or month (e.g., \"2025-11\")\r\n      let monthKey = '';\r\n      if (paymentItem.monthName) {\r\n        monthKey = paymentItem.monthName;\r\n        codOrderMap.set(monthKey, paymentItem.codOrderCount || 0);\r\n        prepaidOrderMap.set(monthKey, paymentItem.prepaidOrderCount || 0);\r\n        console.log(`Mapped Payment Orders: ${paymentItem.monthName} = COD: ${paymentItem.codOrderCount}, Prepaid: ${paymentItem.prepaidOrderCount}`);\r\n      }\r\n      if (paymentItem.month) {\r\n        // Convert \"2025-11\" to \"Nov-2025\" format for matching\r\n        const date = new Date(paymentItem.month + '-01');\r\n        const monthName = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }).replace(' ', '-');\r\n        monthKey = monthName;\r\n        codOrderMap.set(monthKey, paymentItem.codOrderCount || 0);\r\n        prepaidOrderMap.set(monthKey, paymentItem.prepaidOrderCount || 0);\r\n        console.log(`Mapped Payment Orders from month: ${paymentItem.month} -> ${monthName} = COD: ${paymentItem.codOrderCount}, Prepaid: ${paymentItem.prepaidOrderCount}`);\r\n      }\r\n    });\r\n\r\n    console.log('Ecommerce Data months:', data.map(item => item.Month));\r\n    console.log('AOV Map keys:', Array.from(aovMap.keys()));\r\n    console.log('Payment Orders Map keys:', Array.from(codOrderMap.keys()));\r\n\r\n    return data.map((item, index) => {\r\n      // Try to match AOV and Avg Items by month name\r\n      const monthName = item.Month;\r\n      // Show undefined if API failed (will display as \"-\" in table), otherwise use mapped value or 0\r\n      const aov = apiErrors.aov ? undefined : (aovMap.get(monthName) ?? 0);\r\n      const averageItemsPerOrder = apiErrors.aov ? undefined : (avgItemsMap.get(monthName) ?? 0);\r\n      const codOrderCount = apiErrors.paymentOrders ? undefined : (codOrderMap.get(monthName) ?? 0);\r\n      const prepaidOrderCount = apiErrors.paymentOrders ? undefined : (prepaidOrderMap.get(monthName) ?? 0);\r\n      \r\n      if (typeof aov === 'number' && aov > 0) {\r\n        console.log(`Matched AOV for ${monthName}: ${aov}, Avg Items: ${averageItemsPerOrder}`);\r\n      }\r\n      if ((typeof codOrderCount === 'number' && codOrderCount > 0) || (typeof prepaidOrderCount === 'number' && prepaidOrderCount > 0)) {\r\n        console.log(`Matched Payment Orders for ${monthName}: COD: ${codOrderCount}, Prepaid: ${prepaidOrderCount}`);\r\n      }\r\n\r\n      return {\r\n        id: `row-${index}`,\r\n        month: item.Month,\r\n        sessions: parseInt(item.Sessions) || 0,\r\n        addToCart: parseInt(item['Add To Cart']) || 0,\r\n        addToCartRate: item['Add To Cart Rate'] || '0%',\r\n        checkouts: parseInt(item['Checkouts']) || 0,\r\n        checkoutRate: item['Checkout Rate'] || '0%',\r\n        purchases: parseInt(item['Purchases']) || 0,\r\n        purchaseRate: item['Purchase Rate'] || '0%',\r\n        aov: aov,\r\n        averageItemsPerOrder: averageItemsPerOrder,\r\n        codOrderCount: codOrderCount,\r\n        prepaidOrderCount: prepaidOrderCount\r\n      };\r\n    });\r\n  }, [data, aovData, paymentOrdersData, apiErrors]);\r\n\r\n\r\n\r\n  // Consolidate date range effects\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\r\n      }));\r\n    }\r\n  }, [propDateRange, dispatch]);\r\n\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const dateRanges = [];\r\n\r\n      // Always add primary date range\r\n      if (startDate && endDate) {\r\n        dateRanges.push({ \r\n          startDate: startDate, \r\n          endDate: endDate \r\n        });\r\n      }\r\n\r\n      // Add comparison date range if available and compare is enabled\r\n      if (compareStartDate && compareEndDate) {\r\n        dateRanges.push({\r\n          startDate: compareStartDate,\r\n          endDate: compareEndDate\r\n        });\r\n      }\r\n\r\n      // Fetch both ecommerce metrics and AOV data in parallel\r\n      const promises = [];\r\n\r\n      // Fetch ecommerce metrics if we have at least one date range\r\n      if (dateRanges.length > 0) {\r\n        promises.push(\r\n          axiosInstance.post(\r\n            `/api/analytics/monthAtcReport/${brandId}`,\r\n            {\r\n              dateRanges: dateRanges,\r\n            },\r\n            { withCredentials: true }\r\n          )\r\n        );\r\n      }\r\n\r\n      // Fetch AOV data for primary date range\r\n      if (startDate && endDate) {\r\n        promises.push(\r\n          axiosInstance.post(\r\n            `/api/shopify/aov/${brandId}`,\r\n            {\r\n              startDate: startDate,\r\n              endDate: endDate\r\n            },\r\n            { withCredentials: true }\r\n          )\r\n        );\r\n      }\r\n\r\n      // Fetch payment orders data (COD and Prepaid) for primary date range\r\n      if (startDate && endDate) {\r\n        promises.push(\r\n          axiosInstance.post(\r\n            `/api/shopify/payment-orders/${brandId}`,\r\n            {\r\n              startDate: startDate,\r\n              endDate: endDate\r\n            },\r\n            { withCredentials: true }\r\n          )\r\n        );\r\n      }\r\n\r\n      // Use Promise.allSettled to handle each API independently\r\n      const results = await Promise.allSettled(promises);\r\n\r\n      // Reset error states\r\n      setApiErrors({\r\n        ecommerce: false,\r\n        aov: false,\r\n        paymentOrders: false\r\n      });\r\n\r\n      // Process ecommerce metrics response (index 0)\r\n      if (results[0]) {\r\n        if (results[0].status === 'fulfilled') {\r\n          const DailyAnalyticsResponse = results[0].value;\r\n          const fetchedRanges = DailyAnalyticsResponse.data.ranges || [];\r\n      \r\n          // More flexible data handling\r\n          if (fetchedRanges.length > 0) {\r\n            // Check if the first range contains daily data or consolidated data\r\n            const isConsolidatedData = fetchedRanges[0].Date \r\n            \r\n            if (isConsolidatedData) {\r\n              // Consolidated data scenario\r\n              setData(fetchedRanges);\r\n            } else {\r\n              // Daily data scenario\r\n              setData(fetchedRanges[0]?.data || []);\r\n            }\r\n          } else {\r\n            setData([]);\r\n          }\r\n        } else {\r\n          // Ecommerce API failed\r\n          console.error('Ecommerce metrics API failed:', results[0].reason);\r\n          setApiErrors(prev => ({ ...prev, ecommerce: true }));\r\n          setData([]);\r\n        }\r\n      }\r\n\r\n      // Process AOV response (index 1)\r\n      if (results[1]) {\r\n        if (results[1].status === 'fulfilled') {\r\n          const aovResponse = results[1].value;\r\n          console.log('AOV API Response:', aovResponse.data);\r\n          if (aovResponse.data.success && aovResponse.data.data) {\r\n            console.log('AOV Data:', aovResponse.data.data);\r\n            setAovData(aovResponse.data.data);\r\n          } else {\r\n            console.warn('AOV data not in expected format:', aovResponse.data);\r\n            setAovData([]);\r\n          }\r\n        } else {\r\n          // AOV API failed\r\n          console.error('AOV API failed:', results[1].reason);\r\n          setApiErrors(prev => ({ ...prev, aov: true }));\r\n          setAovData([]);\r\n        }\r\n      }\r\n\r\n      // Process payment orders response (index 2)\r\n      if (results[2]) {\r\n        if (results[2].status === 'fulfilled') {\r\n          const paymentOrdersResponse = results[2].value;\r\n          console.log('Payment Orders API Response:', paymentOrdersResponse.data);\r\n          if (paymentOrdersResponse.data.success && paymentOrdersResponse.data.data) {\r\n            console.log('Payment Orders Data:', paymentOrdersResponse.data.data);\r\n            setPaymentOrdersData(paymentOrdersResponse.data.data);\r\n          } else {\r\n            console.warn('Payment orders data not in expected format:', paymentOrdersResponse.data);\r\n            setPaymentOrdersData([]);\r\n          }\r\n        } else {\r\n          // Payment Orders API failed\r\n          console.error('Payment Orders API failed:', results[2].reason);\r\n          setApiErrors(prev => ({ ...prev, paymentOrders: true }));\r\n          setPaymentOrdersData([]);\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error in fetchMetrics:', error);\r\n      // Set all APIs as failed if there's a general error\r\n      setApiErrors({\r\n        ecommerce: true,\r\n        aov: true,\r\n        paymentOrders: true\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [startDate, endDate, compareStartDate, compareEndDate, brandId]);\r\n\r\n  // Fetch data when dates or brandId change\r\n  useEffect(() => {\r\n    if (startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n\r\n  }, [startDate, endDate, brandId]); \r\n\r\n  // Set up polling interval\r\n  useEffect(() => {\r\n    if (!startDate || !endDate) return;\r\n    \r\n    const intervalId = setInterval(() => {\r\n      fetchMetrics();\r\n    }, 15 * 60 * 1000);\r\n    \r\n    return () => clearInterval(intervalId);\r\n\r\n  }, [startDate, endDate, brandId]); \r\n\r\n  // Listen for refresh trigger from parent\r\n  useEffect(() => {\r\n    if (refreshTrigger > 0 && startDate && endDate) {\r\n      fetchMetrics();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [refreshTrigger, startDate, endDate, brandId]); // fetchMetrics is memoized with useCallback, so we don't need it here\r\n\r\n  if(isLoading){\r\n    return <Loader isLoading={isLoading} />\r\n  }\r\n\r\n  return (\r\n    <ReportTable \r\n      rows={transformedData} \r\n      initialPageSize=\"50\"\r\n      visibleColumns={visibleColumns}\r\n      columnOrder={columnOrder}\r\n    />\r\n  );\r\n};\r\n\r\nexport default MonthlyMetricsPage;","import React, { useEffect, useMemo, useState, useCallback } from 'react';\r\nimport EcommerceMetricsPage from '@/pages/ReportPage/component/EcommerceMetricsPage';\r\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\r\nimport { TableSkeleton } from '@/components/dashboard_component/TableSkeleton';\r\nimport { useParams } from 'react-router-dom';\r\nimport { ChartBar, Maximize, Minimize, RefreshCw } from 'lucide-react';\r\nimport { selectGoogleAnalyticsTokenError } from '@/store/slices/TokenSllice';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport ConnectPlatform from './ConnectPlatformPage';\r\nimport DaywiseMetricsPage from './component/DaywiseMetricsPage';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\r\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\r\nimport { resetAllTokenErrors } from '@/store/slices/TokenSllice';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { DatePickerWithRange } from '@/components/dashboard_component/DatePickerWithRange';\r\nimport ColumnManagementSheet from '@/pages/AnalyticsDashboard/Components/ColumnManagementSheet';\r\nimport MonthlyMetricsPage from './component/MonthlyMetricsPage';\r\n\r\nconst ReportsPage: React.FC = () => {\r\n  const isLoading = false;\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  \r\n  const googleAnalyticsTokenError = useSelector(selectGoogleAnalyticsTokenError);\r\n  \r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const dateRange = useMemo(() => ({\r\n    from: date.from ? new Date(date.from) : undefined,\r\n    to: date.to ? new Date(date.to) : undefined\r\n  }), [date.from, date.to]);\r\n\r\n  const [activeTab, setActiveTab] = useState('month wise');\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  \r\n  // Memoize the dateRange to prevent unnecessary re-renders\r\n  const memoizedDateRange = useMemo(() => dateRange, [dateRange.from, dateRange.to]);\r\n  \r\n\r\n  const baseColumns = [\r\n    'Sessions', 'Add To Cart', 'Add To Cart Rate', \r\n    'Checkouts', 'Checkout Rate', 'Purchases', 'Purchase Rate'\r\n  ];\r\n\r\n  // Get columns based on active tab - AOV, Avg Items/Order, COD Orders, and Prepaid Orders are only available for monthly metrics\r\n  const getColumnsForTab = useCallback((tab: string) => {\r\n    if (tab === 'month wise') {\r\n      return [...baseColumns, 'AOV', 'Avg Items/Order', 'COD Orders', 'Prepaid Orders'];\r\n    }\r\n    return baseColumns;\r\n  }, []);\r\n\r\n  const availableColumns = useMemo(() => {\r\n    const columns = getColumnsForTab(activeTab);\r\n    return ['Date', 'Month','Day', ...columns];\r\n  }, [activeTab, getColumnsForTab]);\r\n\r\n  // Single column state\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>([\r\n    'Date', ...baseColumns\r\n  ]);\r\n  const [columnOrder, setColumnOrder] = useState<string[]>([\r\n    'Date', ...baseColumns\r\n  ]);\r\n\r\n\r\n  const [activeViewPreset, setActiveViewPreset] = useState<string | null>(null);\r\n\r\n  // Define view presets for Reports page - make them dynamic based on active tab\r\n  const getViewPresets = (activeTab: string) => {\r\n    const timeColumn = activeTab === 'month wise' ? 'Month' : activeTab === 'day wise' ? 'Day' : 'Date';\r\n    \r\n    return [\r\n      {\r\n        label: \"Counts View\",\r\n        columns: [timeColumn, 'Sessions', 'Add To Cart', 'Checkouts', 'Purchases']\r\n      },\r\n      {\r\n        label: \"Rates View\", \r\n        columns: [timeColumn, 'Sessions', 'Add To Cart Rate', 'Checkout Rate', 'Purchase Rate']\r\n      }\r\n    ];\r\n  };\r\n\r\n  // Update the useEffect to handle view presets and AOV column visibility\r\n  useEffect(() => {\r\n    const timeColumn = activeTab === 'month wise' ? 'Month' : activeTab === 'day wise' ? 'Day' : 'Date';\r\n    const columnsForTab = getColumnsForTab(activeTab);\r\n    \r\n    // Build new columns with time column and appropriate columns for the tab\r\n    const newColumns = [timeColumn, ...columnsForTab];\r\n    const newOrder = [timeColumn, ...columnsForTab];\r\n    \r\n    // Only update if columns have changed\r\n    const currentColumnsString = JSON.stringify(visibleColumns);\r\n    const newColumnsString = JSON.stringify(newColumns);\r\n    \r\n    if (currentColumnsString !== newColumnsString) {\r\n      setVisibleColumns(newColumns);\r\n      setColumnOrder(newOrder);\r\n    }\r\n  }, [activeTab, getColumnsForTab]);\r\n  \r\n  // Refresh trigger state\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n\r\n  const tabs = [\r\n    { label: 'Monthly Metrics', value: 'month wise' },\r\n    { label: 'Daily Metrics', value: 'daily' },\r\n    { label: 'Day wise Metrics', value: 'day wise' },\r\n   \r\n  ];\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n  };\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const handleManualRefresh = () => {\r\n    setRefreshTrigger(prev => prev + 1);\r\n  };\r\n\r\n  // Update the handleVisibilityChange to track which preset is active\r\n  const handleVisibilityChange = (columns: string[]) => {\r\n    setVisibleColumns(columns);\r\n    \r\n    // Check if the new columns match any preset\r\n    const viewPresets = getViewPresets(activeTab);\r\n    const matchingPreset = viewPresets.find(preset => \r\n      JSON.stringify(preset.columns) === JSON.stringify(columns)\r\n    );\r\n    \r\n    setActiveViewPreset(matchingPreset ? matchingPreset.label : null);\r\n  };\r\n  \r\n  const handleOrderChange = (newOrder: string[]) => {\r\n    setColumnOrder(newOrder);\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (hasGA4Account) {\r\n      googleAnalyticsTokenError && dispatch(resetAllTokenErrors());\r\n    }\r\n  }, [hasGA4Account]);\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        {googleAnalyticsTokenError ? (\r\n          <NoAccessPage\r\n            platform=\"Google Analytics\"\r\n            message=\"We need access to your Google Analytics account to show you amazing insights about your website performance.\"\r\n            icon={<ChartBar className=\"w-8 h-8 text-blue-600\" />}\r\n            loginOptions={[\r\n              {\r\n                label: \"Connect Google Analytics\",\r\n                context: \"googleAnalyticsSetup\",\r\n                provider: \"google\"\r\n              }\r\n            ]}\r\n          />\r\n        ) : !hasGA4Account ? (\r\n          <>\r\n            <ConnectPlatform\r\n              platform=\"google analytics\"\r\n              brandId={brandId ?? ''}\r\n              onSuccess={(platform, accountName, accountId) => {\r\n                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n              }} \r\n            /> \r\n          </>\r\n        ) : (!dateRange.from || !dateRange.to) ? (\r\n          <MissingDateWarning />\r\n        ) : (\r\n          <div className=\"p-3\">\r\n            <Card className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n              <CardContent>\r\n                <div className=\"space-y-4\">\r\n                  {/* Header Section - Fixed within card */}\r\n                  <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                    <div className=\"flex items-start gap-6\">\r\n                                            {/* Custom Vertical Tabs */}\r\n                      <div className=\"flex flex-row bg-gray-100 p-1.5 rounded-2xl\">\r\n                        {tabs.map((tab) => (\r\n                          <button\r\n                            key={tab.value}\r\n                            onClick={() => handleTabChange(tab.value)}\r\n                            className={`px-6 py-1 rounded-2xl text-sm font-medium transition-all duration-200 last:mb-0 ${\r\n                              activeTab === tab.value\r\n                                ? 'bg-white text-blue-600 shadow-sm'\r\n                                : 'text-gray-600 hover:text-gray-800 hover:bg-gray-50'\r\n                            }`}\r\n                          >\r\n                            {tab.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                      <DatePickerWithRange />\r\n                      <Button onClick={handleManualRefresh} disabled={isLoading} size=\"icon\" variant=\"outline\">\r\n                        <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n                      </Button>\r\n                      <ColumnManagementSheet\r\n                        visibleColumns={visibleColumns}\r\n                        columnOrder={columnOrder}\r\n                        availableColumns={availableColumns}\r\n                        onVisibilityChange={handleVisibilityChange}\r\n                        onOrderChange={handleOrderChange}\r\n                        viewPresets={getViewPresets(activeTab)}\r\n                        showViewPresets={true}\r\n                        activeViewPreset={activeViewPreset}\r\n                      />\r\n                      <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                        {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Content Section with Internal Scrolling */}\r\n                  {isLoading ? (\r\n                    <TableSkeleton />\r\n                  ) : (\r\n                    <section className=\"w-full\">\r\n                      {activeTab === 'daily' && (\r\n                        <EcommerceMetricsPage \r\n                          key=\"daily-metrics\"\r\n                          dateRange={memoizedDateRange} \r\n                          visibleColumns={visibleColumns}\r\n                          columnOrder={columnOrder}\r\n                          refreshTrigger={refreshTrigger}\r\n                        />\r\n                      )}\r\n                      {activeTab === 'day wise' && (\r\n                        <DaywiseMetricsPage \r\n                          key=\"daywise-metrics\"\r\n                          dateRange={memoizedDateRange} \r\n                          visibleColumns={visibleColumns}\r\n                          columnOrder={columnOrder}\r\n                          refreshTrigger={refreshTrigger}\r\n                        />\r\n                      )}\r\n                      {activeTab === 'month wise' && (\r\n                        <MonthlyMetricsPage \r\n                          key=\"monthly-metrics\"\r\n                          dateRange={memoizedDateRange} \r\n                          visibleColumns={visibleColumns}\r\n                          columnOrder={columnOrder}\r\n                          refreshTrigger={refreshTrigger}\r\n                        />\r\n                      )}\r\n                    </section>\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n      <HelpDeskModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsPage;","import React, { createContext, useContext, useState } from \"react\";\r\n\r\ninterface TokenErrorContextType {\r\n  tokenError: boolean;\r\n  setTokenError: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst TokenErrorContext = createContext<TokenErrorContextType>({\r\n  tokenError: false,\r\n  setTokenError: () => {}\r\n});\r\n\r\nexport const TokenErrorProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [tokenError, setTokenError] = useState(false);\r\n\r\n  return (\r\n    <TokenErrorContext.Provider value={{ tokenError, setTokenError }}>\r\n      {children}\r\n    </TokenErrorContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTokenError = () => useContext(TokenErrorContext);\r\n","import React from \"react\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from \"lucide-react\"\r\nimport { useMemo, useState, useEffect, useRef } from \"react\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\n\r\nexport interface MonthlyData {\r\n  Month: string\r\n  [key: string]: number | string\r\n}\r\n\r\nexport interface RowData {\r\n  [key: string]: number | string | MonthlyData[]\r\n}\r\n\r\ninterface SimpleConversionTableProps {\r\n  data: RowData[]\r\n  primaryColumn: string\r\n  secondaryColumns?: string[]\r\n  monthlyDataKey: string\r\n  isFullScreen: boolean\r\n  locale: string\r\n  filter?: string[]\r\n}\r\n\r\n// Column definition interface for resizing\r\ninterface ColumnDef {\r\n  key: string\r\n  header: string\r\n  width: number\r\n  minWidth?: number\r\n  maxWidth?: number\r\n  align?: \"left\" | \"right\" | \"center\"\r\n}\r\n\r\n// Drag state interface\r\ntype DragState = {\r\n  index: number\r\n  startX: number\r\n  startWidth: number\r\n}\r\n\r\n// Utility function to clamp values\r\nfunction clamp(n: number, min: number, max?: number) {\r\n  if (max != null) return Math.min(Math.max(n, min), max)\r\n  return Math.max(n, min)\r\n}\r\n\r\nexport default function NewConversionTable({\r\n  data,\r\n  primaryColumn,\r\n  secondaryColumns,\r\n  monthlyDataKey,\r\n  isFullScreen,\r\n  locale,\r\n  filter,\r\n}: SimpleConversionTableProps) {\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [rowsPerPage, setRowsPerPage] = useState(50)\r\n\r\n  // Column resizing state\r\n  const [widths, setWidths] = useState<number[]>([])\r\n  const dragRef = useRef<DragState | null>(null)\r\n  const [resizingIndex, setResizingIndex] = useState<number | null>(null)\r\n\r\n  // Get months helper function - moved before it's used\r\n  const getMonths = () => {\r\n    if (!Array.isArray(data)) {\r\n      return []\r\n    }\r\n\r\n    const getMonthName = (monthNumber: string): string => {\r\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n      return months[Number.parseInt(monthNumber) - 1]\r\n    }\r\n\r\n    const allMonths = new Set<string>()\r\n    data.forEach((row) => {\r\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          if (month?.Month) {\r\n            const year = month.Month.slice(0, 4)\r\n            const monthNum = month.Month.slice(4)\r\n            allMonths.add(`${getMonthName(monthNum)}-${year}`)\r\n          }\r\n        })\r\n      }\r\n    })\r\n    \r\n    // Sort months in reverse chronological order (newest first)\r\n    return Array.from(allMonths).sort((a, b) => {\r\n      const [monthA, yearA] = a.split('-')\r\n      const [monthB, yearB] = b.split('-')\r\n      \r\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n      const monthIndexA = months.indexOf(monthA)\r\n      const monthIndexB = months.indexOf(monthB)\r\n      \r\n      // First compare years\r\n      if (yearA !== yearB) {\r\n        return parseInt(yearB) - parseInt(yearA) // Reverse order (newest year first)\r\n      }\r\n      \r\n      return monthIndexB - monthIndexA // Reverse order (newest month first)\r\n    })\r\n  }\r\n\r\n  // Define columns with their widths and constraints\r\n  const columns = useMemo((): ColumnDef[] => {\r\n    const cols: ColumnDef[] = [\r\n      { key: primaryColumn, header: primaryColumn, width: 130, minWidth: 100, maxWidth: 300, align: \"left\" }\r\n    ]\r\n\r\n    if (secondaryColumns) {\r\n      secondaryColumns.forEach((col) => {\r\n        cols.push({\r\n          key: col,\r\n          header: col,\r\n          width: 130,\r\n          minWidth: 100,\r\n          maxWidth: 200,\r\n          align: \"right\"\r\n        })\r\n      })\r\n    }\r\n\r\n    // Add monthly columns\r\n    const months = getMonths()\r\n    months.forEach((month) => {\r\n      cols.push({\r\n        key: month,\r\n        header: month,\r\n        width: 120,\r\n        minWidth: 100,\r\n        maxWidth: 150,\r\n        align: \"right\"\r\n      })\r\n    })\r\n\r\n    return cols\r\n  }, [primaryColumn, secondaryColumns, monthlyDataKey, data])\r\n\r\n  // Update widths when columns change\r\n  useEffect(() => {\r\n    setWidths(columns.map((c) => c.width))\r\n  }, [columns])\r\n\r\n  // Ensure widths array matches columns array length\r\n  const safeWidths = useMemo(() => {\r\n    return columns.map((col, index) => widths[index] || col.width)\r\n  }, [columns, widths])\r\n\r\n  // Column resize event handlers\r\n  useEffect(() => {\r\n    const onMove = (e: PointerEvent) => {\r\n      const drag = dragRef.current\r\n      if (!drag) return\r\n      const delta = e.clientX - drag.startX\r\n      const def = columns[drag.index]\r\n      setWidths((prev) => {\r\n        const next = [...prev]\r\n        next[drag.index] = clamp(\r\n          drag.startWidth + delta,\r\n          def.minWidth ?? 80,\r\n          def.maxWidth\r\n        )\r\n        return next\r\n      })\r\n    }\r\n\r\n    const onUp = () => {\r\n      dragRef.current = null\r\n      setResizingIndex(null)\r\n      document.body.style.cursor = \"\"\r\n      document.body.classList.remove(\"select-none\")\r\n    }\r\n\r\n    window.addEventListener(\"pointermove\", onMove)\r\n    window.addEventListener(\"pointerup\", onUp)\r\n    return () => {\r\n      window.removeEventListener(\"pointermove\", onMove)\r\n      window.removeEventListener(\"pointerup\", onUp)\r\n    }\r\n  }, [columns])\r\n\r\n  const startDrag = (e: React.PointerEvent, index: number) => {\r\n    dragRef.current = { index, startX: e.clientX, startWidth: widths[index] }\r\n    setResizingIndex(index)\r\n    document.body.style.cursor = \"col-resize\"\r\n    document.body.classList.add(\"select-none\")\r\n    ;(e.currentTarget as HTMLElement).setPointerCapture(e.pointerId)\r\n  }\r\n\r\n  const filteredData = useMemo(() => {\r\n    // If no filter is applied (undefined), show all data\r\n    if (filter === undefined) {\r\n      return data\r\n    }\r\n    \r\n    // If filter is applied but empty array, show no results\r\n    if (filter.length === 0) {\r\n      return []\r\n    }\r\n    \r\n    // If filter has items, apply the filter\r\n    return data.filter((row) => {\r\n      const primaryValue = String(row[primaryColumn])\r\n      return filter.includes(primaryValue)\r\n    })\r\n  }, [data, filter, primaryColumn])\r\n\r\n  const months = useMemo(() => {\r\n    return getMonths()\r\n  }, [data, monthlyDataKey])\r\n\r\n  const thresholds = useMemo(() => {\r\n    let totalSessions = 0,\r\n      totalConvRate = 0,\r\n      totalMonths = 0,\r\n      totalCostG = 0,\r\n      totalConvValueCostG = 0\r\n\r\n    data.forEach((row) => {\r\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\r\n\r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          if (typeof month[\"Sessions\"] === \"number\" && typeof month[\"Conv. Rate\"] === \"number\") {\r\n            totalSessions += Number(month[\"Sessions\"])\r\n            totalConvRate += Number(month[\"Conv. Rate\"])\r\n            totalMonths++\r\n          }\r\n\r\n          if (typeof month[\"Cost\"] === \"number\" && typeof month[\"Conv. Value/ Cost\"] === \"number\") {\r\n            totalCostG += Number(month[\"Cost\"])\r\n            totalConvValueCostG += Number(month[\"Conv. Value/ Cost\"])\r\n            totalMonths++\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    return {\r\n      avgSessions: totalMonths > 0 ? totalSessions / totalMonths : 0,\r\n      avgConvRate: totalMonths > 0 ? totalConvRate / totalMonths : 0,\r\n      totalCostG: totalMonths > 0 ? totalCostG / totalMonths : 0,\r\n      totalConvValueCostG: totalMonths > 0 ? totalConvValueCostG / totalMonths : 0,\r\n    }\r\n  }, [data, monthlyDataKey])\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n  }, [filter])\r\n\r\n  // Reset to page 1 when rows per page changes\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n  }, [rowsPerPage])\r\n\r\n  const handleRowsPerPageChange = (value: string) => {\r\n    const newRowsPerPage = value === \"all\" ? filteredData.length : parseInt(value)\r\n    setRowsPerPage(newRowsPerPage)\r\n  }\r\n\r\n  const renderCell = (value: number | string, type?: \"spend\" | \"percentage\" | \"default\" | \"sessions\") => {\r\n    if (typeof value === \"number\") {\r\n      switch (type) {\r\n        case \"spend\":\r\n          return Math.round(value).toLocaleString(locale)\r\n        case \"percentage\":\r\n          return `${Number.parseFloat(value.toLocaleString(locale)).toFixed(2)}%`\r\n        case \"sessions\":\r\n          return Math.round(value).toLocaleString(locale)\r\n        default:\r\n          return Number.parseFloat(value.toLocaleString(locale)).toFixed(2)\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  const renderMonthCell = (monthData: MonthlyData | undefined) => {\r\n          if (!monthData) {\r\n        return (\r\n          <td className=\"text-right whitespace-nowrap p-3 text-sm border-r border-b border-gray-200 bg-transparent\">\r\n            <div className=\"truncate\"></div>\r\n            <div className=\"truncate\"></div>\r\n          </td>\r\n        )\r\n      }\r\n\r\n    const sessions = monthData[\"Sessions\"]\r\n    const convRate = monthData[\"Conv. Rate\"]\r\n    const purchases = monthData[\"Purchases\"]\r\n    const cost = monthData[\"Cost\"]\r\n    const clicks = monthData[\"Clicks\"]\r\n    const ConvValueCost = monthData[\"Conv. Value/ Cost\"]\r\n\r\n        return (\r\n      <td className=\"text-right whitespace-nowrap p-3 text-sm border-r border-b border-gray-200 bg-transparent\">\r\n        <div className=\"space-y-1\">\r\n          <div className=\"font-medium truncate\">{renderCell(sessions, \"sessions\")}</div>\r\n          {cost !== undefined && <div className=\"text-xs truncate\">{Math.round(+(cost))}</div>}\r\n          {clicks !== undefined && <div className=\"text-xs truncate\">Clicks: {clicks}</div>}\r\n          {ConvValueCost !== undefined && <div className=\"text-xs truncate\">Conv. Value/ Cost: {ConvValueCost.toLocaleString(locale)}</div>}\r\n          <div className=\"text-xs truncate\">{renderCell(convRate, \"percentage\")}</div>\r\n          {purchases !== undefined && <div className=\"text-xs truncate\">Purchases: {purchases.toLocaleString(locale)}</div>}\r\n        </div>\r\n      </td>\r\n    )\r\n  }\r\n\r\n  const renderSummaryCell = (row: RowData, column: string, columnIndex: number) => {\r\n    const value = row[column]\r\n    // Calculate dynamic left position based on actual column widths\r\n    const getLeftPosition = (index: number) => {\r\n      if (index === 0) return 0\r\n      if (index === 1) return safeWidths[0]\r\n      if (index === 2) return safeWidths[0] + safeWidths[1]\r\n      return 0\r\n    }\r\n\r\n    if (typeof value !== \"number\") {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          }`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          {\"\"}\r\n        </td>\r\n      )\r\n    }\r\n\r\n    const totalPurchases =\r\n      typeof row[\"Total Purchases\"] === \"number\" ? row[\"Total Purchases\"].toLocaleString(locale) : null\r\n    const conversionValue = typeof row[\"Total Conv. Value\"] === \"number\" ? row[\"Total Conv. Value\"].toLocaleString(locale) : null\r\n   \r\n    if (column.includes(\"Sessions\")) {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          <div className=\"text-right\">\r\n            <div className=\"font-medium truncate\">{renderCell(value, \"sessions\")}</div>\r\n          </div>\r\n        </td>\r\n      )\r\n    }\r\n\r\n    if (column.includes(\"Rate\") || column.includes(\"Value\")) {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          <div className=\"text-right\">\r\n            <div className=\"font-medium truncate\">{renderCell(value, \"percentage\")}</div>\r\n            {totalPurchases && <div className=\"text-xs mt-1 truncate\">Total Purchases: {totalPurchases}</div>}\r\n            {conversionValue && <div className=\"text-xs mt-1 truncate\">Total Conv Value: {conversionValue}</div>}\r\n          </div>\r\n        </td>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <td\r\n        className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n          columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n        } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n        style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n      >\r\n        <div className=\"text-right font-medium truncate\">{renderCell(value)}</div>\r\n      </td>\r\n    )\r\n  }\r\n\r\n  const renderDataRow = (row: RowData, index: number) => {\r\n    return (\r\n      <tr key={`${row[primaryColumn]}-${index}`} className=\"hover:bg-blue-50 transition-colors duration-150 group\">\r\n        <td className=\"sticky left-0 min-w-[130px] max-w-[200px] p-3 text-sm font-medium z-10 bg-white group-hover:bg-blue-50 border-r border-b border-gray-200\">\r\n          <div className=\"truncate\">\r\n            {typeof row[primaryColumn] === \"string\" || typeof row[primaryColumn] === \"number\"\r\n              ? renderCell(row[primaryColumn])\r\n              : \"\"}\r\n          </div>\r\n        </td>\r\n        {secondaryColumns?.map((column, columnIndex) => {\r\n          // Add 1 to account for the primary column\r\n          const absoluteIndex = columnIndex + 1\r\n          return <React.Fragment key={column}>{renderSummaryCell(row, column, absoluteIndex)}</React.Fragment>\r\n        })}\r\n        {months.map((month) => {\r\n          const getMonthNumber = (monthName: string): number => {\r\n            const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n            return months.indexOf(monthName) + 1\r\n          }\r\n          const [monthName, year] = month.split(\"-\")\r\n          const monthNum = getMonthNumber(monthName)\r\n          const monthFormat = `${year}${monthNum.toString().padStart(2, \"0\")}`\r\n\r\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find((m) => m.Month === monthFormat)\r\n          return <React.Fragment key={month}>{renderMonthCell(monthData)}</React.Fragment>\r\n        })}\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  const displayData = useMemo(() => {\r\n    if (isFullScreen) {\r\n      return filteredData\r\n    }\r\n    return filteredData.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage)\r\n  }, [isFullScreen, filteredData, currentPage, rowsPerPage])\r\n\r\n  const totalRows = filteredData.length\r\n  const totalPages = Math.ceil(totalRows / rowsPerPage)\r\n  const goToPage = (page: number) => {\r\n    const pageNumber = Math.max(1, Math.min(page, totalPages))\r\n    setCurrentPage(pageNumber)\r\n  }\r\n\r\n  const renderColumnHeader = (column: string, columnIndex: number) => {\r\n    let thresholdValue = \"\"\r\n    if (column === \"Total Sessions\") {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSessions).toLocaleString()})`\r\n    } else if (column === \"Avg Conv. Rate\") {\r\n      thresholdValue = `(avg: ${thresholds.avgConvRate.toFixed(2)}%)`\r\n    }else if (column === \"Total Cost\") {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.totalCostG).toLocaleString()})`\r\n    }else if (column === \"Conv. Value / Cost\") {\r\n      thresholdValue = `(avg: ${thresholds.totalConvValueCostG.toFixed(2)})`\r\n    }\r\n\r\n    const isFirst = columnIndex < 3\r\n    const active = resizingIndex === columnIndex\r\n\r\n    // Calculate dynamic left position based on actual column widths\r\n    const getLeftPosition = (index: number) => {\r\n      if (index === 0) return 0\r\n      if (index === 1) return safeWidths[0]\r\n      if (index === 2) return safeWidths[0] + safeWidths[1]\r\n      return 0\r\n    }\r\n\r\n    return (\r\n      <th\r\n        key={column}\r\n        className={`sticky top-0 z-10 px-3 py-3 text-right text-sm font-medium bg-gray-100 border-r border-b border-gray-200 ${\r\n          isFirst ? `z-20 ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}` : \"\"\r\n        } ${active ? \"border-blue-500\" : \"\"}`}\r\n        style={isFirst ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n      >\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"truncate\">{column}</span>\r\n          {thresholdValue && <span className=\"text-xs font-normal mt-0.5 truncate\">{thresholdValue}</span>}\r\n        </div>\r\n\r\n        {/* Resize handle */}\r\n        <div\r\n          role=\"separator\"\r\n          aria-orientation=\"vertical\"\r\n          aria-label={`Resize ${column} column`}\r\n          onPointerDown={(e) => startDrag(e, columnIndex)}\r\n          className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n            active\r\n              ? \"bg-blue-500/15\"\r\n              : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n          }`}\r\n        >\r\n          <div\r\n            className={`absolute right-0 top-0 h-full w-px ${\r\n              active ? \"bg-blue-500\" : \"bg-gray-200\"\r\n            }`}\r\n          />\r\n        </div>\r\n      </th>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full overflow-hidden flex flex-col\">\r\n      <div className={`relative overflow-x-auto ${\r\n        isFullScreen ? 'max-h-[calc(100vh-80px)]' : ''\r\n      } max-h-[100vh]`}>\r\n        <table className=\"w-full table-fixed border border-gray-200\">\r\n          <colgroup>\r\n            {safeWidths.map((w, i) => (\r\n              <col key={String(columns[i]?.key || `col-${i}`)} style={{ width: w }} />\r\n            ))}\r\n          </colgroup>\r\n          <thead>\r\n            <tr>\r\n              <th className=\"sticky left-0 top-0 min-w-[130px] z-30 px-3 py-3 text-left text-sm font-medium bg-gray-100 border-r border-b border-gray-200\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"truncate\">{primaryColumn}</span>\r\n                  {filter && filter.length > 0 && <span className=\"text-xs px-2 py-1 rounded\">Filtered</span>}\r\n                </div>\r\n                \r\n                {/* Resize handle for primary column */}\r\n                <div\r\n                  role=\"separator\"\r\n                  aria-orientation=\"vertical\"\r\n                  aria-label={`Resize ${primaryColumn} column`}\r\n                  onPointerDown={(e) => startDrag(e, 0)}\r\n                  className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n                    resizingIndex === 0\r\n                      ? \"bg-blue-500/15\"\r\n                      : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute right-0 top-0 h-full w-px ${\r\n                      resizingIndex === 0 ? \"bg-blue-500\" : \"bg-gray-200\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n              </th>\r\n              {secondaryColumns?.map((column, columnIndex) => {\r\n                // Add 1 to account for the primary column\r\n                const absoluteIndex = columnIndex + 1\r\n                return renderColumnHeader(column, absoluteIndex)\r\n              })}\r\n              {months.map((month, monthIndex) => {\r\n                // Add 1 for primary column + secondary columns length\r\n                const columnIndex = 1 + (secondaryColumns?.length || 0) + monthIndex\r\n                const active = resizingIndex === columnIndex\r\n                \r\n                return (\r\n                  <th\r\n                    key={month}\r\n                    className={`sticky top-0 min-w-[120px] z-10 px-3 py-3 text-right text-sm font-medium whitespace-nowrap bg-gray-100 border-r border-b border-gray-200 ${\r\n                      active ? \"border-blue-500\" : \"\"\r\n                    }`}\r\n                  >\r\n                                      <div className=\"truncate\">{month}</div>\r\n                  <div className=\"text-xs mt-1 truncate\">Sessions / Conv Rate</div>\r\n\r\n                    {/* Resize handle for monthly columns */}\r\n                    <div\r\n                      role=\"separator\"\r\n                      aria-orientation=\"vertical\"\r\n                      aria-label={`Resize ${month} column`}\r\n                      onPointerDown={(e) => startDrag(e, columnIndex)}\r\n                      className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n                        active\r\n                          ? \"bg-blue-500/15\"\r\n                          : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={`absolute right-0 top-0 h-full w-px ${\r\n                          active ? \"bg-blue-500\" : \"bg-gray-200\"\r\n                        }`}\r\n                      />\r\n                    </div>\r\n                  </th>\r\n                )\r\n              })}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {displayData.length > 0 ? (\r\n              displayData.map((row, index) => renderDataRow(row, index))\r\n            ) : (\r\n              <tr>\r\n                <td\r\n                  colSpan={1 + (secondaryColumns?.length || 0) + months.length}\r\n                  className=\"p-4 text-center border-b border-gray-200\"\r\n                >\r\n                  {filter !== undefined && filteredData.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                      <span className=\"text-lg font-medium text-gray-700\">Oops! No data available for this category</span>\r\n      \r\n                    </div>\r\n                  ) : (\r\n                    \"No data to display\"\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {!isFullScreen && (\r\n        <div className=\"px-3 py-2.5 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"text-sm\">\r\n              {totalRows > 0 ? (\r\n                <>\r\n                  Showing {(currentPage - 1) * rowsPerPage + 1}-{Math.min(currentPage * rowsPerPage, totalRows)} of{\" \"}\r\n                  {totalRows} rows\r\n                  {filter !== undefined ? (\r\n                    <span className=\"ml-2 text-xs\">(Filtered from {data.length} total rows)</span>\r\n                  ) : null}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  No rows to display\r\n                  {filter !== undefined ? (\r\n                    <span className=\"ml-2 text-xs\">\r\n                      (Filter: {filter?.join(\", \") || \"Unknown\"}) | Total rows: {data.length}\r\n                    </span>\r\n                  ) : null}\r\n                </>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-gray-600\">Rows per page:</span>\r\n              <Select value={rowsPerPage === filteredData.length ? \"all\" : rowsPerPage.toString()} onValueChange={handleRowsPerPageChange}>\r\n                <SelectTrigger className=\"w-20 h-8\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"50\">50</SelectItem>\r\n                  <SelectItem value=\"100\">100</SelectItem>\r\n                  <SelectItem value=\"200\">200</SelectItem>\r\n                  <SelectItem value=\"all\">All</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex bg-transparent\"\r\n              onClick={() => goToPage(1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0 bg-transparent\"\r\n              onClick={() => goToPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"flex items-center justify-center text-sm font-medium px-2\">\r\n              Page {currentPage} of {totalPages}\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0 bg-transparent\"\r\n              onClick={() => goToPage(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex bg-transparent\"\r\n              onClick={() => goToPage(totalPages)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"@/pages/ConversionReportPage/components/ConversionTable\";\r\n\r\ntype AdAccountData = {\r\n  accountId: string;\r\n  accountName: string;\r\n  \"Search Term\": string;\r\n  \"Total Cost\": number;\r\n  \"Conv. Value / Cost\": number;\r\n  \"Total Conv. Value\": number;\r\n  MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  [key: string]: any;\r\n  error?: string;\r\n};\r\n\r\nexport type ApiResponse = {\r\n  reportType: string;\r\n  data: AdAccountData[];\r\n};\r\n\r\ninterface SearchtermBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n  refreshTrigger: number\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  isFullScreen: boolean;\r\n}\r\n\r\nconst SearchTerm: React.FC<SearchtermBasedReportsProps> = ({ dateRange: propDateRange, refreshTrigger, onDataUpdate, currentFilter, isFullScreen }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const dispatch = useDispatch();\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const locale = useSelector((state: RootState) => state.locale.locale)\r\n\r\n  const user = useSelector((state: RootState) => state.user.user, shallowEqual);\r\n  const { brandId } = useParams();\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = 'google-ads-search-term'; // Add a unique component identifier\r\n\r\n  // Get filters from Redux\r\n  const filters = useSelector((state: RootState) =>\r\n    state.conversionFilters[componentId] || {}, shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/google/searchTerm/${brandId}`, {\r\n        userId: user?.id,\r\n        startDate,\r\n        endDate,\r\n        ...transformedFilters,\r\n      });\r\n      setApiResponse({\r\n        reportType: \"Search Term\",\r\n        data: response.data?.data || [],\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, user?.id, transformedFilters]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000); // Refresh every 15 minutes\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined,\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined\r\n      }));\r\n    }\r\n  }, [propDateRange, dispatch]);\r\n\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'searchTerm');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Search Term\";   // \"Conv. Value / Cost\"\r\n\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  console.log(\"apiResponse\", apiResponse?.data);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"rounded-md overflow-hidden\">\r\n        <NewConversionTable\r\n          data={apiResponse?.data || []}\r\n          primaryColumn={primaryColumn}\r\n          secondaryColumns={secondaryColumns}\r\n          monthlyDataKey={monthlyDataKey}\r\n          isFullScreen={isFullScreen}\r\n          locale={locale}\r\n          filter={currentFilter}\r\n        />\r\n      </div>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default SearchTerm;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport { selectGoogleAdsTokenError } from '@/store/slices/TokenSllice';\r\nimport NewConversionTable from \"@/pages/ConversionReportPage/components/ConversionTable\";\r\n\r\ntype AdAccountData = {\r\n  accountId: string;\r\n  accountName: string;\r\n  ageRanges: Array<{\r\n    \"Age Range\": string,\r\n    \"Total Cost\": number;\r\n    \"Conv. Value / Cost\": number;\r\n    \"Total Conv. Value\": number;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n\r\n    [key: string]: any;\r\n  }>;\r\n  error?: string;\r\n};\r\n\r\nexport type ApiResponse = {\r\n  reportType: string;\r\n  data: AdAccountData[];\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n  refreshTrigger: number,\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  isFullScreen: boolean;\r\n}\r\n\r\nconst Age: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange, refreshTrigger, currentFilter, onDataUpdate, isFullScreen }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const locale = useSelector((state: RootState) => state.locale.locale)\r\n  const dispatch = useDispatch();\r\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\r\n  console.log(googleAdsTokenError);\r\n\r\n\r\n  const user = useSelector((state: RootState) => state.user.user, shallowEqual)\r\n  const { brandId } = useParams();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = 'google-ads-age';\r\n\r\n  const filters = useSelector((state: RootState) =>\r\n    state.conversionFilters[componentId] || {}, shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/google/age/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n\r\n\r\n      setApiResponse({\r\n        reportType: \"Age\",\r\n        data: response.data?.data || [],\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data[0]?.ageRanges, 'age');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Age Range\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n\r\n  console.log(\"apiResponse\", apiResponse?.data[0]?.ageRanges);\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"rounded-md overflow-hidden\">\r\n        <NewConversionTable\r\n          data={apiResponse?.data[0]?.ageRanges || []}\r\n          primaryColumn={primaryColumn}\r\n          secondaryColumns={secondaryColumns}\r\n          monthlyDataKey={monthlyDataKey}\r\n          isFullScreen={isFullScreen}\r\n          locale={locale}\r\n          filter={currentFilter}\r\n        />\r\n      </div>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Age;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Target } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\r\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\r\nimport NewConversionTable from \"@/pages/ConversionReportPage/components/ConversionTable\";\r\n\r\n\r\ntype AdAccountData = {\r\n  accountId: string;\r\n  accountName: string;\r\n  genders: Array<{\r\n    \"Gender\": string;\r\n    \"Total Cost\": number;\r\n    \"Conv. Value / Cost\": number;\r\n    \"Total Conv. Value\": number;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n  error?: string;\r\n};\r\n\r\nexport type ApiResponse = {\r\n  reportType: string;\r\n  data: AdAccountData[];\r\n  isFullScreen: boolean;\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n  refreshTrigger: number;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  isFullScreen: boolean;\r\n}\r\n\r\nconst Gender: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange, isFullScreen }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const dispatch = useDispatch();\r\n\r\n\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const { brandId } = useParams();\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = \"google-ads-gender\";\r\n\r\n  const filters = useSelector((state: RootState) =>\r\n    state.conversionFilters[componentId] || {}, shallowEqual\r\n  );\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/google/gender/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n      console.log(\"---->\",response.data);\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n        dispatch(setDate({\r\n          from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n          to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n        }));\r\n      }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Gender\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n\r\n  const locale = useSelector((state: RootState) => state.locale.locale)\r\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\r\n  console.log(googleAdsTokenError);\r\n\r\n  return (\r\n    <>\r\n      {googleAdsTokenError ? (\r\n        <NoAccessPage\r\n          platform=\"Google Ads\"\r\n          message=\"Looks like we need to refresh your Google Ads connection to optimize your campaigns.\"\r\n          icon={<Target className=\"w-8 h-8 text-red-500\" />}\r\n          loginOptions={[\r\n            {\r\n              label: \"Connect Google Ads\",\r\n              context: \"googleAdSetup\",\r\n              provider: \"google\"\r\n            }\r\n          ]}\r\n        />\r\n      ) : loading ? (\r\n        <Loader isLoading={loading} />\r\n      ) : (\r\n        apiResponse?.data && apiResponse.data.map((account, _) => (\r\n          <div className={`${isFullScreen ? 'fixed inset-0 z-50 m-0 overflow-auto bg-white' : ''}`}>\r\n            <Card key={account.accountId} className=\"mb-4\">\r\n\r\n              <CardContent>\r\n\r\n                {/* <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                  <h3 className=\"text-lg font-semibold mb-4 mt-2 flex items-center\">\r\n                    <span className=\"mr-2\"><GoogleLogo /></span>\r\n                    <span className=\"\">{account.accountName}</span>\r\n                  </h3>\r\n                  <div className=\"flex flex-wrap items-center gap-3\">\r\n                    {isFullScreen &&\r\n                      <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                        <DatePickerWithRange />\r\n                      </div>\r\n                    }\r\n                    <Button onClick={handleManualRefresh} disabled={loading} size=\"icon\" variant=\"outline\">\r\n                      <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    </Button>\r\n                    <FilterConversions\r\n                      componentId={componentId}\r\n                      availableColumns={[\"Total Cost\", \"Conv. Value / Cost\"]}\r\n                    />\r\n                    <Button onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                      {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                    </Button>\r\n                  </div>\r\n                </div> */}\r\n\r\n                {account.error ? (\r\n                  <p className=\"text-red-500\">Error: {account.error}</p>\r\n                ) : account.genders.length === 0 ? (\r\n                  <p className=\"text-gray-500\">No gender data available for this account</p>\r\n                ) : (\r\n                  <div className=\"rounded-md overflow-hidden\">\r\n                    <NewConversionTable\r\n                      data={account.genders}\r\n                      primaryColumn={primaryColumn}\r\n                      secondaryColumns={secondaryColumns}\r\n                      monthlyDataKey={monthlyDataKey}\r\n                      // monthlyMetrics={monthlyMetrics}\r\n                      isFullScreen={isFullScreen}\r\n                      locale={locale}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        ))\r\n      )}\r\n\r\n      {apiResponse?.data && apiResponse.data.length === 0 && !loading && (\r\n        <Card>\r\n          <CardContent>\r\n            <p className=\"text-gray-500 text-center py-4\">No gender data available</p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Gender;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\r\nimport NewConversionTable from \"@/pages/ConversionReportPage/components/ConversionTable\";\r\n\r\ntype AdAccountData = {\r\n  accountId: string;\r\n  accountName: string;\r\n  keywords: Array<{\r\n    \"Keyword\": string;\r\n    \"Total Cost\": number;\r\n    \"Conv. Value / Cost\": number;\r\n    \"Total Conv. Value\": number;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n  error?: string;\r\n};\r\n\r\nexport type ApiResponse = {\r\n  reportType: string;\r\n  data: AdAccountData[];\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n  refreshTrigger: number\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  isFullScreen: boolean;\r\n}\r\n\r\nconst Keyword: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange, refreshTrigger, currentFilter, onDataUpdate, isFullScreen }) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const dispatch = useDispatch();\r\n\r\n\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const { brandId } = useParams();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const componentId = \"google-ads-keyword\";\r\n\r\n  const filters = useSelector((state: RootState) =>\r\n    state.conversionFilters[componentId] || {}, shallowEqual\r\n  );\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data[0]?.keywords, 'keyword');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  const transformedFilters = useMemo(() => {\r\n    return Object.entries(filters).reduce<Record<string, any>>((acc, [column, filter]) => {\r\n      if (filter) {\r\n        const apiColumnName = {\r\n          \"Total Cost\": \"costFilter\",\r\n          \"Conv. Value / Cost\": \"convValuePerCostFilter\",\r\n        }[column] || column;\r\n\r\n        acc[apiColumnName] = filter;\r\n      }\r\n      return acc;\r\n    }, {});\r\n  }, [filters]); // Only re-compute when filters change\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/google/keyword/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate, ...transformedFilters\r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate, transformedFilters, user?.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (propDateRange) {\r\n      dispatch(setDate({\r\n        from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n        to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n      }));\r\n    }\r\n  }, [propDateRange]);\r\n  useEffect(() => {\r\n    if (!isFullScreen) {\r\n      if (propDateRange) {\r\n        dispatch(setDate({\r\n          from: propDateRange.from ? propDateRange.from.toISOString() : undefined, // Convert Date to string\r\n          to: propDateRange.to ? propDateRange.to.toISOString() : undefined // Convert Date to string\r\n        }));\r\n      }\r\n    }\r\n  }, [isFullScreen, propDateRange]);\r\n\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Keyword\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n  const locale = useSelector((state: RootState) => state.locale.locale)\r\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\r\n  console.log(googleAdsTokenError);\r\n\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      <div className=\"rounded-md overflow-hidden\">\r\n        <NewConversionTable\r\n          data={apiResponse?.data[0]?.keywords || []}\r\n          primaryColumn={primaryColumn}\r\n          secondaryColumns={secondaryColumns}\r\n          monthlyDataKey={monthlyDataKey}\r\n          isFullScreen={isFullScreen}\r\n          locale={locale}\r\n          filter={currentFilter}\r\n        />\r\n      </div>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Keyword;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport { selectGoogleAdsTokenError } from \"@/store/slices/TokenSllice\";\r\nimport NewConversionTable from \"@/pages/ConversionReportPage/components/ConversionTable\";\r\n\r\n\r\ntype AdAccountData = {\r\n  accountId: string;\r\n  accountName: string;\r\n  products: Array<{\r\n    \"Product\": string;\r\n    \"Total Cost\": number;\r\n    \"Conv. Value / Cost\": number;\r\n    \"Total Conv. Value\": number;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n  error?: string;\r\n};\r\n\r\nexport type ApiResponse = {\r\n  reportType: string;\r\n  data: AdAccountData[];\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n  dateRange: DateRange | undefined;\r\n  refreshTrigger: number,\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  isFullScreen: boolean;\r\n}\r\n\r\nconst Product: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange, refreshTrigger, currentFilter, onDataUpdate, isFullScreen }) => {\r\n  const [date, setDate] = useState<DateRange | undefined>(propDateRange);\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const { brandId } = useParams();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n\r\n      const response = await axiosInstance.post(`/api/google/product/${brandId}`, {\r\n        userId: user?.id, startDate: startDate, endDate: endDate,\r\n      }, { withCredentials: true })\r\n\r\n      const fetchedData = response.data || [];\r\n\r\n      setApiResponse(fetchedData);\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate,]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 15 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  useEffect(() => {\r\n    setDate(propDateRange);\r\n  }, [propDateRange]);\r\n\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data[0]?.products, 'product');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Product\";\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  const secondaryColumns = [\"Total Cost\", \"Conv. Value / Cost\"];\r\n\r\n  const locale = useSelector((state: RootState) => state.locale.locale)\r\n  const googleAdsTokenError = useSelector(selectGoogleAdsTokenError);\r\n  console.log(googleAdsTokenError);\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  console.log(\"apiResponse\", apiResponse?.data[0]?.products);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"rounded-md overflow-hidden\">\r\n        <NewConversionTable\r\n          data={apiResponse?.data[0]?.products || []}\r\n          primaryColumn={primaryColumn}\r\n          secondaryColumns={secondaryColumns}\r\n          monthlyDataKey={monthlyDataKey}\r\n          isFullScreen={isFullScreen}\r\n          locale={locale}\r\n          filter={currentFilter}\r\n        />\r\n      </div>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { ChevronLeft, ChevronRight, X, BarChart3 } from \"lucide-react\"\r\n\r\ninterface SideTabProps {\r\n  tabs: {\r\n    label: string\r\n    value: string\r\n    icon?: React.ReactNode\r\n  }[]\r\n  activeTab: string\r\n  onTabChange: (value: string) => void\r\n  className?: string\r\n  collapsible?: boolean\r\n  mobileBreakpoint?: number\r\n}\r\n\r\nexport function SideTab({ \r\n  tabs, \r\n  activeTab, \r\n  onTabChange, \r\n  className,\r\n  collapsible = true,\r\n  mobileBreakpoint = 768\r\n}: SideTabProps) {\r\n  const [isCollapsed, setIsCollapsed] = useState(false)\r\n  const [isMobile, setIsMobile] = useState(false)\r\n  const [isMobileOpen, setIsMobileOpen] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth < mobileBreakpoint)\r\n      if (window.innerWidth < mobileBreakpoint) {\r\n        setIsCollapsed(false)\r\n      }\r\n    }\r\n\r\n    checkMobile()\r\n    window.addEventListener('resize', checkMobile)\r\n    return () => window.removeEventListener('resize', checkMobile)\r\n  }, [mobileBreakpoint])\r\n\r\n  const toggleCollapse = () => {\r\n    setIsCollapsed(!isCollapsed)\r\n  }\r\n\r\n  const toggleMobile = () => {\r\n    setIsMobileOpen(!isMobileOpen)\r\n  }\r\n\r\n  const handleTabClick = (value: string) => {\r\n    onTabChange(value)\r\n    if (isMobile) {\r\n      setIsMobileOpen(false)\r\n    }\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <>\r\n        {/* Mobile Toggle Button */}\r\n        <button\r\n          onClick={toggleMobile}\r\n          className=\"lg:hidden fixed top-4 left-4 z-50 p-2 bg-blue-600 text-white rounded-md shadow-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          <BarChart3 className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        {/* Mobile Overlay */}\r\n        {isMobileOpen && (\r\n          <div className=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40\" onClick={toggleMobile} />\r\n        )}\r\n\r\n        {/* Mobile Sidebar */}\r\n        <div className={cn(\r\n          \"lg:hidden fixed left-0 top-0 h-full bg-white shadow-lg z-50 transition-transform duration-300 ease-in-out\",\r\n          isMobileOpen ? \"translate-x-0\" : \"-translate-x-full\"\r\n        )}>\r\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50\">\r\n            <h3 className=\"text-lg font-medium text-gray-900\">Reports</h3>\r\n            <button\r\n              onClick={toggleMobile}\r\n              className=\"p-1 rounded-md hover:bg-gray-200 transition-colors\"\r\n            >\r\n              <X className=\"w-5 h-5 text-gray-600\" />\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"flex-1 overflow-y-auto w-64\">\r\n            {tabs.map((tab) => (\r\n              <button\r\n                key={tab.value}\r\n                onClick={() => handleTabClick(tab.value)}\r\n                className={cn(\r\n                  \"w-full flex items-center gap-3 px-4 py-3 text-left text-sm transition-all duration-200 border-l-4 hover:bg-gray-50\",\r\n                  tab.value === activeTab\r\n                    ? \"bg-blue-50 border-blue-500 text-blue-700 font-medium shadow-sm\"\r\n                    : \"border-transparent text-gray-700 hover:text-gray-900\"\r\n                )}\r\n              >\r\n                {tab.icon && (\r\n                  <span className={cn(\r\n                    \"flex-shrink-0\",\r\n                    tab.value === activeTab ? \"text-blue-600\" : \"text-gray-500\"\r\n                  )}>\r\n                    {tab.icon}\r\n                  </span>\r\n                )}\r\n                <span className=\"truncate\">{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"hidden lg:flex flex-col bg-white border-r border-gray-200 shadow-sm transition-all duration-300 ease-in-out\",\r\n      isCollapsed ? \"w-16\" : \"w-48\",\r\n      className\r\n    )}>\r\n      <div className={cn(\r\n        \"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\",\r\n        isCollapsed && \"justify-center\"\r\n      )}>\r\n        {!isCollapsed && <h3 className=\"text-sm font-medium text-gray-900\">Reports</h3>}\r\n        {collapsible && (\r\n          <button\r\n            onClick={toggleCollapse}\r\n            className=\"p-1 rounded-md hover:bg-gray-200 transition-colors\"\r\n            title={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n          >\r\n            {isCollapsed ? (\r\n              <ChevronRight className=\"w-4 h-4 text-gray-600\" />\r\n            ) : (\r\n              <ChevronLeft className=\"w-4 h-4 text-gray-600\" />\r\n            )}\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.value}\r\n            onClick={() => handleTabClick(tab.value)}\r\n            className={cn(\r\n              \"w-full flex items-center gap-3 px-4 py-3 text-left text-sm transition-all duration-200 border-l-4 hover:bg-gray-50 group\",\r\n              tab.value === activeTab\r\n                ? \"bg-blue-50 border-blue-500 text-blue-700 font-medium shadow-sm\"\r\n                : \"border-transparent text-gray-700 hover:text-gray-900\"\r\n            )}\r\n            title={isCollapsed ? tab.label : undefined}\r\n          >\r\n            {tab.icon && (\r\n              <span className={cn(\r\n                \"flex-shrink-0 transition-colors duration-200\",\r\n                isCollapsed && \"mx-auto\",\r\n                tab.value === activeTab ? \"text-blue-600\" : \"text-gray-500 group-hover:text-gray-700\"\r\n              )}>\r\n                {tab.icon}\r\n              </span>\r\n            )}\r\n            {!isCollapsed && (\r\n              <span className=\"truncate\">{tab.label}</span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n} ","\r\nimport React, { useMemo, useState } from 'react';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { PerformanceSummaryProps, CategoryData } from '@/interfaces';\r\nimport { X } from 'lucide-react';\r\n\r\nconst PerformanceSummary: React.FC<PerformanceSummaryProps> = ({\r\n  data,\r\n  primaryColumn,\r\n  metricConfig,\r\n  onCategoryFilter\r\n}) => {\r\n  const [filteredCategory, setFilteredCategory] = useState<string | null>(null);\r\n\r\n  const thresholds = useMemo(() => {\r\n    const metrics: Record<string, number> = {\r\n      [metricConfig.primary.key]: 0,\r\n      [metricConfig.secondary.key]: 0\r\n    };\r\n    let totalMonths = 0;\r\n\r\n    // Always calculate thresholds from the complete original data\r\n    data.forEach(row => {\r\n      const monthlyData = row.MonthlyData as Array<{ Month: string; [key: string]: any }> | undefined;\r\n      \r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          // Map the metric keys to monthly data keys\r\n          const primaryMonthlyKey = metricConfig.primary.key === \"Total Sessions\" ? \"Sessions\" : \r\n                                   metricConfig.primary.key === \"Total Spend\" ? \"Spend\" :\r\n                                   metricConfig.primary.key === \"Total Cost\" ? \"Cost\" :\r\n                                   metricConfig.primary.key;\r\n          \r\n          const secondaryMonthlyKey = metricConfig.secondary.key === \"Avg Conv. Rate\" ? \"Conv. Rate\" :\r\n                                     metricConfig.secondary.key === \"Total Purchase ROAS\" ? \"Purchase ROAS\" :\r\n                                     metricConfig.secondary.key === \"Conv. Value / Cost\" ? \"Conv. Value/ Cost\" :\r\n                                     metricConfig.secondary.key;\r\n\r\n          const primaryMetric = month[primaryMonthlyKey];\r\n          const secondaryMetric = month[secondaryMonthlyKey];\r\n\r\n          if (\r\n            typeof primaryMetric === 'number' &&\r\n            typeof secondaryMetric === 'number'\r\n          ) {\r\n            metrics[metricConfig.primary.key] += Number(primaryMetric);\r\n            metrics[metricConfig.secondary.key] += Number(secondaryMetric);\r\n            totalMonths++;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return {\r\n      [metricConfig.primary.key]: totalMonths > 0 ? metrics[metricConfig.primary.key] / totalMonths : 0,\r\n      [metricConfig.secondary.key]: totalMonths > 0 ? metrics[metricConfig.secondary.key] / totalMonths : 0\r\n    };\r\n  }, [data, metricConfig]); // Only depend on original data\r\n\r\n  const categories: CategoryData[] = useMemo(() => {\r\n    const categorizedItems: Record<string, (string | number)[]> = {\r\n      'Top Performers': [],\r\n      [`High ${metricConfig.primary.name}`]: [],\r\n      [`High ${metricConfig.secondary.name}`]: [],\r\n      'Under Performers': []\r\n    };\r\n\r\n    data.forEach(row => {\r\n      const primaryMetric = Number(row[metricConfig.primary.key]);\r\n      const secondaryMetric = Number(row[metricConfig.secondary.key]);\r\n      const primaryValue = String(row[primaryColumn]);\r\n\r\n      const isHighPrimary = primaryMetric >= thresholds[metricConfig.primary.key];\r\n      const isHighSecondary = secondaryMetric >= thresholds[metricConfig.secondary.key];\r\n\r\n      if (isHighPrimary && isHighSecondary) {\r\n        categorizedItems['Top Performers'].push(primaryValue);\r\n      } else if (isHighPrimary && !isHighSecondary) {\r\n        categorizedItems[`High ${metricConfig.primary.name}`].push(primaryValue);\r\n      } else if (!isHighPrimary && isHighSecondary) {\r\n        categorizedItems[`High ${metricConfig.secondary.name}`].push(primaryValue);\r\n      } else {\r\n        categorizedItems['Under Performers'].push(primaryValue);\r\n      }\r\n    });\r\n\r\n    return [\r\n      {\r\n        name: 'Top Performers',\r\n        color: 'text-blue-500',\r\n        bgColor: 'bg-white',\r\n        count: categorizedItems['Top Performers'].length,\r\n        items: categorizedItems['Top Performers'],\r\n        description: `Above average in both ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: `High ${metricConfig.primary.name}`,\r\n        color: 'text-gray-700',\r\n        bgColor: 'bg-white',\r\n        count: categorizedItems[`High ${metricConfig.primary.name}`].length,\r\n        items: categorizedItems[`High ${metricConfig.primary.name}`],\r\n        description: `High ${metricConfig.primary.name} (>${thresholds[metricConfig.primary.key].toFixed(2)}) but below average ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: `High ${metricConfig.secondary.name}`,\r\n        color: 'text-gray-700',\r\n        bgColor: 'bg-white',\r\n        count: categorizedItems[`High ${metricConfig.secondary.name}`].length,\r\n        items: categorizedItems[`High ${metricConfig.secondary.name}`],\r\n        description: `High ${metricConfig.secondary.name} (>${thresholds[metricConfig.secondary.key].toFixed(2)}) but below average ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)})`\r\n      },\r\n      {\r\n        name: 'Under Performers',\r\n        color: 'text-gray-700',\r\n        bgColor: 'bg-white',\r\n        count: categorizedItems['Under Performers'].length,\r\n        items: categorizedItems['Under Performers'],\r\n        description: `Below average in both ${metricConfig.primary.name} (<${thresholds[metricConfig.primary.key].toFixed(2)}) and ${metricConfig.secondary.name} (<${thresholds[metricConfig.secondary.key].toFixed(2)})`\r\n      }\r\n    ];\r\n  }, [data, thresholds, primaryColumn, metricConfig]);\r\n\r\n  const handleCategoryClick = (categoryName: string) => {\r\n    const category = categories.find(c => c.name === categoryName);\r\n    \r\n    if (filteredCategory === categoryName) {\r\n      return;\r\n    } else {\r\n      setFilteredCategory(categoryName);\r\n      onCategoryFilter?.(category?.items || []);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFilter = () => {\r\n    setFilteredCategory(null);\r\n    onCategoryFilter?.(undefined);\r\n  };\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div id=\"age-report-performance\" className=\"flex items-center gap-1\">\r\n        {categories.map((category) => (\r\n          <Tooltip key={category.name}>\r\n            <TooltipTrigger asChild>\r\n              <div\r\n                className={`relative cursor-pointer transition-all duration-300 ease-in-out hover:opacity-90 rounded-full p-2 min-w-[60px] ${\r\n                  filteredCategory === category.name ? 'bg-blue-50 border border-blue-500' : 'bg-white border border-gray-300'\r\n                }`}\r\n                onClick={() => handleCategoryClick(category.name)}\r\n              >\r\n                <div className=\"flex items-center justify-center gap-0.5\">\r\n                  <span className={`text-xs font-medium ${filteredCategory === category.name ? 'text-blue-700 font-semibold' : 'text-gray-700'}`}>\r\n                    {category.name} ({category.count})\r\n                  </span>\r\n                  {filteredCategory === category.name && (\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleRemoveFilter();\r\n                      }}\r\n                      className=\"ml-0.5 p-0.5 hover:bg-blue-200 rounded-full transition-colors\"\r\n                    >\r\n                      <X className=\"w-3 h-3 text-blue-700\" />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </TooltipTrigger>\r\n            <TooltipContent className=\"max-w-xs p-4 bg-gray-900 text-white border-0 shadow-lg\">\r\n              <div>\r\n                \r\n                {/* Category name and larger color sample */}\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <div className={`w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center ${\r\n                    filteredCategory === category.name ? 'bg-blue-50' : 'bg-white'\r\n                  }`}>\r\n                    <div className={`w-3 h-3 rounded-full bg-gray-400`} />\r\n                  </div>\r\n                  <p className=\"font-medium text-lg text-white\">\r\n                    {category.name}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Description */}\r\n                <p className=\"text-sm text-gray-200\">{category.description}</p>\r\n              </div>\r\n            </TooltipContent>\r\n          </Tooltip>\r\n        ))}\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default PerformanceSummary;","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Settings } from \"lucide-react\";\r\nimport { setLocale } from \"@/store/slices/LocalSlice\";\r\nimport { RootState } from \"@/store\";\r\n\r\ninterface NumberFormatSelectorProps {\r\n  size?: \"icon\" | \"default\" | \"sm\" | \"lg\";\r\n  variant?: \"outline\" | \"link\" | \"default\" | \"destructive\" | \"secondary\" | \"ghost\";\r\n  iconSize?: string;\r\n  className?: string;\r\n}\r\n\r\nconst NumberFormatSelector = ({ \r\n  size = \"icon\", \r\n  variant = \"outline\",\r\n  iconSize = \"h-4 w-4\",\r\n  className = \"\"\r\n}: NumberFormatSelectorProps) => {\r\n  const dispatch = useDispatch();\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n  return (\r\n    <Popover>\r\n      <PopoverTrigger asChild>\r\n        <Button \r\n          variant={variant as \"outline\" | \"link\" | \"default\" | \"destructive\" | \"secondary\" | \"ghost\"} \r\n          size={size as \"icon\" | \"default\" | \"sm\" | \"lg\"} \r\n          className={className}\r\n        >\r\n          <Settings className={iconSize} />\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-56\">\r\n        <div className=\"grid gap-3\">\r\n          <h3 className=\"font-medium text-sm\">Number Format Preferences</h3>\r\n          <div className=\"flex flex-col space-y-2\">\r\n            <label className=\"flex items-center space-x-2 cursor-pointer text-sm\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"locale\"\r\n                value=\"en-IN\"\r\n                checked={locale === \"en-IN\"}\r\n                onChange={() => dispatch(setLocale(\"en-IN\"))}\r\n                className=\"form-radio\"\r\n              />\r\n              <span>Indian</span>\r\n            </label>\r\n            <label className=\"flex items-center space-x-2 cursor-pointer text-sm\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"locale\"\r\n                value=\"en-US\"\r\n                checked={locale === \"en-US\"}\r\n                onChange={() => dispatch(setLocale(\"en-US\"))}\r\n                className=\"form-radio\"\r\n              />\r\n              <span>International</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default NumberFormatSelector;","// ExcelDownload.tsx\r\nimport * as XLSX from 'xlsx-js-style';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileDown } from 'lucide-react';\r\n\r\nexport interface ExcelStyle {\r\n  patternType: string;\r\n  fgColor: { rgb: string };\r\n}\r\n\r\nexport interface ExcelStyles {\r\n  green: ExcelStyle;\r\n  blue: ExcelStyle;\r\n  yellow: ExcelStyle;\r\n  red: ExcelStyle;\r\n  header: ExcelStyle;\r\n}\r\n\r\nexport interface ExcelThresholds {\r\n  avgSessions: number;\r\n  avgConvRate: number;\r\n}\r\n\r\nexport interface MonthlyData {\r\n  Month: string;\r\n  [key: string]: number | string;\r\n}\r\n\r\nexport interface RowData {\r\n  [key: string]: number | string | MonthlyData[];\r\n}\r\n\r\ninterface ExcelDownloadProps {\r\n  data: RowData[];\r\n  fileName: string;\r\n  primaryColumn: string;\r\n  secondaryColumns: string[];\r\n  monthlyDataKey: string;\r\n  monthlyMetrics: string[];\r\n  buttonClassName?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst defaultStyles: ExcelStyles = {\r\n  green: { patternType: 'solid', fgColor: { rgb: \"DCFCE7\" } },\r\n  blue: { patternType: 'solid', fgColor: { rgb: \"DBEAFE\" } },\r\n  yellow: { patternType: 'solid', fgColor: { rgb: \"FEF9C3\" } },\r\n  red: { patternType: 'solid', fgColor: { rgb: \"FEF2F2\" } },\r\n  header: { patternType: 'solid', fgColor: { rgb: \"F1F5F9\" } }\r\n};\r\n\r\nexport const calculateThresholds = (data: RowData[]): ExcelThresholds => {\r\n  let totalSessions = 0;\r\n  let totalConvRate = 0;\r\n  let count = 0;\r\n\r\n  data.forEach(row => {\r\n    if (typeof row['Total Sessions'] === 'number' && typeof row['Avg Conv. Rate'] === 'number') {\r\n      totalSessions += Number(row['Total Sessions']);\r\n      totalConvRate += Number(row['Avg Conv. Rate']);\r\n      count++;\r\n    }\r\n  });\r\n\r\n  return {\r\n    avgSessions: totalSessions / count,\r\n    avgConvRate: totalConvRate / count\r\n  };\r\n};\r\n\r\nconst getCellStyle = (\r\n  metric: string,\r\n  sessions: number | undefined,\r\n  convRate: number | undefined,\r\n  thresholds: ExcelThresholds,\r\n  styles: ExcelStyles\r\n) => {\r\n  if (\r\n    (metric === 'Sessions' || metric === 'Conv. Rate') &&\r\n    typeof sessions === 'number' &&\r\n    typeof convRate === 'number'\r\n  ) {\r\n    const isHighSessions = sessions >= thresholds.avgSessions;\r\n    const isGoodConversion = convRate >= thresholds.avgConvRate;\r\n\r\n    if (isHighSessions && isGoodConversion) return styles.green;\r\n    if (isHighSessions && !isGoodConversion) return styles.blue;\r\n    if (!isHighSessions && isGoodConversion) return styles.yellow;\r\n    return styles.red;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nconst applyExcelStyles = (\r\n  worksheet: XLSX.WorkSheet,\r\n  data: RowData[],\r\n  months: string[],\r\n  secondaryColumns: string[],\r\n  monthlyDataKey: string,\r\n  monthlyMetrics: string[],\r\n  styles: ExcelStyles,\r\n  thresholds: ExcelThresholds\r\n) => {\r\n  const range = XLSX.utils.decode_range(worksheet['!ref'] || 'A1');\r\n\r\n  // Style header row\r\n  for (let C = range.s.c; C <= range.e.c; C++) {\r\n    const headerCell = XLSX.utils.encode_cell({ r: 0, c: C });\r\n    if (!worksheet[headerCell]) worksheet[headerCell] = { v: '' };\r\n    worksheet[headerCell].s = {\r\n      fill: styles.header,\r\n      font: { bold: true, color: { rgb: \"64748B\" } },\r\n      alignment: { horizontal: 'left' }\r\n    };\r\n  }\r\n\r\n  // Style data cells\r\n  data.forEach((row, dataIndex) => {\r\n    monthlyMetrics.forEach((metric, metricIndex) => {\r\n      const actualRow = dataIndex * monthlyMetrics.length + metricIndex + 2;\r\n\r\n      // Apply styles for each cell\r\n      const startCol = 2;\r\n      const endCol = months.length + secondaryColumns.length + 1;\r\n\r\n      for (let col = startCol; col <= endCol; col++) {\r\n        const cellRef = XLSX.utils.encode_cell({\r\n          r: actualRow - 1,\r\n          c: col\r\n        });\r\n\r\n        if (!worksheet[cellRef]) worksheet[cellRef] = { v: '' };\r\n\r\n        let cellStyle: any = {\r\n          font: { color: { rgb: \"000000\" } },\r\n          alignment: { horizontal: 'right' },\r\n          format: metric === 'Conv. Rate' ? '0.00%' : '#,##0'\r\n        };\r\n\r\n        let sessions: number | undefined;\r\n        let convRate: number | undefined;\r\n\r\n        if (col < startCol + secondaryColumns.length) {\r\n          sessions = row['Total Sessions'] as number;\r\n          convRate = row['Avg Conv. Rate'] as number;\r\n        } else {\r\n          const monthIndex = col - (startCol + secondaryColumns.length);\r\n          const monthKey = months[monthIndex];\r\n          const monthlyData = (row[monthlyDataKey] as MonthlyData[]).find(\r\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === monthKey\r\n          );\r\n\r\n          if (monthlyData) {\r\n            sessions = monthlyData['Sessions'] as number;\r\n            convRate = monthlyData['Conv. Rate'] as number;\r\n          }\r\n        }\r\n\r\n        const fillStyle = getCellStyle(metric, sessions, convRate, thresholds, styles);\r\n        if (fillStyle) {\r\n          cellStyle.fill = fillStyle;\r\n        }\r\n\r\n        worksheet[cellRef].s = cellStyle;\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst ExcelDownload: React.FC<ExcelDownloadProps> = ({\r\n  data,\r\n  fileName,\r\n  primaryColumn,\r\n  secondaryColumns,\r\n  monthlyDataKey,\r\n  monthlyMetrics,\r\n  buttonClassName = '',\r\n  disabled = false,\r\n}) => {\r\n  const handleDownload = () => {\r\n    const workbook = XLSX.utils.book_new();\r\n    const sheetData: Array<Array<string | number | null>> = [];\r\n    const thresholds = calculateThresholds(data);\r\n\r\n    // Get all months\r\n    const months = Array.from(new Set(\r\n      data.flatMap(row => \r\n        (row[monthlyDataKey] as MonthlyData[]).map(m => \r\n          `${m.Month.slice(0, 4)}-${m.Month.slice(4)}`\r\n        )\r\n      )\r\n    )).sort().reverse();\r\n\r\n    // Create header row\r\n    const headerRow = [\r\n      primaryColumn,\r\n      'Metric',\r\n      ...secondaryColumns,\r\n      ...months,\r\n    ];\r\n    sheetData.push(headerRow);\r\n\r\n    // Create rows\r\n    data.forEach(row => {\r\n      monthlyMetrics.forEach(metric => {\r\n        const rowData: Array<string | number | null> = [];\r\n        \r\n        rowData.push(metric === monthlyMetrics[0] ? (row[primaryColumn] as string | number) : '');\r\n        rowData.push(metric);\r\n\r\n        secondaryColumns.forEach(column => {\r\n          const value = row[column] as number | string | undefined;\r\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\r\n        });\r\n\r\n        months.forEach(month => {\r\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find(\r\n            m => `${m.Month.slice(0, 4)}-${m.Month.slice(4)}` === month\r\n          );\r\n          const value = monthData ? monthData[metric] : null;\r\n          rowData.push(typeof value === 'number' ? Number(value.toFixed(2)) : null);\r\n        });\r\n\r\n        sheetData.push(rowData);\r\n      });\r\n    });\r\n\r\n    const worksheet = XLSX.utils.aoa_to_sheet(sheetData);\r\n    \r\n    // Apply styles\r\n    applyExcelStyles(\r\n      worksheet,\r\n      data,\r\n      months,\r\n      secondaryColumns,\r\n      monthlyDataKey,\r\n      monthlyMetrics,\r\n      defaultStyles,\r\n      thresholds\r\n    );\r\n\r\n    // Set column widths\r\n    const colWidths = [\r\n      { wch: 20 },\r\n      { wch: 12 },\r\n      ...secondaryColumns.map(() => ({ wch: 15 })),\r\n      ...months.map(() => ({ wch: 12 }))\r\n    ];\r\n    worksheet['!cols'] = colWidths;\r\n\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Conversion Data');\r\n    XLSX.writeFile(workbook, `${fileName}.xlsx`);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n    id='download-button'\r\n      onClick={handleDownload}\r\n      size=\"icon\"\r\n      variant=\"outline\"\r\n      className={buttonClassName}\r\n      disabled={disabled} \r\n    >\r\n      <FileDown className=\"h-4 w-4\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ExcelDownload;","import React, { useState, useMemo, useCallback } from 'react';\r\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\r\nimport { Keyboard, Maximize, Minimize, Package, RefreshCw, Search, User, Users } from 'lucide-react';\r\nimport SearchTerm from './components/SearchTerm';\r\nimport Age from './components/Age';\r\nimport Gender from './components/Gender';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\nimport Keyword from './components/Keyword';\r\nimport Product from './components/Product';\r\nimport { SideTab } from '@/components/ui/side-tab';\r\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport PerformanceSummary from '../ConversionReportPage/components/PerformanceSummary';\r\nimport { metricConfigs } from '@/data/constant';\r\nimport { DatePickerWithRange } from '@/components/dashboard_component/DatePickerWithRange';\r\nimport NumberFormatSelector from '@/components/dashboard_component/NumberFormatSelector';\r\nimport { Button } from '@/components/ui/button';\r\nimport ExcelDownload from '../ConversionReportPage/components/ExcelDownload';\r\n\r\n\r\nconst GoogleAdsDashboard: React.FC = () => {\r\n\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const [tabData, setTabData] = useState<any[]>([]);\r\n  const [currentFilter, setCurrentFilter] = useState<string[] | undefined>(undefined);\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const handleTabDataUpdate = (data: any[], tabType?: string) => {\r\n    if (tabType === activeTab) {\r\n      setTabData(data);\r\n    }\r\n  };\r\n\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const [activeTab, setActiveTab] = useState('searchTerm');\r\n\r\n  const tabs = [\r\n    { label: 'Search Term', value: 'searchTerm', icon: <Search className=\"w-4 h-4\" /> },\r\n    { label: 'Keyword', value: 'keyword', icon: <Keyboard className=\"w-4 h-4\" /> },\r\n    { label: 'Age', value: 'age', icon: <Users className=\"w-4 h-4\" /> },\r\n    { label: 'Gender', value: 'gender', icon: <User className=\"w-4 h-4\" /> },\r\n    { label: 'Product', value: 'product', icon: <Package className=\"w-4 h-4\" /> }\r\n  ];\r\n\r\n  const getPrimaryColumnForTab = (tab: string): string => {\r\n    const columnMap: Record<string, string> = {\r\n      'searchTerm': 'Search Term',\r\n      'keyword': 'Keyword',\r\n      'age': 'Age Range',\r\n      'gender': 'Gender',\r\n      'product': 'Product',\r\n\r\n    };\r\n    return columnMap[tab] || 'Unknown';\r\n  };\r\n\r\n  const handleCategoryFilter = (items: (string | number)[] | undefined) => {\r\n    if (items === undefined) {\r\n      setCurrentFilter(undefined);\r\n    } else {\r\n      setCurrentFilter(items.map(item => String(item)));\r\n    }\r\n  };\r\n\r\n  const handleManualRefresh = useCallback(() => {\r\n    setRefreshTrigger(prev => prev + 1);\r\n  }, []);\r\n\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n    setTabData([]);\r\n    setCurrentFilter(undefined);\r\n  };\r\n\r\n  const getFileNameForTab = (tab: string): string => {\r\n    const fileMap: Record<string, string> = {\r\n      'searchTerm': 'SearchTerm_Conversion_Report',\r\n      'keyword': 'Keyword_Conversion_Report',\r\n      'age': 'Age_Conversion_Report',\r\n      'gender': 'Gender_Conversion_Report',\r\n      'product': 'Product_Conversion_Report',\r\n    };\r\n    return fileMap[tab] || 'Conversion_Report';\r\n  };\r\n\r\n  const getSecondaryColumnsForTab = (tab: string): string[] => {\r\n    const columnMap: Record<string, string[]> = {\r\n      'searchTerm': ['Metric', 'Total Cost', 'Conv. Value / Cost'],\r\n      'keyword': ['Metric', 'Total Cost', 'Conv. Value / Cost'],\r\n      'age': ['Metric', 'Total Cost', 'Conv. Value / Cost'],\r\n      'gender': ['Metric', 'Total Cost', 'Conv. Value / Cost'],\r\n      'product': ['Metric', 'Total Cost', 'Conv. Value / Cost'],\r\n\r\n    };\r\n    return columnMap[tab] || [];\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n\r\n      {/* Side Tab Navigation */}\r\n      <SideTab\r\n        tabs={tabs}\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n      />\r\n\r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col lg:ml-0\">\r\n        {\r\n          (!date.from || !date.to) ? (\r\n            <MissingDateWarning />\r\n          ) : (\r\n            <>\r\n              {/* Header */}\r\n              <div className=\"flex-none\">\r\n              </div>\r\n              {/* Scrollable Content */}\r\n              <div className=\"flex-1 overflow-auto\">\r\n\r\n                <div className='p-2 space-y-6'>\r\n                  <Card id={`${activeTab}-report`} className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n                    <CardContent className=\"p-3\">\r\n                      <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 mb-4\">\r\n                        <div className=\"flex-grow items-center gap-3\">\r\n                          <PerformanceSummary\r\n                            data={tabData}\r\n                            primaryColumn={getPrimaryColumnForTab(activeTab)}\r\n                            metricConfig={metricConfigs.googleAds || {}}\r\n                            onCategoryFilter={handleCategoryFilter}\r\n                          />\r\n\r\n                        </div>\r\n                        {/* Date Picker, Number Format Selector, Refresh Button */}\r\n                        <div className=\"flex flex-row items-center gap-1.5 \">\r\n                          <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                            <DatePickerWithRange\r\n                              defaultDate={{\r\n                                from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                                to: new Date()\r\n                              }}\r\n                            />\r\n                          </div>\r\n                          <NumberFormatSelector />\r\n                          <Button id=\"refresh\" onClick={handleManualRefresh} size=\"icon\" variant=\"outline\">\r\n                            <RefreshCw className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <ExcelDownload\r\n                            data={tabData}\r\n                            fileName={getFileNameForTab(activeTab)}\r\n                            primaryColumn={getPrimaryColumnForTab(activeTab)}\r\n                            secondaryColumns={getSecondaryColumnsForTab(activeTab)}\r\n                            monthlyDataKey=\"MonthlyData\"\r\n                            monthlyMetrics={[\"Sessions\", \"Conv. Rate\"]}\r\n                            disabled={tabData.length === 0}\r\n                          />\r\n\r\n                          <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                            {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"rounded-md overflow-hidden\">\r\n                        <div id={activeTab}>\r\n                          {activeTab === 'searchTerm' && (\r\n                            <SearchTerm\r\n                              dateRange={{\r\n                                from: date.from ? new Date(date.from) : undefined,\r\n                                to: date.to ? new Date(date.to) : undefined\r\n                              }}\r\n                              refreshTrigger={refreshTrigger}\r\n                              currentFilter={currentFilter}\r\n                              onDataUpdate={handleTabDataUpdate}\r\n                              isFullScreen={isFullScreen}\r\n                            />\r\n                          )}\r\n\r\n                          {activeTab === 'keyword' && (\r\n                            <Keyword\r\n                              dateRange={{\r\n                                from: date.from ? new Date(date.from) : undefined,\r\n                                to: date.to ? new Date(date.to) : undefined\r\n                              }}\r\n                              refreshTrigger={refreshTrigger}\r\n                              currentFilter={currentFilter}\r\n                              onDataUpdate={handleTabDataUpdate}\r\n                              isFullScreen={isFullScreen}\r\n                            />\r\n                          )}\r\n                          {activeTab === 'age' && (\r\n                            <Age\r\n                              dateRange={{\r\n                                from: date.from ? new Date(date.from) : undefined,\r\n                                to: date.to ? new Date(date.to) : undefined\r\n                              }}\r\n                              refreshTrigger={refreshTrigger}\r\n                              currentFilter={currentFilter}\r\n                              onDataUpdate={handleTabDataUpdate}\r\n                              isFullScreen={isFullScreen}\r\n                            />\r\n                          )}\r\n                          {activeTab === 'gender' && (\r\n                            <Gender\r\n                              dateRange={{\r\n                                from: date.from ? new Date(date.from) : undefined,\r\n                                to: date.to ? new Date(date.to) : undefined\r\n                              }}\r\n                              refreshTrigger={refreshTrigger}\r\n                              currentFilter={currentFilter}\r\n                              onDataUpdate={handleTabDataUpdate}\r\n                              isFullScreen={isFullScreen}\r\n                            />\r\n                          )}\r\n                          {activeTab === 'product' && (\r\n                            <Product\r\n                              dateRange={{\r\n                                from: date.from ? new Date(date.from) : undefined,\r\n                                to: date.to ? new Date(date.to) : undefined\r\n                              }}\r\n                              refreshTrigger={refreshTrigger}\r\n                              currentFilter={currentFilter}\r\n                              onDataUpdate={handleTabDataUpdate}\r\n                              isFullScreen={isFullScreen}\r\n                            />\r\n                          )}\r\n\r\n                        </div>\r\n                      </div>\r\n\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )\r\n        }\r\n      </div>\r\n\r\n      <HelpDeskModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleAdsDashboard;","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRightIcon className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <DotFilledIcon className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","import React from \"react\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from \"lucide-react\"\r\nimport { useMemo, useState, useEffect, useRef } from \"react\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\n\r\nexport interface MonthlyData {\r\n  Month: string\r\n  [key: string]: number | string\r\n}\r\n\r\nexport interface RowData {\r\n  [key: string]: number | string | MonthlyData[]\r\n}\r\n\r\ninterface MetaReportTableProps {\r\n  data: RowData[]\r\n  primaryColumn: string\r\n  secondaryColumns?: string[]\r\n  monthlyDataKey: string\r\n  isFullScreen: boolean\r\n  locale: string\r\n  filter?: string[]\r\n}\r\n\r\n// Column definition interface for resizing\r\ninterface ColumnDef {\r\n  key: string\r\n  header: string\r\n  width: number\r\n  minWidth?: number\r\n  maxWidth?: number\r\n  align?: \"left\" | \"right\" | \"center\"\r\n}\r\n\r\n// Drag state interface\r\ntype DragState = {\r\n  index: number\r\n  startX: number\r\n  startWidth: number\r\n}\r\n\r\n// Utility function to clamp values\r\nfunction clamp(n: number, min: number, max?: number) {\r\n  if (max != null) return Math.min(Math.max(n, min), max)\r\n  return Math.max(n, min)\r\n}\r\n\r\nexport default function MetaReportTable({\r\n  data,\r\n  primaryColumn,\r\n  secondaryColumns,\r\n  monthlyDataKey,\r\n  isFullScreen,\r\n  locale,\r\n  filter,\r\n}: MetaReportTableProps) {\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [rowsPerPage, setRowsPerPage] = useState(50)\r\n\r\n  // Column resizing state\r\n  const [widths, setWidths] = useState<number[]>([])\r\n  const dragRef = useRef<DragState | null>(null)\r\n  const [resizingIndex, setResizingIndex] = useState<number | null>(null)\r\n\r\n  // Get months helper function - moved before it's used\r\n  const getMonths = () => {\r\n    if (!Array.isArray(data)) {\r\n      return []\r\n    }\r\n\r\n    const getMonthName = (monthNumber: string): string => {\r\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n      return months[Number.parseInt(monthNumber) - 1]\r\n    }\r\n\r\n    const allMonths = new Set<string>()\r\n    data.forEach((row) => {\r\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          if (month?.Month) {\r\n            const year = month.Month.slice(0, 4)\r\n            const monthNum = month.Month.slice(4)\r\n            allMonths.add(`${getMonthName(monthNum)}-${year}`)\r\n          }\r\n        })\r\n      }\r\n    })\r\n    \r\n    // Sort months in reverse chronological order (newest first)\r\n    return Array.from(allMonths).sort((a, b) => {\r\n      const [monthA, yearA] = a.split('-')\r\n      const [monthB, yearB] = b.split('-')\r\n      \r\n      const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n      const monthIndexA = months.indexOf(monthA)\r\n      const monthIndexB = months.indexOf(monthB)\r\n      \r\n      // First compare years\r\n      if (yearA !== yearB) {\r\n        return parseInt(yearB) - parseInt(yearA) // Reverse order (newest year first)\r\n      }\r\n      \r\n      return monthIndexB - monthIndexA // Reverse order (newest month first)\r\n    })\r\n  }\r\n\r\n  // Define columns with their widths and constraints\r\n  const columns = useMemo((): ColumnDef[] => {\r\n    const cols: ColumnDef[] = [\r\n      { key: primaryColumn, header: primaryColumn, width: 130, minWidth: 100, maxWidth: 300, align: \"left\" }\r\n    ]\r\n\r\n    if (secondaryColumns) {\r\n      secondaryColumns.forEach((col) => {\r\n        cols.push({\r\n          key: col,\r\n          header: col,\r\n          width: 130,\r\n          minWidth: 100,\r\n          maxWidth: 200,\r\n          align: \"right\"\r\n        })\r\n      })\r\n    }\r\n\r\n    // Add monthly columns\r\n    const months = getMonths()\r\n    months.forEach((month) => {\r\n      cols.push({\r\n        key: month,\r\n        header: month,\r\n        width: 120,\r\n        minWidth: 100,\r\n        maxWidth: 150,\r\n        align: \"right\"\r\n      })\r\n    })\r\n\r\n    return cols\r\n  }, [primaryColumn, secondaryColumns, monthlyDataKey, data])\r\n\r\n  // Update widths when columns change\r\n  useEffect(() => {\r\n    setWidths(columns.map((c) => c.width))\r\n  }, [columns])\r\n\r\n  // Ensure widths array matches columns array length\r\n  const safeWidths = useMemo(() => {\r\n    return columns.map((col, index) => widths[index] || col.width)\r\n  }, [columns, widths])\r\n\r\n  // Column resize event handlers\r\n  useEffect(() => {\r\n    const onMove = (e: PointerEvent) => {\r\n      const drag = dragRef.current\r\n      if (!drag) return\r\n      const delta = e.clientX - drag.startX\r\n      const def = columns[drag.index]\r\n      setWidths((prev) => {\r\n        const next = [...prev]\r\n        next[drag.index] = clamp(\r\n          drag.startWidth + delta,\r\n          def.minWidth ?? 80,\r\n          def.maxWidth\r\n        )\r\n        return next\r\n      })\r\n    }\r\n\r\n    const onUp = () => {\r\n      dragRef.current = null\r\n      setResizingIndex(null)\r\n      document.body.style.cursor = \"\"\r\n      document.body.classList.remove(\"select-none\")\r\n    }\r\n\r\n    window.addEventListener(\"pointermove\", onMove)\r\n    window.addEventListener(\"pointerup\", onUp)\r\n    return () => {\r\n      window.removeEventListener(\"pointermove\", onMove)\r\n      window.removeEventListener(\"pointerup\", onUp)\r\n    }\r\n  }, [columns])\r\n\r\n  const startDrag = (e: React.PointerEvent, index: number) => {\r\n    dragRef.current = { index, startX: e.clientX, startWidth: widths[index] }\r\n    setResizingIndex(index)\r\n    document.body.style.cursor = \"col-resize\"\r\n    document.body.classList.add(\"select-none\")\r\n    ;(e.currentTarget as HTMLElement).setPointerCapture(e.pointerId)\r\n  }\r\n\r\n  const filteredData = useMemo(() => {\r\n    // If no filter is applied (undefined), show all data\r\n    if (filter === undefined) {\r\n      return data\r\n    }\r\n    \r\n    // If filter is applied but empty array, show no results\r\n    if (filter.length === 0) {\r\n      return []\r\n    }\r\n    \r\n    // If filter has items, apply the filter\r\n    return data.filter((row) => {\r\n      const primaryValue = String(row[primaryColumn])\r\n      return filter.includes(primaryValue)\r\n    })\r\n  }, [data, filter, primaryColumn])\r\n\r\n  const months = useMemo(() => {\r\n    return getMonths()\r\n  }, [data, monthlyDataKey])\r\n\r\n  const thresholds = useMemo(() => {\r\n    let totalSpend = 0,\r\n      totalPurchaseROAS = 0,\r\n      totalMonths = 0\r\n\r\n    data.forEach((row) => {\r\n      const monthlyData = row[monthlyDataKey] as MonthlyData[] | undefined\r\n\r\n      if (Array.isArray(monthlyData)) {\r\n        monthlyData.forEach((month) => {\r\n          if (typeof month[\"Spend\"] === \"number\" && typeof month[\"Purchase ROAS\"] === \"number\") {\r\n            totalSpend += Number(month[\"Spend\"])\r\n            totalPurchaseROAS += Number(month[\"Purchase ROAS\"])\r\n            totalMonths++\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    return {\r\n      avgSpend: totalMonths > 0 ? totalSpend / totalMonths : 0,\r\n      avgPurchaseROAS: totalMonths > 0 ? totalPurchaseROAS / totalMonths : 0,\r\n    }\r\n  }, [data, monthlyDataKey])\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n  }, [filter])\r\n\r\n  // Reset to page 1 when rows per page changes\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n  }, [rowsPerPage])\r\n\r\n  const handleRowsPerPageChange = (value: string) => {\r\n    const newRowsPerPage = value === \"all\" ? filteredData.length : parseInt(value)\r\n    setRowsPerPage(newRowsPerPage)\r\n  }\r\n\r\n  const renderCell = (value: number | string, type?: \"spend\" | \"percentage\" | \"default\" | \"sessions\") => {\r\n    if (typeof value === \"number\") {\r\n      switch (type) {\r\n        case \"spend\":\r\n          return Math.round(value).toLocaleString(locale)\r\n        case \"percentage\":\r\n          return `${Number.parseFloat(value.toLocaleString(locale)).toFixed(2)}%`\r\n        case \"sessions\":\r\n          return Math.round(value).toLocaleString(locale)\r\n        default:\r\n          return Number.parseFloat(value.toLocaleString(locale)).toFixed(2)\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  const renderMonthCell = (monthData: MonthlyData | undefined) => {\r\n          if (!monthData) {\r\n        return (\r\n          <td className=\"text-right whitespace-nowrap p-3 text-sm border-r border-b border-gray-200 bg-transparent\">\r\n            <div className=\"truncate\"></div>\r\n            <div className=\"truncate\"></div>\r\n          </td>\r\n        )\r\n      }\r\n\r\n    const spend = monthData[\"Spend\"]\r\n    const purchaseROAS = monthData[\"Purchase ROAS\"]\r\n    const purchaseConversionValue = monthData[\"Purchase Conversion Value\"]\r\n\r\n        return (\r\n      <td className=\"text-right whitespace-nowrap p-3 text-sm border-r border-b border-gray-200 bg-transparent\">\r\n        <div className=\"space-y-1\">\r\n          <div className=\"font-medium truncate\">{renderCell(spend, \"spend\")}</div>\r\n          <div className=\"text-xs truncate\">{renderCell(purchaseROAS, \"percentage\")}</div>\r\n          {purchaseConversionValue !== undefined && <div className=\"text-xs truncate\">PCV: {purchaseConversionValue.toLocaleString(locale)}</div>}\r\n        </div>\r\n      </td>\r\n    )\r\n  }\r\n\r\n  const renderSummaryCell = (row: RowData, column: string, columnIndex: number) => {\r\n    const value = row[column]\r\n\r\n    // Calculate dynamic left position based on actual column widths\r\n    const getLeftPosition = (index: number) => {\r\n      if (index === 0) return 0\r\n      if (index === 1) return safeWidths[0]\r\n      if (index === 2) return safeWidths[0] + safeWidths[1]\r\n      return 0\r\n    }\r\n\r\n    if (typeof value !== \"number\") {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          }`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          {\"\"}\r\n        </td>\r\n      )\r\n    }\r\n\r\n    const totalPCV =\r\n      typeof row[\"Total PCV\"] === \"number\" ? row[\"Total PCV\"].toLocaleString(locale) : null\r\n\r\n    if (column.includes(\"Spend\")) {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          <div className=\"text-right\">\r\n            <div className=\"font-medium truncate\">{renderCell(value, \"spend\")}</div>\r\n          </div>\r\n        </td>\r\n      )\r\n    }\r\n\r\n    if (column.includes(\"Purchase ROAS\")) {\r\n      return (\r\n        <td\r\n          className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n            columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n          } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n          style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n        >\r\n          <div className=\"text-right\">\r\n            <div className=\"font-medium truncate\">{renderCell(value, \"percentage\")}</div>\r\n            {totalPCV !== null && <div className=\"text-xs mt-1 truncate\">Total PCV: {totalPCV}</div>}\r\n          </div>    \r\n        </td>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <td\r\n        className={`p-3 text-sm border-r border-b border-gray-200 ${\r\n          columnIndex < 3 ? \"sticky z-10 bg-white group-hover:bg-blue-50\" : \"bg-transparent\"\r\n        } ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}`}\r\n        style={columnIndex < 3 ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n      >\r\n        <div className=\"text-right font-medium truncate\">{renderCell(value)}</div>\r\n      </td>\r\n    )\r\n  }\r\n\r\n  const renderDataRow = (row: RowData, index: number) => {\r\n    return (\r\n      <tr key={`${row[primaryColumn]}-${index}`} className=\"hover:bg-blue-50 transition-colors duration-150 group\">\r\n        <td className=\"sticky left-0 min-w-[130px] max-w-[200px] p-3 text-sm font-medium z-10 bg-white group-hover:bg-blue-50 border-r border-b border-gray-200\">\r\n          <div className=\"truncate\">\r\n            {typeof row[primaryColumn] === \"string\" || typeof row[primaryColumn] === \"number\"\r\n              ? renderCell(row[primaryColumn])\r\n              : \"\"}\r\n          </div>\r\n        </td>\r\n        {secondaryColumns?.map((column, columnIndex) => {\r\n          // Add 1 to account for the primary column\r\n          const absoluteIndex = columnIndex + 1\r\n          return <React.Fragment key={column}>{renderSummaryCell(row, column, absoluteIndex)}</React.Fragment>\r\n        })}\r\n        {months.map((month) => {\r\n          const getMonthNumber = (monthName: string): number => {\r\n            const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n            return months.indexOf(monthName) + 1\r\n          }\r\n          const [monthName, year] = month.split(\"-\")\r\n          const monthNum = getMonthNumber(monthName)\r\n          const monthFormat = `${year}${monthNum.toString().padStart(2, \"0\")}`\r\n\r\n          const monthData = (row[monthlyDataKey] as MonthlyData[]).find((m) => m.Month === monthFormat)\r\n          return <React.Fragment key={month}>{renderMonthCell(monthData)}</React.Fragment>\r\n        })}\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  const displayData = useMemo(() => {\r\n    if (isFullScreen) {\r\n      return filteredData\r\n    }\r\n    return filteredData.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage)\r\n  }, [isFullScreen, filteredData, currentPage, rowsPerPage])\r\n\r\n  const totalRows = filteredData.length\r\n  const totalPages = Math.ceil(totalRows / rowsPerPage)\r\n  const goToPage = (page: number) => {\r\n    const pageNumber = Math.max(1, Math.min(page, totalPages))\r\n    setCurrentPage(pageNumber)\r\n  }\r\n\r\n  const renderColumnHeader = (column: string, columnIndex: number) => {\r\n    let thresholdValue = \"\"\r\n    if (column === \"Total Spend\") {\r\n      thresholdValue = `(avg: ${Math.round(thresholds.avgSpend).toLocaleString()})`\r\n    } else if (column === \"Total Purchase ROAS\") {\r\n      thresholdValue = `(avg: ${thresholds.avgPurchaseROAS.toFixed(2)}%)`\r\n    }\r\n\r\n    const isFirst = columnIndex < 3\r\n    const active = resizingIndex === columnIndex\r\n\r\n    // Calculate dynamic left position based on actual column widths\r\n    const getLeftPosition = (index: number) => {\r\n      if (index === 0) return 0\r\n      if (index === 1) return safeWidths[0]\r\n      if (index === 2) return safeWidths[0] + safeWidths[1]\r\n      return 0\r\n    }\r\n    console.log(\"filter\", filter, filteredData)\r\n\r\n    return (\r\n      <th\r\n        key={column}\r\n        className={`sticky top-0 z-10 px-3 py-3 text-right text-sm font-medium bg-gray-100 border-r border-b border-gray-200 ${\r\n          isFirst ? `z-20 ${columnIndex === 2 ? \"shadow-[4px_0_5px_0_rgba(0,0,0,0.09)]\" : \"\"}` : \"\"\r\n        } ${active ? \"border-blue-500\" : \"\"}`}\r\n        style={isFirst ? { left: `${getLeftPosition(columnIndex)}px` } : {}}\r\n      >\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"truncate\">{column}</span>\r\n          {thresholdValue && <span className=\"text-xs font-normal mt-0.5 truncate\">{thresholdValue}</span>}\r\n        </div>\r\n\r\n        {/* Resize handle */}\r\n        <div\r\n          role=\"separator\"\r\n          aria-orientation=\"vertical\"\r\n          aria-label={`Resize ${column} column`}\r\n          onPointerDown={(e) => startDrag(e, columnIndex)}\r\n          className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n            active\r\n              ? \"bg-blue-500/15\"\r\n              : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n          }`}\r\n        >\r\n          <div\r\n            className={`absolute right-0 top-0 h-full w-px ${\r\n              active ? \"bg-blue-500\" : \"bg-gray-200\"\r\n            }`}\r\n          />\r\n        </div>\r\n      </th>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full overflow-hidden flex flex-col mt-4\">\r\n      <div className={`relative overflow-x-auto ${\r\n        isFullScreen ? 'max-h-[calc(100vh-80px)]' : ''\r\n      } max-h-[100vh]`}>\r\n        <table className=\"w-full table-fixed border border-gray-200\">\r\n          <colgroup>\r\n            {safeWidths.map((w, i) => (\r\n              <col key={String(columns[i]?.key || `col-${i}`)} style={{ width: w }} />\r\n            ))}\r\n          </colgroup>\r\n          <thead>\r\n            <tr>\r\n              <th className=\"sticky left-0 top-0 min-w-[130px] z-30 px-3 py-3 text-left text-sm font-medium bg-gray-100 border-r border-b border-gray-200\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"truncate\">{primaryColumn}</span>\r\n                  {filter && filter.length > 0 && <span className=\"text-xs px-2 py-1 rounded\">Filtered</span>}\r\n                </div>\r\n                \r\n                {/* Resize handle for primary column */}\r\n                <div\r\n                  role=\"separator\"\r\n                  aria-orientation=\"vertical\"\r\n                  aria-label={`Resize ${primaryColumn} column`}\r\n                  onPointerDown={(e) => startDrag(e, 0)}\r\n                  className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n                    resizingIndex === 0\r\n                      ? \"bg-blue-500/15\"\r\n                      : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`absolute right-0 top-0 h-full w-px ${\r\n                      resizingIndex === 0 ? \"bg-blue-500\" : \"bg-gray-200\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n              </th>\r\n              {secondaryColumns?.map((column, columnIndex) => {\r\n                // Add 1 to account for the primary column\r\n                const absoluteIndex = columnIndex + 1\r\n                return renderColumnHeader(column, absoluteIndex)\r\n              })}\r\n              {months.map((month, monthIndex) => {\r\n                // Add 1 for primary column + secondary columns length\r\n                const columnIndex = 1 + (secondaryColumns?.length || 0) + monthIndex\r\n                const active = resizingIndex === columnIndex\r\n                \r\n                return (\r\n                  <th\r\n                    key={month}\r\n                    className={`sticky top-0 min-w-[120px] z-10 px-3 py-3 text-right text-sm font-medium whitespace-nowrap bg-gray-100 border-r border-b border-gray-200 ${\r\n                      active ? \"border-blue-500\" : \"\"\r\n                    }`}\r\n                  >\r\n                                      <div className=\"truncate\">{month}</div>\r\n                  <div className=\"text-xs mt-1 truncate\">Sessions / Conv Rate</div>\r\n\r\n                    {/* Resize handle for monthly columns */}\r\n                    <div\r\n                      role=\"separator\"\r\n                      aria-orientation=\"vertical\"\r\n                      aria-label={`Resize ${month} column`}\r\n                      onPointerDown={(e) => startDrag(e, columnIndex)}\r\n                      className={`absolute inset-y-0 right-0 w-3 cursor-col-resize ${\r\n                        active\r\n                          ? \"bg-blue-500/15\"\r\n                          : \"hover:bg-gray-200/30 active:bg-gray-200/50\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={`absolute right-0 top-0 h-full w-px ${\r\n                          active ? \"bg-blue-500\" : \"bg-gray-200\"\r\n                        }`}\r\n                      />\r\n                    </div>\r\n                  </th>\r\n                )\r\n              })}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {displayData.length > 0 ? (\r\n              displayData.map((row, index) => renderDataRow(row, index))\r\n            ) : (\r\n              <tr>\r\n                <td\r\n                  colSpan={1 + (secondaryColumns?.length || 0) + months.length}\r\n                  className=\"p-4 text-center border-b border-gray-200\"\r\n                >\r\n                  {filter !== undefined && filteredData.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                      <span className=\"text-lg font-medium text-gray-700\">Oops! No data available for this category</span>\r\n      \r\n                    </div>\r\n                  ) : (\r\n                    \"No data to display\"\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {!isFullScreen && (\r\n        <div className=\"px-3 py-2.5 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"text-sm\">\r\n              {totalRows > 0 ? (\r\n                <>\r\n                  Showing {(currentPage - 1) * rowsPerPage + 1}-{Math.min(currentPage * rowsPerPage, totalRows)} of{\" \"}\r\n                  {totalRows} rows\r\n                  {filter !== undefined ? (\r\n                    <span className=\"ml-2 text-xs\">(Filtered from {data.length} total rows)</span>\r\n                  ) : null}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  No rows to display\r\n                  {filter !== undefined ? (\r\n                    <span className=\"ml-2 text-xs\">\r\n                      (Filter: {filter?.join(\", \") || \"Unknown\"}) | Total rows: {data.length}\r\n                    </span>\r\n                  ) : null}\r\n                </>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-gray-600\">Rows per page:</span>\r\n              <Select value={rowsPerPage === filteredData.length ? \"all\" : rowsPerPage.toString()} onValueChange={handleRowsPerPageChange}>\r\n                <SelectTrigger className=\"w-20 h-8\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"50\">50</SelectItem>\r\n                  <SelectItem value=\"100\">100</SelectItem>\r\n                  <SelectItem value=\"200\">200</SelectItem>\r\n                  <SelectItem value=\"all\">All</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex bg-transparent\"\r\n              onClick={() => goToPage(1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0 bg-transparent\"\r\n              onClick={() => goToPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"flex items-center justify-center text-sm font-medium px-2\">\r\n              Page {currentPage} of {totalPages}\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-8 w-8 p-0 bg-transparent\"\r\n              onClick={() => goToPage(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"hidden h-8 w-8 p-0 lg:flex bg-transparent\"\r\n              onClick={() => goToPage(totalPages)}\r\n              disabled={currentPage === totalPages}\r\n            >\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        audienceData: Array<{\r\n            \"Audience Segments\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedAudienceData: Array<{\r\n        \"Audience Segments\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AudienceFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n    const dispatch = useDispatch();\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/meta/report/audience/${brandId}`, {\r\n                startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({ \r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Audience Segments\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Separate handler for blended summary filter\r\n    const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedAudienceData = apiResponse?.blendedAudienceData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedAudienceData && blendedAudienceData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedAudienceData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedAudienceData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.audienceData || [];\r\n    }, [selectedAccount, apiResponse, blendedAudienceData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedAudienceData || blendedAudienceData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n        return (\r\n            <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <PerformanceSummary\r\n                                key={account.account_name} // Add key to force remount\r\n                                data={account.audienceData || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(account.account_name)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === account.account_name ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                    <CardContent className=\"p-0\">\r\n                        <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <MetaReportTable\r\n                                data={Array.isArray(account.audienceData) ? account.audienceData : [account.audienceData]}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                isFullScreen={fullScreenAccount === account.account_name}\r\n                                locale={locale}\r\n                                filter={singleAccountFilter} // Use the proper filter logic\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                        {blendedAudienceData && blendedAudienceData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount} // Add key to force remount when account changes\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter} // Let MetaReportTable handle the filtering logic\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AudienceFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        placementData: Array<{\r\n            \"Placements\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedPlacementData: Array<{\r\n        \"Placements\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PlacementFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/meta/report/placement/${brandId}`, {\r\n             startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({\r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Placements\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n     // Separate handler for blended summary filter\r\n     const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedPlacementData = apiResponse?.blendedPlacementData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedPlacementData && blendedPlacementData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedPlacementData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedPlacementData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.placementData || [];\r\n    }, [selectedAccount, apiResponse, blendedPlacementData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedPlacementData || blendedPlacementData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n    return (\r\n        <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    <PerformanceSummary\r\n                                key={account.account_name}\r\n                                data={account.placementData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                                     <NumberFormatSelector />\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                            <MetaReportTable\r\n                                data={Array.isArray(account.placementData) ? account.placementData : [account.placementData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        locale={locale}\r\n                                filter={ singleAccountFilter}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n     \r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                        {blendedPlacementData && blendedPlacementData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount}\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PlacementFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        platformData: Array<{\r\n            \"Platforms\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedPlatformData: Array<{\r\n        \"Platforms\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst PlatformFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/meta/report/platform/${brandId}`, {\r\n             startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({\r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Platforms\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n     // Separate handler for blended summary filter\r\n     const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedPlatformData = apiResponse?.blendedPlatformData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedPlatformData && blendedPlatformData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedPlatformData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedPlatformData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.platformData || [];\r\n    }, [selectedAccount, apiResponse, blendedPlatformData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedPlatformData || blendedPlatformData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n    return (\r\n        <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    <PerformanceSummary\r\n                                key={account.account_name}\r\n                                data={account.platformData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                                     <NumberFormatSelector />\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                            <MetaReportTable\r\n                                data={Array.isArray(account.platformData) ? account.platformData : [account.platformData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        locale={locale}\r\n                                filter={ singleAccountFilter}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n     \r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                        {blendedPlatformData && blendedPlatformData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount}\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PlatformFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        countryData: Array<{\r\n            \"Country\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedCountryData: Array<{\r\n        \"Country\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst CountryFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n    const dispatch = useDispatch();\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/meta/report/country/${brandId}`, {\r\n                startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({ \r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Country\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Separate handler for blended summary filter\r\n    const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedCountryData = apiResponse?.blendedCountryData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedCountryData && blendedCountryData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedCountryData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedCountryData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.countryData || [];\r\n    }, [selectedAccount, apiResponse, blendedCountryData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedCountryData || blendedCountryData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n        return (\r\n            <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <PerformanceSummary\r\n                                key={account.account_name} // Add key to force remount\r\n                                data={account.countryData || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(account.account_name)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === account.account_name ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                    <CardContent className=\"p-0\">\r\n                        <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <MetaReportTable\r\n                                data={Array.isArray(account.countryData) ? account.countryData : [account.countryData]}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                isFullScreen={fullScreenAccount === account.account_name}\r\n                                locale={locale}\r\n                                filter={singleAccountFilter} // Use the proper filter logic\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                    {blendedCountryData && blendedCountryData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount} // Add key to force remount when account changes\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter} // Let MetaReportTable handle the filtering logic\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CountryFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        deviceData: Array<{\r\n            \"Device\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedDeviceData: Array<{\r\n        \"Device\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst DeviceFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/meta/report/device/${brandId}`, {\r\n             startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({\r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Device\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n     // Separate handler for blended summary filter\r\n     const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedDeviceData = apiResponse?.blendedDeviceData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedDeviceData && blendedDeviceData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedDeviceData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedDeviceData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.deviceData || [];\r\n    }, [selectedAccount, apiResponse, blendedDeviceData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedDeviceData || blendedDeviceData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n    return (\r\n        <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    <PerformanceSummary\r\n                                key={account.account_name}\r\n                                data={account.deviceData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                                     <NumberFormatSelector />\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                            <MetaReportTable\r\n                                data={Array.isArray(account.deviceData) ? account.deviceData : [account.deviceData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        locale={locale}\r\n                                filter={ singleAccountFilter}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n     \r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                        {blendedDeviceData && blendedDeviceData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount}\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DeviceFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        genderData: Array<{\r\n            \"Gender\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedGenderData: Array<{\r\n        \"Gender\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst GenderFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateForm = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateForm,\r\n        to: dateTo\r\n    }), [dateForm, dateTo]);\r\n    const dispatch = useDispatch();\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await axiosInstance.post(`/api/meta/report/gender/${brandId}`, {\r\n             startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n            setApiResponse(fetchedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate,]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000);\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({\r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Gender\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n     // Separate handler for blended summary filter\r\n     const handleBlendedCategoryFilter = (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    };\r\n\r\n    // Separate handler for individual account filters\r\n    const handleAccountCategoryFilter = (accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    };\r\n\r\n    const blendedGenderData = apiResponse?.blendedGenderData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedGenderData && blendedGenderData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedGenderData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedGenderData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.genderData || [];\r\n    }, [selectedAccount, apiResponse, blendedGenderData]);\r\n\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedGenderData || blendedGenderData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n    return (\r\n        <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                    <PerformanceSummary\r\n                                key={account.account_name}\r\n                                data={account.genderData || []}\r\n                                        primaryColumn={primaryColumn}\r\n                                        metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                                     <NumberFormatSelector />\r\n                                        <Button\r\n                                            onClick={handleManualRefresh}\r\n                                            disabled={loading}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                                        </Button>\r\n                                        <Button\r\n                                            onClick={() => toggleFullScreen(account.account_name)}\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"hover:bg-muted\"\r\n                                        >\r\n                                            {fullScreenAccount === account.account_name ? (\r\n                                                <Minimize className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Maximize className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"p-0\">\r\n                                <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                            <MetaReportTable\r\n                                data={Array.isArray(account.genderData) ? account.genderData : [account.genderData]}\r\n                                        primaryColumn={primaryColumn}\r\n                                        secondaryColumns={secondaryColumns}\r\n                                        monthlyDataKey={monthlyDataKey}\r\n                                        isFullScreen={fullScreenAccount === account.account_name}\r\n                                        locale={locale}\r\n                                filter={ singleAccountFilter}\r\n                                    />\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n     \r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                    {blendedGenderData && blendedGenderData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount}\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GenderFbReport;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Maximize, Minimize, RefreshCw, ChevronDown } from \"lucide-react\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport { setDate } from \"@/store/slices/DateSlice\";\r\nimport PerformanceSummary from \"@/pages/ConversionReportPage/components/PerformanceSummary\";\r\nimport { metricConfigs } from \"@/data/constant\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport MetaReportTable from \"./MetaReportTable\";\r\n\r\n\r\ntype ApiResponse = {\r\n    data: Array<{\r\n        account_name: string;\r\n        ageData: Array<{\r\n            \"Age\": string;\r\n            \"Total Spend\": number;\r\n            \"Total Purchase ROAS\": number;\r\n            \"Total PCV\": number;\r\n            MonthlyData?: Array<{\r\n                Month: string;\r\n                spend: number;\r\n                purchase_roas: number;\r\n                purchase_conversion_value: number;\r\n            }>;\r\n        }>;\r\n    }>,\r\n    blendedAgeData: Array<{\r\n        \"Age\": string;\r\n        \"Total Spend\": number;\r\n        \"Total Purchase ROAS\": number;\r\n        \"Total PCV\": number;\r\n        MonthlyData?: Array<{\r\n            Month: string;\r\n            spend: number;\r\n            purchase_roas: number;\r\n            purchase_conversion_value: number;\r\n        }>;\r\n    }>\r\n};\r\n\r\ninterface CityBasedReportsProps {\r\n    dateRange: DateRange | undefined;\r\n}\r\n\r\nconst AgeFbReport: React.FC<CityBasedReportsProps> = ({ dateRange: propDateRange }) => {\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [fullScreenAccount, setFullScreenAccount] = useState('');\r\n\r\n    const [blendedFilter, setBlendedFilter] = useState<string[]>([]);\r\n    const [accountFilters, setAccountFilters] = useState<Record<string, string[]>>({});\r\n    const [selectedAccount, setSelectedAccount] = useState<string>('');\r\n    const dispatch = useDispatch();\r\n    const locale = useSelector((state: RootState) => state.locale.locale);\r\n\r\n    const { brandId } = useParams();\r\n    const toggleFullScreen = (accountId: string) => {\r\n        setFullScreenAccount(fullScreenAccount === accountId ? '' : accountId);\r\n    };\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n\r\n    useEffect(() => {\r\n        setApiResponse(null);\r\n    }, [brandId]);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n\r\n            const response = await axiosInstance.post(`/api/meta/report/age/${brandId}`, {\r\n                startDate: startDate, endDate: endDate,\r\n            }, { withCredentials: true })\r\n\r\n            const fetchedData = response.data || [];\r\n\r\n            setApiResponse(fetchedData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [brandId, startDate, endDate]);\r\n\r\n    useEffect(() => {\r\n        if (date.from && date.to) {\r\n            fetchData();\r\n        }\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        const intervalId = setInterval(() => {\r\n            if (date.from && date.to) {\r\n                fetchData();\r\n            }\r\n        }, 3 * 60 * 60 * 1000);\r\n        \r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData, date.from, date.to]);\r\n\r\n    useEffect(() => {\r\n        if (propDateRange?.from && propDateRange?.to) {\r\n            dispatch(setDate({ \r\n                from: propDateRange.from.toISOString(), \r\n                to: propDateRange.to.toISOString() \r\n            }));\r\n        }\r\n    }, [propDateRange, dispatch]);\r\n\r\n    const primaryColumn = \"Age\";\r\n    const secondaryColumns = [\"Total Spend\", \"Total Purchase ROAS\"];\r\n    const monthlyDataKey = \"MonthlyData\";\r\n \r\n\r\n    const handleManualRefresh = () => {\r\n        fetchData();\r\n    };\r\n\r\n    // Separate handler for blended summary filter - memoized\r\n    const handleBlendedCategoryFilter = useCallback((items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setBlendedFilter([]);\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            // We need to distinguish between \"no filter\" and \"filter with no results\"\r\n            setBlendedFilter(items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item)));\r\n        }\r\n    }, []);\r\n\r\n    // Separate handler for individual account filters - memoized\r\n    const handleAccountCategoryFilter = useCallback((accountName: string) => (items: (string | number)[] | undefined) => {\r\n        if (items === undefined) {\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: []\r\n            }));\r\n        } else {\r\n            // If items is an empty array, it means filter applied but no results\r\n            setAccountFilters(prev => ({\r\n                ...prev,\r\n                [accountName]: items.length === 0 ? ['__NO_RESULTS__'] : items.map(item => String(item))\r\n            }));\r\n        }\r\n    }, []);\r\n\r\n    const blendedAgeData = apiResponse?.blendedAgeData;\r\n\r\n    // Set default selected account\r\n    useEffect(() => {\r\n        if (apiResponse?.data && !selectedAccount) {\r\n            if (blendedAgeData && blendedAgeData.length > 0) {\r\n                setSelectedAccount('blended-summary');\r\n            } else if (apiResponse.data.length === 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            } else if (apiResponse.data.length > 1) {\r\n                setSelectedAccount(apiResponse.data[0].account_name);\r\n            }\r\n        }\r\n    }, [apiResponse, selectedAccount, blendedAgeData]);\r\n\r\n    // Get current data based on selected account\r\n    const currentData = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return blendedAgeData || [];\r\n        }\r\n        const account = apiResponse?.data.find(acc => acc.account_name === selectedAccount);\r\n        return account?.ageData || [];\r\n    }, [selectedAccount, apiResponse, blendedAgeData]);\r\n\r\n    // Get current filter based on selected account - handle the special case\r\n    const currentFilter = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            if (blendedFilter.length === 0) return undefined;\r\n            if (blendedFilter.includes('__NO_RESULTS__')) return [];\r\n            return blendedFilter;\r\n        }\r\n        const accountFilter = accountFilters[selectedAccount];\r\n        if (!accountFilter || accountFilter.length === 0) return undefined;\r\n        if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n        return accountFilter;\r\n    }, [selectedAccount, blendedFilter, accountFilters]);\r\n\r\n    // Get filter for single account case - optimized\r\n    const singleAccountFilter = useMemo(() => {\r\n        if (apiResponse?.data && apiResponse.data.length === 1) {\r\n            const account = apiResponse.data[0];\r\n            const accountFilter = accountFilters[account.account_name];\r\n            if (!accountFilter || accountFilter.length === 0) return undefined;\r\n            if (accountFilter.includes('__NO_RESULTS__')) return [];\r\n            return accountFilter;\r\n        }\r\n        return undefined;\r\n    }, [apiResponse?.data, accountFilters]);\r\n\r\n    // Get current filter handler based on selected account\r\n    const currentFilterHandler = useMemo(() => {\r\n        if (selectedAccount === 'blended-summary') {\r\n            return handleBlendedCategoryFilter;\r\n        }\r\n        return handleAccountCategoryFilter(selectedAccount);\r\n    }, [selectedAccount, handleBlendedCategoryFilter, handleAccountCategoryFilter]);\r\n\r\n    if (loading) {\r\n        return <Loader isLoading={loading} />\r\n    }\r\n\r\n    // Don't render if no data\r\n    if (!apiResponse?.data || apiResponse.data.length === 0) {\r\n        return <div>No data available</div>;\r\n    }\r\n\r\n    // If only one account and no blended summary, show directly without filter\r\n    if (apiResponse.data.length === 1 && (!blendedAgeData || blendedAgeData.length === 0)) {\r\n        const account = apiResponse.data[0];\r\n        \r\n        return (\r\n            <div>\r\n                <Card className={`${fullScreenAccount === account.account_name ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                    <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <PerformanceSummary\r\n                                key={account.account_name} // Add key to force remount\r\n                                data={account.ageData || []}\r\n                                primaryColumn={primaryColumn}\r\n                                metricConfig={metricConfigs.spendAndRoas || {}}\r\n                                onCategoryFilter={handleAccountCategoryFilter(account.account_name)}\r\n                            />\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(account.account_name)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === account.account_name ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                    <CardContent className=\"p-0\">\r\n                        <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                            <MetaReportTable\r\n                                data={Array.isArray(account.ageData) ? account.ageData : [account.ageData]}\r\n                                primaryColumn={primaryColumn}\r\n                                secondaryColumns={secondaryColumns}\r\n                                monthlyDataKey={monthlyDataKey}\r\n                                isFullScreen={fullScreenAccount === account.account_name}\r\n                                locale={locale}\r\n                                filter={singleAccountFilter} // Use the proper filter logic\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Multiple accounts or blended summary available - show with filter\r\n    return (\r\n        <div>\r\n            <Card className={`${fullScreenAccount === selectedAccount ? 'fixed inset-0 z-50 m-0 bg-background p-2 overflow-auto' : 'rounded-md'}`}>\r\n                <div className=\"bg-white rounded-md pt-2 px-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Account Selector */}\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                                        <span className=\"text-sm\">\r\n                                            {selectedAccount === 'blended-summary' ? 'All Accounts' : selectedAccount}\r\n                                        </span>\r\n                                        <ChevronDown className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                    {blendedAgeData && blendedAgeData.length > 0 && (\r\n                                        <DropdownMenuItem\r\n                                            onClick={() => setSelectedAccount('blended-summary')}\r\n                                            className={selectedAccount === 'blended-summary' ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            All Accounts\r\n                                        </DropdownMenuItem>\r\n                                    )}\r\n                                    {apiResponse?.data.map((account) => (\r\n                                        <DropdownMenuItem\r\n                                            key={account.account_name}\r\n                                            onClick={() => setSelectedAccount(account.account_name)}\r\n                                            className={selectedAccount === account.account_name ? 'bg-blue-50' : ''}\r\n                                        >\r\n                                            {account.account_name}\r\n                                        </DropdownMenuItem>\r\n                                    ))}\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <DatePickerWithRange />\r\n                            <NumberFormatSelector />\r\n                            <Button\r\n                                onClick={handleManualRefresh}\r\n                                disabled={loading}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => toggleFullScreen(selectedAccount)}\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                className=\"hover:bg-muted\"\r\n                            >\r\n                                {fullScreenAccount === selectedAccount ? (\r\n                                    <Minimize className=\"h-4 w-4\" />\r\n                                ) : (\r\n                                    <Maximize className=\"h-4 w-4\" />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <CardContent className=\"p-0 mt-3\">\r\n                    <div className=\"rounded-b-lg overflow-hidden px-2.5 pb-2.5\">\r\n                        <PerformanceSummary\r\n                            key={selectedAccount} // Add key to force remount when account changes\r\n                            data={currentData}\r\n                            primaryColumn={primaryColumn}\r\n                            metricConfig={metricConfigs.spendAndRoas || {}}\r\n                            onCategoryFilter={currentFilterHandler}\r\n                        />\r\n                        <MetaReportTable\r\n                            data={Array.isArray(currentData) ? currentData : [currentData]}\r\n                            primaryColumn={primaryColumn}\r\n                            secondaryColumns={secondaryColumns}\r\n                            monthlyDataKey={monthlyDataKey}\r\n                            isFullScreen={fullScreenAccount === selectedAccount}\r\n                            locale={locale}\r\n                            filter={currentFilter} // Let MetaReportTable handle the filtering logic\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AgeFbReport;\r\n","import React, { useMemo, useState, useEffect } from 'react';\r\nimport AudienceFbReport from './component/AudienceFbReport';\r\nimport PlacementFbReport from './component/PlacementFbReport';\r\nimport PlatformFbReport from './component/PlatformFbReport';\r\nimport CountryFbReport from './component/CountryFbReport';\r\nimport DeviceFbReport from './component/DeviceFbReport';\r\nimport GenderFbReport from './component/GenderFbReport';\r\nimport AgeFbReport from './component/AgeFbReport';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\nimport CollapsibleSidebar from '@/components/dashboard_component/CollapsibleSidebar';\r\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\r\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\r\nimport ConnectPlatform from '@/pages/ReportPage/ConnectPlatformPage';\r\nimport { selectFbTokenError, setFbTokenError } from '@/store/slices/TokenSllice';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Computer, MapPin, Monitor, Smartphone, SquareUser, Target, User, Users } from 'lucide-react';\r\nimport { SideTab } from '@/components/ui/side-tab';\r\n\r\nconst FbReportPage: React.FC = () => {\r\n    const dispatch = useDispatch();\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n    const [activeTab, setActiveTab] = useState('age');\r\n    const { brandId } = useParams();\r\n    const brands = useSelector((state: RootState) => state.brand.brands);\r\n    const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n    const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\r\n        ? true\r\n        : false;\r\n    \r\n    // Remove the useMemo and useEffect, just use simple useSelector\r\n    const fbTokenError = useSelector(selectFbTokenError);\r\n\r\n    const dateRange = {\r\n        from: date.from ? new Date(date.from) : undefined,\r\n        to: date.to ? new Date(date.to) : undefined\r\n    }\r\n\r\n    const tabs = [\r\n        { label: 'Age', value: 'age', icon: <SquareUser className=\"w-4 h-4\" /> },\r\n        { label: 'Gender', value: 'gender', icon: <User className=\"w-4 h-4\" /> },\r\n        { label: 'Country', value: 'country' , icon: < MapPin className=\"w-4 h-4\" /> },\r\n        { label: 'Platform', value: 'platform' , icon: <Computer className=\"w-4 h-4\" /> },\r\n        { label: 'Placement', value: 'placement', icon: <Smartphone className=\"w-4 h-4\" /> },\r\n        { label: 'Impression Device', value: 'impressionDevice' , icon: <Monitor className=\"w-4 h-4\" /> },\r\n        { label: 'Audience Segments', value: 'audienceSegments', icon: <Users className=\"w-4 h-4\" /> }\r\n    ];\r\n\r\n    const handleTabChange = (value: string) => {\r\n        setActiveTab(value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        dispatch(setFbTokenError(false));\r\n    }, [brandId]);\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-gray-100\">\r\n            <CollapsibleSidebar />\r\n            <SideTab \r\n        tabs={tabs}\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n      />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n               \r\n\r\n                {fbTokenError ? (\r\n                    <NoAccessPage\r\n                        platform=\"Facebook Ads\"\r\n                        message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\r\n                        icon={<Target className=\"w-8 h-8 text-red-500\" />}\r\n                        loginOptions={[\r\n                            {\r\n                                label: \"Connect Facebook Ads\",\r\n                                provider: \"facebook\"\r\n                            }\r\n                        ]}\r\n                    />\r\n                ) : !hasFbAdAccount ? (\r\n                    <ConnectPlatform\r\n                        platform=\"facebook\"\r\n                        brandId={brandId ?? ''}\r\n                        onSuccess={(platform, accountName, accountId) => {\r\n                            console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n                        }}\r\n                    />\r\n                ) : (!date.from || !date.to) ? (\r\n                    <MissingDateWarning />\r\n                ) : (\r\n                    <>\r\n                        {/* Scrollable Content */}\r\n                        <div className=\"flex-1 overflow-auto\">\r\n                            <div className=\"p-3 space-y-6\">\r\n                                {activeTab === 'audienceSegments' && (\r\n                                    <div id=\"audienceSegments\">\r\n                                        <AudienceFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'placement' && (\r\n                                    <div id=\"placement\">\r\n                                        <PlacementFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'platform' && (\r\n                                    <div id=\"platform\">\r\n                                        <PlatformFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'country' && (\r\n                                    <div id=\"country\">\r\n                                        <CountryFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'impressionDevice' && (\r\n                                    <div id=\"impressionDevice\">\r\n                                        <DeviceFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'gender' && (\r\n                                    <div id=\"gender\">\r\n                                        <GenderFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                                {activeTab === 'age' && (\r\n                                    <div id=\"age\">\r\n                                        <AgeFbReport dateRange={dateRange} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n       \r\n                <HelpDeskModal />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FbReportPage;","import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","import type React from \"react\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Building2, PlusCircle, CheckCircle, XCircle } from \"lucide-react\"\r\nimport { FullBrandData } from \"@/interfaces\"\r\nimport PlatformModal from \"@/components/dashboard_component/PlatformModal\"\r\n\r\n\r\ninterface PlatformIcon {\r\n    icon: React.ElementType;\r\n    name: string;\r\n}\r\n\r\ninterface BrandIntegrationModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    brandId: string;\r\n    brandName: string;\r\n    brandData: FullBrandData;\r\n    platformIcons: {\r\n        shopify: PlatformIcon;\r\n        googleAds: PlatformIcon;\r\n        googleAnalytics: PlatformIcon;\r\n        facebook: PlatformIcon;\r\n    };\r\n}\r\n\r\nexport function BrandIntegrationModal({ \r\n    isOpen, \r\n    onClose, \r\n    brandId, \r\n    brandName, \r\n    brandData, \r\n    platformIcons \r\n}: BrandIntegrationModalProps) {\r\n    const [activeTab, setActiveTab] = useState(\"overview\")\r\n    const [platformModalOpen, setPlatformModalOpen] = useState(false)\r\n    const [selectedPlatform, setSelectedPlatform] = useState(\"\")\r\n    const platforms = [\r\n        {\r\n            key: \"shopify\",\r\n            icon: platformIcons.shopify.icon,\r\n            name: platformIcons.shopify.name,\r\n            isConnected: !!brandData.shopifyAccount,\r\n            accountNumber: '1 Store',\r\n            accountName: brandData.shopifyAccount?.shopName,\r\n            data: brandData.shopifyAccount,\r\n            allowMultipleAccounts: false\r\n        },\r\n        {\r\n            key: \"googleAds\",\r\n            icon: platformIcons.googleAds.icon,\r\n            name: platformIcons.googleAds.name,\r\n            isConnected: brandData.googleAdAccount && brandData.googleAdAccount.length > 0,\r\n            accountNumber: brandData.googleAdAccount ? `${brandData.googleAdAccount.length} Account(s)` : undefined,\r\n            accountName: brandData.googleAdAccount && brandData.googleAdAccount.length > 0\r\n            ? `${brandData.googleAdAccount.map((acc) => acc.clientId).join(\", \")}` \r\n            : undefined,\r\n            data: brandData.googleAdAccount,\r\n            allowMultipleAccounts: true\r\n        },\r\n        {\r\n            key: \"googleAnalytics\",\r\n            icon: platformIcons.googleAnalytics.icon,\r\n            name: platformIcons.googleAnalytics.name,\r\n            isConnected: !!brandData.ga4Account?.PropertyID,\r\n            accountNumber: '1 Property',\r\n            accountName: brandData.ga4Account?.PropertyID ? `Property ${brandData.ga4Account.PropertyID}` : undefined,\r\n            data: brandData.ga4Account,\r\n            allowMultipleAccounts: false\r\n        },\r\n        {\r\n            key: \"facebook\",\r\n            icon: platformIcons.facebook.icon,\r\n            name: platformIcons.facebook.name,\r\n            isConnected: brandData.fbAdAccounts && brandData.fbAdAccounts.length > 0,\r\n            accountNumber: brandData.fbAdAccounts ? `${brandData.fbAdAccounts.length} Account(s)` : undefined,\r\n            accountName: brandData.fbAdAccounts && brandData.fbAdAccounts.length > 0\r\n            ? `${brandData.fbAdAccounts.join(\", \")}` \r\n            : undefined,\r\n            data: brandData.fbAdAccounts,\r\n            allowMultipleAccounts: true\r\n        }\r\n    ]\r\n    useEffect(()=>{\r\n        console.log(brandId);\r\n    },[])\r\n    \r\n    const handleAddAccount = (platformKey: string) => {\r\n        setSelectedPlatform(platformKey)\r\n        setPlatformModalOpen(true)\r\n    }\r\n    \r\n    const handlePlatformModalSuccess = (platform: string, accountName: string, accountId: string) => {\r\n        // Refresh the brand data or update the UI as needed\r\n        console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`)\r\n        // You might want to trigger a refresh of the brand data here\r\n    }\r\n    \r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onClose}>\r\n            <DialogContent className=\"sm:max-w-4xl max-h-[100vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                        <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                            <Building2 className=\"h-5 w-5 text-teal-600\" />\r\n                        </div>\r\n                        <DialogTitle className=\"text-xl\">{brandName}</DialogTitle>\r\n                    </div>\r\n                    <DialogDescription>Manage platform integrations for this brand</DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <Tabs defaultValue=\"overview\" value={activeTab} onValueChange={setActiveTab} className=\"mt-2\">\r\n                    <TabsList className=\"grid grid-cols-5 mb-4\">\r\n                        <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                        <TabsTrigger value=\"shopify\">Shopify</TabsTrigger>\r\n                        <TabsTrigger value=\"googleAds\">Google Ads</TabsTrigger>\r\n                        <TabsTrigger value=\"googleAnalytics\">Analytics</TabsTrigger>\r\n                        <TabsTrigger value=\"facebook\">Facebook</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <TabsContent value=\"overview\" className=\"space-y-4\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            {platforms.map((platform) => (\r\n                                <div key={platform.key} className=\"border rounded-lg p-4 bg-white\">\r\n                                    <div className=\"flex items-center justify-between mb-3\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                                <platform.icon className=\"h-4 w-4 text-slate-700\" />\r\n                                            </div>\r\n                                            <h3 className=\"font-medium\">{platform.name}</h3>\r\n                                        </div>\r\n                                        <Badge\r\n                                            className={platform.isConnected ? \"bg-green-100 text-green-700\" : \"bg-amber-100 text-amber-700\"}\r\n                                        >\r\n                                            {platform.isConnected ? \"Connected\" : \"Not Connected\"}\r\n                                        </Badge>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-sm text-slate-600 space-y-2\">\r\n                                        {platform.isConnected ? (\r\n                                            <>\r\n                                                {platform.accountNumber && (\r\n                                                    <div className=\"flex justify-between\">\r\n                                                        <span>Account(s):</span>\r\n                                                        <span className=\"font-medium\">{platform.accountNumber}</span>\r\n                                                    </div>\r\n                                                )}\r\n                                                <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => setActiveTab(platform.key)}>\r\n                                                    View Details\r\n                                                </Button>\r\n                                            </>\r\n                                        ) : (\r\n                                            <Button \r\n                                                variant=\"outline\" \r\n                                                size=\"sm\" \r\n                                                className=\"w-full\"\r\n                                                onClick={() => handleAddAccount(platform.key)}\r\n                                            >\r\n                                                <PlusCircle className=\"h-4 w-4 mr-2\" />\r\n                                                Add {platform.key === 'shopify' ? 'Store' : 'Account'}\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </TabsContent>\r\n\r\n                    {platforms.map((platform) => (\r\n                        <TabsContent key={platform.key} value={platform.key} className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                        <platform.icon className=\"h-5 w-5 text-slate-700\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"font-medium text-lg\">{platform.name}</h3>\r\n                                        <span className=\"text-sm text-slate-500\">\r\n                                            {platform.isConnected ? `Connected to ${platform.accountName}` : \"Not connected\"}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <Badge className={platform.isConnected ? \"bg-green-100 text-green-700\" : \"bg-amber-100 text-amber-700\"}>\r\n                                    {platform.isConnected ? \"Active\" : \"Inactive\"}\r\n                                </Badge>\r\n                            </div>\r\n\r\n                            <div className=\"border rounded-lg p-5 bg-slate-50\">\r\n                                <h4 className=\"font-medium mb-3\">Connection Details</h4>\r\n\r\n                                {platform.isConnected ? (\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                                            <div className=\"space-y-1\">\r\n                                                <p className=\"text-slate-500\">Account Name</p>\r\n                                                <p className=\"font-medium\">{platform.accountName || \"N/A\"}</p>\r\n                                            </div>\r\n                                            <div className=\"space-y-1\">\r\n                                                <p className=\"text-slate-500\">Status</p>\r\n                                                <div className=\"flex items-center gap-1 text-green-600\">\r\n                                                    <CheckCircle className=\"h-4 w-4\" />\r\n                                                    <span>Connected</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-3 mt-4 justify-end\">\r\n                                        {platform.allowMultipleAccounts && ( <Button size={\"sm\"} onClick={() => handleAddAccount(platform.key)}>\r\n                                            <PlusCircle className=\"h-4 w-4 mr-1\" />\r\n                                            Add {platform.key === 'shopify' ? 'Store' : 'Account'}\r\n                                        </Button>)}\r\n                                            <Button variant=\"destructive\" size=\"sm\" className=\"text-white hover:bg-red-800\">\r\n                                                Disconnect\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center gap-2 text-amber-600\">\r\n                                            <XCircle className=\"h-5 w-5\" />\r\n                                            <span>Not connected</span>\r\n                                        </div>\r\n\r\n                                        <div className=\"bg-white p-4 rounded border text-sm\">\r\n                                            <h5 className=\"font-medium mb-2\">Why connect {platform.name}?</h5>\r\n                                            <ul className=\"list-disc pl-5 space-y-1 text-slate-600\">\r\n                                                <li>Get comprehensive analytics across all your marketing channels</li>\r\n                                                <li>Track performance metrics in one dashboard</li>\r\n                                                <li>Generate insights from combined data sources</li>\r\n                                            </ul>\r\n                                        </div>\r\n\r\n                                        <Button className=\"mt-2\" onClick={() => handleAddAccount(platform.key)}>\r\n                                            <PlusCircle className=\"h-4 w-4 mr-2\" />\r\n                                            Add {platform.key === 'shopify' ? 'Store' : 'Account'}\r\n                                        </Button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </TabsContent>\r\n                    ))}\r\n                </Tabs>\r\n            </DialogContent>\r\n            \r\n            {/* Platform Modal for adding accounts */}\r\n            {selectedPlatform && (\r\n                <PlatformModal\r\n                    platform={selectedPlatform === 'googleAds' ? 'Google Ads' : \r\n                              selectedPlatform === 'googleAnalytics' ? 'Google Analytics' : \r\n                              selectedPlatform === 'facebook' ? 'Facebook' : 'Shopify'}\r\n                    open={platformModalOpen}\r\n                    onOpenChange={setPlatformModalOpen}\r\n                    brandId={brandId}\r\n                    onSuccess={handlePlatformModalSuccess}\r\n                />\r\n            )}\r\n        </Dialog>\r\n    )\r\n}","import { useState, useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { Building2, Plus, Settings, Trash2, ShoppingBag, BarChart3, LineChart, Facebook } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { BrandIntegrationModal } from \"./BrandIntegrationModal\"\r\nimport { useSelector , useDispatch } from \"react-redux\"\r\nimport { RootState } from \"@/store\"\r\nimport axios from \"axios\"\r\nimport { baseURL } from \"@/data/constant\"\r\nimport { BrandDetail , FullBrandData } from \"@/interfaces\"\r\nimport { deleteBrand } from \"@/store/slices/BrandSlice\"\r\nimport { removeBrandFromUser } from \"@/store/slices/UserSlice\"\r\n\r\nconst platformIcons = {\r\n    shopify: { \r\n      icon: ShoppingBag, \r\n      name: \"Shopify\" \r\n    },\r\n    googleAds: { \r\n      icon: BarChart3, \r\n      name: \"Google Ads\" \r\n    },\r\n    googleAnalytics: { \r\n      icon: LineChart, \r\n      name: \"Google Analytics\" \r\n    },\r\n    facebook: { \r\n      icon: Facebook, \r\n      name: \"Facebook\" \r\n    }\r\n  }\r\n\r\nexport function BrandCards({ \r\n    userBrands = [] as string[] \r\n  }: { \r\n    userBrands?: string[] \r\n  }) {\r\n  const navigate = useNavigate()\r\n  const [selectedBrand, setSelectedBrand] = useState<{id: string, name: string} | null>(null)\r\n  const [selectedBrandData, setSelectedBrandData] = useState<FullBrandData | null>(null)\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n\r\n  const userBrandDetails: BrandDetail[] = userBrands?.map((brandId: string) => {\r\n    const brand = brands.find((b) => b._id === brandId);\r\n    return brand \r\n      ? { _id: brand._id, name: brand.name }\r\n      : { _id: brandId, name: \"Unknown Brand\" };\r\n  }) || [];\r\n\r\n  useEffect(() => {\r\n    const fetchBrandDetails = async () => {\r\n      if (selectedBrand) {\r\n        try {\r\n          const response = await axios.get(`${baseURL}/api/brands/${selectedBrand.id}`,{withCredentials : true});\r\n          setSelectedBrandData(response.data);\r\n        } catch (error) {\r\n          console.error('Error fetching brand details:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchBrandDetails();\r\n  }, [selectedBrand]);\r\n\r\n  const handleOpenModal = (brand: {id: string, name: string}) => {\r\n    setSelectedBrand(brand)\r\n  }\r\n\r\n  const handleCloseModal = () => {\r\n    setSelectedBrand(null)\r\n    setSelectedBrandData(null)\r\n  }\r\n\r\n  const handleDeleteBrand = async (brandId: string) => {\r\n    try {\r\n      \r\n      await axios.delete(`${baseURL}/api/brands/delete/${brandId}`, { withCredentials: true });\r\n      dispatch(deleteBrand(brandId));\r\n      dispatch(removeBrandFromUser(brandId));\r\n      \r\n    } catch (error) {\r\n      console.error('Error deleting brand:', error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        <Button onClick={() => navigate(\"/brand-setup\")} variant=\"outline\" className=\"text-slate-700\">\r\n          <Plus className=\"h-5 w-5 mr-2\" />\r\n          Add New Brand\r\n        </Button>\r\n\r\n        {userBrandDetails.map((brand) => (\r\n          <div\r\n            key={brand._id}\r\n            className=\"bg-white rounded-lg border border-slate-200 p-5 hover:shadow-md transition-shadow cursor-pointer\"\r\n            onClick={() => handleOpenModal({ id: brand._id, name: brand.name })}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                  <Building2 className=\"h-5 w-5 text-teal-600\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-medium text-slate-900\">{brand.name}</h3>\r\n                  <span className=\"text-sm text-slate-500\">Connected</span>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"text-slate-600\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation()\r\n                  // Handle settings click\r\n                }}\r\n              >\r\n                <Settings className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-slate-600\">Integration Status</span>\r\n                <Badge className=\"bg-teal-100 text-teal-700\">Active</Badge>\r\n              </div>\r\n              <div className=\"flex items-center justify-between\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className=\"text-slate-700\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleOpenModal({ id: brand._id, name: brand.name })\r\n                  }}\r\n                >\r\n                  Manage\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"text-red-600 hover:text-red-700\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleDeleteBrand(brand._id)\r\n                  }}\r\n                >\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedBrand && selectedBrandData && (\r\n        <BrandIntegrationModal\r\n          isOpen={true}\r\n          onClose={handleCloseModal}\r\n          brandId={selectedBrand.id}\r\n          brandName={selectedBrand.name}\r\n          brandData={selectedBrandData}\r\n          platformIcons={platformIcons}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}","import { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Mail,\r\n    Shield,\r\n    HelpCircle,\r\n} from 'lucide-react';\r\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\r\nimport { RootState } from '@/store';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { baseURL } from '@/data/constant';\r\nimport { BrandCards } from './components/BrandCard';\r\n\r\nfunction ProfilePage() {\r\n    const [activeTab, setActiveTab] = useState('brands');\r\n    const user = useSelector((state: RootState) => state.user.user);\r\n    console.log(user?.brands)\r\n\r\n    const handleZohoLogin = async () => {\r\n        try {\r\n          const response = await axios.get(\r\n            `${baseURL}/api/auth/zoho?source=${encodeURIComponent(window.location.pathname)}`\r\n          );\r\n          const { authUrl } = response.data;\r\n     \r\n          window.location.href = authUrl;\r\n        } catch (error) {\r\n          console.error('Error getting Zoho Auth URL:', error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex h-screen\"> \r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n                <div className=\"min-h-screen bg-slate-50\">\r\n                    <div className=\"container mx-auto px-4 py-4\">\r\n                        <div className=\"bg-white rounded-xl shadow-sm\">\r\n                            <div className=\"p-6 border-b border-slate-200\">\r\n                                <div className=\"flex items-start gap-6\">\r\n                                    <div className=\"h-24 w-24 rounded-full bg-slate-100 flex items-center justify-center\">\r\n                                        <span className=\"text-4xl font-bold text-slate-600\">{user?.username[0]}</span>\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <h2 className=\"text-2xl font-semibold text-slate-800\">{user?.username}</h2>\r\n                                            {user?.isAdmin && (\r\n                                                <Badge className=\"bg-teal-100 text-teal-700 px-3 py-1 rounded-full\">\r\n                                                    <Shield className=\"h-4 w-4 mr-1\" />\r\n                                                    Administrator\r\n                                                </Badge>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"mt-4 grid grid-cols-2 gap-4\">\r\n                                            <div className=\"flex items-center gap-2 text-slate-600\">\r\n                                                <Mail className=\"h-4 w-4\" />\r\n                                                <span>{user?.email}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"border-b border-slate-200\">\r\n                                <div className=\"flex px-6\">\r\n                                    {['Brands'].map((tab) => (\r\n                                        <button\r\n                                            key={tab}\r\n                                            onClick={() => setActiveTab(tab.toLowerCase())}\r\n                                            className={`px-6 py-4 font-medium text-sm transition-colors relative ${activeTab === tab.toLowerCase()\r\n                                                ? 'text-teal-600'\r\n                                                : 'text-slate-600 hover:text-slate-900'\r\n                                                }`}\r\n                                        >\r\n                                            {tab}\r\n                                            {activeTab === tab.toLowerCase() && (\r\n                                                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-teal-600\"></div>\r\n                                            )}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {activeTab.toLowerCase() === 'brands' &&\r\n                              <BrandCards userBrands={user?.brands} />\r\n                            }\r\n                            {activeTab.toLowerCase() === \"support\" && user?.isAdmin && (\r\n                                <div className=\"py-8 flex gap-4 items-center justify-center\">\r\n                                    <Button onClick={handleZohoLogin} className=\"bg-teal-600 hover:bg-teal-700\">\r\n                                        <HelpCircle className=\"h-5 w-5 mr-2\" />\r\n                                        Connect Zoho Help Desk\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfilePage;","import { useState, useEffect } from 'react'\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport axios from 'axios'\r\n\r\ninterface ShopifyModalContentProps {\r\n  onConnect?: (platform: string, account: string, accountId: string) => void;\r\n}\r\n\r\nexport default function ShopifyModalContent({ onConnect }: ShopifyModalContentProps) {\r\n  const [storeName, setStoreName] = useState('')\r\n  const [isConnecting, setIsConnecting] = useState(false)\r\n  const baseURL = import.meta.env.PROD? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n  // Check for callback parameters on component mount\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const accessToken = params.get('access_token');\r\n    const shopName = params.get('shop_name');\r\n    const shop = params.get('shop');\r\n\r\n    if (accessToken && shopName && shop) {\r\n      // Call the onConnect function to pass data to parent\r\n      if (onConnect) {\r\n        onConnect('Shopify', shopName, accessToken);\r\n      }\r\n      \r\n      // Clean up URL parameters\r\n      params.delete('access_token');\r\n      params.delete('shop_name');\r\n      params.delete('shop');\r\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\r\n      window.history.replaceState({}, '', newUrl);\r\n    }\r\n  }, [onConnect]);\r\n\r\n  const handleShopifyLogin = async () => {\r\n    if (!storeName.trim()) {\r\n      return;\r\n    }\r\n\r\n    setIsConnecting(true);\r\n    try {\r\n      const response = await axios.post(\r\n        `${baseURL}/api/auth/shopify`, \r\n        { \r\n          shop: storeName, \r\n          flowType: \"brandSetup\" \r\n        }, \r\n        { withCredentials: true }\r\n      );\r\n      \r\n      if (response.data.success) {\r\n        const { authUrl } = response.data;\r\n        console.log('Generated Shopify Auth URL:', authUrl); \r\n        window.location.href = authUrl;\r\n      } else {\r\n        console.error('Failed to get Shopify Auth URL');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Shopify Auth URL:', error);\r\n    } finally {\r\n      setIsConnecting(false);\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"mt-4 space-y-4\">\r\n      <Input\r\n        type=\"text\"\r\n        placeholder=\"Enter your Shopify store name (e.g., mystore)\"\r\n        value={storeName}\r\n        onChange={(e) => setStoreName(e.target.value)}\r\n        onKeyPress={(e) => {\r\n          if (e.key === 'Enter' && storeName.trim()) {\r\n            handleShopifyLogin();\r\n          }\r\n        }}\r\n      />\r\n      <Button \r\n        className=\"w-full\" \r\n        onClick={handleShopifyLogin} \r\n        disabled={!storeName.trim() || isConnecting}\r\n      >\r\n        {isConnecting ? 'Connecting...' : 'Login to Shopify'}\r\n      </Button>\r\n      <p className=\"text-sm text-gray-500 text-center\">\r\n        Enter your store name without .myshopify.com\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Search, Check, X } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Ga4Logo, FacebookLogo, GoogleLogo } from '@/data/logo'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/store'\r\n\r\ninterface OtherPlatformModalContentProps {\r\n  platform: string;\r\n  onConnect: (\r\n    platform: string,\r\n    account: string,\r\n    accountId: string,\r\n    managerId?: string,\r\n  ) => void;\r\n  onRemove?: (platform: string, accountId: string, managerId?: string) => void;\r\n  connectedId: string;\r\n  onOpenChange?: (open: boolean) => void;\r\n}\r\n\r\ninterface GoogleAdsAccount {\r\n  name: string;\r\n  clientId: string;\r\n  managerId?: string;\r\n  hidden?: boolean;\r\n}\r\n\r\ninterface GoogleAnalyticsAccount {\r\n  propertyName: string\r\n  propertyId: string\r\n}\r\n\r\ninterface FacebookAdsAccount {\r\n  adname: string\r\n  id: string\r\n}\r\n\r\nexport default function OtherPlatformModalContent({\r\n  platform,\r\n  onConnect,\r\n  connectedId,\r\n  onRemove,\r\n  onOpenChange\r\n}: OtherPlatformModalContentProps) {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [googleAdsAccounts, setGoogleAdsAccounts] = useState<GoogleAdsAccount[]>([]);\r\n  const [googleAnalyticsAccounts, setGoogleAnalyticsAccounts] = useState<GoogleAnalyticsAccount[]>([]);\r\n  const [facebookAdsAccounts, setFacebookAdsAccounts] = useState<FacebookAdsAccount[]>([]);\r\n  const [showLoginButton, setShowLoginButton] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const baseURL = import.meta.env.PROD ? import.meta.env.VITE_API_URL : import.meta.env.VITE_LOCAL_API_URL\r\n\r\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId);\r\n\r\n  // Check URL parameters for modal opening\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const modalToOpen = params.get('openModal');\r\n    \r\n    if (modalToOpen && onOpenChange) {\r\n      switch (modalToOpen.toLowerCase()) {\r\n        case 'googleads':\r\n          if (platform.toLowerCase() === 'google ads') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n        case 'googleanalytics':\r\n          if (platform.toLowerCase() === 'google analytics') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n        case 'facebook':\r\n          if (platform.toLowerCase() === 'facebook') {\r\n            onOpenChange(true);\r\n          }\r\n          break;\r\n      }\r\n      \r\n      // Remove the modal parameter from URL\r\n      params.delete('openModal');\r\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\r\n      window.history.replaceState({}, '', newUrl);\r\n    }\r\n  }, [platform, onOpenChange]);\r\n\r\n  useEffect(() => {\r\n    const fetchGoogleAdsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n\r\n        const response = await axios.get(\r\n          `${baseURL}/api/setup/google-accounts/${selectedBrandId}`,\r\n   \r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          setGoogleAdsAccounts(\r\n            response.data?.clientAccounts.filter((account: GoogleAdsAccount) => !account.hidden)\r\n          );\r\n        } else {\r\n          console.log('Unexpected status code:', response.status);\r\n        }\r\n      } catch (error) {\r\n        handleError(error);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    const fetchGoogleAnalyticsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n   \r\n        const response = await axios.get(\r\n          `${baseURL}/api/setup/ga4-propertyIds/${selectedBrandId}`,\r\n\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.status === 200) {\r\n          setShowLoginButton(false);\r\n          setGoogleAnalyticsAccounts(response.data.propertiesList || []);\r\n        } else {\r\n          console.log('Unexpected status code:', response.status);\r\n        }\r\n      } catch (error) {\r\n        handleError(error);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    const fetchFacebookAdsAccounts = async () => {\r\n      setLoading(true); // Start loading\r\n      try {\r\n\r\n        const response = await axios.get(\r\n          `${baseURL}/api/setup/fb-ad-accounts/${selectedBrandId}`,\r\n\r\n          { withCredentials: true }\r\n        );\r\n\r\n        setFacebookAdsAccounts(response.data.adAccounts || []);\r\n      } catch (error) {\r\n        handleError(error);\r\n      } finally {\r\n        setLoading(false); // End loading\r\n      }\r\n    };\r\n\r\n    if (platform.toLowerCase() === 'google ads') fetchGoogleAdsAccounts();\r\n    if (platform.toLowerCase() === 'google analytics') fetchGoogleAnalyticsAccounts();\r\n    if (platform.toLowerCase() === 'facebook') fetchFacebookAdsAccounts();\r\n  }, [platform, selectedBrandId]);\r\n\r\n  const handleError = (error: any) => {\r\n    // Axios error handling\r\n    if (axios.isAxiosError(error)) {\r\n      const axiosError = error;\r\n      const { response, request } = axiosError;\r\n\r\n      // If response received from server\r\n      if (response) {\r\n        const { status, data, config } = response;\r\n        const code = data?.error?.code || data?.code;\r\n\r\n        // Common authentication and authorization errors\r\n        const authErrors = [\r\n          401,  // Unauthorized\r\n          403,  // Forbidden\r\n          'UNAUTHENTICATED',\r\n          'TOKEN_EXPIRED',\r\n          'INVALID_CREDENTIALS'\r\n        ];\r\n\r\n        // Check if the error is related to authentication\r\n        const isAuthError = authErrors.some(\r\n          authCode => status === authCode || code === authCode\r\n        );\r\n\r\n        if (isAuthError) {\r\n          console.error('Authentication Error:', { status, code, message: data?.message });\r\n          setShowLoginButton(true);\r\n          return;\r\n        }\r\n\r\n        // Specific Google Ads API error handling\r\n        if (data?.errors && data.errors.length > 0) {\r\n          const googleAdsError = data.errors[0];\r\n          const googleAdsErrorMessage = googleAdsError.message || 'Google Ads API Error';\r\n\r\n          console.error('Google Ads API Error:', googleAdsErrorMessage);\r\n\r\n          // Common Google Ads authentication scenarios\r\n          const googleAuthErrors = [\r\n            'not associated with any Ads accounts',\r\n            'missing required authentication credential',\r\n            'OAuth access token invalid'\r\n          ];\r\n\r\n          const isGoogleAuthError = googleAdsErrorMessage &&\r\n            googleAuthErrors.some(errText =>\r\n              googleAdsErrorMessage.toLowerCase().includes(errText.toLowerCase())\r\n            );\r\n\r\n          if (isGoogleAuthError) {\r\n            setShowLoginButton(true);\r\n            return;\r\n          }\r\n        }\r\n\r\n        // General server error handling\r\n        console.error('Server Error:', {\r\n          status,\r\n          url: config?.url,\r\n          method: config?.method\r\n        });\r\n        setShowLoginButton(true);\r\n\r\n      }\r\n      // No response received\r\n      else if (request) {\r\n        console.error('No response received:', request);\r\n        setShowLoginButton(true);\r\n      }\r\n      // Network or other axios error\r\n      else {\r\n        console.error('Request Setup Error:', axiosError.message);\r\n        setShowLoginButton(true);\r\n      }\r\n    }\r\n    // Non-axios error handling\r\n    else {\r\n      console.error('Unexpected Error:', error);\r\n      setShowLoginButton(true);\r\n    }\r\n  };\r\n\r\n\r\n  const filteredAccounts = () => {\r\n    if (platform.toLowerCase() === 'google ads') {\r\n      if (!googleAdsAccounts || googleAdsAccounts.length === 0) {\r\n        return null;\r\n      }\r\n      return googleAdsAccounts.filter((account) =>\r\n        account.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else if (platform.toLowerCase() === 'google analytics') {\r\n      if (!googleAnalyticsAccounts || googleAnalyticsAccounts.length === 0) {\r\n        return null;\r\n      }\r\n      return googleAnalyticsAccounts.filter((account) =>\r\n        account.propertyName.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else if (platform.toLowerCase() === 'facebook') {\r\n      if (!facebookAdsAccounts || facebookAdsAccounts.length === 0) {\r\n        return null; // Return null if there are no Facebook Ads accounts\r\n      }\r\n      return facebookAdsAccounts.filter((account) =>\r\n        account.adname.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleConnect = (account: GoogleAdsAccount | GoogleAnalyticsAccount | FacebookAdsAccount) => {\r\n    let accountId: string;\r\n    let displayName: string;\r\n    let managerId: string | undefined;\r\n\r\n    if ('clientId' in account) {\r\n      accountId = account.clientId;\r\n      managerId = account.managerId;\r\n\r\n      // Include manager ID in the display name if available\r\n      displayName = managerId\r\n        ? `${account.name} (${accountId}/${managerId})`\r\n        : `${account.name} (${accountId})`;\r\n    } else if ('propertyId' in account) {\r\n      accountId = account.propertyId;\r\n      displayName = `${account.propertyName} (${accountId})`;\r\n    } else if ('id' in account) {\r\n      accountId = account.id;\r\n      displayName = `${account.adname}`;\r\n    } else { \r\n      accountId = '';\r\n      displayName = '';\r\n    }\r\n\r\n    onConnect(platform, displayName, accountId, managerId);\r\n  };\r\n\r\n  const handleGoogleAdLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/google?context=googleAdSetup&source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      const { authUrl } = response.data;\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const handleGoogleAnalyticsLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/google?context=googleAnalyticsSetup&source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      const { authUrl } = response.data;\r\n      window.location.href = authUrl;\r\n    } catch (error) {\r\n      console.error('Error getting Google Auth URL:', error);\r\n    }\r\n  };\r\n\r\n  const handleFbLogin = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${baseURL}/api/auth/facebook?source=${encodeURIComponent(window.location.pathname)}`, \r\n        { withCredentials: true }\r\n      );\r\n      if (response.data.success) {\r\n        window.location.href = response.data.authURL;\r\n      } else {\r\n        console.error('Failed to get Facebook Auth URL');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error getting Facebook Auth URL:', error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    loading ? <div>Loading...</div> : (\r\n      <>\r\n        {showLoginButton ? (\r\n          <Button\r\n          size=\"sm\"\r\n          onClick={platform.toLowerCase() === 'facebook' ? handleFbLogin : platform.toLowerCase()=== 'google ads' ? handleGoogleAdLogin : handleGoogleAnalyticsLogin}\r\n          className=\"flex items-center gap-2 bg-white text-black border border-green-800 hover:bg-green-50\"\r\n        >\r\n            {platform.toLowerCase() === 'google ads' && (\r\n              <>\r\n                <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your Google Ads account\r\n              </>\r\n            )}\r\n            {platform.toLowerCase() === 'google analytics' && (\r\n              <>\r\n                <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your GA4 account\r\n              </>\r\n            )}\r\n            {platform.toLowerCase() === 'facebook' && (\r\n              <>\r\n                <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                Connect to your Facebook account\r\n              </>\r\n            )}\r\n          </Button>\r\n        ) : (\r\n          // Handle the case where the button is not shown\r\n          <>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Search accounts...\"\r\n                className=\"pl-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"max-h-[50vh] overflow-auto\">\r\n              {filteredAccounts()?.map((account) => {\r\n                // Extract platform-specific details\r\n                const isGoogleAds = platform.toLowerCase() === 'google ads';\r\n                const isFacebook = platform.toLowerCase() === 'facebook';\r\n                // const isGoogleAnalytics = platform.toLowerCase() === 'google analytics';\r\n\r\n                const accountId = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).clientId\r\n                  : isFacebook\r\n                    ? (account as FacebookAdsAccount).id\r\n                    : (account as GoogleAnalyticsAccount).propertyId;\r\n\r\n                const managerId = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).managerId\r\n                  : undefined;\r\n\r\n                const accountName = isGoogleAds\r\n                  ? (account as GoogleAdsAccount).name\r\n                  : isFacebook\r\n                    ? (account as FacebookAdsAccount).adname\r\n                    : (account as GoogleAnalyticsAccount).propertyName;\r\n\r\n                const platformLogo = isGoogleAds ? (\r\n                  <GoogleLogo height=\"1rem\" width=\"1rem\" />\r\n                ) : isFacebook ? (\r\n                  <FacebookLogo height=\"1rem\" width=\"1rem\" />\r\n                ) : (\r\n                  <Ga4Logo height=\"1rem\" width=\"1rem\" />\r\n                );\r\n\r\n                // Create display text based on account type\r\n                const displayText = isGoogleAds && managerId\r\n                  ? `${accountName} (${accountId}/${managerId})`\r\n                  : isFacebook\r\n                    ? `${accountName}`\r\n                    : `${accountName} (${accountId})`;\r\n\r\n                return (\r\n                  <div\r\n                    key={`${platform}-${accountId}-${managerId || \"\"}`}\r\n                    className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\"\r\n                  >\r\n                    <span>\r\n                      <div className=\"flex flex-row items-center gap-3\">\r\n                        {platformLogo}\r\n                        {displayText}\r\n                      </div>\r\n                    </span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {connectedId && onRemove && (\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"destructive\"\r\n                          onClick={() => onRemove(\r\n                            platform,\r\n                            accountId,\r\n                            platform.toLowerCase() === 'google ads' ? managerId : undefined\r\n                          )}\r\n                          className=\"flex items-center\"\r\n                        >\r\n                          <X className=\"h-4 w-4 mr-1\" /> Remove\r\n                        </Button>\r\n                      )}\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={() => handleConnect(account)}\r\n                        disabled={connectedId.includes(accountId)}\r\n                        className={connectedId.includes(accountId) ? \"bg-green-600\" : \"bg-blue-600\"}\r\n                      >\r\n                        {connectedId.includes(accountId) && <Check className=\"h-4 w-4 mr-2\" />}\r\n                        {connectedId.includes(accountId) ? 'Connected' : 'Connect'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </>\r\n        )}\r\n      </>\r\n    )\r\n  );\r\n}","import { useState, useEffect } from \"react\"\r\nimport { Check, ArrowRight, Building2, ChevronRight } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent } from \"@/components/ui/card\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport ShopifyModalContent from \"./ShopifyModalContent\"\r\nimport OtherPlatformModalContent from \"./OtherPlatformModalContent\"\r\nimport { FacebookLogo, GoogleLogo, Ga4Logo, ShopifyLogo } from \"@/data/logo\"\r\nimport { baseURL } from \"@/data/constant\"\r\nimport axios from \"axios\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { RootState } from \"@/store\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { setUser } from \"@/store/slices/UserSlice\"\r\nimport { setBrandFormData, clearBrandFormData } from \"@/store/slices/BrandFormSlice\"\r\nimport { setSelectedBrandId } from \"@/store/slices/BrandSlice\"\r\nimport { useBrandRefresh } from '@/hooks/useBrandRefresh';\r\n\r\nconst platforms = [\r\n  {\r\n    name: \"Shopify\",\r\n    color: \"bg-emerald-50\",\r\n    icon: ShopifyLogo,\r\n    textColor: \"text-emerald-700\",\r\n    ringColor: \"ring-emerald-200\",\r\n    description: \"Connect your e-commerce store\",\r\n  },\r\n  {\r\n    name: \"Facebook\",\r\n    color: \"bg-blue-50\",\r\n    icon: FacebookLogo,\r\n    textColor: \"text-blue-700\",\r\n    ringColor: \"ring-blue-200\",\r\n    description: \"Link your ad accounts\",\r\n  },\r\n  {\r\n    name: \"Google Ads\",\r\n    color: \"bg-rose-50\",\r\n    icon: GoogleLogo,\r\n    textColor: \"text-rose-700\",\r\n    ringColor: \"ring-rose-200\",\r\n    description: \"Import campaign data\",\r\n  },\r\n  {\r\n    name: \"Google Analytics\",\r\n    color: \"bg-yellow-50\",\r\n    icon: Ga4Logo,\r\n    textColor: \"text-yellow-700\",\r\n    ringColor: \"ring-yellow-200\",\r\n    description: \"Track website metrics\",\r\n  },\r\n]\r\n\r\nexport default function BrandSetup() {\r\n  const [openModal, setOpenModal] = useState<string | null>(null)\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { toast } = useToast()\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const selectedBrandId = useSelector((state: RootState) => state.brand.selectedBrandId)\r\n  \r\n  const formData = useSelector((state: RootState) => state.brandForm)\r\n  const [brandName, setBrandName] = useState(formData.brandName || \"\")\r\n  const [connectedAccounts, setConnectedAccounts] = useState<Record<string, string[]>>(formData.connectedAccounts || {})\r\n  const [googleAdsConnections, setGoogleAdsConnections] = useState<{\r\n    clientId: string\r\n    managerId?: string\r\n  }[]>(formData.googleAdsConnections || [])\r\n  const [ga4Id, setGa4Id] = useState<string>(formData.ga4Id || \"\")\r\n  const [fbAdId, setFBAdId] = useState<string[]>(formData.fbAdId || [])\r\n  const [shop, setShop] = useState<string>(formData.shop || \"\")\r\n  const [shopifyAccessToken, setShopifyAccessToken] = useState(formData.shopifyAccessToken || \"\")\r\n  const [isCreatingBrand, setIsCreatingBrand] = useState(false)\r\n  const [newlyCreatedBrandId, setNewlyCreatedBrandId] = useState<string | null>(null)\r\n  const { refreshBrands } = useBrandRefresh();\r\n\r\n  // Clear selectedBrandId when component mounts for new brand creation\r\n  // This ensures users with existing brands can create a new brand without the input being disabled\r\n  useEffect(() => {\r\n    // Clear selectedBrandId when starting a new brand setup (this page is for creating new brands)\r\n    dispatch(setSelectedBrandId(null));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search)\r\n    const accessToken = params.get(\"access_token\")\r\n    const shopName = params.get(\"shop_name\")\r\n\r\n    if (accessToken && shopName) {\r\n      setShopifyAccessToken(accessToken)\r\n      setShop(shopName)\r\n      setConnectedAccounts((prev) => ({\r\n        ...prev,\r\n        Shopify: [shopName],\r\n      }))\r\n    }\r\n  }, [])\r\n\r\n  \r\n  useEffect(() => {\r\n    dispatch(setBrandFormData({\r\n      brandName,\r\n      connectedAccounts,\r\n      googleAdsConnections,\r\n      ga4Id,\r\n      fbAdId,\r\n      shop,\r\n      shopifyAccessToken\r\n    }))\r\n  }, [brandName, connectedAccounts, googleAdsConnections, ga4Id, fbAdId, shop, shopifyAccessToken, dispatch])\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const modalToOpen = params.get('openModal');\r\n    \r\n    if (modalToOpen) {\r\n      switch (modalToOpen.toLowerCase()) {\r\n        case 'googleads':\r\n          setOpenModal('Google Ads');\r\n          break;\r\n        case 'googleanalytics':\r\n          setOpenModal('Google Analytics');\r\n          break;\r\n        case 'facebook':\r\n          setOpenModal('Facebook');\r\n          break;\r\n      }\r\n      \r\n      params.delete('openModal');\r\n      const newUrl = `${window.location.pathname}${params.toString() ? `?${params.toString()}` : ''}`;\r\n      window.history.replaceState({}, '', newUrl);\r\n    }\r\n  }, []);\r\n\r\n  const handleConnect = (platform: string, account: string, accountId: string, managerId?: string) => {\r\n    setConnectedAccounts((prev) => ({\r\n      ...prev,\r\n      [platform]: [...(prev[platform] || []), account],\r\n    }))\r\n\r\n    if (platform.toLowerCase() === \"google ads\") {\r\n      setGoogleAdsConnections((prev) => [\r\n        ...prev,\r\n        {\r\n          clientId: accountId,\r\n          managerId: managerId,\r\n        },\r\n      ])\r\n    } else if (platform.toLowerCase() === \"google analytics\") {\r\n      setGa4Id(accountId)\r\n    } else if (platform.toLowerCase() === \"facebook\") {\r\n      setFBAdId((prev) => [...prev, accountId])\r\n    } else if (platform.toLowerCase() === \"shopify\") {\r\n      // For Shopify, accountId is the access token, account is the shop name\r\n      setShopifyAccessToken(accountId)\r\n      setShop(account) // account here is the shop name\r\n    }\r\n\r\n    toast({ description: `Successfully connected ${account} to ${platform}`, variant: \"default\" })\r\n  }\r\n\r\n  const isConnected = (platform: string) => {\r\n    return (connectedAccounts[platform]?.length || 0) > 0\r\n  }\r\n\r\n  const getConnectedId = (platformName: string): string => {\r\n    switch (platformName.toLowerCase()) {\r\n      case \"google ads\":\r\n        return googleAdsConnections.map((conn) => conn.clientId).join(\",\")\r\n      case \"google analytics\":\r\n        return ga4Id\r\n      case \"facebook\":\r\n        return fbAdId.join(\",\")\r\n      default:\r\n        return \"\"\r\n    }\r\n  }\r\n\r\n  const canCreateBrand = () => {\r\n    return !!brandName.trim()\r\n  }\r\n\r\n  const canSubmit = () => {\r\n    return !!newlyCreatedBrandId && Object.keys(connectedAccounts).length > 0\r\n  }\r\n\r\n  const handleCreateBrand = async () => {\r\n    if (!brandName.trim()) {\r\n      toast({ description: 'Please enter a brand name', variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    setIsCreatingBrand(true);\r\n    try {\r\n      // Create a basic brand first\r\n      const payload = {\r\n        name: brandName,\r\n        googleAdAccount: [],\r\n        ga4Account: {},\r\n        fbAdAccounts: [],\r\n        shopifyAccount: {}\r\n      };\r\n\r\n      const brandResponse = await axios.post(\r\n        `${baseURL}/api/brands/add`,\r\n        payload,\r\n        { withCredentials: true }\r\n      );\r\n\r\n      const newBrandId = brandResponse.data.brand._id;\r\n\r\n      // Set the newly created brand as selected\r\n      dispatch(setSelectedBrandId(newBrandId));\r\n      setNewlyCreatedBrandId(newBrandId);\r\n\r\n      // Add the brand to user\r\n      if (user) {\r\n        await axios.post(\r\n          `${baseURL}/api/users/add-brand`,\r\n          {\r\n            userId: user?.id,\r\n            brandId: newBrandId\r\n          },\r\n          { withCredentials: true }\r\n        );\r\n\r\n        // Update local user state to include the new brand\r\n        const updatedUser = {\r\n          ...user,\r\n          brands: [...user.brands, newBrandId]\r\n        };\r\n        dispatch(setUser(updatedUser));\r\n      }\r\n\r\n      toast({ description: 'Brand created successfully! Now you can connect platforms.', variant: \"default\" });\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast({ description: 'Error creating brand. Please try again.', variant: \"destructive\" });\r\n    } finally {\r\n      setIsCreatingBrand(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const brandIdToUpdate = newlyCreatedBrandId || selectedBrandId;\r\n    \r\n    if (!brandIdToUpdate) {\r\n      toast({ description: 'Please create a brand first', variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Update the existing brand with platform connections\r\n      const payload = {\r\n        googleAdAccount: googleAdsConnections.map(connection => ({\r\n          clientId: connection.clientId,\r\n          managerId: connection.managerId || ''\r\n        })),\r\n        ga4Account: { PropertyID: ga4Id || '' },\r\n        fbAdAccounts: fbAdId.map((accountId) => accountId),\r\n        shopifyAccount: { shopName: shop || '', shopifyAccessToken: shopifyAccessToken || '' }\r\n      };\r\n\r\n      await axios.patch(\r\n        `${baseURL}/api/brands/update/${brandIdToUpdate}`,\r\n        payload,\r\n        { withCredentials: true }\r\n      );\r\n      \r\n   \r\n  \r\n        // Clear form data from Redux after successful submission\r\n        dispatch(clearBrandFormData());\r\n        \r\n        // Refresh the brands list to show the new brand\r\n        await refreshBrands();\r\n        \r\n        // Redirect to dashboard after successful brand setup\r\n        navigate('/dashboard');\r\n      \r\n\r\n      toast({ description: 'Brand setup completed successfully!', variant: \"default\" });\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast({ description: 'Error updating brand. Please try again.', variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mx-auto max-w-7xl shadow-lg\">\r\n      <CardContent className=\"p-6\">\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"rounded-full bg-primary/10 p-2\">\r\n              <Building2 className=\"h-6 w-6 text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">Brand Setup</h2>\r\n              <p className=\"text-gray-500\">Enter your brand details and connect your platforms</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Brand Name */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"brandName\" className=\"text-sm font-medium text-gray-700\">\r\n              Brand Name\r\n            </Label>\r\n            <div className=\"flex gap-2\">\r\n              <Input\r\n                id=\"brandName\"\r\n                placeholder=\"Enter your brand name\"\r\n                value={brandName}\r\n                onChange={(e) => setBrandName(e.target.value)}\r\n                className=\"flex-1\"\r\n                disabled={!!newlyCreatedBrandId}\r\n              />\r\n              {!newlyCreatedBrandId && (\r\n                <Button \r\n                  onClick={handleCreateBrand}\r\n                  disabled={!canCreateBrand() || isCreatingBrand}\r\n                  className=\"px-6\"\r\n                >\r\n                  {isCreatingBrand ? 'Creating...' : 'Create Brand'}\r\n                </Button>\r\n              )}\r\n            </div>\r\n            {newlyCreatedBrandId && brandName && (\r\n              <p className=\"text-sm text-green-600 font-medium\">\r\n                 Brand \"{brandName}\" created successfully! You can now connect platforms.\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Platform Connections */}\r\n          <div className=\"space-y-3\">\r\n            <Label className=\"text-sm font-medium text-gray-700\">Connect Platforms</Label>\r\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n              {platforms.map((platform) => (\r\n                <Dialog\r\n                  key={platform.name}\r\n                  open={openModal === platform.name}\r\n                  onOpenChange={(isOpen) => setOpenModal(isOpen ? platform.name : null)}\r\n                >\r\n                  <DialogTrigger asChild>\r\n                    <button\r\n                      className={`relative group p-6 rounded-xl ${platform.color} ring-1 ${platform.ringColor} transition-all duration-200 hover:scale-[1.02] w-full text-left ${\r\n                        !newlyCreatedBrandId ? 'opacity-50 cursor-not-allowed' : ''\r\n                      }`}\r\n                      disabled={!newlyCreatedBrandId}\r\n                    >\r\n                      <div className=\"flex items-start gap-4\">\r\n                        <platform.icon width=\"2rem\" height=\"2rem\" />\r\n                        <div className=\"flex-1\">\r\n                          <h3 className={`font-semibold ${platform.textColor}`}>{platform.name}</h3>\r\n                          <p className=\"text-sm text-gray-600 mt-1\">\r\n                            {!newlyCreatedBrandId ? 'Create a brand first to connect platforms' : platform.description}\r\n                          </p>\r\n                        </div>\r\n                        {isConnected(platform.name) ? (\r\n                          <Check className=\"h-5 w-5 text-green-500\" />\r\n                        ) : (\r\n                          <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  </DialogTrigger>\r\n                  <DialogContent className=\"sm:max-w-[600px]\">\r\n                    <DialogHeader>\r\n                      <DialogTitle>Connect to {platform.name}</DialogTitle>\r\n                      <DialogDescription>\r\n                        {platform.name === \"Shopify\"\r\n                          ? \"Enter your Shopify store name and login to connect.\"\r\n                          : \"Select an account to connect with your brand.\"}\r\n                      </DialogDescription>\r\n                    </DialogHeader>\r\n                    {platform.name === \"Shopify\" ? (\r\n                      <ShopifyModalContent onConnect={handleConnect} />\r\n                    ) : (\r\n                      <OtherPlatformModalContent\r\n                        platform={platform.name}\r\n                        onConnect={handleConnect}\r\n                        connectedId={getConnectedId(platform.name)}\r\n                      />\r\n                    )}\r\n                  </DialogContent>\r\n                </Dialog>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Connected Accounts Summary */}\r\n          {Object.keys(connectedAccounts).length > 0 && (\r\n            <div className=\"rounded-lg bg-gray-50 p-4\">\r\n              <h3 className=\"font-medium text-gray-900 mb-3\">Connected Platforms</h3>\r\n              <div className=\"space-y-2\">\r\n                {Object.entries(connectedAccounts).map(([platform, accounts]) => (\r\n                  <div key={platform} className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">{platform}</span>\r\n                    <span className=\"font-medium\">{accounts.join(\", \")}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <Button className=\"w-full\" disabled={!canSubmit()} onClick={handleSubmit}>\r\n            {!newlyCreatedBrandId ? 'Create Brand First' : 'Complete Setup'}\r\n            <ArrowRight className=\"ml-2 h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n","import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n","import { useSelector } from \"react-redux\"\r\nimport type { RootState } from \"@/store\"\r\nimport {  Sparkles , CircleCheckBig } from \"lucide-react\"\r\nimport { setupSteps } from \"@/data/constant\"\r\n\r\nimport CollapsibleSidebar from \"../../components/dashboard_component/CollapsibleSidebar\"\r\nimport BrandSetup from \"./components/BrandForm\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\n\r\nexport default function BrandSetupDashboard() {\r\n  const user = useSelector((state: RootState) => state.user.user)\r\n  const name = user?.username || \"user\"\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-50\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <div className=\"container mx-auto p-4 max-w-7xl\">\r\n          <div className=\"mb-6 rounded-xl overflow-hidden shadow-lg relative\">\r\n            <div className=\"absolute inset-0\">\r\n              <img src=\"/abstract-layout.jpg\" alt=\"Background\" className=\"w-full h-full object-cover\" />\r\n              <div className=\"absolute inset-0 bg-black/60\"></div>\r\n            </div>\r\n            <div className=\"relative z-10 p-8 md:p-12\">\r\n              <div className=\"max-w-3xl\">\r\n                <div className=\"text-white\">\r\n                  <div className=\"flex items-center gap-2 mb-4\">\r\n                    <Sparkles className=\"h-5 w-5 text-yellow-300\" />\r\n                    <span className=\"font-medium\">Getting Started</span>\r\n                  </div>\r\n                  <h1 className=\"text-3xl md:text-4xl font-bold mb-3 tracking-tight\">Welcome to Parallels, {name}!</h1>\r\n                  <p className=\"text-white/90 text-lg max-w-2xl\">\r\n                    Set up your brand to start tracking analytics across your marketing platforms. Connect your accounts\r\n                    to get comprehensive insights all in one place.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n            <div className=\"lg:col-span-3\">\r\n              <BrandSetup />\r\n            </div>\r\n            <div className=\"lg:col-span-1 space-y-6\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-lg font-semibold\">Setup Steps</CardTitle>\r\n                  <CardDescription>Complete these steps to get started</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {setupSteps.map((step, index) => (\r\n                    <div key={step.id} className=\"group\">\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div className=\"rounded-full bg-gray-100 p-1.5 flex-shrink-0 text-gray-600 group-hover:bg-primary/10 group-hover:text-primary transition-colors\">\r\n                          <step.icon className=\"h-4 w-4\" />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                          <h3 className=\"font-medium text-sm\">{step.title}</h3>\r\n                          <p className=\"text-xs text-gray-500\">{step.description}</p>\r\n                        </div>\r\n                      </div>\r\n                      {index < setupSteps.length - 1 && (\r\n                        <div className=\"ml-3 pl-3 border-l border-gray-200 h-4 my-1\"></div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-lg font-semibold text-blue-800\">Pro Tips</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-3 text-sm\">\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"rounded-full bg-blue-100 p-1 text-blue-600 flex-shrink-0\">\r\n                      <CircleCheckBig width={14} height={14}/>\r\n                      </div>\r\n                      <span className=\"text-blue-700\">\r\n                        Connect multiple platforms for comprehensive analytics across all your marketing channels.\r\n                      </span>\r\n                    </li>\r\n                    <Separator className=\"my-2 bg-blue-100\" />\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"rounded-full bg-blue-100 p-1 text-blue-600 flex-shrink-0\">\r\n                      <CircleCheckBig width={14} height={14}/>\r\n                      </div>\r\n                      <span className=\"text-blue-700\">\r\n                        Your data will be automatically synced and updated every 3 hours.\r\n                      </span>\r\n                    </li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export interface TutorialStep {\r\n    element: string;\r\n    popover: {\r\n        title: string;\r\n        description: string;\r\n        position?: 'top' | 'bottom' | 'left' | 'right' | 'auto';\r\n    };\r\n}\r\n\r\nexport interface TutorialDefinition {\r\n    id: string;\r\n    title: string;\r\n    description?: string;\r\n    route: string | RegExp;  // The route where this tutorial is applicable\r\n    componentId?: string; // Component identifier (optional)\r\n    steps?: TutorialStep[]; // Steps can be defined here or in the steps map\r\n    relatedTutorials?: string[]; // IDs of tutorials that should run after this one\r\n    priority?: number; // Higher priority tutorials will run first (default: 0)\r\n}\r\n\r\n// List of all available tutorials\r\nexport const availableTutorials: TutorialDefinition[] = [\r\n    {\r\n        id: 'business-performance',\r\n        title: 'Business Performance',\r\n        route: '/dashboard',\r\n        description: 'Period wise Metrics Performance',\r\n    },\r\n    {\r\n        id: 'report-tab',\r\n        title: 'Report Tab',\r\n        route: /^\\/conversion-reports\\/[a-zA-Z0-9]+\\/demographics$/,\r\n        description: 'Choose the Reports you want. Tap one any of the report and you will redirect to that report',\r\n        priority: 2, // Higher priority - will run first,\r\n        relatedTutorials:['age-conversion-report']\r\n    },\r\n    {\r\n        id: 'age-conversion-report',\r\n        title: 'Age Conversion Report',\r\n        description: 'Understanding the age conversion report',\r\n        route: /^\\/conversion-reports\\/[a-zA-Z0-9]+\\/demographics$/,\r\n        componentId: 'age-report',\r\n        priority: 1, \r\n    },\r\n    { \r\n        id: 'marketing-insights',\r\n        title: 'Marketing Insights',\r\n        description: 'Understanding the marketing insights iver different months',\r\n        route: /^\\/ad-metrics\\/[a-zA-Z0-9]+$/,\r\n    }\r\n];\r\n\r\n// Map tutorial steps by tutorial ID\r\nexport const tutorialStepsMap: Record<string, TutorialStep[]> = {\r\n'business-performance': [\r\n    {\r\n        element: '#analytics-section',\r\n        popover: {\r\n            title: 'Analytics Overview',\r\n            description: 'This section provides key business metrics such as Sessions, Cart Additions, Checkouts, and Purchases.',\r\n            position: 'top'\r\n        }\r\n    },\r\n    {\r\n        element: '#sessions-metric',\r\n        popover: {\r\n            title: 'Sessions Overview',\r\n            description: `This section shows the total number of sessions on your website:\\n\r\n            - Yesterday: Displays the total sessions for yesterday and its comparison to the previous day.\\n\r\n            - Last 7 Days: Aggregates data for the last 7 days and compares it with the previous 7-day period.\\n\r\n            - Last 30 Days: Shows trends over the last month, compared with the previous 30-day period.`,\r\n            position: 'bottom'\r\n        }\r\n    }\r\n]\r\n,\r\n    'report-tab':[\r\n        {\r\n            element: '#report-tab',\r\n            popover: {\r\n                title: 'Report Tab',\r\n                description: 'Choose the Reports you want. Tap one any of the report and you will redirect to that report',\r\n                position: 'bottom'\r\n            }\r\n        },\r\n    ],\r\n    'age-conversion-report': [\r\n        {\r\n            element: '#age-report',\r\n            popover: {\r\n                title: 'Age based Report',\r\n                description: 'Review detailed monthly conversion numbers for each age group here.',\r\n                position: 'top'\r\n            }\r\n        },\r\n        {\r\n            element: '#age-report-performance',\r\n            popover: {\r\n                title: 'Key Performers',\r\n                description: 'These metrics highlight your best and worst performing age segments.',\r\n                position: 'left'\r\n            }\r\n        },\r\n        {\r\n            element: '#age-report-table',\r\n            popover: {\r\n                title: 'Detailed Data',\r\n                description: 'Analyze session counts, conversion rates, and purchase trends for different age groups over time.',\r\n                position: 'top'\r\n            }\r\n        },\r\n        {\r\n            element: \"#refresh\",\r\n            popover: {\r\n                title: \"Refresh for Updated Values\",\r\n                description: \"Refresh to see the latest performance metrics for different age segments\",\r\n                position: 'bottom',\r\n            },\r\n        },\r\n        {\r\n            element: \"#filters\",\r\n            popover: {\r\n                title: \"Filter Your Data\",\r\n                description:\r\n                    \"Use filters to refine your data by selecting a metric, condition, and value. Click 'Add Filter' to apply.\",\r\n                position: \"bottom\",\r\n            },\r\n        },\r\n        {\r\n            element: \"#download-button\",\r\n            popover: {\r\n                title: \"Download Your Excel Report\",\r\n                description: \"Click to download the report as an Excel file for further analysis.\",\r\n                position: \"bottom\",\r\n            }\r\n        },\r\n        {\r\n            element: \"#expand-button\",\r\n            popover: {\r\n                title: \"Expand the Table for a Better View\",\r\n                description: \"Click to enlarge the table for easier data analysis and readability.\",\r\n                position: \"bottom\",\r\n            }\r\n        }\r\n    ],\r\n    'marketing-insights': [\r\n        {\r\n            element: '#metrics-table',\r\n            popover: {\r\n                title: 'Monthly Performance Overview',\r\n                description: 'This table displays key performance metrics for each month over the last two years, including ad spend, sales, and ROAS for Meta, Google, and Shopify.',\r\n                position: 'left'\r\n            }\r\n        },\r\n        {\r\n            element: '#expand-month',\r\n            popover: {\r\n                title: 'Expand to View Daily Breakdown',\r\n                description: 'Click on a month to expand and see the daily breakdown of ad performance metrics.',\r\n                position: 'top'\r\n            }\r\n        }\r\n    ],\r\n    // Define more tutorial steps as needed\r\n};\r\n\r\n// Helper to get all tutorials for a given path\r\nexport const getTutorialsForPath = (path: string): TutorialDefinition[] => {\r\n    return availableTutorials\r\n        .filter(tutorial => {\r\n            if (typeof tutorial.route === 'string') {\r\n                return tutorial.route === path;\r\n            } else {\r\n                return tutorial.route.test(path);\r\n            }\r\n        })\r\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\r\n};\r\n\r\n// Helper to get tutorial steps by tutorial ID\r\nexport const getTutorialSteps = (tutorialId: string): TutorialStep[] => {\r\n    const tutorial = getTutorialById(tutorialId);\r\n\r\n    // If tutorial has steps defined in its definition, use those\r\n    if (tutorial?.steps && tutorial.steps.length > 0) {\r\n        return tutorial.steps;\r\n    }\r\n\r\n    // Otherwise check the steps map\r\n    return tutorialStepsMap[tutorialId] || [];\r\n};\r\n\r\n// Helper to get a specific tutorial by ID\r\nexport const getTutorialById = (id: string): TutorialDefinition | undefined => {\r\n    return availableTutorials.find(tutorial => tutorial.id === id);\r\n};\r\n\r\n// Helper to get related tutorials (tutorials that should run after this one)\r\nexport const getRelatedTutorials = (tutorialId: string): string[] => {\r\n    const tutorial = getTutorialById(tutorialId);\r\n    return tutorial?.relatedTutorials || [];\r\n};\r\n\r\n// Helper to get component-specific tutorials for a path\r\nexport const getComponentTutorials = (path: string, componentId: string): TutorialDefinition[] => {\r\n    return availableTutorials\r\n        .filter(tutorial => {\r\n            const routeMatches = typeof tutorial.route === 'string'\r\n                ? tutorial.route === path\r\n                : tutorial.route.test(path);\r\n\r\n            return routeMatches && tutorial.componentId === componentId;\r\n        })\r\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0)); // Sort by priority\r\n};\r\n\r\n// Helper to get all tutorials for the current path in the correct order\r\nexport const getAllTutorialsForPath = (path: string): TutorialDefinition[] => {\r\n    // Get tutorials that match the current path\r\n    const pageTutorials = getTutorialsForPath(path);\r\n    \r\n    // Sort them by priority (higher priority first)\r\n    const sortedTutorials = [...pageTutorials].sort((a, b) => \r\n        (b.priority || 0) - (a.priority || 0)\r\n    );\r\n    \r\n    // Create a map to store unique tutorials\r\n    const tutorialMap = new Map<string, TutorialDefinition>();\r\n    \r\n    // Process a tutorial and its related tutorials\r\n    const processTutorial = (tutorial: TutorialDefinition) => {\r\n        // Skip if already processed\r\n        if (tutorialMap.has(tutorial.id)) {\r\n            return;\r\n        }\r\n        \r\n        // Add the tutorial to our map\r\n        tutorialMap.set(tutorial.id, tutorial);\r\n        \r\n        // Process related tutorials\r\n        if (tutorial.relatedTutorials && tutorial.relatedTutorials.length > 0) {\r\n            for (const relatedId of tutorial.relatedTutorials) {\r\n                const relatedTutorial = getTutorialById(relatedId);\r\n                if (relatedTutorial) {\r\n                    processTutorial(relatedTutorial);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    \r\n    // Process all tutorials\r\n    for (const tutorial of sortedTutorials) {\r\n        processTutorial(tutorial);\r\n    }\r\n    \r\n    // Convert map to array, preserving the original priority order\r\n    const result = Array.from(tutorialMap.values());\r\n    \r\n    // Add debugging log\r\n    console.log('Available tutorials:', result.map(t => t.id).join(', '));\r\n    \r\n    return result;\r\n};\r\n\r\n// Create a route map for quick lookup\r\nexport const tutorialRouteMap: Record<string, string | RegExp> = {};\r\navailableTutorials.forEach(tutorial => {\r\n    tutorialRouteMap[tutorial.id] = tutorial.route;\r\n});","import React,{ useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { RootState } from '@/store';\r\nimport { setFirstTimeLogin, queueTutorials, completeFirstTimeLogin } from '@/store/slices/TutorialSlice';\r\nimport { getAllTutorialsForPath } from './TutorialConfig';\r\n\r\ninterface TutorialManagerProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst TutorialManager: React.FC<TutorialManagerProps> = ({ children }) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const currentPath = location.pathname;\r\n  \r\n  const isFirstTimeLogin = useSelector((state: RootState) => state.tutorials.isFirstTimeLogin);\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  \r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n  const tutorialQueue = useSelector((state: RootState) => state.tutorials.tutorialQueue);\r\n  const activeTutorial = useSelector((state: RootState) => state.tutorials.activeTutorial);\r\n\r\n  // Track if we've already started tutorials in this session to prevent restart\r\n  const hasStartedTutorialsRef = React.useRef(false);\r\n\r\n  // Check if it's the user's first login based on login count\r\n  useEffect(() => {\r\n    if (user && !hasStartedTutorialsRef.current) {\r\n      // Set isFirstTimeLogin to true if loginCount equals 1\r\n      const isFirstLogin = user.loginCount === 1;\r\n      \r\n      console.log('User login status:', { \r\n        loginCount: user.loginCount, \r\n        isFirstLogin \r\n      });\r\n      \r\n      dispatch(setFirstTimeLogin(isFirstLogin));\r\n    }\r\n  }, [user, dispatch]);\r\n\r\n  useEffect(() => {\r\n    // Log queue changes\r\n    console.log('Tutorial queue updated:', {\r\n      active: activeTutorial,\r\n      queueLength: tutorialQueue.length,\r\n      queue: tutorialQueue\r\n    });\r\n  }, [activeTutorial, tutorialQueue]);\r\n\r\n  // Monitor when tutorials are stopped/completed\r\n  useEffect(() => {\r\n    // If we had a tutorial active and now we don't, mark first-time login as complete\r\n    if (hasStartedTutorialsRef.current && activeTutorial === null && !isTutorialActive) {\r\n      console.log('Tutorial session ended, marking first-time login as complete');\r\n      dispatch(completeFirstTimeLogin());\r\n    }\r\n  }, [activeTutorial, isTutorialActive, dispatch]);\r\n\r\n  // Start appropriate tutorials based on path when needed\r\n  useEffect(() => {\r\n    // Only queue tutorials once per session to prevent restart\r\n    if (hasStartedTutorialsRef.current) {\r\n      return;\r\n    }\r\n    \r\n    // Check if we have what we need to start tutorials\r\n    const shouldQueueTutorials = isFirstTimeLogin && \r\n                               user && \r\n                               !isTutorialActive && \r\n                               tutorialQueue.length === 0;\r\n    \r\n    console.log('Tutorial conditions:', {\r\n      isFirstTimeLogin,\r\n      hasUser: !!user,\r\n      isTutorialActive,\r\n      queueLength: tutorialQueue.length,\r\n      shouldQueueTutorials\r\n    });\r\n    \r\n    if (shouldQueueTutorials) {\r\n      // Add a delay to ensure DOM is fully rendered\r\n      const timer = setTimeout(() => {\r\n        // Get all tutorials for this path in the correct order\r\n        const allTutorials = getAllTutorialsForPath(currentPath);\r\n        \r\n        console.log('Available tutorials for path:', {\r\n          path: currentPath,\r\n          allTutorials\r\n        });\r\n        \r\n        if (allTutorials.length > 0) {\r\n          // Get all tutorial IDs for this path\r\n          const tutorialIds = allTutorials.map(tutorial => tutorial.id);\r\n          \r\n          console.log('Queueing tutorials:', tutorialIds);\r\n          dispatch(queueTutorials(tutorialIds));\r\n          \r\n          // Mark that we've started tutorials in this session\r\n          hasStartedTutorialsRef.current = true;\r\n        } else {\r\n          console.log('No tutorials available for this path');\r\n        }\r\n      }, 1500);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isFirstTimeLogin, user, currentPath, isTutorialActive, tutorialQueue, dispatch]);\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default TutorialManager;","import React, { useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { driver as driverJS, Driver } from 'driver.js';\r\nimport 'driver.js/dist/driver.css';\r\nimport { RootState } from '@/store';\r\nimport { nextTutorial,  setTutorialStep, queueTutorials } from '@/store/slices/TutorialSlice';\r\nimport { getTutorialSteps, getRelatedTutorials } from './TutorialConfig';\r\n\r\nconst TutorialDriver: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const driverInstanceRef = useRef<Driver | null>(null);\r\n  \r\n  const activeTutorial = useSelector((state: RootState) => state.tutorials.activeTutorial);\r\n  const isTutorialActive = useSelector((state: RootState) => state.tutorials.isTutorialActive);\r\n  const activeTutorialStep = useSelector((state: RootState) => state.tutorials.activeTutorialStep);\r\n  const tutorialQueue = useSelector((state: RootState) => state.tutorials.tutorialQueue);\r\n  \r\n  // Create a new driver instance when tutorial changes\r\n  useEffect(() => {\r\n    if (activeTutorial && isTutorialActive) {\r\n      console.log(`Starting tutorial: ${activeTutorial}, Queue: [${tutorialQueue.join(', ')}]`);\r\n      \r\n      const steps = getTutorialSteps(activeTutorial);\r\n      \r\n      if (steps && steps.length > 0) {\r\n        // Clean up any existing driver instance\r\n        if (driverInstanceRef.current) {\r\n          driverInstanceRef.current.destroy();\r\n          driverInstanceRef.current = null;\r\n        }\r\n        \r\n        // Start the driver with the steps for this tutorial\r\n        setTimeout(() => {\r\n          // Find all elements before creating driver to ensure they exist\r\n          let allElementsExist = true;\r\n          steps.forEach(step => {\r\n            const element = document.querySelector(step.element);\r\n            if (!element) {\r\n              console.warn(`Element ${step.element} not found for tutorial ${activeTutorial}`);\r\n              allElementsExist = false;\r\n            }\r\n          });\r\n          \r\n          if (!allElementsExist) {\r\n            console.warn(`Not all elements for tutorial ${activeTutorial} exist on the page. Moving to next tutorial.`);\r\n            dispatch(nextTutorial());\r\n            return;\r\n          }\r\n          \r\n          // Create a new driver instance with the steps\r\n          const driverInstance = driverJS({\r\n            showProgress: true,\r\n            smoothScroll: true,\r\n            animate: true,\r\n            allowClose: true,\r\n            stagePadding: 10,\r\n            steps: steps,\r\n            onHighlightStarted: (element) => {\r\n              const currentStepIndex = steps.findIndex(step => step.element === element?.id);\r\n              dispatch(setTutorialStep(currentStepIndex >= 0 ? currentStepIndex : 0));\r\n            },\r\n          \r\n            onDestroyed: () => {\r\n              // Clear the reference\r\n              driverInstanceRef.current = null;\r\n              \r\n              // Check if there are related tutorials to queue\r\n              const relatedTutorials = getRelatedTutorials(activeTutorial);\r\n              \r\n              if (relatedTutorials.length > 0) {\r\n                console.log(`Queueing related tutorials: ${relatedTutorials.join(', ')}`);\r\n                // Queue any related tutorials before moving to next\r\n                dispatch(queueTutorials(relatedTutorials));\r\n              }\r\n              \r\n              // Move to the next tutorial in queue\r\n              console.log('Moving to next tutorial');\r\n              dispatch(nextTutorial());\r\n            }\r\n          });\r\n          \r\n          // Start from the active step\r\n          if (activeTutorialStep > 0 && activeTutorialStep < steps.length) {\r\n            // Use proper API method to navigate to a specific step\r\n            driverInstance.highlight(steps[activeTutorialStep]);\r\n          } else {\r\n            driverInstance.drive();\r\n          }\r\n          \r\n          // Store the instance reference\r\n          driverInstanceRef.current = driverInstance;\r\n          \r\n        }, 500); // Longer delay to ensure elements are rendered\r\n      } else {\r\n        console.error(`No steps defined for tutorial: ${activeTutorial}`);\r\n        dispatch(nextTutorial());\r\n      }\r\n    }\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (driverInstanceRef.current) {\r\n        driverInstanceRef.current.destroy();\r\n        driverInstanceRef.current = null;\r\n      }\r\n    };\r\n  }, [activeTutorial, isTutorialActive, dispatch]);\r\n  \r\n  // This component doesn't render anything visible\r\n  return null;\r\n};\r\n\r\nexport default TutorialDriver;","import { Button } from \"@/components/ui/button\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nfunction CTA() {\r\n  return (\r\n    <section className=\"w-full py-12 md:py-8 lg:py-16 gradient-bg text-white\">\r\n      <div className=\"container px-4 md:px-6\">\r\n        <div className=\"flex flex-col items-center justify-center space-y-4 text-center\">\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-3xl font-bold tracking-tighter md:text-4xl\">\r\n              Youve made it this farwhy stop now?\r\n            </h2>\r\n            <p className=\"max-w-[900px] md:text-xl\">\r\n              Lets take your marketing to the next level. Start your 14-day free trial today.\r\n            </p>\r\n          </div>\r\n          <div className=\"flex flex-col gap-2 min-[400px]:flex-row\">\r\n            <Link to=\"/login\">\r\n            <Button size=\"lg\" variant=\"secondary\" className=\"bg-white text-primary hover:bg-blue-50\">\r\n              Start Free Trial\r\n            </Button>\r\n            </Link>\r\n            <Button size=\"lg\" variant=\"outline\" className=\"border-white text-black hover:bg-blue-50\">\r\n              Schedule a Demo\r\n            </Button>\r\n          </div>\r\n          <p className=\"text-sm text-blue-100\">\r\n            Got questions?{\" \"}\r\n            <Link to=\"#\" className=\"text-white underline underline-offset-2\">\r\n              Chat with our sales team\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default CTA\r\n","import { cn } from \"@/lib/utils\";\r\nimport { BarChart3, CalendarRange, DollarSign, Folder, Layers, LineChart, Mail, Users } from \"lucide-react\"\r\n\r\nconst Feature = ({\r\n    title,\r\n    description,\r\n    icon,\r\n    index,\r\n}: {\r\n    title: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    index: number;\r\n}) => {\r\n    return (\r\n        <div\r\n            className={cn(\r\n                \"flex flex-col lg:border-r  py-10 relative group/feature dark:border-neutral-800\",\r\n                (index === 0 || index === 4) && \"lg:border-l dark:border-neutral-800\",\r\n                index < 4 && \"lg:border-b dark:border-neutral-800\"\r\n            )}\r\n        >\r\n            {index < 4 && (\r\n                <div className=\"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-t from-gray-200 dark:from-neutral-800 to-transparent pointer-events-none\" />\r\n            )}\r\n            {index >= 4 && (\r\n                <div className=\"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-b from-gray-200 dark:from-neutral-800 to-transparent pointer-events-none\" />\r\n            )}\r\n            <div className=\"mb-4 relative z-10 px-10 text-neutral-600 dark:text-neutral-400\">\r\n                {icon}\r\n            </div>\r\n            <div className=\"text-lg font-bold mb-2 relative z-10 px-10\">\r\n                <div className=\"absolute left-0 inset-y-0 h-6 group-hover/feature:h-8 w-1 rounded-tr-full rounded-br-full bg-neutral-300 dark:bg-neutral-700 group-hover/feature:bg-blue-500 transition-all duration-200 origin-center\" />\r\n                <span className=\"group-hover/feature:translate-x-2 transition duration-200 inline-block text-neutral-800 dark:text-neutral-100\">\r\n                    {title}\r\n                </span>\r\n            </div>\r\n            <p className=\"text-sm text-neutral-600 dark:text-neutral-300 max-w-xs relative z-10 px-10\">\r\n                {description}\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PlatformFeatures = [\r\n    {\r\n        title: \"Unified Dashboard\",\r\n        description: \"View all your marketing data in one place with customizable widgets\",\r\n        icon: <BarChart3 className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Multi-platform Integration\",\r\n        description: \"Connect with Shopify, Meta, Google Ads, and GA4 seamlessly\",\r\n        icon: <Layers className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Performance Tracking\",\r\n        description: \"Monitor business performance across platforms and time periods\",\r\n        icon: <LineChart className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Demographic Analysis\",\r\n        description: \"Track conversions based on location, demographics, brands, and products\",\r\n        icon: <Users className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Automated Email Reports\",\r\n        description: \"Receive regular performance updates directly in your inbox\",\r\n        icon: <Mail className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Campaign Grouping\",\r\n        description: \"Group campaigns by category to analyze performance at a glance\",\r\n        icon: <Folder className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Compare Date Ranges\",\r\n        description: \"Easily compare analytics across different time periods\",\r\n        icon: <CalendarRange className=\"h-8 w-8 text-primary\" />,\r\n    },\r\n    {\r\n        title: \"Easy & Transparent Pricing\",\r\n        description: \"Simple, no-surprise pricing plans to fit every business\",\r\n        icon: <DollarSign className=\"h-8 w-8 text-primary\" />,\r\n    }\r\n];\r\n\r\nfunction Features() {\r\n    return (\r\n        <section id=\"features\" className=\"w-full py-12 md:py-8 lg:py-16 bg-slate-100 px-4\">\r\n            <div className=\"container px-4 md:px-6\">\r\n                <div className=\"flex flex-col items-center justify-center space-y-4 text-center mb-5\">\r\n                    <div className=\"space-y-2\">\r\n                        <h2 className=\"text-2xl font-bold tracking-tighter md:text-4xl lg:text-3xl gradient-text\">\r\n                            Smarter Marketing, Better Results\r\n                        </h2>\r\n                        <p className=\"max-w-[900px] text-muted-foreground md:text-lg\">\r\n                            Track performance, scale campaigns, and maximize ROIall with ease.\r\n                        </p>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4  relative z-10 pt-6 max-w-7xl mx-auto\">\r\n                    {PlatformFeatures.map((feature, index) => (\r\n                        <Feature key={feature.title} {...feature} index={index} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Features\r\n\r\n","import Logo from \"@/assets/messold-icon.png\";\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nfunction Footer() {\r\n    return (\r\n      <footer className=\"w-full border-t bg-slate-900 text-white\">\r\n        <div className=\"container px-6 py-8 flex justify-center items-center\">\r\n          <div className=\"flex flex-col items-center space-y-3\">\r\n            {/* Logo & Brand Name */}\r\n            <div className=\"flex items-center gap-2 font-semibold text-2xl tracking-tight\">\r\n            <img src={Logo} alt=\"Messold Logo\" className=\"h-8 w-8\" />\r\n              <span className=\"text-slate-100\">Parallels</span>\r\n            </div>\r\n  \r\n            {/* Tagline */}\r\n            <p className=\"text-sm text-slate-400 text-center max-w-sm\">\r\n              The all-in-one marketing platform for growing businesses.\r\n            </p>\r\n  \r\n            {/* Navigation Links */}\r\n            <nav className=\"flex space-x-4 text-sm font-medium\">\r\n              <Link\r\n                to=\"/privacy-policy\"\r\n                className=\"text-slate-400 transition hover:text-blue-400\"\r\n              >\r\n                Privacy Policy\r\n              </Link>\r\n              <span className=\"text-slate-500\">|</span>\r\n              <Link\r\n                to=\"/terms-and-conditions\"\r\n                className=\"text-slate-400 transition hover:text-blue-400\"\r\n              >\r\n                Terms of Service\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    );\r\n  }\r\n  \r\n\r\nexport default Footer","import { Button } from \"@/components/ui/button\"\r\nimport { ArrowRight } from \"lucide-react\"\r\nimport { Link } from \"react-router-dom\";\r\nimport { Area, AreaChart, ResponsiveContainer, XAxis, YAxis } from \"recharts\";\r\n\r\nconst generateLast30Days = () => {\r\n    const data = [];\r\n    const today = new Date();\r\n    \r\n    let baseValue = 25000; // Start at a lower value\r\n\r\n    for (let i = 0; i < 30; i++) {\r\n        const date = new Date(today);\r\n        date.setDate(date.getDate() - (29 - i)); // Ensure chronological order\r\n        const day = date.getDate();\r\n\r\n        // Gradual increase over time\r\n        baseValue += Math.random() * 1500 + 500; // Ensure an upward movement\r\n\r\n        // Large fluctuations for some days\r\n        const fluctuation = (Math.random() > 0.7 ? Math.random() * 10000 - 5000 : Math.random() * 3000 - 1500);\r\n\r\n        const value = Math.round(baseValue + fluctuation);\r\n\r\n        data.push({\r\n            name: day,\r\n            value: Math.max(value, 5000), // Ensure it never goes too low\r\n        });\r\n    }\r\n\r\n    return data;\r\n};\r\n\r\n\r\nconst data = generateLast30Days();\r\n\r\nfunction HeroSection() {\r\n    return (\r\n      <div className=\"relative min-h-screen w-full overflow-hidden gradient-bg\">\r\n        {/* Gradient effects */}\r\n        <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,rgba(120,119,198,0.3),rgba(255,255,255,0))]\" />\r\n        \r\n        <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"py-12\">\r\n            {/* Top badge */}\r\n           \r\n            {/* Main content grid */}\r\n            <div className=\"grid gap-12 lg:grid-cols-2 lg:gap-8\">\r\n              <div className=\"flex flex-col justify-center items-start\">\r\n              <div className=\"mb-8 flex justify-center\">\r\n              <div className=\"animate-fade-in rounded-full border border-[#1E1B4B]/20 bg-[#0E0E2C] px-3 py-1 text-sm text-slate-300 backdrop-blur-sm\">\r\n                <span className=\"mr-2 inline-block text-indigo-500\"></span>\r\n                Unified Marketing Analytics Platform\r\n              </div>\r\n            </div>\r\n  \r\n                <h1 className=\"text-center text-4xl font-bold tracking-tight text-white lg:text-left lg:text-6xl\">\r\n                  <span className=\"block mb-2\">All Your Marketing Data,  One Place.</span>\r\n                </h1>\r\n  \r\n                <p className=\"mt-6 text-center text-lg text-slate-200 lg:text-left\">\r\n                  Connect Shopify, Meta, Google Ads, and GA4 in one dashboard. Track performance, analyze conversions, and get automated email reports.\r\n                </p>\r\n  \r\n                <div className=\"mt-8 flex flex-col items-center gap-4 sm:flex-row lg:justify-start\">\r\n                <Link to=\"/login\">\r\n                  <Button size=\"lg\" className=\"w-full bg-white text-black hover:bg-blue-100 sm:w-auto\">\r\n                    Start Free Trial <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                  </Button>\r\n                  </Link>\r\n                  <Button size=\"lg\" variant=\"outline\" className=\"w-full border-slate-800 text-black hover:bg-blue-100 sm:w-auto\">\r\n                    View Demo\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n  \r\n              {/* Dashboard Preview */}\r\n              <div className=\"relative\">\r\n            <div className=\"relative rounded-2xl border border-slate-800 bg-[#0A0A1B] p-4\">\r\n              {/* Window Controls */}\r\n              <div className=\"mb-6 flex items-center justify-between\">\r\n                <div className=\"flex gap-2\">\r\n                  <div className=\"h-3 w-3 rounded-full bg-[#FF5F57]\" />\r\n                  <div className=\"h-3 w-3 rounded-full bg-[#FFBD2E]\" />\r\n                  <div className=\"h-3 w-3 rounded-full bg-[#28C840]\" />\r\n                </div>\r\n                <div className=\"flex items-center gap-2 rounded-full bg-slate-800/50 px-3 py-1\">\r\n                  <div className=\"h-2 w-2 rounded-full bg-emerald-500\" />\r\n                  <span className=\"text-xs text-slate-300\">Last 30 days</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Analytics Content */}\r\n              <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-xl font-semibold text-slate-300\">Analytics Overview</h2>\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"border-slate-800\">\r\n                    Export\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Metrics Grid */}\r\n                <div className=\"grid grid-cols-3 gap-4 text-slate-100\">\r\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\r\n                    <div className=\"text-sm text-slate-400\">Revenue</div>\r\n                    <div className=\"mt-1 text-2xl font-bold\">$48.2K</div>\r\n                    <div className=\"mt-2 text-sm text-emerald-400\">+12.4%</div>\r\n                  </div>\r\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\r\n                    <div className=\"text-sm text-slate-400\">Orders</div>\r\n                    <div className=\"mt-1 text-2xl font-bold\">2,567</div>\r\n                    <div className=\"mt-2 text-sm text-emerald-400\">+8.2%</div>\r\n                  </div>\r\n                  <div className=\"rounded-lg bg-slate-800/50 p-4\">\r\n                    <div className=\"text-sm text-slate-400\">Customers</div>\r\n                    <div className=\"mt-1 text-2xl font-bold\">1.2M</div>\r\n                    <div className=\"mt-2 text-sm text-emerald-400\">+4.7%</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Chart Placeholder */}\r\n                <div className=\"h-[300px] rounded-lg bg-slate-800/30 p-4\">\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <AreaChart data={data}>\r\n                      <defs>\r\n                        <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                          <stop offset=\"5%\" stopColor=\"#6366f1\" stopOpacity={0.3} />\r\n                          <stop offset=\"95%\" stopColor=\"#6366f1\" stopOpacity={0} />\r\n                        </linearGradient>\r\n                      </defs>\r\n                      <XAxis\r\n                        dataKey=\"name\"\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#64748b', fontSize: 12 }}\r\n                        interval=\"preserveStartEnd\"\r\n                      />\r\n                      <YAxis\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fill: '#64748b', fontSize: 12 }}\r\n                        tickFormatter={(value) => `$${value / 1000}k`}\r\n                      />\r\n                      <Area\r\n                        type=\"monotone\"\r\n                        dataKey=\"value\"\r\n                        stroke=\"#6366f1\"\r\n                        strokeWidth={2}\r\n                        fill=\"url(#colorValue)\"\r\n                      />\r\n                    </AreaChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Floating Achievement Card */}\r\n            <div className=\"absolute -right-4 bottom-20\">\r\n              <div className=\"rounded-2xl border border-green-500/20 bg-green-400/20 p-4 shadow-xl\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"h-2 w-2 rounded-full bg-green-500\" />\r\n                  <span className=\"text-sm font-medium text-green-500\">New Milestone!</span>\r\n                </div>\r\n                <p className=\"mt-1 text-xs text-green-300\">Revenue target achieved</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n\r\nexport default HeroSection;","import { Button } from \"@/components/ui/button\";\r\nimport Logo from \"@/assets/messold-icon.png\";\r\nimport { useDispatch,useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport axios from \"axios\";\r\nimport { clearUser } from \"@/store/slices/UserSlice\";\r\nimport { resetBrand } from \"@/store/slices/BrandSlice\";\r\nimport { baseURL } from \"@/data/constant\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\n\r\nfunction Navbar() {\r\n  const user = useSelector((state: RootState) => state.user.user);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n        const response = await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true });\r\n        if (response.status === 200) {\r\n            dispatch(clearUser());\r\n            dispatch(resetBrand());\r\n            navigate('/');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error logging out:', error);\r\n    }\r\n};\r\n  return (\r\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n      <div className=\"container px-10 flex h-16 items-center justify-between\">\r\n        <Link to=\"/\">\r\n          <div className=\"flex items-center gap-2 font-bold text-xl\">\r\n            <img src={Logo} alt=\"Messold Logo\" className=\"h-8 w-8\" />\r\n            <span>Parallels</span>\r\n          </div>\r\n        </Link>\r\n        <nav className=\"hidden md:flex gap-6\">\r\n          <Link to=\"#features\" className=\"text-sm font-medium hover:text-primary\">\r\n            Features\r\n          </Link>\r\n          <Link to=\"#integrations\" className=\"text-sm font-medium hover:text-primary\">\r\n            Integrations\r\n          </Link>\r\n          <Link to=\"#analytics\" className=\"text-sm font-medium hover:text-primary\">\r\n            Analytics\r\n          </Link>\r\n        </nav>\r\n        <div className=\"flex items-center gap-4\">\r\n          {user ? (\r\n            <div className=\"flex items-center gap-3\">\r\n              <Link to=\"/dashboard\" className=\"text-sm font-medium hover:text-primary\">\r\n                Dashboard\r\n              </Link>\r\n              <Button variant=\"outline\" onClick={handleLogout}>Log Out</Button>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <Link to=\"/login\" className=\"text-sm font-medium hover:text-primary\">\r\n                Log in\r\n              </Link>\r\n              <Link to=\"/login\" >\r\n              <Button>Get Started</Button>\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import CTA from './components/CTA'\r\nimport Features from './components/Features'\r\nimport Footer from './components/Footer'\r\nimport HeroSection from './components/HeroSection'\r\nimport Navbar from './components/Navbar'\r\n\r\nfunction LandingPage() {\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col gradient-bg\">\r\n   <Navbar />\r\n   <main className=\"flex-1\">\r\n    <HeroSection />\r\n    <Features />\r\n    <CTA />\r\n   </main>\r\n   <Footer />\r\n   </div>\r\n  )\r\n}\r\n\r\nexport default LandingPage","import Footer from \"./Footer\";\r\nimport Navbar from \"./Navbar\";\r\nimport { privacyPolicySections } from \"@/data/constant\";\r\n\r\nfunction PrivacyPolicy() {\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 text-slate-800\">\r\n      <Navbar />\r\n      <div className=\"max-w-4xl mx-auto p-6 my-5\">\r\n        <div className=\"bg-white shadow-lg rounded-2xl p-8\">\r\n          <h1 className=\"text-4xl font-extrabold text-center text-gray-900 mb-6\">Privacy Policy</h1>\r\n          \r\n          {privacyPolicySections.map((section) => (\r\n            <section key={section.title} className=\"mb-6 border-b pb-4 last:border-none\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-2\">{section.title}</h2>\r\n              {section.content.map((para: string | string[]) => (\r\n                typeof para === \"string\" ? (\r\n                  <p key={`${section.title}-${para.slice(0, 20)}`} className=\"text-gray-700 mb-2\">{para}</p>\r\n                ) : (\r\n                  <ul key={`${section.title}-list-${para[0]?.slice(0, 20)}`} className=\"list-disc pl-5 text-gray-700\">\r\n                    {para.map((item) => (\r\n                      <li key={`${section.title}-item-${item.slice(0, 20)}`}>{item}</li>\r\n                    ))}\r\n                  </ul>\r\n                )\r\n              ))}\r\n            </section>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PrivacyPolicy;\r\n","import Footer from \"./Footer\";\r\nimport Navbar from \"./Navbar\";\r\nimport { termsAndConditionsSections } from \"@/data/constant\";\r\n\r\nfunction TermsAndConditions() {\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 text-slate-800\">\r\n      <Navbar />\r\n      <div className=\"max-w-4xl mx-auto p-6 my-5\">\r\n        <div className=\"bg-white shadow-lg rounded-2xl p-8\">\r\n          <h1 className=\"text-4xl font-extrabold text-center text-gray-900 mb-6\">Terms and Conditions</h1>\r\n          \r\n          {termsAndConditionsSections.map((section) => (\r\n            <section key={section.title} className=\"mb-6 border-b pb-4 last:border-none\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 mb-2\">{section.title}</h2>\r\n              {section.content.map((para: string | string[]) => (\r\n                typeof para === \"string\" ? (\r\n                  <p key={`${section.title}-${para.slice(0, 20)}`} className=\"text-gray-700 mb-2\">{para}</p>\r\n                ) : (\r\n                  <ul key={`${section.title}-list-${para[0]?.slice(0, 20)}`} className=\"list-disc pl-5 text-gray-700\">\r\n                    {para.map((item) => (\r\n                      <li key={`${section.title}-item-${item.slice(0, 20)}`}>{item}</li>\r\n                    ))}\r\n                  </ul>\r\n                )\r\n              ))}\r\n            </section>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TermsAndConditions; ","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst DeviceTypeConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/deviceTypeConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'device');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Device\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n \r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeviceTypeConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst GenderConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/genderConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'gender');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Gender\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenderConversion;\r\n","\r\nimport React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst AgeConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  // Add this useEffect to clear data when brandId changes\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/ageConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n      setApiResponse(null); // Clear data on error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, brandId changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'age');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Age\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n\r\n  console.log(apiResponse?.data);\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AgeConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst InterestConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/interestConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'interest');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Interest\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InterestConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst OperatingSystemConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/operatingSystemConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'operatingSystem');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Operating System\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OperatingSystemConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst BrowserConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  // Add this useEffect to clear data when brandId changes\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/browserConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'browser');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Browser\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BrowserConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst SourceConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/sourceConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'source');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Source\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SourceConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst PageTitleConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/pageTitleConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'pageTitle');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Page Title\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageTitleConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst PagePathConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/pagePathConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'pagePath');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Page Path\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n  \r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PagePathConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst LandingPageConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/pageConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'landingPage');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Landing Page\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LandingPageConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst RegionConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/regionConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]);\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'region');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Region\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegionConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>\r\n  }>;\r\n};\r\n\r\nconst CityTypeConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/cityConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'city');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"City\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CityTypeConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst CountryConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/countryConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'country');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Country\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CountryConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    DeviceType: string;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n    [key: string]: any;\r\n  }>;\r\n};\r\n\r\nconst CampaignConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/campaignConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'campaign');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Campaign\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n \r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CampaignConversion;\r\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '@/store';\r\nimport { format } from 'date-fns';\r\nimport { useParams } from 'react-router-dom';\r\nimport createAxiosInstance from \"./axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport NewConversionTable from \"./ConversionTable\";\r\n\r\ninterface ConversionComponentProps {\r\n  isFullScreen: boolean;\r\n  currentFilter: string[] | undefined;\r\n  onDataUpdate: (data: any[], tabType: string) => void;\r\n  refreshTrigger: number;\r\n}\r\n\r\ntype ApiResponse = {\r\n  reportType: string;\r\n  data: Array<{\r\n    [key: string]: any;\r\n    MonthlyData?: Array<{ Month: string;[key: string]: any }>;\r\n  }>;\r\n};\r\n\r\nconst ChannelConversion: React.FC<ConversionComponentProps> = ({\r\n  isFullScreen,\r\n  currentFilter,\r\n  onDataUpdate,\r\n  refreshTrigger\r\n}) => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const locale = useSelector((state: RootState) => state.locale.locale);\r\n  const { brandId } = useParams();\r\n\r\n  const [apiResponse, setApiResponse] = useState<ApiResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n  const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n  const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  useEffect(() => {\r\n    setApiResponse(null); // Clear old data when brand changes\r\n  }, [brandId]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(`/api/analytics/channelConversionReport/${brandId}`, {\r\n        startDate: startDate, \r\n        endDate: endDate\r\n      }, { withCredentials: true });\r\n\r\n      const fetchedData = response.data || [];\r\n      setApiResponse(fetchedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, startDate, endDate]);\r\n\r\n  // Fetch data when component mounts, date changes, or refresh trigger changes\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, refreshTrigger]); // Add brandId to dependencies\r\n\r\n  // Update parent with data\r\n  useEffect(() => {\r\n    if (apiResponse?.data && onDataUpdate) {\r\n      onDataUpdate(apiResponse.data, 'channel');\r\n    }\r\n  }, [apiResponse?.data, onDataUpdate]);\r\n\r\n  // Extract columns dynamically from the API response\r\n  const primaryColumn = \"Channel\";\r\n  const secondaryColumns = [\"Total Sessions\", \"Avg Conv. Rate\"];\r\n  const monthlyDataKey = \"MonthlyData\";\r\n\r\n  if (loading) {\r\n    return <Loader isLoading={loading} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"rounded-md overflow-hidden\">\r\n      <NewConversionTable\r\n        data={apiResponse?.data || []}\r\n        primaryColumn={primaryColumn}\r\n        secondaryColumns={secondaryColumns}\r\n        monthlyDataKey={monthlyDataKey}\r\n        isFullScreen={isFullScreen}\r\n        locale={locale}\r\n        filter={currentFilter}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChannelConversion;\r\n","import React, { useState, useMemo, useCallback } from 'react';\r\nimport CollapsibleSidebar from '../../components/dashboard_component/CollapsibleSidebar';\r\nimport { useParams } from 'react-router-dom';\r\nimport { ChartBar,  Maximize, Minimize, RefreshCw, Users, User, Target, Monitor, Smartphone, Globe, MousePointer, MapPin, Building, FileText, TrendingUp, BarChart3 } from 'lucide-react';\r\nimport { useTokenError } from '@/context/TokenErrorContext';\r\nimport DeviceTypeConversion from './components/DeviceConversion';\r\nimport GenderConversion from './components/GenderConversion';\r\nimport AgeConversion from './components/AgeConversion';\r\nimport { SideTab } from '@/components/ui/side-tab';\r\nimport InterestConversion from './components/InterestConversion';\r\nimport OperatingSystemConversion from './components/OperatingSystemConversion';\r\nimport BrowserConversion from './components/BrowserConversion';\r\nimport SourceConversion from './components/SourceConversion';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from \"@/store/index.ts\";\r\nimport ConnectPlatform from '../ReportPage/ConnectPlatformPage';\r\nimport HelpDeskModal from '@/components/dashboard_component/HelpDeskModal';\r\nimport PageTitleConversion from './components/PageTitleConversion';\r\nimport PagePathConversion from './components/PagePathConversion';\r\nimport LandingPageConversion from './components/LandingPageConversion';\r\nimport RegionConversion from './components/RegionConversion';\r\nimport CityTypeConversion from './components/CityConversion';\r\nimport CountryConversion from './components/CountryConversion';\r\nimport CampaignConversion from './components/CampaignConversion';\r\nimport ChannelConversion from './components/ChannelConversion';\r\nimport MissingDateWarning from '@/components/dashboard_component/Missing-Date-Waning';\r\nimport NoAccessPage from '@/components/dashboard_component/NoAccessPage.';\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport NumberFormatSelector from \"@/components/dashboard_component/NumberFormatSelector\";;\r\nimport ExcelDownload from './components/ExcelDownload';\r\nimport PerformanceSummary from './components/PerformanceSummary';\r\nimport { metricConfigs } from \"@/data/constant\";\r\n\r\n\r\nconst ConversionLens: React.FC = () => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  const { brandId } = useParams();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasGA4Account = selectedBrand?.ga4Account ?? false;\r\n  const { tokenError } = useTokenError();\r\n\r\n\r\n  const [activeTab, setActiveTab] = useState('age');\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n  const [currentFilter, setCurrentFilter] = useState<string[] | undefined>(undefined);\r\n  const [tabData, setTabData] = useState<any[]>([]);\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen);\r\n  };\r\n\r\n  const handleManualRefresh = useCallback(() => {\r\n    // Increment refresh trigger to signal all child components to refresh\r\n    setRefreshTrigger(prev => prev + 1);\r\n  }, []);\r\n\r\n  const handleCategoryFilter = (items: (string | number)[] | undefined) => {\r\n    if (items === undefined) {\r\n      setCurrentFilter(undefined);\r\n    } else {\r\n      setCurrentFilter(items.map(item => String(item)));\r\n    }\r\n  };\r\n\r\n  const handleTabDataUpdate = (data: any[], tabType?: string) => {\r\n    if (tabType === activeTab) {\r\n      setTabData(data);\r\n    }\r\n  };\r\n\r\n  const getPrimaryColumnForTab = (tab: string): string => {\r\n    const columnMap: Record<string, string> = {\r\n      'age': 'Age',\r\n      'gender': 'Gender',\r\n      'interest': 'Interest',\r\n      'device': 'Device Type',\r\n      'operatingSystem': 'Operating System',\r\n      'browser': 'Browser',\r\n      'source': 'Source',\r\n      'channel': 'Channel',\r\n      'campaign': 'Campaign',\r\n      'country': 'Country',\r\n      'city': 'City',\r\n      'region': 'Region',\r\n      'landingPage': 'Landing Page',\r\n      'pagePath': 'Page Path',\r\n      'pageTitle': 'Page Title'\r\n    };\r\n    return columnMap[tab] || 'Unknown';\r\n  };\r\n\r\n  const getSecondaryColumnsForTab = (tab: string): string[] => {\r\n    const columnMap: Record<string, string[]> = {\r\n      'age': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'gender': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'interest': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'device': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'operatingSystem': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'browser': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'source': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'channel': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'campaign': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'country': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'city': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'region': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'landingPage': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'pagePath': ['Total Sessions', 'Avg Conv. Rate'],\r\n      'pageTitle': ['Total Sessions', 'Avg Conv. Rate']\r\n    };\r\n    return columnMap[tab] || [];\r\n  };\r\n\r\n  const getFileNameForTab = (tab: string): string => {\r\n    const fileMap: Record<string, string> = {\r\n      'age': 'Age_Conversion_Report',\r\n      'gender': 'Gender_Conversion_Report',\r\n      'interest': 'Interest_Conversion_Report',\r\n      'device': 'Device_Conversion_Report',\r\n      'operatingSystem': 'OperatingSystem_Conversion_Report',\r\n      'browser': 'Browser_Conversion_Report',\r\n      'source': 'Source_Conversion_Report',\r\n      'channel': 'Channel_Conversion_Report',\r\n      'campaign': 'Campaign_Conversion_Report',\r\n      'country': 'Country_Conversion_Report',\r\n      'city': 'City_Conversion_Report',\r\n      'region': 'Region_Conversion_Report',\r\n      'landingPage': 'LandingPage_Conversion_Report',\r\n      'pagePath': 'PagePath_Conversion_Report',\r\n      'pageTitle': 'PageTitle_Conversion_Report'\r\n    };\r\n    return fileMap[tab] || 'Conversion_Report';\r\n  };\r\n\r\n  const tabs = [\r\n    { label: 'Age', value: 'age', icon: <Users className=\"w-4 h-4\" /> },\r\n    { label: 'Gender', value: 'gender', icon: <User className=\"w-4 h-4\" /> },\r\n    { label: 'Interest', value: 'interest', icon: <Target className=\"w-4 h-4\" /> },\r\n    { label: 'Device', value: 'device', icon: <Monitor className=\"w-4 h-4\" /> },\r\n    { label: 'Operating System', value: 'operatingSystem', icon: <Smartphone className=\"w-4 h-4\" /> },\r\n    { label: 'Browser', value: 'browser', icon: <Globe className=\"w-4 h-4\" /> },\r\n    { label: 'Source', value: 'source', icon: <MousePointer className=\"w-4 h-4\" /> },\r\n    { label: 'Channel', value: 'channel', icon: <BarChart3 className=\"w-4 h-4\" /> },\r\n    { label: 'Campaign', value: 'campaign', icon: <TrendingUp className=\"w-4 h-4\" /> },\r\n    { label: 'Country', value: 'country', icon: <MapPin className=\"w-4 h-4\" /> },\r\n    { label: 'City', value: 'city', icon: <Building className=\"w-4 h-4\" /> },\r\n    { label: 'Region', value: 'region', icon: <MapPin className=\"w-4 h-4\" /> },\r\n    { label: 'Landing Page', value: 'landingPage', icon: <FileText className=\"w-4 h-4\" /> },\r\n    { label: 'Page Path', value: 'pagePath', icon: <FileText className=\"w-4 h-4\" /> },\r\n    { label: 'Page Title', value: 'pageTitle', icon: <FileText className=\"w-4 h-4\" /> }\r\n  ];\r\n\r\n  const handleTabChange = (value: string) => {\r\n    setActiveTab(value);\r\n    setTabData([]);\r\n    setCurrentFilter(undefined);\r\n  };\r\n\r\n  if (tokenError) {\r\n    return  <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar /> \r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col lg:ml-0\">\r\n      <NoAccessPage\r\n      platform=\"Google Analytics\"\r\n      message=\"We need access to your Google Analytics account to show you amazing insights about your website performance.\"\r\n      icon={<ChartBar className=\"w-8 h-8 text-blue-600\" />}\r\n      loginOptions={[\r\n        {\r\n          label: \"Connect Google Analytics\",\r\n          context: \"googleAnalyticsSetup\",\r\n          provider: \"google\"\r\n        }\r\n      ]}\r\n    />\r\n    </div>\r\n    </div>;\r\n  }\r\n\r\n  if (!hasGA4Account) {\r\n    return    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n       <div className=\"flex-1 h-screen overflow-hidden flex flex-col lg:ml-0\">\r\n       <ConnectPlatform\r\n      platform=\"google analytics\"\r\n      brandId={brandId ?? ''}\r\n      onSuccess={(platform, accountName, accountId) => {\r\n        console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n      }} />\r\n      </div>\r\n      </div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      \r\n      {/* Side Tab Navigation */}\r\n      <SideTab \r\n        tabs={tabs}\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n      />\r\n      \r\n      <div className=\"flex-1 h-screen overflow-hidden flex flex-col lg:ml-0\">\r\n        {(!date.from || !date.to) ? (\r\n          <MissingDateWarning />\r\n        ) : (\r\n          <>\r\n            {/* Header */}\r\n            <div className=\"flex-none\">\r\n            </div>\r\n            {/* Scrollable Content */}\r\n            <div className=\"flex-1 overflow-auto\">\r\n              <div className=\"p-2 space-y-6\">\r\n                <Card id={`${activeTab}-report`} className={`${isFullScreen ? 'fixed inset-0 z-50 m-0' : ''}`}>\r\n                  <CardContent className=\"p-3\">\r\n                    <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 mb-4\">\r\n                      <div className=\"flex-grow items-center gap-3\">\r\n                        {/* Performance Summary shows for all tabs with dynamic content based on activeTab */}\r\n                        <PerformanceSummary\r\n                          data={tabData}\r\n                          primaryColumn={getPrimaryColumnForTab(activeTab)}\r\n                          metricConfig={metricConfigs.sessionsAndConversion || {}}\r\n                          onCategoryFilter={handleCategoryFilter}\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex flex-row items-center gap-1.5 \">\r\n                        {/* Date Picker - Always visible */}\r\n                        <div className=\"transition-transform duration-300 ease-in-out hover:scale-105\">\r\n                          <DatePickerWithRange\r\n                            defaultDate={{\r\n                              from: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n                              to: new Date()\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <NumberFormatSelector />\r\n                        <Button id=\"refresh\" onClick={handleManualRefresh} size=\"icon\" variant=\"outline\">\r\n                          <RefreshCw className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <ExcelDownload\r\n                          data={tabData}\r\n                          fileName={getFileNameForTab(activeTab)}\r\n                          primaryColumn={getPrimaryColumnForTab(activeTab)}\r\n                          secondaryColumns={getSecondaryColumnsForTab(activeTab)}\r\n                          monthlyDataKey=\"MonthlyData\"\r\n                          monthlyMetrics={[\"Sessions\", \"Conv. Rate\"]}\r\n                          disabled={tabData.length === 0}\r\n                        />\r\n                        <Button id=\"expand-button\" onClick={toggleFullScreen} size=\"icon\" variant=\"outline\">\r\n                          {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"rounded-md overflow-hidden\">\r\n                      <div id={activeTab}>\r\n                        {/* Render the appropriate component based on activeTab */}\r\n                        {activeTab === 'age' && (\r\n                          <AgeConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'gender' && (\r\n                          <GenderConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'interest' && (\r\n                          <InterestConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'device' && (\r\n                          <DeviceTypeConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'operatingSystem' && (\r\n                          <OperatingSystemConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'browser' && (\r\n                          <BrowserConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'source' && (\r\n                          <SourceConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'channel' && (\r\n                          <ChannelConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'campaign' && (\r\n                          <CampaignConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'country' && (\r\n                          <CountryConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'city' && (\r\n                          <CityTypeConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'region' && (\r\n                          <RegionConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'landingPage' && (\r\n                          <LandingPageConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'pagePath' && (\r\n                          <PagePathConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                        {activeTab === 'pageTitle' && (\r\n                          <PageTitleConversion \r\n                            isFullScreen={isFullScreen}\r\n                            currentFilter={currentFilter}\r\n                            onDataUpdate={handleTabDataUpdate}\r\n                            refreshTrigger={refreshTrigger}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n              <HelpDeskModal />\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversionLens;","import React, { useState, useEffect, useRef, useMemo } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\"\r\nimport {\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Tag,\r\n  Filter,\r\n  Plus,\r\n  LayoutGrid,\r\n  SlidersHorizontal,\r\n  Check,\r\n  Maximize,\r\n  Minimize,\r\n  Edit,\r\n  X,\r\n} from \"lucide-react\"\r\nimport type { RootState } from \"@/store\"\r\nimport { addLabelToCampaign, removeLabelFromCampaign } from \"@/store/slices/campaignLabelsSlice\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\n\r\nimport ColumnManagementSheet from \"@/pages/AnalyticsDashboard/Components/ColumnManagementSheet\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\"\r\n\r\n// Enhanced label colors with better contrast and visual hierarchy\r\nconst LABEL_COLORS = [\r\n  \"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200\",\r\n  \"bg-blue-100 text-blue-800 border border-blue-200 hover:bg-blue-200\",\r\n  \"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200\",\r\n  \"bg-yellow-100 text-yellow-800 border border-yellow-200 hover:bg-yellow-200\",\r\n  \"bg-purple-100 text-purple-800 border border-purple-200 hover:bg-purple-200\",\r\n  \"bg-pink-100 text-pink-800 border border-pink-200 hover:bg-pink-200\",\r\n  \"bg-indigo-100 text-indigo-800 border border-indigo-200 hover:bg-indigo-200\",\r\n  \"bg-orange-100 text-orange-800 border border-orange-200 hover:bg-orange-200\",\r\n]\r\n\r\n// Using a single fixed width for all columns except Campaign and Labels\r\nconst DEFAULT_COLUMN_WIDTH = \"85px\"\r\n\r\ninterface Campaign {\r\n  campaignName: string\r\n  campaignId: string\r\n  [key: string]: string | number\r\n}\r\n\r\ninterface MetaCampaignTableProps {\r\n  data: {\r\n    account_name: string\r\n    account_id: string\r\n    campaigns: Campaign[]\r\n  }[]\r\n  blendedSummary?: Campaign[] // Add blended summary data\r\n}\r\n\r\n// New interface for grouped campaigns\r\ninterface GroupedCampaign {\r\n  label: string\r\n  campaigns: Campaign[]\r\n  isExpanded: boolean\r\n}\r\n\r\nconst MetaCampaignTable: React.FC<MetaCampaignTableProps> = ({ data, blendedSummary }) => {\r\n  const dispatch = useDispatch()\r\n  const [draggedCampaign, setDraggedCampaign] = useState<string | null>(null)\r\n  const [dragOverCampaign, setDragOverCampaign] = useState<string | null>(null)\r\n  const [isFullScreen, setIsFullScreen] = useState(false)\r\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null)\r\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null)\r\n  const [editingLabel, setEditingLabel] = useState<string | null>(null)\r\n  const [editLabelValue, setEditLabelValue] = useState(\"\")\r\n  const [isEditMode, setIsEditMode] = useState(false)\r\n  const [activeTab, setActiveTab] = useState<string>(\"\")\r\n\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>([])\r\n  const [columnOrder, setColumnOrder] = useState<string[]>([])\r\n  const [frozenColumns, setFrozenColumns] = useState<string[]>([\"Campaign\", \"Labels\"])\r\n\r\n  const [scrollLeft, setScrollLeft] = useState(0)\r\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Ensure Campaign and Labels are always frozen in correct order\r\n  useEffect(() => {\r\n    setFrozenColumns((prev) => {\r\n      const newFrozen = prev.filter((col) => col !== \"Campaign\" && col !== \"Labels\")\r\n      return [\"Campaign\", \"Labels\", ...newFrozen]\r\n    })\r\n  }, [])\r\n\r\n  // Set active tab to \"All\" if blended summary is available, otherwise first account\r\n  useEffect(() => {\r\n    if (data.length > 0 && !activeTab) {\r\n      if (blendedSummary && blendedSummary.length > 0) {\r\n        setActiveTab(\"all\")\r\n      } else {\r\n        setActiveTab(data[0].account_id)\r\n      }\r\n    }\r\n  }, [data, activeTab, blendedSummary])\r\n\r\n  const [isGroupingEnabled, setIsGroupingEnabled] = useState(true)\r\n  const [groupedCampaigns, setGroupedCampaigns] = useState<GroupedCampaign[]>([])\r\n  const [ungroupedCampaigns, setUngroupedCampaigns] = useState<Campaign[]>([])\r\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"active\" | \"paused\">(\"all\")\r\n\r\n  const tableRef = useRef<HTMLDivElement>(null)\r\n  const columnRefs = useRef<{ [key: string]: HTMLTableCellElement | null }>({})\r\n  const newLabelInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  const { labels } = useSelector((state: RootState) => state.campaignLabels)\r\n\r\n  // Get current active account data or blended summary\r\n  const currentAccountData = useMemo(() => {\r\n    if (activeTab === \"all\" && blendedSummary) {\r\n      return {\r\n        account_name: \"All Accounts\",\r\n        account_id: \"all\",\r\n        campaigns: blendedSummary\r\n      }\r\n    }\r\n    return data.find(account => account.account_id === activeTab) || data[0]\r\n  }, [data, activeTab, blendedSummary])\r\n\r\n  const accountLabels = useMemo(() => {\r\n    return currentAccountData?.account_id ? labels[currentAccountData.account_id] || {} : {}\r\n  }, [labels, currentAccountData?.account_id])\r\n\r\n  const PREDEFINED_LABELS = [\"TOFU\", \"MOFU\", \"BOFU\", \"TOFU+MOFU\"]\r\n\r\n  // Get all unique labels across all campaigns\r\n  const allUniqueLabels = useMemo(() => {\r\n    const uniqueLabels = new Set<string>()\r\n    Object.values(accountLabels).forEach((labelArray) => {\r\n      labelArray?.forEach((label) => {\r\n        uniqueLabels.add(label)\r\n      })\r\n    })\r\n    return Array.from(uniqueLabels)\r\n  }, [accountLabels])\r\n\r\n  const hasAnyLabels = useMemo(() => {\r\n    return allUniqueLabels.length > 0\r\n  }, [allUniqueLabels])\r\n\r\n  // Filter campaigns by status\r\n  const filterCampaignsByStatus = (campaigns: Campaign[]) => {\r\n    if (statusFilter === \"all\") return campaigns\r\n    return campaigns.filter((campaign) => {\r\n      // Check all possible status property names and formats\r\n      const statusValue = campaign.status || campaign.Status || \"\"\r\n      const status = String(statusValue).toLowerCase()\r\n\r\n      return statusFilter === \"active\" ? status === \"active\" : status === \"paused\"\r\n    })\r\n  }\r\n\r\n  // Filter campaigns before processing\r\n  const filteredCampaigns = useMemo(() => {\r\n    return filterCampaignsByStatus(currentAccountData?.campaigns || [])\r\n  }, [currentAccountData?.campaigns, statusFilter])\r\n\r\n  // Initialize column state only once when data first loads\r\n  useEffect(() => {\r\n    if (data.length > 0 && columnOrder.length === 0) {\r\n      // Use the first account's data to determine columns\r\n      const firstAccount = data[0]\r\n      if (firstAccount?.campaigns.length > 0) {\r\n        const columns = Object.keys(firstAccount.campaigns[0])\r\n        // Always include Labels column\r\n        const initialColumns = columns.filter(\r\n          (col) => col !== \"Labels\" && col !== \"campaignId\" && col !== \"accountId\" && col !== \"accountName\",\r\n        )\r\n        const initialVisibleColumns = [...initialColumns, \"Labels\"]\r\n        setVisibleColumns(initialVisibleColumns)\r\n\r\n        // Create column order with Campaign first, then Labels, then others\r\n        const baseColumns = [...initialColumns].filter(\r\n          (col) => col !== \"Campaign\" && col !== \"campaignName\" && col !== \"Labels\",\r\n        )\r\n        const orderedColumns = [\"Campaign\", \"Labels\", ...baseColumns]\r\n        setColumnOrder(orderedColumns)\r\n      }\r\n    }\r\n  }, [data, columnOrder.length]) // Only run when data changes and columnOrder is empty\r\n\r\n  // Group campaigns by labels\r\n  useEffect(() => {\r\n    if (isGroupingEnabled && hasAnyLabels) {\r\n      // Create a map to group campaigns by label\r\n      const labelMap: { [key: string]: Campaign[] } = {}\r\n\r\n      // Initialize each label with an empty array\r\n      allUniqueLabels.forEach((label) => {\r\n        labelMap[label] = []\r\n      })\r\n\r\n      // Group campaigns by labels\r\n      const unGrouped: Campaign[] = []\r\n\r\n      filteredCampaigns.forEach((campaign) => {\r\n        const currentCampaignLabels = accountLabels[campaign.campaignId] || []\r\n\r\n        if (currentCampaignLabels.length > 0) {\r\n          // Add campaign to each of its label groups\r\n          currentCampaignLabels.forEach((label) => {\r\n            labelMap[label].push(campaign)\r\n          })\r\n        } else {\r\n          // Add to ungrouped\r\n          unGrouped.push(campaign)\r\n        }\r\n      })\r\n\r\n      // Convert to array format with expanded state\r\n      const grouped = Object.entries(labelMap)\r\n        .filter(([, campaigns]) => campaigns.length > 0) // Only include groups with campaigns\r\n        .map(([label, campaigns]) => ({\r\n          label,\r\n          campaigns,\r\n          isExpanded: true,\r\n        }))\r\n\r\n      setGroupedCampaigns(grouped)\r\n      setUngroupedCampaigns(unGrouped)\r\n    } else {\r\n      setGroupedCampaigns([])\r\n      setUngroupedCampaigns(filteredCampaigns)\r\n    }\r\n  }, [filteredCampaigns, accountLabels, isGroupingEnabled, hasAnyLabels, allUniqueLabels])\r\n\r\n  const labelColorMap = React.useMemo(() => {\r\n    const map = new Map<string, string>()\r\n    let colorIndex = 0\r\n\r\n    allUniqueLabels.forEach((label) => {\r\n      map.set(label, LABEL_COLORS[colorIndex % LABEL_COLORS.length])\r\n      colorIndex++\r\n    })\r\n\r\n    return map\r\n  }, [allUniqueLabels])\r\n\r\n\r\n  // Static positioning approach - no DOM measurements needed\r\n  const getLeftPosition = (columnIndex: number): number => {\r\n    // Get only the visible columns in the correct order\r\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col))\r\n    const currentColumn = visibleOrderedColumns[columnIndex]\r\n    \r\n    // Only calculate position for frozen columns\r\n    if (!frozenColumns.includes(currentColumn)) {\r\n      return 0\r\n    }\r\n\r\n    // Static positioning based on column order\r\n    let position = 0\r\n    \r\n    for (let i = 0; i < columnIndex; i++) {\r\n      const column = visibleOrderedColumns[i]\r\n      if (frozenColumns.includes(column)) {\r\n        // Use fixed widths that match the CSS\r\n        if (column === \"Campaign\") {\r\n          position += 250 // Campaign column width\r\n        } else if (column === \"Labels\") {\r\n          position += 150 // Labels column width  \r\n        } else {\r\n          position += 85 // Default column width\r\n        }\r\n      }\r\n    }\r\n\r\n    return position\r\n  }\r\n\r\n  const shouldShowSeparator = (column: string): boolean => {\r\n    if (scrollLeft <= 0) return false;\r\n\r\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col));\r\n    const frozenVisibleColumns = visibleOrderedColumns.filter((col) => frozenColumns.includes(col));\r\n\r\n    if (frozenVisibleColumns.length === 0) return false;\r\n\r\n    const lastFrozenColumn = frozenVisibleColumns[frozenVisibleColumns.length - 1];\r\n    return column === lastFrozenColumn;\r\n  };\r\n\r\n  // Add a function to get the separator class\r\n  const getSeparatorClass = (column: string) => {\r\n    if (!shouldShowSeparator(column)) return \"\";\r\n    return \"relative after:content-[''] after:absolute after:right-0 after:top-0 after:bottom-0 after:w-[3px] after:bg-gradient-to-r after:from-slate-400 after:to-transparent after:shadow-lg before:content-[''] before:absolute before:right-0 before:top-0 before:bottom-0 before:w-[1px] before:bg-slate-300\";\r\n  };\r\n\r\n  const handleAddLabel = (campaignId: string, label: string) => {\r\n    if (label && currentAccountData) {\r\n      dispatch(\r\n        addLabelToCampaign({\r\n          accountId: currentAccountData.account_id,\r\n          campaignId: campaignId,\r\n          label,\r\n        }),\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleRemoveLabel = (campaignId: string, label: string) => {\r\n    if (currentAccountData) {\r\n      dispatch(\r\n        removeLabelFromCampaign({\r\n          accountId: currentAccountData.account_id,\r\n          campaignId: campaignId,\r\n          label,\r\n        }),\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleCreateNewLabel = (campaignId: string) => {\r\n    if (editLabelValue) {\r\n      handleAddLabel(campaignId, editLabelValue)\r\n      setEditLabelValue(\"\")\r\n      setEditingLabel(null)\r\n    }\r\n  }\r\n\r\n  // Get column style based on column name\r\n  const getColumnStyle = (column: string) => {\r\n    if (column === \"Campaign\") {\r\n      return { width: \"auto\", minWidth: \"250px\" }\r\n    }\r\n    if (column === \"Labels\") {\r\n      return { width: \"auto\", minWidth: \"150px\" }\r\n    }\r\n\r\n    // All other columns get the fixed width\r\n    return {\r\n      width: DEFAULT_COLUMN_WIDTH,\r\n      minWidth: DEFAULT_COLUMN_WIDTH,\r\n    }\r\n  }\r\n\r\n  // Campaign drag and drop handlers\r\n  const handleDragStart = (campaignId: string) => {\r\n    setDraggedCampaign(campaignId)\r\n  }\r\n\r\n  const handleDragOver = (e: React.DragEvent, campaignId: string) => {\r\n    e.preventDefault()\r\n    if (campaignId !== draggedCampaign) {\r\n      setDragOverCampaign(campaignId)\r\n    }\r\n  }\r\n\r\n  const handleDrop = (targetCampaignId: string) => {\r\n    if (!draggedCampaign || draggedCampaign === targetCampaignId) return\r\n\r\n    setDraggedCampaign(null)\r\n    setDragOverCampaign(null)\r\n  }\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedCampaign(null)\r\n    setDragOverCampaign(null)\r\n  }\r\n\r\n  // Column drag and drop handlers\r\n  const handleColumnDragStart = (columnName: string) => {\r\n    setDraggedColumn(columnName)\r\n  }\r\n\r\n  const handleColumnDragOver = (e: React.DragEvent, columnName: string) => {\r\n    e.preventDefault()\r\n    if (columnName !== draggedColumn) {\r\n      setDragOverColumn(columnName)\r\n    }\r\n  }\r\n\r\n  const handleColumnDrop = (targetColumnName: string) => {\r\n    if (!draggedColumn || draggedColumn === targetColumnName) return\r\n\r\n    // Reorder columns\r\n    const draggedIndex = columnOrder.indexOf(draggedColumn)\r\n    const targetIndex = columnOrder.indexOf(targetColumnName)\r\n\r\n    if (draggedIndex !== -1 && targetIndex !== -1) {\r\n      const newColumnOrder = [...columnOrder]\r\n      newColumnOrder.splice(draggedIndex, 1)\r\n      newColumnOrder.splice(targetIndex, 0, draggedColumn)\r\n      setColumnOrder(newColumnOrder)\r\n    }\r\n\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  const handleColumnDragEnd = () => {\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  // Toggle full screen mode\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen)\r\n  }\r\n\r\n  // Toggle group expansion\r\n  const toggleGroupExpansion = (labelIndex: number) => {\r\n    const updatedGroups = [...groupedCampaigns]\r\n    updatedGroups[labelIndex].isExpanded = !updatedGroups[labelIndex].isExpanded\r\n    setGroupedCampaigns(updatedGroups)\r\n  }\r\n\r\n  // Calculate summary values for a group\r\n  const calculateGroupSummary = (campaigns: Campaign[]) => {\r\n    const summary: { [key: string]: number | string } = {}\r\n\r\n    // Get columns that should be visible in the summary\r\n    const summaryColumns = columnOrder.filter(\r\n      (col) => visibleColumns.includes(col) && col !== \"Campaign\" && col !== \"Labels\",\r\n    )\r\n\r\n    // Define different calculation methods for specific columns\r\n    const calculationMethods: { [key: string]: (values: number[], campaigns: Campaign[]) => number } = {\r\n      \"Conversion Rate\": (_, campaigns) => {\r\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\r\n        const totalPurchases = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Purchases\"] || 0), 0)\r\n        if (totalLinkClicks === 0) return 0\r\n\r\n        const conversionRate = (totalPurchases / totalLinkClicks) * 100\r\n        return conversionRate\r\n      },\r\n      \"CPM (Reach Based)\": (_, campaigns) => {\r\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\r\n        const totalSpend = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Amount spend\"] || 0), 0)\r\n\r\n        const cpmReachBased = totalSpend / (totalreach / 1000)\r\n        return cpmReachBased\r\n      },\r\n      \"Audience Saturation Score\": (_, campaigns) => {\r\n        const totaloutboundctr = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Outbound CTR\"] || 0), 0)\r\n        const totalFrequency = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Frequency\"] || 0), 0)\r\n        if (totaloutboundctr === 0) return 0\r\n\r\n        const audienceScore = (totalFrequency / totaloutboundctr) * 100\r\n        return audienceScore\r\n      },\r\n      \"Reach v/s Unique Click\": (_, campaigns) => {\r\n        const totalUniqueClicks = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Unique Link Click\"] || 0),\r\n          0,\r\n        )\r\n        const totalreach = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Reach\"] || 0), 0)\r\n        if (totalUniqueClicks === 0) return 0\r\n\r\n        const reachVsUniqueClick = totalreach / totalUniqueClicks\r\n        return reachVsUniqueClick\r\n      },\r\n      \"High-Intent Click Rate\": (_, campaigns) => {\r\n        const totalAddToCart = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Add To Cart (ATC)\"] || 0), 0)\r\n        const totalCheckoutInitiated = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Checkout Initiate (CI)\"] || 0),\r\n          0,\r\n        )\r\n        const totalLandingPageView = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Landing Page View\"] || 0),\r\n          0,\r\n        )\r\n        const totalLinkClicks = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Link Click\"] || 0), 0)\r\n        if (totalLinkClicks === 0) return 0\r\n\r\n        const highIntentClickRate =\r\n          ((totalAddToCart + totalCheckoutInitiated + totalLandingPageView) / totalLinkClicks) * 100\r\n        return highIntentClickRate\r\n      },\r\n      HookRate: (_, campaigns) => {\r\n        const threeSecondsView = campaigns.reduce(\r\n          (sum, campaign) => sum + Number(campaign[\"Three Seconds View\"] || 0),\r\n          0,\r\n        )\r\n        const totalimpressions = campaigns.reduce((sum, campaign) => sum + Number(campaign[\"Impressions\"] || 0), 0)\r\n        if (totalimpressions === 0) return 0\r\n\r\n        const hookrate = (threeSecondsView / totalimpressions) * 100\r\n        return hookrate\r\n      },\r\n      DEFAULT: (values, _) => values.reduce((sum, val) => sum + val, 0),\r\n    }\r\n\r\n    // Then modify how you call these methods:\r\n    summaryColumns.forEach((column) => {\r\n      const values = campaigns.map((campaign) => Number(campaign[column] || 0)).filter((value) => !isNaN(value))\r\n\r\n      const calculateMethod = calculationMethods[column] || calculationMethods[\"DEFAULT\"]\r\n      summary[column] = calculateMethod(values, campaigns).toFixed(2)\r\n    })\r\n\r\n    return summary\r\n  }\r\n\r\n  const getTableHeight = () => {\r\n    return \"h-[calc(100vh-120px)]\"\r\n  }\r\n\r\n  const renderLabelDropdown = (campaign: Campaign) => {\r\n    const campaignLabels = accountLabels[campaign.campaignId] || []\r\n\r\n    return (\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"outline\" size=\"sm\" className=\"h-7 w-full justify-between\">\r\n            <div className=\"flex items-center gap-1 overflow-hidden\">\r\n              <Tag className=\"h-3.5 w-3.5 text-slate-500 shrink-0\" />\r\n              <span className=\"truncate\">\r\n                {campaignLabels.length > 0\r\n                  ? `${campaignLabels.length} label${campaignLabels.length > 1 ? \"s\" : \"\"}`\r\n                  : \"Add label\"}\r\n              </span>\r\n            </div>\r\n            <ChevronDown className=\"h-3.5 w-3.5 opacity-70\" />\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"start\" className=\"w-56\">\r\n          <div className=\"p-2\">\r\n            <div className=\"text-xs font-medium text-slate-500 mb-2\">Predefined labels</div>\r\n            {PREDEFINED_LABELS.map((label) => {\r\n              const isSelected = campaignLabels.includes(label)\r\n              return (\r\n                <DropdownMenuItem\r\n                  key={label}\r\n                  className=\"flex items-center gap-2 cursor-pointer\"\r\n                  onClick={() => {\r\n                    if (isSelected) {\r\n                      handleRemoveLabel(campaign.campaignId, label)\r\n                    } else {\r\n                      handleAddLabel(campaign.campaignId, label)\r\n                    }\r\n                  }}\r\n                >\r\n                  <Badge\r\n                    className={`bg-slate-100 text-slate-800 border border-slate-200 hover:bg-slate-200 text-xs py-0.5 px-2 w-full`}\r\n                  >\r\n                    {label}\r\n                  </Badge>\r\n                </DropdownMenuItem>\r\n              )\r\n            })}\r\n\r\n            {allUniqueLabels.length > 0 && (\r\n              <>\r\n                <DropdownMenuSeparator />\r\n                <div className=\"text-xs font-medium text-slate-500 my-2\">Custom labels</div>\r\n                {allUniqueLabels\r\n                  .filter((label) => !PREDEFINED_LABELS.includes(label))\r\n                  .map((label) => {\r\n                    const isSelected = campaignLabels.includes(label)\r\n                    return (\r\n                      <DropdownMenuItem\r\n                        key={label}\r\n                        className=\"flex items-center gap-2 cursor-pointer\"\r\n                        onClick={() => {\r\n                          if (isSelected) {\r\n                            handleRemoveLabel(campaign.campaignId, label)\r\n                          } else {\r\n                            handleAddLabel(campaign.campaignId, label)\r\n                          }\r\n                        }}\r\n                      >\r\n                        <Badge className={`${labelColorMap.get(label)} text-xs py-0.5 px-2`}>{label}</Badge>\r\n                      </DropdownMenuItem>\r\n                    )\r\n                  })}\r\n              </>\r\n            )}\r\n\r\n            <DropdownMenuSeparator />\r\n\r\n            {editingLabel === campaign.campaignId ? (\r\n              <div className=\"flex items-center gap-1 px-2 py-1\">\r\n                <Input\r\n                  ref={newLabelInputRef}\r\n                  value={editLabelValue}\r\n                  onChange={(e) => setEditLabelValue(e.target.value)}\r\n                  placeholder=\"New label name\"\r\n                  className=\"h-7 text-xs\"\r\n                  autoFocus\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\") {\r\n                      handleCreateNewLabel(campaign.campaignId)\r\n                    } else if (e.key === \"Escape\") {\r\n                      setEditingLabel(null)\r\n                      setEditLabelValue(\"\")\r\n                    }\r\n                  }}\r\n                />\r\n                <Button size=\"sm\" className=\"h-7 px-2\" onClick={() => handleCreateNewLabel(campaign.campaignId)}>\r\n                  <Check className=\"h-3.5 w-3.5\" />\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <DropdownMenuItem\r\n                className=\"flex items-center gap-2 cursor-pointer\"\r\n                onClick={(e) => {\r\n                  e.preventDefault()\r\n                  setEditingLabel(campaign.campaignId)\r\n                  setEditLabelValue(\"\")\r\n                  setTimeout(() => {\r\n                    newLabelInputRef.current?.focus()\r\n                  }, 0)\r\n                }}\r\n              >\r\n                <Plus className=\"h-3.5 w-3.5 text-slate-500\" />\r\n                <span className=\"text-sm\">Create new label</span>\r\n              </DropdownMenuItem>\r\n            )}\r\n          </div>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (scrollTimeoutRef.current) {\r\n        clearTimeout(scrollTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <Card className={`overflow-hidden ${isFullScreen ? \"fixed inset-0 z-50\" : \"\"} border-slate-200 shadow-md`}>\r\n        <div className=\"flex items-center justify-between p-3 border-b\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"flex items-center gap-2 bg-slate-100 p-2 rounded-2xl\">\r\n              {/* Add All tab if blended summary is available */}\r\n              {blendedSummary && blendedSummary.length > 0 && (\r\n                <button\r\n                  key=\"all\"\r\n                  onClick={() => setActiveTab(\"all\")}\r\n                  className={`px-6 py-1 rounded-2xl text-sm font-medium transition-all duration-200 ${\r\n                    activeTab === \"all\"\r\n                      ? \"bg-white text-blue-700 shadow-sm\"\r\n                      : \"text-gray-600 hover:text-gray-800 hover:bg-gray-50\"\r\n                  }`}\r\n                >\r\n                  All\r\n                </button>\r\n              )}\r\n              \r\n              {/* Individual account tabs */}\r\n              {data.map((account) => (\r\n                <button\r\n                  key={account.account_id}\r\n                  onClick={() => setActiveTab(account.account_id)}\r\n                  className={`px-6 py-1 rounded-2xl text-sm font-medium transition-all duration-200 ${\r\n                    activeTab === account.account_id\r\n                      ? \"bg-white text-blue-700 shadow-sm\"\r\n                      : \"text-gray-600 hover:text-gray-800 hover:bg-gray-50\"\r\n                  }`}\r\n                >\r\n                  {account.account_name}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n              {/* Date Picker */}\r\n              <DatePickerWithRange /> \r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className={`gap-1 font-medium ${statusFilter !== \"all\" ? \"bg-blue-50 text-blue-600 border-blue-200\" : \"\"}`}\r\n                >\r\n                  <Filter className={`h-4 w-4 ${statusFilter !== \"all\" ? \"text-blue-600\" : \"text-slate-500\"}`} />\r\n                  {statusFilter === \"all\" ? \"All Status\" : statusFilter === \"active\" ? \"Active\" : \"Paused\"}\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\" className=\"w-32\">\r\n                <DropdownMenuItem\r\n                  onClick={() => setStatusFilter(\"all\")}\r\n                  className={statusFilter === \"all\" ? \"bg-blue-50\" : \"\"}\r\n                >\r\n                  All Status\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem\r\n                  onClick={() => setStatusFilter(\"active\")}\r\n                  className={statusFilter === \"active\" ? \"bg-blue-50\" : \"\"}\r\n                >\r\n                  Active\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem\r\n                  onClick={() => setStatusFilter(\"paused\")}\r\n                  className={statusFilter === \"paused\" ? \"bg-blue-50\" : \"\"}\r\n                >\r\n                  Paused\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsEditMode(!isEditMode)}\r\n                  size=\"sm\"\r\n                  className={`gap-1 font-medium ${isEditMode ? \"bg-blue-50 text-blue-600 border-blue-200\" : \"\"}`}\r\n                  disabled={!isGroupingEnabled}\r\n                >\r\n                  <Edit className={`h-4 w-4 ${isEditMode ? \"text-blue-600\" : \"text-slate-500\"}`} />\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isEditMode ? \"Exit Edit Mode\" : \"Edit Labels\"}</TooltipContent>\r\n            </Tooltip>\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsGroupingEnabled(!isGroupingEnabled)}\r\n                  size=\"sm\"\r\n                  className=\"gap-1 font-medium\"\r\n                >\r\n                  {isGroupingEnabled ? (\r\n                    <>\r\n                      <LayoutGrid className=\"h-4 w-4 text-blue-600\" />\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <LayoutGrid className=\"h-4 w-4 text-slate-500\" />\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isGroupingEnabled ? \"Disable Grouping\" : \"Enable Grouping\"}</TooltipContent>\r\n            </Tooltip>\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <div>\r\n                  <ColumnManagementSheet\r\n                    visibleColumns={visibleColumns}\r\n                    columnOrder={columnOrder}\r\n                    frozenColumns={frozenColumns}\r\n                    onVisibilityChange={setVisibleColumns}\r\n                    onOrderChange={setColumnOrder}\r\n                    onFrozenChange={setFrozenColumns}\r\n                  />\r\n                </div>\r\n              </TooltipTrigger>\r\n              <TooltipContent>Manage Columns</TooltipContent>\r\n            </Tooltip>\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={toggleFullScreen} className=\"font-medium\">\r\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isFullScreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}</TooltipContent>\r\n            </Tooltip>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-3\">\r\n          {/* Campaign Table */}\r\n          {data.length === 0 ? (\r\n            <div className=\"text-center py-8 text-slate-500\">\r\n              No campaign data available\r\n            </div>\r\n          ) : (\r\n            <div\r\n              key={currentAccountData?.account_id}\r\n              className=\"block\"\r\n            >\r\n                <div\r\n                  ref={tableRef}\r\n                  className={`overflow-auto ${getTableHeight()} bg-white rounded-lg border border-slate-200 shadow-sm`}\r\n                  onScroll={(e) => {\r\n                    const target = e.target as HTMLDivElement\r\n                    const currentScrollLeft = target.scrollLeft\r\n\r\n                    setScrollLeft(currentScrollLeft)\r\n                    if (scrollTimeoutRef.current) {\r\n                      clearTimeout(scrollTimeoutRef.current)\r\n                    }\r\n                  }}\r\n                >\r\n                  <table className=\"w-full border-collapse text-xs relative\">\r\n                    <thead className=\"bg-slate-50 sticky top-0 z-20\">\r\n                      <tr>\r\n                        {columnOrder\r\n                          .filter((column) => visibleColumns.includes(column))\r\n                          .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\r\n                          .map((column, index) => {\r\n                            const isFrozen = frozenColumns.includes(column)\r\n                            const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                            const columnStyle = getColumnStyle(column)\r\n\r\n                            return (\r\n                              <th\r\n                                key={column}\r\n                                ref={(el) => (columnRefs.current[column] = el)}\r\n                                className={`text-left p-2 font-medium text-slate-700 border-b border-r ${\r\n                                  isFrozen ? \"sticky z-20 bg-slate-50\" : \"\"\r\n                                } ${dragOverColumn === column ? \"bg-blue-50\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                style={{\r\n                                  left: leftPos,\r\n                                  ...columnStyle,\r\n                                }}\r\n                                draggable\r\n                                onDragStart={() => handleColumnDragStart(column)}\r\n                                onDragOver={(e) => handleColumnDragOver(e, column)}\r\n                                onDrop={() => handleColumnDrop(column)}\r\n                                onDragEnd={handleColumnDragEnd}\r\n                              >\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <span>{column}</span>\r\n                                  <SlidersHorizontal className=\"h-3 w-3 text-slate-400 cursor-grab\" />\r\n                                </div>\r\n                              </th>\r\n                            )\r\n                          })}\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {/* Render grouped campaigns */}\r\n                      {isGroupingEnabled &&\r\n                        groupedCampaigns.map((group, groupIndex) => (\r\n                          <React.Fragment key={`group-${group.label}`}>\r\n                            {/* Label group header/summary row */}\r\n                            <tr className=\"bg-gradient-to-r from-slate-100 to-slate-50 font-medium hover:bg-slate-100 transition-colors\">\r\n                              {columnOrder\r\n                                .filter((column) => visibleColumns.includes(column))\r\n                                .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\r\n                                .map((column, index) => {\r\n                                  const isFrozen = frozenColumns.includes(column)\r\n                                  const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                                  const columnStyle = getColumnStyle(column)\r\n                                  const summary = calculateGroupSummary(group.campaigns)\r\n\r\n                                  if (column === \"Campaign\") {\r\n                                    return (\r\n                                      <td\r\n                                        key={column}\r\n                                        className={`p-2 border-r sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50 ${getSeparatorClass(column)}`}\r\n                                        style={{\r\n                                          left: leftPos,\r\n                                          ...columnStyle,\r\n                                        }}\r\n                                      >\r\n                                        <div className=\"flex items-center\">\r\n                                          <button\r\n                                            onClick={() => toggleGroupExpansion(groupIndex)}\r\n                                            className=\"mr-2 focus:outline-none rounded-full p-0.5 hover:bg-slate-200 transition-colors\"\r\n                                          >\r\n                                            {group.isExpanded ? (\r\n                                              <ChevronDown className=\"h-4 w-4 text-slate-600\" />\r\n                                            ) : (\r\n                                              <ChevronRight className=\"h-4 w-4 text-slate-600\" />\r\n                                            )}\r\n                                          </button>\r\n                                          <span className=\"font-medium text-slate-700\">\r\n                                            Group: {group.campaigns.length} campaigns\r\n                                          </span>\r\n                                        </div>\r\n                                      </td>\r\n                                    )\r\n                                  }\r\n\r\n                                  if (column === \"Labels\") {\r\n                                    return (\r\n                                      <td\r\n                                        key={column}\r\n                                        className={`p-2 border-r ${\r\n                                          isFrozen\r\n                                            ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                            : \"bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                        } ${getSeparatorClass(column)}`}\r\n                                        style={{\r\n                                          left: leftPos,\r\n                                          ...columnStyle,\r\n                                        }}\r\n                                      >\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                          <Badge\r\n                                            className={`${labelColorMap.get(group.label)} w-fit flex items-center gap-1 cursor-default text-xs py-0.5 px-2 rounded-md`}\r\n                                          >\r\n                                            {group.label}\r\n                                          </Badge>\r\n                                          {isEditMode && (\r\n                                            <Button\r\n                                              variant=\"ghost\"\r\n                                              size=\"sm\"\r\n                                              className=\"h-6 w-6 p-0 rounded-full hover:bg-red-50\"\r\n                                              onClick={() => {\r\n                                                // Remove this label from all campaigns in this group\r\n                                                group.campaigns.forEach((campaign) => {\r\n                                                  handleRemoveLabel(campaign.campaignId, group.label)\r\n                                                })\r\n                                              }}\r\n                                            >\r\n                                              <X className=\"h-3.5 w-3.5 text-red-500\" />\r\n                                            </Button>\r\n                                          )}\r\n                                        </div>\r\n                                      </td>\r\n                                    )\r\n                                  }\r\n\r\n                                  return (\r\n                                    <td\r\n                                      key={column}\r\n                                      className={`p-2 border-r ${\r\n                                        isFrozen\r\n                                          ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                          : \"bg-gradient-to-r from-slate-100 to-slate-50\"\r\n                                      } font-semibold`}\r\n                                      style={{\r\n                                        left: leftPos,\r\n                                        ...columnStyle,\r\n                                      }}\r\n                                    >\r\n                                      <div>{summary[column]}</div>\r\n                                    </td>\r\n                                  )\r\n                                })}\r\n                            </tr>\r\n\r\n                            {/* Individual campaigns in the group */}\r\n                            {group.isExpanded &&\r\n                              group.campaigns.map((campaign, index) => (\r\n                                <tr\r\n                                  key={`group-${group.label}-campaign-${campaign.campaignId}-${index}`}\r\n                                  className={`group border-b border-2 hover:bg-slate-50 transition-colors ${\r\n                                    dragOverCampaign === campaign.campaignName ? \"bg-blue-50\" : \"\"\r\n                                  }`}\r\n                                  draggable\r\n                                  onDragStart={() => handleDragStart(campaign.campaignName)}\r\n                                  onDragOver={(e) => handleDragOver(e, campaign.campaignName)}\r\n                                  onDrop={() => handleDrop(campaign.campaignName)}\r\n                                  onDragEnd={handleDragEnd}\r\n                                >\r\n                                  {columnOrder\r\n                                    .filter((column) => visibleColumns.includes(column))\r\n                                    .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\r\n                                    .map((column, index) => {\r\n                                      const isFrozen = frozenColumns.includes(column)\r\n                                      const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                                      const columnStyle = getColumnStyle(column)\r\n\r\n                                      if (column === \"Campaign\") {\r\n                                        return (\r\n                                          <td\r\n                                            key={column}\r\n                                            className={`p-2 border-r sticky bg-white z-10 group-hover:bg-slate-50 transition-colors ${getSeparatorClass(column)}`}\r\n                                            style={{\r\n                                              left: leftPos,\r\n                                              paddingLeft: \"30px\",\r\n                                              ...columnStyle,\r\n                                            }}\r\n                                          >\r\n                                            <div className=\"flex items-center justify-between gap-2\">\r\n                                              <span className=\"font-medium\">{campaign.campaignName}</span>\r\n                                              { campaign.accountName && (\r\n                                                <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded whitespace-nowrap\">\r\n                                                  {campaign.accountName}\r\n                                                </span>\r\n                                              )}\r\n                                            </div>\r\n                                          </td>\r\n                                        )\r\n                                      }\r\n\r\n                                      if (column === \"Labels\") {\r\n                                        return (\r\n                                          <td\r\n                                            key={column}\r\n                                            className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white group-hover:bg-slate-50 transition-colors\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                            style={{\r\n                                              left: leftPos,\r\n                                              ...columnStyle,\r\n                                            }}\r\n                                          >\r\n                                            {isEditMode && isGroupingEnabled ? (\r\n                                              <div className=\"flex items-center gap-2\">\r\n                                                <Badge\r\n                                                  className={`${labelColorMap.get(group.label)} w-fit flex items-center gap-1 text-xs py-0.5 px-2 rounded-md`}\r\n                                                >\r\n                                                  {group.label}\r\n                                                </Badge>\r\n                                                <Button\r\n                                                  variant=\"ghost\"\r\n                                                  size=\"sm\"\r\n                                                  className=\"h-6 w-6 p-0 rounded-full hover:bg-red-50\"\r\n                                                  onClick={() => handleRemoveLabel(campaign.campaignId, group.label)}\r\n                                                >\r\n                                                  <X className=\"h-3.5 w-3.5 text-red-500\" />\r\n                                                </Button>\r\n                                                <DropdownMenu>\r\n                                                  <DropdownMenuTrigger asChild>\r\n                                                    <Button variant=\"outline\" size=\"sm\" className=\"h-7\">\r\n                                                      Change\r\n                                                    </Button>\r\n                                                  </DropdownMenuTrigger>\r\n                                                  <DropdownMenuContent align=\"start\" className=\"w-56\">\r\n                                                    <div className=\"p-2\">\r\n                                                      {allUniqueLabels\r\n                                                        .filter((label) => label !== group.label)\r\n                                                        .map((label) => (\r\n                                                          <DropdownMenuItem\r\n                                                            key={label}\r\n                                                            className=\"flex items-center gap-2 cursor-pointer\"\r\n                                                            onClick={() => {\r\n                                                              handleRemoveLabel(campaign.campaignId, group.label)\r\n                                                              handleAddLabel(campaign.campaignId, label)\r\n                                                            }}\r\n                                                          >\r\n                                                            <Badge\r\n                                                              className={`${labelColorMap.get(label)} text-xs py-0.5 px-2`}\r\n                                                            >\r\n                                                              {label}\r\n                                                            </Badge>\r\n                                                          </DropdownMenuItem>\r\n                                                        ))}\r\n                                                      <DropdownMenuSeparator />\r\n                                                      <DropdownMenuItem\r\n                                                        className=\"flex items-center gap-2 cursor-pointer\"\r\n                                                        onClick={(e) => {\r\n                                                          e.preventDefault()\r\n                                                          setEditingLabel(campaign.campaignId)\r\n                                                          setEditLabelValue(\"\")\r\n                                                          setTimeout(() => {\r\n                                                            newLabelInputRef.current?.focus()\r\n                                                          }, 0)\r\n                                                        }}\r\n                                                      >\r\n                                                        <Plus className=\"h-3.5 w-3.5 text-slate-500\" />\r\n                                                        <span className=\"text-sm\">Create new label</span>\r\n                                                      </DropdownMenuItem>\r\n                                                      {editingLabel === campaign.campaignName && (\r\n                                                        <div className=\"flex items-center gap-1 px-2 py-1 mt-2\">\r\n                                                          <Input\r\n                                                            ref={newLabelInputRef}\r\n                                                            value={editLabelValue}\r\n                                                            onChange={(e) => setEditLabelValue(e.target.value)}\r\n                                                            placeholder=\"New label name\"\r\n                                                            className=\"h-7 text-xs\"\r\n                                                            autoFocus\r\n                                                            onKeyDown={(e) => {\r\n                                                              if (e.key === \"Enter\") {\r\n                                                                handleCreateNewLabel(campaign.campaignId)\r\n                                                                handleRemoveLabel(campaign.campaignId, group.label)\r\n                                                              } else if (e.key === \"Escape\") {\r\n                                                                setEditingLabel(null)\r\n                                                                setEditLabelValue(\"\")\r\n                                                              }\r\n                                                            }}\r\n                                                          />\r\n                                                          <Button\r\n                                                            size=\"sm\"\r\n                                                            className=\"h-7 px-2\"\r\n                                                            onClick={() => {\r\n                                                              handleCreateNewLabel(campaign.campaignId)\r\n                                                              handleRemoveLabel(campaign.campaignId, group.label)\r\n                                                            }}\r\n                                                          >\r\n                                                            <Check className=\"h-3.5 w-3.5\" />\r\n                                                          </Button>\r\n                                                        </div>\r\n                                                      )}\r\n                                                    </div>\r\n                                                  </DropdownMenuContent>\r\n                                                </DropdownMenu>\r\n                                              </div>\r\n                                            ) : (\r\n                                              renderLabelDropdown(campaign)\r\n                                            )}\r\n                                          </td>\r\n                                        )\r\n                                      }\r\n\r\n                                      return (\r\n                                        <td\r\n                                          key={column}\r\n                                          className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white group-hover:bg-slate-50 transition-colors\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                          style={{\r\n                                            left: leftPos,\r\n                                            ...columnStyle,\r\n                                          }}\r\n                                        >\r\n                                          <div>{campaign[column]}</div>\r\n                                        </td>\r\n                                      )\r\n                                    })}\r\n                                </tr>\r\n                              ))}\r\n                          </React.Fragment>\r\n                        ))}\r\n\r\n                      {/* Ungrouped campaigns section */}\r\n                      {isGroupingEnabled && ungroupedCampaigns.length > 0 && (\r\n                        <tr className=\"bg-gradient-to-r from-gray-100 to-gray-50 font-medium hover:bg-gray-100 transition-colors\">\r\n                          {columnOrder\r\n                            .filter((column) => visibleColumns.includes(column))\r\n                            .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\r\n                            .map((column, index) => {\r\n                              const isFrozen = frozenColumns.includes(column)\r\n                              const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                              const columnStyle = getColumnStyle(column)\r\n\r\n                              if (column === \"Campaign\") {\r\n                                return (\r\n                                  <td\r\n                                    key={column}\r\n                                    className={`p-2 border-r sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50 ${getSeparatorClass(column)}`}\r\n                                    style={{\r\n                                      left: leftPos,\r\n                                      ...columnStyle,\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"font-medium text-slate-700 flex items-center\">\r\n                                      <Filter className=\"h-4 w-4 mr-2 text-slate-500\" />\r\n                                      Unlabeled: {ungroupedCampaigns.length} campaigns\r\n                                    </div>\r\n                                  </td>\r\n                                )\r\n                              }\r\n\r\n                              if (column === \"Labels\") {\r\n                                return (\r\n                                  <td\r\n                                    key={column}\r\n                                    className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-gradient-to-r from-slate-100 to-slate-50\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                    style={{\r\n                                      left: leftPos,\r\n                                      ...columnStyle,\r\n                                    }}\r\n                                  >\r\n                                    -\r\n                                  </td>\r\n                                )\r\n                              }\r\n\r\n                              // Calculate summary for ungrouped campaigns\r\n                              const summary = calculateGroupSummary(ungroupedCampaigns)\r\n\r\n                              return (\r\n                                <td\r\n                                  key={column}\r\n                                  className={`p-2 border-r ${\r\n                                    isFrozen\r\n                                      ? \"sticky z-10 bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                                      : \"bg-gradient-to-r from-gray-100 to-gray-50\"\r\n                                  } font-semibold`}\r\n                                  style={{\r\n                                    left: leftPos,\r\n                                    ...columnStyle,\r\n                                  }}\r\n                                >\r\n                                  <div>{summary[column]}</div>\r\n                                </td>\r\n                              )\r\n                            })}\r\n                        </tr>\r\n                      )}\r\n\r\n                      {/* Render ungrouped campaigns or all campaigns when grouping is disabled */}\r\n                      {(isGroupingEnabled ? ungroupedCampaigns : filteredCampaigns).map((campaign, index) => (\r\n                        <tr\r\n                          key={`${isGroupingEnabled ? \"ungrouped\" : \"all\"}-${campaign.campaignName}-${index}`}\r\n                          className={`group border-b border-2 hover:bg-slate-50 transition-colors ${\r\n                            dragOverCampaign === campaign.campaignName ? \"bg-blue-50\" : \"\"\r\n                          }`}\r\n                          draggable\r\n                          onDragStart={() => handleDragStart(campaign.campaignName)}\r\n                          onDragOver={(e) => handleDragOver(e, campaign.campaignName)}\r\n                          onDrop={() => handleDrop(campaign.campaignName)}\r\n                          onDragEnd={handleDragEnd}\r\n                        >\r\n                          {columnOrder\r\n                            .filter((column) => visibleColumns.includes(column))\r\n                            .filter((column) => !isGroupingEnabled || column !== \"campaignName\")\r\n                            .map((column, index) => {\r\n                              const isFrozen = frozenColumns.includes(column)\r\n                              const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                              const columnStyle = getColumnStyle(column)\r\n                              if (column === \"Campaign\") {\r\n                                return (\r\n                                  <td\r\n                                    key={column}\r\n                                    className={`p-2 border-r sticky z-10 bg-white group-hover:bg-slate-50 transition-colors ${getSeparatorClass(column)}`}\r\n                                    style={{\r\n                                      left: leftPos,\r\n                                      ...columnStyle,\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"flex items-center justify-between gap-2\">\r\n                                      <span className=\"font-medium\">{campaign.campaignName}</span>\r\n                                      { campaign.accountName && (\r\n                                        <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded whitespace-nowrap\">\r\n                                          {campaign.accountName}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </td>\r\n                                )\r\n                              }\r\n\r\n                              if (column === \"Labels\") {\r\n                                return (\r\n                                  <td\r\n                                    key={column}\r\n                                    className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white group-hover:bg-slate-50 transition-colors\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                    style={{\r\n                                      left: leftPos,\r\n                                      ...columnStyle,\r\n                                    }}\r\n                                  >\r\n                                    {renderLabelDropdown(campaign)}\r\n                                  </td>\r\n                                )\r\n                              }\r\n\r\n                              return (\r\n                                <td\r\n                                  key={column}\r\n                                  className={`p-2 border-r ${isFrozen ? \"sticky z-10 bg-white group-hover:bg-slate-50 transition-colors\" : \"\"} ${getSeparatorClass(column)}`}\r\n                                  style={{\r\n                                    left: leftPos,\r\n                                    ...columnStyle,\r\n                                  }}\r\n                                >\r\n                                  <div>{campaign[column]}</div>\r\n                                </td>\r\n                              )\r\n                            })}\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n        </div>\r\n      </Card>\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nexport default MetaCampaignTable\r\n","\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\nimport { useEffect, useCallback, useState, useMemo } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { format } from \"date-fns\";\r\nimport { ICampaignData } from \"@/interfaces\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport MetaCampaignTable from \"./components/MetaCampaignTable\";\r\nimport MissingDateWarning from \"@/components/dashboard_component/Missing-Date-Waning\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\r\nimport ConnectPlatform from \"@/pages/ReportPage/ConnectPlatformPage\";\r\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\r\nimport { selectFbTokenError } from \"@/store/slices/TokenSllice\";\r\nimport { Target } from \"lucide-react\";\r\n\r\n\r\nfunction CampaignPage() {\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [metaCampaign, setMetaCampaign] = useState<ICampaignData>();\r\n    const dateFrom = useSelector((state: RootState) => state.date.from);\r\n    const dateTo = useSelector((state: RootState) => state.date.to);\r\n    const date = useMemo(() => ({\r\n        from: dateFrom,\r\n        to: dateTo\r\n    }), [dateFrom, dateTo]);\r\n\r\n    const axiosInstance = createAxiosInstance();\r\n    const { brandId } = useParams();\r\n    const brands = useSelector((state: RootState) => state.brand.brands);\r\n    const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n    const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\r\n        ? true\r\n        : false;\r\n    const fbTokenError = useSelector(selectFbTokenError);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const fetchData = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n            const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n            try {\r\n                const response = await axiosInstance.post(\r\n                    `/api/meta/campaign/${brandId}`,\r\n                    { startDate, endDate, },\r\n                    { withCredentials: true }\r\n                );\r\n                const data = response.data;\r\n\r\n                setMetaCampaign(data);\r\n            } catch (error) {\r\n                console.error('Error fetching Facebook ad data:', error);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching ad data:', error);\r\n            if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n                alert('Your session has expired. Please log in again.');\r\n                navigate('/');\r\n            }\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [navigate, date, brandId]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        const intervalId = setInterval(fetchData, 3 * 60 * 60 * 1000); // 3 hours\r\n        return () => clearInterval(intervalId);\r\n    }, [fetchData]);\r\n\r\n\r\n\r\n    const accountData = metaCampaign?.accountData\r\n\r\n   \r\n    return (\r\n        <div className=\"flex h-screen bg-gray-100\">\r\n            <CollapsibleSidebar />\r\n            <div className=\"flex-1 h-screen overflow-auto\">\r\n                {fbTokenError ? (\r\n                    <NoAccessPage\r\n                        platform=\"Facebook Ads\"\r\n                        message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\r\n                        icon={<Target className=\"w-8 h-8 text-red-500\" />}\r\n                        loginOptions={[\r\n                            {\r\n                                label: \"Connect Facebook Ads\",\r\n                                provider: \"facebook\"\r\n                            }\r\n                        ]}\r\n                    />\r\n                ) : !hasFbAdAccount ? (\r\n                    <>\r\n                        <ConnectPlatform\r\n                            platform=\"facebook\"\r\n                            brandId={brandId ?? ''}\r\n                            onSuccess={(platform, accountName, accountId) => {\r\n                                console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n                            }}\r\n                        />\r\n                    </>) : (!date.from || !date.to) ? <MissingDateWarning /> : ((isLoading) ? <Loader isLoading={isLoading} /> :\r\n                        <>\r\n                        \r\n                            <main className=\"p-3 overflow-auto\">\r\n                                <div className=\"grid grid-cols-1 gap-6\">\r\n                                    {accountData && (\r\n                                        <MetaCampaignTable\r\n                                            data={accountData.map(account => ({\r\n                                                account_name: account.account_name,\r\n                                                account_id: account.account_id,\r\n                                                campaigns: account.campaigns.map(campaign => ({\r\n                                                    ...campaign,\r\n                                                    Campaign: campaign.campaignName\r\n                                                }))\r\n                                            }))}\r\n                                          \r\n                                            blendedSummary={metaCampaign?.blendedSummary?.map(campaign => ({\r\n                                                ...campaign,\r\n                                                Campaign: campaign.campaignName\r\n                                            }))}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            </main>\r\n\r\n\r\n                        </>\r\n                    )}\r\n                <HelpDeskModal />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default CampaignPage;\r\n\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { addFilter, removeFilter, clearFilters, FilterCondition } from '@/store/slices/interestFilterSlice';\r\nimport { RootState } from '@/store';\r\nimport { Filter, X } from 'lucide-react';\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\n\r\ninterface InterestFilterProps {\r\n  columns: string[];\r\n  tableId: string;\r\n}\r\n\r\nconst InterestFilter: React.FC<InterestFilterProps> = ({ columns, tableId }) => {\r\n  const dispatch = useDispatch();\r\n  const filters = useSelector((state: RootState) => state.interestFilter.filters[tableId] || []);\r\n  const [open, setOpen] = useState(false);\r\n  const [newFilter, setNewFilter] = useState<Omit<FilterCondition, 'value'> & { value: string }>({\r\n    column: columns[0],\r\n    operator: '>',\r\n    value: '',\r\n  });\r\n\r\n  const handleAddFilter = () => {\r\n    if (newFilter.value) {\r\n      dispatch(addFilter({\r\n        tableId,\r\n        filter: {\r\n          ...newFilter,\r\n          value: newFilter.column === 'Interest' ? newFilter.value : Number(newFilter.value)\r\n        }\r\n      }));\r\n      setNewFilter({ ...newFilter, value: '' });\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveFilter = (index: number) => {\r\n    dispatch(removeFilter({ tableId, index }));\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    dispatch(clearFilters({ tableId }));\r\n  };\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button variant=\"outline\" size=\"icon\" className=\"relative\">\r\n          <Filter className=\"h-4 w-4\" />\r\n          {filters.length > 0 && (\r\n            <span className=\"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center\">\r\n              {filters.length}\r\n            </span>\r\n          )}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-80\">\r\n        <div className=\"flex flex-col gap-4\">\r\n          <Select\r\n            value={newFilter.column}\r\n            onValueChange={(value) => setNewFilter({ ...newFilter, column: value })}\r\n          >\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Select column\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {columns.map((column) => (\r\n                <SelectItem key={column} value={column}>\r\n                  {column}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Select\r\n            value={newFilter.operator}\r\n            onValueChange={(value) => setNewFilter({ ...newFilter, operator: value as FilterCondition['operator'] })}\r\n          >\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Operator\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\">\">{'>'}</SelectItem>\r\n              <SelectItem value=\"<\">{'<'}</SelectItem>\r\n              <SelectItem value=\"=\">{'='}</SelectItem>\r\n              <SelectItem value=\">=\">{'>='}</SelectItem>\r\n              <SelectItem value=\"<=\">{'<='}</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Input\r\n            type={newFilter.column === 'Interest' ? 'text' : 'number'}\r\n            value={newFilter.value}\r\n            onChange={(e) => setNewFilter({ ...newFilter, value: e.target.value })}\r\n            placeholder=\"Enter value\"\r\n          />\r\n\r\n          <div className=\"flex gap-2\">\r\n            <Button onClick={handleAddFilter} className=\"flex-1\">Add Filter</Button>\r\n            <Button variant=\"outline\" onClick={handleClearFilters} className=\"flex-1\">\r\n              Clear All\r\n            </Button>\r\n          </div>\r\n\r\n          {filters.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"text-sm font-medium text-slate-700\">Active Filters</div>\r\n              {filters.map((filter: FilterCondition, index: number) => (\r\n                <div key={index} className=\"flex items-center gap-2 p-2 bg-slate-50 rounded-md\">\r\n                  <div className=\"flex-1 text-sm\">\r\n                    {filter.column} {filter.operator} {filter.value}\r\n                  </div>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => handleRemoveFilter(index)}\r\n                    className=\"h-6 w-6\"\r\n                  >\r\n                    <X className=\"h-3 w-3\" />\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default InterestFilter; ","import React, { useState, useRef } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { FacebookLogo } from \"@/data/logo\"\r\nimport {\r\n  Maximize,\r\n  Minimize,\r\n  SlidersHorizontal,\r\n} from \"lucide-react\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\nimport ColumnManagementSheet from \"../../../AnalyticsDashboard/Components/ColumnManagementSheet\"\r\nimport InterestFilter from \"./InterestFilter\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { RootState } from \"@/store\"\r\n\r\nconst DEFAULT_COLUMN_WIDTH = \"100px\"\r\n\r\ninterface InterestData {\r\n  Interest: string;\r\n  InterestId: string;\r\n  Spend: number;\r\n  Revenue: number;\r\n  Roas: number;\r\n  accounts?: string[];\r\n}\r\n\r\ninterface InterestTableProps {\r\n  data: {\r\n    resultsByAccount: {\r\n      [accountName: string]: {\r\n        adAccountId: string;\r\n        interestMetrics: InterestData[];\r\n      }\r\n    },\r\n    blendedSummary: InterestData[];\r\n  };\r\n  height?: string;\r\n  accountName?: string;\r\n  showAccounts?: boolean;\r\n}\r\n\r\nconst InterestTable: React.FC<InterestTableProps> = ({ data, height = \"max-h-96\", accountName, showAccounts = false }) => {\r\n  const [draggedInterest, setDraggedInterest] = useState<string | null>(null)\r\n  const [dragOverInterest, setDragOverInterest] = useState<string | null>(null)\r\n  const [isFullScreen, setIsFullScreen] = useState(false)\r\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null)\r\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null)\r\n\r\n  const filters = useSelector((state: RootState) => state.interestFilter.filters[accountName || 'blended'] || [])\r\n\r\n  const [visibleColumns, setVisibleColumns] = useState<string[]>(\r\n    showAccounts \r\n      ? [\"Interest\", \"Spend\", \"Revenue\", \"Roas\", \"accounts\"]\r\n      : [\"Interest\", \"Spend\", \"Revenue\", \"Roas\"]\r\n  );\r\n  const [columnOrder, setColumnOrder] = useState<string[]>(\r\n    showAccounts \r\n      ? [\"Interest\", \"Spend\", \"Revenue\", \"Roas\", \"accounts\"]\r\n      : [\"Interest\", \"Spend\", \"Revenue\", \"Roas\"]\r\n  );\r\n  const [frozenColumns, setFrozenColumns] = useState<string[]>([\"Interest\"])\r\n\r\n  const tableRef = useRef<HTMLDivElement>(null)\r\n  const columnRefs = useRef<{ [key: string]: HTMLTableCellElement | null }>({})\r\n\r\n  // Apply filters to the data\r\n  const applyFilters = (data: InterestData[]) => {\r\n    return data.filter(interest => {\r\n      return filters.every(filter => {\r\n        const value = interest[filter.column as keyof InterestData];\r\n        const filterValue = filter.value;\r\n\r\n        switch (filter.operator) {\r\n          case '>':\r\n            return Number(value) > Number(filterValue);\r\n          case '<':\r\n            return Number(value) < Number(filterValue);\r\n          case '=':\r\n            return String(value).toLowerCase() === String(filterValue).toLowerCase();\r\n          case '>=':\r\n            return Number(value) >= Number(filterValue);\r\n          case '<=':\r\n            return Number(value) <= Number(filterValue);\r\n          default:\r\n            return true;\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  // Determine which data to display based on accountName prop\r\n  const interestData = accountName \r\n    ? data.resultsByAccount[accountName]?.interestMetrics || []\r\n    : data.blendedSummary || []\r\n\r\n  // Apply filters to the data\r\n  const filteredInterestData = applyFilters(interestData)\r\n\r\n  // Get display name for the table header\r\n  const displayName = accountName || \"All Accounts\"\r\n\r\n  // Calculate left position for frozen columns\r\n  const getLeftPosition = (columnIndex: number): number => {\r\n    let position = 0\r\n\r\n    // Get only the visible columns in the correct order\r\n    const visibleOrderedColumns = columnOrder.filter((col) => visibleColumns.includes(col))\r\n\r\n    for (let i = 0; i < columnIndex; i++) {\r\n      const column = visibleOrderedColumns[i]\r\n      if (frozenColumns.includes(column)) {\r\n        const columnElement = columnRefs.current[column]\r\n        if (columnElement) {\r\n          position += columnElement.offsetWidth\r\n        }\r\n      }\r\n    }\r\n\r\n    return position\r\n  }\r\n\r\n  // Get column style based on column name\r\n  const getColumnStyle = (column: string) => {\r\n    if (column === \"Interest\") {\r\n      return { width: \"auto\", minWidth: \"200px\" }\r\n    }\r\n    if (column === \"accounts\") {\r\n      return { width: \"auto\", minWidth: \"120px\" }\r\n    }\r\n    return {\r\n      width: DEFAULT_COLUMN_WIDTH,\r\n      minWidth: DEFAULT_COLUMN_WIDTH,\r\n    }\r\n  }\r\n\r\n  // Campaign drag and drop handlers\r\n  const handleDragStart = (interestId: string) => {\r\n    setDraggedInterest(interestId)\r\n  }\r\n\r\n  const handleDragOver = (e: React.DragEvent, interestId: string) => {\r\n    e.preventDefault()\r\n    if (interestId !== draggedInterest) {\r\n      setDragOverInterest(interestId)\r\n    }\r\n  }\r\n\r\n  const handleDrop = (targetInterestId: string) => {\r\n    if (!draggedInterest || draggedInterest === targetInterestId) return \r\n\r\n    // Reorder campaigns logic would go here\r\n    // For now, just reset the state\r\n    setDraggedInterest(null)\r\n    setDragOverInterest(null)\r\n\r\n    // Note: In a real implementation, you would dispatch an action to update the order in your Redux store\r\n    console.log(`Dragged ${draggedInterest} and dropped on ${targetInterestId}`)\r\n  }\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedInterest(null)\r\n    setDragOverInterest(null)\r\n  }\r\n\r\n  // Column drag and drop handlers\r\n  const handleColumnDragStart = (columnName: string) => {\r\n    setDraggedColumn(columnName)\r\n  }\r\n\r\n  const handleColumnDragOver = (e: React.DragEvent, columnName: string) => {\r\n    e.preventDefault()\r\n    if (columnName !== draggedColumn) {\r\n      setDragOverColumn(columnName)\r\n    }\r\n  }\r\n\r\n  const handleColumnDrop = (targetColumnName: string) => {\r\n    if (!draggedColumn || draggedColumn === targetColumnName) return\r\n\r\n    // Reorder columns\r\n    const draggedIndex = columnOrder.indexOf(draggedColumn)\r\n    const targetIndex = columnOrder.indexOf(targetColumnName)\r\n\r\n    if (draggedIndex !== -1 && targetIndex !== -1) {\r\n      const newColumnOrder = [...columnOrder]\r\n      newColumnOrder.splice(draggedIndex, 1)\r\n      newColumnOrder.splice(targetIndex, 0, draggedColumn)\r\n      setColumnOrder(newColumnOrder)\r\n    }\r\n\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  const handleColumnDragEnd = () => {\r\n    setDraggedColumn(null)\r\n    setDragOverColumn(null)\r\n  }\r\n\r\n  // Toggle full screen mode\r\n  const toggleFullScreen = () => {\r\n    setIsFullScreen(!isFullScreen)\r\n  }\r\n\r\n  const getTableHeight = () => {\r\n    if (isFullScreen) {\r\n      return \"max-h-screen\"\r\n    }\r\n    return height\r\n  }\r\n\r\n  // Format currency values\r\n  const formatCurrency = (value: number) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n      style: 'currency',\r\n      currency: 'INR',\r\n      minimumFractionDigits: 2\r\n    }).format(value);\r\n  }\r\n\r\n  // Format ROAS values\r\n  const formatRoas = (value: number) => {\r\n    return value.toFixed(2) + 'x';\r\n  }\r\n\r\n  // Format accounts array\r\n  const formatAccounts = (accounts: string[] | undefined) => {\r\n    if (!accounts || accounts.length === 0) return \"-\";\r\n    if (accounts.length <= 2) return accounts.join(\", \");\r\n    return `${accounts[0]}, ${accounts[1]} +${accounts.length - 2} more`;\r\n  }\r\n\r\n  // Render cell content based on column\r\n  const renderCellContent = (interest: InterestData, column: string) => {\r\n    switch(column) {\r\n      case \"Interest\":\r\n        return interest.Interest;\r\n      case \"Spend\":\r\n        return formatCurrency(interest.Spend);\r\n      case \"Revenue\":\r\n        return formatCurrency(interest.Revenue);\r\n      case \"Roas\":\r\n        return formatRoas(interest.Roas);\r\n      case \"accounts\":\r\n        return formatAccounts(interest.accounts);\r\n      default:\r\n        return interest[column as keyof InterestData] || \"-\";\r\n    }\r\n  }\r\n\r\n  if (!interestData || interestData.length === 0) {\r\n    return (\r\n      <Card className=\"p-4\">\r\n        <div className=\"text-center text-slate-500\">No interest data available</div>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <Card className={`overflow-hidden ${isFullScreen ? \"fixed inset-0 z-50\" : \"\"} border-slate-200 shadow-md`}>\r\n        <div className=\"flex items-center justify-between p-3 border-b bg-gradient-to-r from-slate-50 to-white\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FacebookLogo height={\"1rem\"} width={\"1rem\"} />\r\n            <div className=\"text-base font-semibold text-slate-800\">Interest Performance <span>({displayName})</span></div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <InterestFilter \r\n                  columns={visibleColumns} \r\n                  tableId={accountName || 'blended'} \r\n                />\r\n              </TooltipTrigger>\r\n              <TooltipContent>Apply Filter</TooltipContent>\r\n            </Tooltip>\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={toggleFullScreen} className=\"font-medium\">\r\n                  {isFullScreen ? <Minimize className=\"h-4 w-4\" /> : <Maximize className=\"h-4 w-4\" />}\r\n                </Button>\r\n              </TooltipTrigger>\r\n              <TooltipContent>{isFullScreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}</TooltipContent>\r\n            </Tooltip>\r\n\r\n\r\n            <Tooltip>\r\n              <TooltipTrigger asChild>\r\n                <div>\r\n                  <ColumnManagementSheet\r\n                    visibleColumns={visibleColumns}\r\n                    columnOrder={columnOrder}\r\n                    frozenColumns={frozenColumns}\r\n                    onVisibilityChange={setVisibleColumns}\r\n                    onOrderChange={setColumnOrder}\r\n                    onFrozenChange={setFrozenColumns}\r\n                  />\r\n                </div>\r\n              </TooltipTrigger>\r\n              <TooltipContent>Manage Columns</TooltipContent>\r\n            </Tooltip>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-3\">\r\n\r\n          <div\r\n            ref={tableRef}\r\n            className={`overflow-auto ${getTableHeight()} bg-white rounded-lg border border-slate-200 shadow-sm `}\r\n          >\r\n            <table className=\"w-full border-collapse text-xs relative\">\r\n              <thead className=\"bg-slate-50 sticky top-0 z-20\">\r\n                <tr>\r\n                  {columnOrder\r\n                    .filter((column) => visibleColumns.includes(column))\r\n                    .map((column, index) => {\r\n                      const isFrozen = frozenColumns.includes(column)\r\n                      const leftPos = isFrozen ? `${getLeftPosition(index)}px` : undefined\r\n                      const columnStyle = getColumnStyle(column)\r\n\r\n                      return (\r\n                        <th\r\n                          key={column}\r\n                          ref={(el) => (columnRefs.current[column] = el)}\r\n                          className={`text-left p-2 font-medium text-slate-700 border-b border-r ${\r\n                            isFrozen ? \"sticky z-20 bg-slate-50\" : \"\"\r\n                          } ${dragOverColumn === column ? \"bg-blue-50\" : \"\"}`}\r\n                          style={{\r\n                            left: leftPos,\r\n                            ...columnStyle,\r\n                          }}\r\n                          draggable\r\n                          onDragStart={() => handleColumnDragStart(column)}\r\n                          onDragOver={(e) => handleColumnDragOver(e, column)}\r\n                          onDrop={() => handleColumnDrop(column)}\r\n                          onDragEnd={handleColumnDragEnd}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span>{column}</span>\r\n                            <SlidersHorizontal className=\"h-3 w-3 text-slate-400 cursor-grab\" />\r\n                          </div>\r\n                        </th>\r\n                      )\r\n                    })}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredInterestData.map((interest) => (\r\n                  <tr \r\n                    key={interest.InterestId} \r\n                    className={`border-b hover:bg-slate-50 transition-colors ${\r\n                        dragOverInterest === interest.InterestId ? \"bg-blue-50\" : \"\"\r\n                      }`}\r\n                    draggable\r\n                    onDragStart={() => handleDragStart(interest.InterestId)}\r\n                    onDragOver={(e) => handleDragOver(e, interest.InterestId)}\r\n                    onDrop={() => handleDrop(interest.InterestId)}\r\n                    onDragEnd={handleDragEnd}\r\n                  >\r\n                    {columnOrder\r\n                      .filter((column) => visibleColumns.includes(column))\r\n                      .map((column, colIndex) => {\r\n                        const isFrozen = frozenColumns.includes(column)\r\n                        const leftPos = isFrozen ? `${getLeftPosition(colIndex)}px` : undefined\r\n                        const columnStyle = getColumnStyle(column)\r\n                        \r\n                        return (\r\n                          <td\r\n                            key={`${interest.InterestId}-${column}`}\r\n                            className={`p-2 border-b border-r text-slate-700 ${\r\n                              isFrozen ? \"sticky z-10 bg-inherit\" : \"\"\r\n                            }`}\r\n                            style={{\r\n                              left: leftPos,\r\n                              ...columnStyle,\r\n                            }}\r\n                          >\r\n                            {renderCellContent(interest, column)}\r\n                          </td>\r\n                        )\r\n                      })}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nexport default InterestTable;","import Header from \"@/components/dashboard_component/Header\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\nimport { FaMeta } from \"react-icons/fa6\";\r\nimport { useEffect, useCallback, useState, useMemo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"@/store\";\r\nimport createAxiosInstance from \"@/pages/ConversionReportPage/components/axiosInstance\";\r\nimport { format } from \"date-fns\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport InterestTable from \"./components/InterestTable\";\r\nimport MissingDateWarning from \"@/components/dashboard_component/Missing-Date-Waning\";\r\nimport HelpDeskModal from \"@/components/dashboard_component/HelpDeskModal\";\r\nimport { selectFbTokenError, setFbTokenError } from \"@/store/slices/TokenSllice\";\r\nimport NoAccessPage from \"@/components/dashboard_component/NoAccessPage.\";\r\nimport ConnectPlatform from \"@/pages/ReportPage/ConnectPlatformPage\";\r\nimport { Target } from \"lucide-react\";\r\nimport Footer from \"@/pages/LandingPage/components/Footer\";\r\n// Define interface for interest data structure\r\ninterface InterestMetric {\r\n  Interest: string;\r\n  InterestId: string;\r\n  Spend: number;\r\n  Revenue: number;\r\n  Roas: number;\r\n  accounts?: string[];\r\n}\r\n\r\ninterface AccountData {\r\n  adAccountId: string;\r\n  interestMetrics: InterestMetric[];\r\n}\r\n\r\ninterface MetaInterestData {\r\n  resultsByAccount: {\r\n    [accountName: string]: AccountData;\r\n  };\r\n  blendedSummary: InterestMetric[];\r\n}\r\n\r\nfunction InterestPage() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [metaInterest, setMetaInterest] = useState<MetaInterestData | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const dispatch = useDispatch();\r\n  const brands = useSelector((state: RootState) => state.brand.brands);\r\n  const { brandId } = useParams();\r\n  const selectedBrand = brands.find((brand) => brand._id === brandId);\r\n  const hasFbAdAccount = (selectedBrand?.fbAdAccounts && selectedBrand?.fbAdAccounts.length > 0)\r\n    ? true\r\n    : false;\r\n  const fbTokenError = useSelector(selectFbTokenError);\r\n\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n    from: dateFrom,\r\n    to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n\r\n  useEffect(() => {\r\n    dispatch(setFbTokenError(false));\r\n}, [brandId]);\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n  const navigate = useNavigate();\r\n\r\n  const fetchData = useCallback(async () => {\r\n    if (!date.from || !date.to) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const startDate = format(date.from, \"yyyy-MM-dd\");\r\n      const endDate = format(date.to, \"yyyy-MM-dd\");\r\n\r\n      const response = await axiosInstance.post(\r\n        `/api/meta/interest/${brandId}`,\r\n        { startDate, endDate },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      if (response.data && response.data.data) {\r\n        setMetaInterest(response.data.data);\r\n      } else {\r\n        console.error(\"Invalid data structure:\", response.data);\r\n        setError(\"Invalid data structure received from API\");\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching interest data:', error);\r\n      if (axios.isAxiosError(error)) {\r\n        if (error.response?.status === 401) {\r\n          alert('Your session has expired. Please log in again.');\r\n          navigate('/');\r\n        } else {\r\n          setError(`API Error: ${error.response?.data?.message || error.message}`);\r\n        }\r\n      } else {\r\n        setError(\"An unexpected error occurred\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [navigate, date, brandId]);\r\n\r\n  useEffect(() => {\r\n    if (date.from && date.to) {\r\n      fetchData();\r\n    }\r\n  }, [fetchData, date]);\r\n\r\n  useEffect(() => {\r\n    // Set up refresh interval\r\n    const intervalId = setInterval(() => {\r\n      if (date.from && date.to) {\r\n        fetchData();\r\n      }\r\n    }, 3 * 60 * 60 * 1000); // 3 hours\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData, date]);\r\n\r\n  // Get available accounts for dropdown with safe access\r\n  const accounts = useMemo(() => {\r\n    if (!metaInterest?.resultsByAccount) {\r\n      console.log(\"No resultsByAccount found in metaInterest:\", metaInterest);\r\n      return [];\r\n    }\r\n\r\n    const accountKeys = Object.keys(metaInterest.resultsByAccount);\r\n    console.log(\"Found accounts:\", accountKeys);\r\n\r\n    return accountKeys.filter(account => {\r\n      const hasInterests = metaInterest.resultsByAccount[account]?.interestMetrics?.length > 0;\r\n      console.log(`Account ${account} has interests: ${hasInterests}`);\r\n      return hasInterests;\r\n    });\r\n  }, [metaInterest]);\r\n\r\n\r\n  const tableHeight = useMemo(() => {\r\n\r\n    const baseHeight = 'max-h-[calc(100vh-210px)]';\r\n\r\n    if (!metaInterest?.resultsByAccount) return baseHeight;\r\n\r\n    const accountCount = Object.keys(metaInterest.resultsByAccount).length;\r\n\r\n    if (accountCount <= 1) return baseHeight;\r\n\r\n    return 'max-h-[calc(100vh-400px)]';\r\n  }, [metaInterest]);\r\n\r\n\r\n  const hasBlendedData = metaInterest?.blendedSummary && metaInterest.blendedSummary.length > 0;\r\n  console.log(\"Has blended data:\", hasBlendedData, metaInterest?.blendedSummary?.length);\r\n\r\n  const hasAccountData = accounts.length > 0;\r\n  console.log(\"Has account data:\", hasAccountData, accounts.length);\r\n\r\n  const hasAnyData = hasBlendedData || hasAccountData;\r\n  console.log(\"Has any data:\", hasAnyData);\r\n\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n      <div className=\"flex-1 h-screen overflow-auto\">\r\n        <Header\r\n          title='Meta Interest Analysis'\r\n          Icon={FaMeta}\r\n          showDatePicker={true}\r\n        />\r\n\r\n        {fbTokenError ? (\r\n          <NoAccessPage\r\n            platform=\"Facebook Ads\"\r\n            message=\"Looks like we need to refresh your Facebook Ads connection to optimize your campaigns.\"\r\n            icon={<Target className=\"w-8 h-8 text-red-500\" />}\r\n            loginOptions={[\r\n              {\r\n                label: \"Connect Facebook Ads\",\r\n                provider: \"facebook\"\r\n              }\r\n            ]}\r\n          />\r\n        ) : !hasFbAdAccount ? (\r\n          <ConnectPlatform\r\n            platform=\"facebook\"\r\n            brandId={brandId ?? ''}\r\n            onSuccess={(platform, accountName, accountId) => {\r\n              console.log(`Successfully connected ${platform} account: ${accountName} (${accountId})`);\r\n            }}\r\n          />\r\n        ) : (!date.from || !date.to) ? (\r\n          <MissingDateWarning />\r\n        ) : isLoading ? (\r\n          <Loader isLoading={isLoading} />\r\n        ) : (\r\n          <main className=\"p-4 md:p-6 lg:px-8 overflow-auto\">\r\n            {error ? (\r\n              <div className=\"text-center py-12\">\r\n                <p className=\"text-red-500\">{error}</p>\r\n                <button\r\n                  onClick={fetchData}\r\n                  className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                >\r\n                  Retry\r\n                </button>\r\n              </div>\r\n            ) : metaInterest ? (\r\n              <div className=\"grid grid-cols-1 gap-6\">\r\n                {/* Blended Summary Table */}\r\n                {hasBlendedData && (\r\n                  <InterestTable\r\n                    data={metaInterest}\r\n                    height={tableHeight}\r\n                    showAccounts={true}\r\n                  />\r\n                )}\r\n\r\n                {/* Individual Account Tables */}\r\n                {hasAccountData && accounts.map((accountName) => (\r\n                  <InterestTable\r\n                    key={accountName}\r\n                    data={{\r\n                      resultsByAccount: {\r\n                        [accountName]: metaInterest.resultsByAccount[accountName]\r\n                      },\r\n                      blendedSummary: metaInterest.resultsByAccount[accountName].interestMetrics\r\n                    }}\r\n                    height={tableHeight}\r\n                    accountName={accountName}\r\n                    showAccounts={false}\r\n                  />\r\n                ))}\r\n\r\n                {/* No Data Message */}\r\n                {!hasAnyData && (\r\n                  <div className=\"text-center py-12\">\r\n                    <p className=\"text-gray-500\">No interest data available. Please try adjusting your date range.</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-12\">\r\n                <p className=\"text-gray-500\">No interest data available. Please try adjusting your date range.</p>\r\n              </div>\r\n            )}\r\n          </main>\r\n        )}\r\n        <Footer />\r\n        <HelpDeskModal />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InterestPage;","import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { baseURL } from '@/data/constant';\r\n\r\nfunction ShopifyAuth() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    async function handleShopifyRedirect() {\r\n      try {\r\n        const searchParams = new URLSearchParams(location.search);\r\n        const params: Record<string, string> = {};\r\n        \r\n        for (const [key, value] of searchParams.entries()) {\r\n          params[key] = value;\r\n        }\r\n        \r\n        if (!params.shop) {\r\n          setError('Shop parameter is missing');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        const response = await axios.post(`${baseURL}/api/auth/shopify`, params);\r\n        \r\n        if (response.data && response.data.success && response.data.authUrl) {\r\n          window.location.href = response.data.authUrl;\r\n        } else {\r\n          setError('Failed to get authorization URL');\r\n          setLoading(false);\r\n        }\r\n      } catch (err: unknown) {\r\n        if (axios.isAxiosError(err)) {\r\n          setError(err.response?.data?.error || err.message || 'An error occurred');\r\n        } else {\r\n          setError((err as Error)?.message || 'An error occurred');\r\n        }\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    handleShopifyRedirect();\r\n  }, [location]);\r\n\r\n  if (loading) {\r\n    return <div className=\"flex justify-center items-center h-screen\">\r\n      <div className=\"text-center\">\r\n        <div className=\"spinner mb-4\"></div>\r\n        <p className=\"text-lg\">Connecting to Dashboard...</p>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"flex justify-center items-center h-screen\">\r\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-6 max-w-md\">\r\n        <h2 className=\"text-red-700 text-lg font-medium mb-2\">Authentication Error</h2>\r\n        <p className=\"text-red-600\">{error}</p>\r\n        <button \r\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded\"\r\n          onClick={() => window.location.href = '/'}\r\n        >\r\n          Return to Home\r\n        </button>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default ShopifyAuth;","import { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst PricingCallback = () => {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    \r\n    const baseURL = import.meta.env.PROD\r\n        ? import.meta.env.VITE_API_URL\r\n        : import.meta.env.VITE_LOCAL_API_URL;\r\n\r\n    useEffect(() => {\r\n        const handlePricingCallback = async () => {\r\n            try {\r\n                const queryParams = new URLSearchParams(window.location.search);\r\n                const shop = queryParams.get('shop');\r\n                const chargeId = queryParams.get('charge_id');\r\n\r\n                if (!shop || !chargeId) {\r\n                    console.error('Missing required parameters: shop or charge_id');\r\n                    setError('Missing required parameters');\r\n                    setLoading(false);\r\n                    setTimeout(() => navigate('/dashboard'), 2000);\r\n                    return;\r\n                }\r\n\r\n                console.log(`Processing subscription for shop: ${shop}, charge ID: ${chargeId}`);\r\n                \r\n                // Call your backend API to process the subscription\r\n                await axios.get(`${baseURL}/api/pricing/callback`, {\r\n                    params: { shop, charge_id: chargeId }\r\n                });\r\n                \r\n                console.log('Subscription processed successfully');\r\n                setLoading(false);\r\n                navigate('/dashboard');\r\n                \r\n            } catch (error :any) {\r\n                console.error('Error processing subscription:', error);\r\n                setError(error.response?.data?.error || 'An error occurred');\r\n                setLoading(false);\r\n                setTimeout(() => navigate('/dashboard'), 2000);\r\n            }\r\n        };\r\n\r\n        handlePricingCallback();\r\n    }, [navigate, baseURL]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-screen\">\r\n                <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                <p className=\"mt-4 text-lg font-medium\">Processing your subscription...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-screen\">\r\n                <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                    <p>Error: {error}</p>\r\n                    <p className=\"mt-2\">Redirecting to dashboard...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\nexport default PricingCallback;","import { Sparkles } from \"lucide-react\"\r\nimport BrandSetup from \"./components/BrandForm\"\r\nimport CollapsibleSidebar from \"../../components/dashboard_component/CollapsibleSidebar\"\r\n\r\nexport default function AddBrandDashboard() {\r\n\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100\">\r\n      <CollapsibleSidebar />\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        <div className=\"container mx-auto py-8 px-4\">\r\n         \r\n          <div className=\"w-full\">\r\n            <BrandSetup />\r\n          </div>\r\n\r\n          {/* Quick Tips */}\r\n          <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fadeInUp\">\r\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"rounded-full bg-primary/10 p-2 group-hover:bg-primary/20 transition-colors\">\r\n                  <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                </div>\r\n                <h3 className=\"font-medium text-gray-900\">Connect Multiple Platforms</h3>\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Link all your marketing platforms for comprehensive analytics and insights</p>\r\n            </div>\r\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"rounded-full bg-success/10 p-2 group-hover:bg-success/20 transition-colors\">\r\n                  <Sparkles className=\"h-5 w-5 text-success\" />\r\n                </div>\r\n                <h3 className=\"font-medium text-gray-900\">Real-time Updates</h3>\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Your data will be automatically synced every 3 hours for accurate reporting</p>\r\n            </div>\r\n            <div className=\"bg-white p-6 rounded-xl border hover:shadow-md transition-all duration-200 transform hover:-translate-y-1 group\">\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"rounded-full bg-warning/10 p-2 group-hover:bg-warning/20 transition-colors\">\r\n                  <Sparkles className=\"h-5 w-5 text-warning\" />\r\n                </div>\r\n                <h3 className=\"font-medium text-gray-900\">Easy Management</h3>\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Manage all your brands and their performance from a single dashboard</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n} ","import { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { clearUser } from '@/store/slices/UserSlice';\r\nimport { resetBrand } from '@/store/slices/BrandSlice';\r\nimport axios from 'axios';\r\nimport { baseURL } from '@/data/constant';\r\n\r\ninterface TokenValidityResponse {\r\n  success: boolean;\r\n  message: string;\r\n  isValid: boolean;\r\n  expiresAt?: number;\r\n  user?: {\r\n    id: string;\r\n    email: string;\r\n    method: string;\r\n  };\r\n}\r\n\r\nexport const useTokenExpire = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Function to check token validity via backend\r\n  const checkTokenValidity = async (): Promise<TokenValidityResponse | null> => {\r\n    try {\r\n      const response = await axios.get(`${baseURL}/api/auth/check-token`, {\r\n        withCredentials: true\r\n      });\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.error('Error checking token validity:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Function to handle logout\r\n  const handleLogout = async () => {\r\n    try {\r\n      // Call logout API\r\n      await axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true });\r\n    } catch (error) {\r\n      console.error('Error during logout API call:', error);\r\n    }\r\n\r\n    // Clear Redux state\r\n    dispatch(clearUser());\r\n    dispatch(resetBrand());\r\n\r\n    // Navigate to login page\r\n    navigate('/login');\r\n  };\r\n\r\n  // Function to check token status\r\n  const checkTokenStatus = async () => {\r\n    const tokenResponse = await checkTokenValidity();\r\n    \r\n    if (!tokenResponse) {\r\n      console.log('Failed to check token validity');\r\n      return;\r\n    }\r\n\r\n    if (!tokenResponse.isValid) {\r\n      console.log('Token is invalid or expired:', tokenResponse.message);\r\n      handleLogout();\r\n      return;\r\n    }\r\n\r\n    // Log token info in development\r\n    if (process.env.NODE_ENV === 'development' && tokenResponse.expiresAt) {\r\n      const currentTime = Math.floor(Date.now() / 1000);\r\n      const timeUntilExpiry = tokenResponse.expiresAt - currentTime;\r\n      const minutesUntilExpiry = Math.floor(timeUntilExpiry / 60);\r\n      \r\n      console.log(' Token Status:');\r\n      console.log(' Expires at:', new Date(tokenResponse.expiresAt * 1000).toLocaleString());\r\n      console.log(' Minutes until expiry:', minutesUntilExpiry);\r\n      \r\n      if (minutesUntilExpiry <= 5) {\r\n        console.log(' Token expires soon!');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Set up periodic token checking\r\n  useEffect(() => {\r\n    // Initial check\r\n    checkTokenStatus();\r\n\r\n    // Check every minute\r\n    intervalRef.current = setInterval(checkTokenStatus, 60000);\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    checkTokenStatus,\r\n    isTokenValid: async () => {\r\n      const tokenResponse = await checkTokenValidity();\r\n      return tokenResponse?.isValid || false;\r\n    }\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { useTokenExpire } from '@/hooks/useTokenExpire';\r\n\r\ninterface AutoLogoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst AutoLogout: React.FC<AutoLogoutProps> = ({ children }) => {\r\n \r\n \r\n  useTokenExpire();\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default AutoLogout; ","import React, { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Image as ImageIcon,\r\n  ExternalLink,\r\n  Play,\r\n  Pause,\r\n  Maximize2,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { Creative } from \"../CreativesLibrary\";\r\n\r\ninterface CreativeCardProps {\r\n  creative: Creative;\r\n  selectedKPIs?: Set<string>;\r\n}\r\n\r\nconst CreativeCard: React.FC<CreativeCardProps> = ({ creative, selectedKPIs }) => {\r\n  // Helper function to check if a KPI should be displayed\r\n  const shouldShowKPI = (kpiKey: string) => {\r\n    if (!selectedKPIs) return true; // Show all if no selection provided\r\n    return selectedKPIs.has(kpiKey);\r\n  };\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [showFullImage, setShowFullImage] = useState(false);\r\n  const [carouselIndex, setCarouselIndex] = useState(0);\r\n  const videoRef = React.useRef<HTMLVideoElement>(null);\r\n\r\n  const carouselImages = creative.carousel_images || [];\r\n  const hasCarousel = creative.creative_type === \"carousel\" && carouselImages.length > 0;\r\n\r\n  // Reset carousel index when creative changes\r\n  useEffect(() => {\r\n    setCarouselIndex(0);\r\n  }, [creative.ad_id]);\r\n\r\n  const handleVideoToggle = () => {\r\n    if (videoRef.current) {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n      } else {\r\n        videoRef.current.play();\r\n      }\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n\r\n  const handleCarouselNext = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setCarouselIndex((prev) => (prev + 1) % carouselImages.length);\r\n  };\r\n\r\n  const handleCarouselPrev = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setCarouselIndex((prev) => (prev - 1 + carouselImages.length) % carouselImages.length);\r\n  };\r\n\r\n  const handleShowFullImage = () => {\r\n    setCarouselIndex(0); // Reset to first image when opening modal\r\n    setShowFullImage(true);\r\n  };\r\n\r\n\r\n  const formatCurrency = (num: number | undefined) => {\r\n    if (num === undefined || num === null) return '-';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'INR',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(num);\r\n  };\r\n\r\n  const formatNumber = (num: number | undefined, decimals: number = 0) => {\r\n    if (num === undefined || num === null) return '-';\r\n    return num.toFixed(decimals);\r\n  };\r\n\r\n  const formatPercentage = (num: number | undefined, decimals: number = 2) => {\r\n    if (num === undefined || num === null) return '-';\r\n    return `${num.toFixed(decimals)}%`;\r\n  };\r\n\r\n  const formatRatio = (num: number | undefined, decimals: number = 2) => {\r\n    if (num === undefined || num === null) return '-';\r\n    return `${num.toFixed(decimals)}x`;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={cn(\r\n          \"flex flex-col border border-border rounded-lg bg-card overflow-hidden\",\r\n          \"hover:border-primary/30 hover:shadow-lg transition-all duration-200\",\r\n          \"group h-full\"\r\n        )}\r\n      >\r\n        {/* Media Section - Top */}\r\n        <div className=\"relative w-full aspect-square bg-muted overflow-hidden\">\r\n          {/* Ad Status Label - Top Left Corner */}\r\n          <div className=\"absolute top-2 left-2 z-30\">\r\n            <span className={cn(\r\n              \"inline-block text-[10px] px-2 py-0.5 rounded-full font-medium shadow-sm\",\r\n              creative.ad_status === \"ACTIVE\" || creative.ad_status === \"active\"\r\n                ? \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\"\r\n                : creative.ad_status === \"PAUSED\" || creative.ad_status === \"paused\"\r\n                  ? \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400\"\r\n                  : creative.ad_status === \"DELETED\" || creative.ad_status === \"deleted\" || creative.ad_status === \"ARCHIVED\" || creative.ad_status === \"archived\"\r\n                    ? \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\"\r\n                    : \"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400\"\r\n            )}>\r\n              {creative.ad_status || \"Unknown\"}\r\n            </span>\r\n          </div>\r\n          {hasCarousel ? (\r\n            <>\r\n              {/* Carousel */}\r\n              <div className=\"relative w-full h-full\">\r\n                <img\r\n                  src={carouselImages[carouselIndex]?.url}\r\n                  alt={carouselImages[carouselIndex]?.name || creative.ad_name}\r\n                  className=\"w-full h-full object-cover transition-opacity duration-300\"\r\n                />\r\n\r\n                {/* Carousel Navigation */}\r\n                {carouselImages.length > 1 && (\r\n                  <>\r\n                    <div className=\"absolute left-2 top-1/2 -translate-y-1/2 z-20 flex items-center justify-center w-8 h-8\">\r\n                      <Button\r\n                        variant=\"secondary\"\r\n                        size=\"icon\"\r\n                        className=\"!w-8 !h-8 !rounded-full bg-black/50 hover:!bg-black/70 hover:!w-8 hover:!h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto !border-0 !p-0 !m-0 !min-w-[2rem] !min-h-[2rem] !max-w-[2rem] !max-h-[2rem] flex-shrink-0\"\r\n                        onClick={handleCarouselPrev}\r\n                        style={{ transform: 'none', width: '2rem', height: '2rem' }}\r\n                      >\r\n                        <ChevronLeft className=\"w-4 h-4 flex-shrink-0\" />\r\n                      </Button>\r\n                    </div>\r\n                    <div className=\"absolute right-2 top-1/2 -translate-y-1/2 z-20 flex items-center justify-center w-8 h-8\">\r\n                      <Button\r\n                        variant=\"secondary\"\r\n                        size=\"icon\"\r\n                        className=\"!w-8 !h-8 !rounded-full bg-black/50 hover:!bg-black/70 hover:!w-8 hover:!h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto !border-0 !p-0 !m-0 !min-w-[2rem] !min-h-[2rem] !max-w-[2rem] !max-h-[2rem] flex-shrink-0\"\r\n                        onClick={handleCarouselNext}\r\n                        style={{ transform: 'none', width: '2rem', height: '2rem' }}\r\n                      >\r\n                        <ChevronRight className=\"w-4 h-4 flex-shrink-0\" />\r\n                      </Button>\r\n                    </div>\r\n\r\n                    {/* Carousel Indicators */}\r\n                    <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5\">\r\n                      {carouselImages.map((img, index) => (\r\n                        <button\r\n                          key={img.url || `carousel-${index}`}\r\n                          className={cn(\r\n                            \"h-1.5 rounded-full transition-all\",\r\n                            index === carouselIndex\r\n                              ? \"w-6 bg-white\"\r\n                              : \"w-1.5 bg-white/50\"\r\n                          )}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setCarouselIndex(index);\r\n                          }}\r\n                          aria-label={`Go to slide ${index + 1}`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n\r\n                {/* Zoom Button */}\r\n                <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center pointer-events-none z-10\">\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    size=\"icon\"\r\n                    className=\"opacity-0 group-hover:opacity-100 transition-opacity w-10 h-10 rounded-full pointer-events-auto\"\r\n                    onClick={handleShowFullImage}\r\n                  >\r\n                    <Maximize2 className=\"w-5 h-5\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : creative.creative_type === \"video\" && creative.creative_url ? (\r\n            <>\r\n              <video\r\n                ref={videoRef}\r\n                src={creative.creative_url}\r\n                poster={creative.thumbnail_url || undefined}\r\n                className=\"w-full h-full object-cover\"\r\n                loop\r\n                playsInline\r\n                onPlay={() => setIsPlaying(true)}\r\n                onPause={() => setIsPlaying(false)}\r\n              />\r\n              <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  size=\"icon\"\r\n                  className=\"opacity-0 group-hover:opacity-100 transition-opacity w-12 h-12 rounded-full\"\r\n                  onClick={handleVideoToggle}\r\n                >\r\n                  {isPlaying ? <Pause className=\"w-6 h-6\" /> : <Play className=\"w-6 h-6 ml-1\" />}\r\n                </Button>\r\n              </div>\r\n            </>\r\n          ) : creative.creative_url || creative.thumbnail_url ? (\r\n            <>\r\n              <img\r\n                src={creative.creative_url || creative.thumbnail_url}\r\n                alt={creative.ad_name}\r\n                className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 cursor-pointer\"\r\n                onClick={handleShowFullImage}\r\n              />\r\n              <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center\">\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  size=\"icon\"\r\n                  className=\"opacity-0 group-hover:opacity-100 transition-opacity w-10 h-10 rounded-full\"\r\n                  onClick={handleShowFullImage}\r\n                >\r\n                  <Maximize2 className=\"w-5 h-5\" />\r\n                </Button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"w-full h-full flex items-center justify-center text-muted-foreground\">\r\n              <ImageIcon className=\"w-16 h-16\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Content Section */}\r\n        <div className=\"p-3 flex flex-col flex-1\">\r\n          {/* Header */}\r\n          <div className=\"mb-3\">\r\n            <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n              <h3 className=\"text-sm font-semibold line-clamp-2 flex-1 leading-tight\">\r\n                {creative.ad_name}\r\n              </h3>\r\n              <span className={cn(\r\n                \"inline-block text-[10px] px-2 py-0.5 rounded-full font-medium flex-shrink-0\",\r\n                creative.creative_type === \"video\"\r\n                  ? \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400\"\r\n                  : creative.creative_type === \"image\"\r\n                    ? \"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400\"\r\n                    : creative.creative_type === \"carousel\"\r\n                      ? \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\"\r\n                      : \"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400\"\r\n              )}>\r\n                {creative.creative_type === \"video\" ? \"Video\" : creative.creative_type === \"image\" ? \"Image\" : creative.creative_type === \"carousel\" ? \"Carousel\" : \"Unknown\"}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Metrics - Clean table layout */}\r\n          <div className=\"space-y-1 flex-1 text-xs\">\r\n            {/* Financial Metrics */}\r\n            {shouldShowKPI(\"spend\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Spend</span>\r\n                <span className=\"font-semibold\">{formatCurrency(creative.spend)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"revenue\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Revenue</span>\r\n                <span className=\"font-semibold\">{formatCurrency(creative.revenue)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"roas\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">ROAS</span>\r\n                <span className=\"font-semibold\">{formatRatio(creative.roas)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"cpc\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">CPC</span>\r\n                <span className=\"font-semibold\">{formatCurrency(creative.cpc)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"cpp\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">CPP</span>\r\n                <span className=\"font-semibold\">{formatCurrency(creative.cpp)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"orders\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Orders</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.orders)}</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Performance Metrics */}\r\n            {shouldShowKPI(\"impressions\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Impressions</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.impressions)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"clicks\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Clicks</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.clicks)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"ctr\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">CTR</span>\r\n                <span className=\"font-semibold\">{formatPercentage(creative.ctr)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"frequency\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Frequency</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.frequency, 2)}</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Engagement Metrics */}\r\n            {shouldShowKPI(\"hook_rate\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Hook Rate</span>\r\n                <span className=\"font-semibold\">{formatPercentage(creative.hook_rate)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"engagementRate\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Engagement Rate</span>\r\n                <span className=\"font-semibold\">\r\n                  {creative.engagementRate !== undefined ? formatPercentage(creative.engagementRate * 100) : '-'}\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Video Metrics */}\r\n            {shouldShowKPI(\"video_views\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">Video Views</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.video_views)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p25_watched\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">25% Watched</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.video_p25_watched)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p50_watched\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">50% Watched</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.video_p50_watched)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p100_watched\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">100% Watched</span>\r\n                <span className=\"font-semibold\">{formatNumber(creative.video_p100_watched)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p25_watched_rate\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">25% Watched Rate</span>\r\n                <span className=\"font-semibold\">{formatPercentage(creative.video_p25_watched_rate)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p50_watched_rate\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">50% Watched Rate</span>\r\n                <span className=\"font-semibold\">{formatPercentage(creative.video_p50_watched_rate)}</span>\r\n              </div>\r\n            )}\r\n            {shouldShowKPI(\"video_p100_watched_rate\") && (\r\n              <div className=\"flex justify-between items-center py-1 border-b border-border/50\">\r\n                <span className=\"text-muted-foreground\">100% Watched Rate</span>\r\n                <span className=\"font-semibold\">{formatPercentage(creative.video_p100_watched_rate)}</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Show message if no metrics selected */}\r\n            {selectedKPIs?.size === 0 && (\r\n              <div className=\"flex items-center justify-center py-4 text-muted-foreground text-xs\">\r\n                No metrics selected\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"mt-3 pt-2 border-t\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full text-xs h-7\"\r\n              onClick={() => window.open(creative.creative_url || creative.thumbnail_url, '_blank')}\r\n            >\r\n              <ExternalLink className=\"w-3 h-3 mr-1.5\" />\r\n              View Full Size\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Full Image Modal */}\r\n      {showFullImage && (hasCarousel || creative.creative_url || creative.thumbnail_url) && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 backdrop-blur-sm\"\r\n          onClick={() => setShowFullImage(false)}\r\n        >\r\n          <div className=\"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center\">\r\n            {hasCarousel ? (\r\n              <div className=\"relative w-full h-full flex items-center justify-center\">\r\n                <img\r\n                  src={carouselImages[carouselIndex]?.url}\r\n                  alt={carouselImages[carouselIndex]?.name || creative.ad_name}\r\n                  className=\"max-w-full max-h-full object-contain rounded-lg pointer-events-none\"\r\n                  onClick={(e) => e.stopPropagation()}\r\n                />\r\n                {carouselImages.length > 1 && (\r\n                  <>\r\n                    <div className=\"absolute left-4 top-1/2 -translate-y-1/2 z-30 flex items-center justify-center w-12 h-12\">\r\n                      <Button\r\n                        variant=\"secondary\"\r\n                        size=\"icon\"\r\n                        className=\"!w-12 !h-12 !rounded-full bg-black/50 hover:!bg-black/70 hover:!w-12 hover:!h-12 text-white pointer-events-auto !border-0 !p-0 !m-0 !min-w-[3rem] !min-h-[3rem] !max-w-[3rem] !max-h-[3rem] flex-shrink-0\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleCarouselPrev(e);\r\n                        }}\r\n                        style={{ transform: 'none', width: '3rem', height: '3rem' }}\r\n                      >\r\n                        <ChevronLeft className=\"w-6 h-6 flex-shrink-0\" />\r\n                      </Button>\r\n                    </div>\r\n                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2 z-30 flex items-center justify-center w-12 h-12\">\r\n                      <Button\r\n                        variant=\"secondary\"\r\n                        size=\"icon\"\r\n                        className=\"!w-12 !h-12 !rounded-full bg-black/50 hover:!bg-black/70 hover:!w-12 hover:!h-12 text-white pointer-events-auto !border-0 !p-0 !m-0 !min-w-[3rem] !min-h-[3rem] !max-w-[3rem] !max-h-[3rem] flex-shrink-0\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleCarouselNext(e);\r\n                        }}\r\n                        style={{ transform: 'none', width: '3rem', height: '3rem' }}\r\n                      >\r\n                        <ChevronRight className=\"w-6 h-6 flex-shrink-0\" />\r\n                      </Button>\r\n                    </div>\r\n                    <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-30 pointer-events-auto\">\r\n                      {carouselImages.map((img, index) => (\r\n                        <button\r\n                          key={img.url || `modal-carousel-${index}`}\r\n                          className={cn(\r\n                            \"h-2 rounded-full transition-all cursor-pointer\",\r\n                            index === carouselIndex\r\n                              ? \"w-8 bg-white\"\r\n                              : \"w-2 bg-white/50\"\r\n                          )}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setCarouselIndex(index);\r\n                          }}\r\n                          aria-label={`Go to slide ${index + 1}`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <img\r\n                src={creative.creative_url || creative.thumbnail_url}\r\n                alt={creative.ad_name}\r\n                className=\"max-w-full max-h-full object-contain rounded-lg\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            )}\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"icon\"\r\n              className=\"absolute top-4 right-4 z-40\"\r\n              onClick={() => setShowFullImage(false)}\r\n            >\r\n              \r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreativeCard;\r\n\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport type { RootState } from \"@/store\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport createAxiosInstance from \"../ConversionReportPage/components/axiosInstance\";\r\nimport Loader from \"@/components/dashboard_component/loader\";\r\nimport { format } from \"date-fns\";\r\nimport { \r\n  Film, \r\n  Search,\r\n  RefreshCw,\r\n  AlertCircle,\r\n  ListFilter\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport CreativeCard from \"./components/CreativeCard\";\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\";\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetTitle,\r\n  SheetDescription,\r\n  SheetTrigger,\r\n} from \"@/components/ui/sheet\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\nexport interface CarouselImage {\r\n  url: string;\r\n  link?: string | null;\r\n  name?: string | null;\r\n  description?: string | null;\r\n}\r\n\r\nexport interface Creative {\r\n  ad_id: string;\r\n  ad_name: string;\r\n  ad_status: string;\r\n  creative_type: \"video\" | \"image\" | \"carousel\" | \"unknown\";\r\n  creative_url: string;\r\n  thumbnail_url: string;\r\n  carousel_images?: CarouselImage[] | null;\r\n  spend: number;\r\n  ctr: number;\r\n  cpc?: number;\r\n  cpp?: number;\r\n  clicks: number;\r\n  roas: number;\r\n  orders: number;\r\n  hook_rate: number;\r\n  impressions?: number;\r\n  video_views?: number;\r\n  revenue?: number;\r\n  engagementRate?: number;\r\n  frequency?: number;\r\n  video_p25_watched?: number;\r\n  video_p50_watched?: number;\r\n  video_p100_watched?: number;\r\n  video_p25_watched_rate?: number;\r\n  video_p50_watched_rate?: number;\r\n  video_p100_watched_rate?: number;\r\n}\r\n\r\n// KPI Configuration\r\nexport interface KPIConfig {\r\n  key: string;\r\n  label: string;\r\n  category: \"financial\" | \"performance\" | \"engagement\" | \"video\";\r\n}\r\n\r\nexport const AVAILABLE_KPIS: KPIConfig[] = [\r\n  // Financial Metrics\r\n  { key: \"spend\", label: \"Spend\", category: \"financial\" },\r\n  { key: \"revenue\", label: \"Revenue\", category: \"financial\" },\r\n  { key: \"roas\", label: \"ROAS\", category: \"financial\" },\r\n  { key: \"cpc\", label: \"CPC\", category: \"financial\" },\r\n  { key: \"cpp\", label: \"CPP\", category: \"financial\" },\r\n  { key: \"orders\", label: \"Orders\", category: \"financial\" },\r\n  // Performance Metrics\r\n  { key: \"impressions\", label: \"Impressions\", category: \"performance\" },\r\n  { key: \"clicks\", label: \"Clicks\", category: \"performance\" },\r\n  { key: \"ctr\", label: \"CTR\", category: \"performance\" },\r\n  { key: \"frequency\", label: \"Frequency\", category: \"performance\" },\r\n  // Engagement Metrics\r\n  { key: \"hook_rate\", label: \"Hook Rate\", category: \"engagement\" },\r\n  { key: \"engagementRate\", label: \"Engagement Rate\", category: \"engagement\" },\r\n  // Video Metrics\r\n  { key: \"video_views\", label: \"Video Views\", category: \"video\" },\r\n  { key: \"video_p25_watched\", label: \"25% Watched\", category: \"video\" },\r\n  { key: \"video_p50_watched\", label: \"50% Watched\", category: \"video\" },\r\n  { key: \"video_p100_watched\", label: \"100% Watched\", category: \"video\" },\r\n  { key: \"video_p25_watched_rate\", label: \"25% Watched Rate\", category: \"video\" },\r\n  { key: \"video_p50_watched_rate\", label: \"50% Watched Rate\", category: \"video\" },\r\n  { key: \"video_p100_watched_rate\", label: \"100% Watched Rate\", category: \"video\" },\r\n];\r\n\r\nconst CATEGORY_LABELS: Record<string, string> = {\r\n  financial: \"Financial Metrics\",\r\n  performance: \"Performance Metrics\",\r\n  engagement: \"Engagement Metrics\",\r\n  video: \"Video Metrics\",\r\n};\r\n\r\ninterface CreativesResponse {\r\n  success: boolean;\r\n  brandId: string;\r\n  limit: number;\r\n  total_creatives: number;\r\n  hasMore: boolean;\r\n  nextCursor: string | null;\r\n  creatives: Creative[];\r\n  fetchTime: number;\r\n  fromCache?: boolean;\r\n  stats: {\r\n    accountsProcessed: number;\r\n    totalAds: number;\r\n    videosProcessed: number;\r\n  };\r\n}\r\n\r\nconst CreativesLibrary: React.FC = () => {\r\n  const [creatives, setCreatives] = useState<Creative[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [initialLoading, setInitialLoading] = useState(true);\r\n  const [nextCursor, setNextCursor] = useState<string | null>(null);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [formatFilter, setFormatFilter] = useState<\"all\" | \"image\" | \"video\" | \"carousel\">(\"all\");\r\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"ACTIVE\" | \"PAUSED\" | \"DELETED\" | \"ARCHIVED\">(\"all\");\r\n  const [selectedKPIs, setSelectedKPIs] = useState<Set<string>>(\r\n    new Set(AVAILABLE_KPIS.map(kpi => kpi.key))\r\n  );\r\n  const { brandId } = useParams();\r\n  \r\n  // Ref for infinite scroll observer\r\n  const observerRef = React.useRef<IntersectionObserver | null>(null);\r\n  const lastCardRef = React.useRef<HTMLDivElement | null>(null);\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  const date = useMemo(() => ({\r\n      from: dateFrom,\r\n      to: dateTo\r\n  }), [dateFrom, dateTo]);\r\n  \r\n\r\n\r\n  const axiosInstance = createAxiosInstance();\r\n\r\n    // Create stable date strings for dependency tracking\r\n    const startDate = date?.from ? format(date.from, \"yyyy-MM-dd\") : \"\";\r\n    const endDate = date?.to ? format(date.to, \"yyyy-MM-dd\") : \"\";\r\n\r\n  const fetchCreatives = async (cursor: string | null = null, reset: boolean = false) => {\r\n    if (reset) {\r\n      setInitialLoading(true);\r\n      setCreatives([]);\r\n      setNextCursor(null);\r\n      setError(null);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    try {\r\n      const requestBody: any = {\r\n        startDate,\r\n        endDate,\r\n        includeAllAds: true,\r\n        limit: 12, // 12 ads per account for nice grid layout\r\n        thumbnailWidth: 600,  // Request 600px width thumbnails\r\n        thumbnailHeight: 600, // Request 600px height thumbnails\r\n      };\r\n\r\n      // Only add cursor if it exists (for pagination)\r\n      if (cursor) {\r\n        requestBody.after = cursor;\r\n      }\r\n\r\n      const response = await axiosInstance.post<CreativesResponse>(\r\n        `/api/ads/meta-creative/${brandId}`,\r\n        requestBody\r\n      );\r\n\r\n      if (response.data.success) {\r\n        if (reset) {\r\n          setCreatives(response.data.creatives);\r\n        } else {\r\n          setCreatives(prev => [...prev, ...response.data.creatives]);\r\n        }\r\n        setHasMore(response.data.hasMore);\r\n        setNextCursor(response.data.nextCursor);\r\n        setError(null);\r\n      } else {\r\n        setError(\"Failed to fetch creatives\");\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Error fetching creatives:\", err);\r\n      setError(err.response?.data?.message || \"Failed to fetch creatives. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n      setInitialLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  // Fetch creatives when brand or date changes\r\n  useEffect(() => {\r\n    if (brandId && startDate && endDate) {\r\n      console.log(\" Date or brand changed, fetching creatives...\", { startDate, endDate });\r\n      fetchCreatives(null, true);\r\n    }\r\n  }, [brandId, startDate, endDate]); // Use date strings - simple and reliable!\r\n\r\n  // Infinite scroll: Set up intersection observer\r\n  useEffect(() => {\r\n    // Only set up observer if we have creatives and potentially more data\r\n    if (!creatives.length || !hasMore || loading) {\r\n      return;\r\n    }\r\n\r\n    // Cleanup previous observer\r\n    if (observerRef.current) {\r\n      observerRef.current.disconnect();\r\n    }\r\n\r\n    // Create new observer\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        // When last card is visible and we have more data and not currently loading\r\n        const lastEntry = entries[0];\r\n        if (lastEntry.isIntersecting && hasMore && !loading && nextCursor) {\r\n          console.log(\" Infinite scroll triggered! Loading more creatives...\");\r\n          fetchCreatives(nextCursor);\r\n        }\r\n      },\r\n      {\r\n        root: null,\r\n        rootMargin: \"300px\", // Start loading 300px before reaching the bottom\r\n        threshold: 0.1,\r\n      }\r\n    );\r\n\r\n    observerRef.current = observer;\r\n\r\n    // Observe the last card (works with filtered results too)\r\n    const currentLastCard = lastCardRef.current;\r\n    if (currentLastCard) {\r\n      console.log(\" Observing last card for infinite scroll\");\r\n      observer.observe(currentLastCard);\r\n    }\r\n\r\n    // Cleanup on unmount or when dependencies change\r\n    return () => {\r\n      if (currentLastCard && observer) {\r\n        observer.unobserve(currentLastCard);\r\n      }\r\n      observer.disconnect();\r\n    };\r\n  }, [creatives.length, hasMore, loading, nextCursor, searchTerm, formatFilter, statusFilter]); // Re-run when these change\r\n\r\n  const handleRefresh = () => {\r\n    fetchCreatives(null, true);\r\n  };\r\n\r\n  // Filter creatives based on search, format, and status\r\n  const filteredCreatives = useMemo(() => {\r\n    return creatives.filter((creative) => {\r\n      // Filter by search term\r\n      const matchesSearch = searchTerm === \"\" || \r\n        creative.ad_name.toLowerCase().includes(searchTerm.toLowerCase());\r\n      \r\n      // Filter by format\r\n      const matchesFormat = formatFilter === \"all\" || \r\n        creative.creative_type === formatFilter;\r\n      \r\n      // Filter by status (case-insensitive)\r\n      const matchesStatus = statusFilter === \"all\" || \r\n        creative.ad_status?.toUpperCase() === statusFilter.toUpperCase();\r\n      \r\n      return matchesSearch && matchesFormat && matchesStatus;\r\n    });\r\n  }, [creatives, searchTerm, formatFilter, statusFilter]);\r\n\r\n  // Handle KPI selection\r\n  const handleKPIToggle = (kpiKey: string) => {\r\n    setSelectedKPIs(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(kpiKey)) {\r\n        newSet.delete(kpiKey);\r\n      } else {\r\n        newSet.add(kpiKey);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleSelectAllKPIs = () => {\r\n    setSelectedKPIs(new Set(AVAILABLE_KPIS.map(kpi => kpi.key)));\r\n  };\r\n\r\n  const handleDeselectAllKPIs = () => {\r\n    setSelectedKPIs(new Set());\r\n  };\r\n\r\n  // Group KPIs by category\r\n  const kpisByCategory = useMemo(() => {\r\n    const grouped: Record<string, KPIConfig[]> = {\r\n      financial: [],\r\n      performance: [],\r\n      engagement: [],\r\n      video: [],\r\n    };\r\n    for (const kpi of AVAILABLE_KPIS) {\r\n      grouped[kpi.category].push(kpi);\r\n    }\r\n    return grouped;\r\n  }, []);\r\n\r\n\r\n  if (!brandId) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-[calc(100vh-200px)]\">\r\n        <AlertCircle className=\"w-16 h-16 text-muted-foreground mb-4\" />\r\n        <h2 className=\"text-2xl font-bold mb-2\">No Brand Selected</h2>\r\n        <p className=\"text-muted-foreground\">Please select a brand to view creatives.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n \r\n  return (\r\n    <div className=\"flex h-screen bg-gray-100\">\r\n      <CollapsibleSidebar />\r\n\r\n\r\n      <div className=\"flex-1 h-screen overflow-auto mx-auto p-6 space-y-6\">\r\n\r\n      {initialLoading ? (\r\n      <div>\r\n        <Loader isLoading={true} />\r\n      </div>\r\n    ) : (\r\n      <>\r\n          <div className=\"flex flex-col md:flex-row gap-4\">\r\n            {/* Search */}\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by ad name...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\r\n              />\r\n            </div>\r\n\r\n            {/* Filter by type */}\r\n            <div className=\"flex gap-2\">\r\n              <Select value={formatFilter} onValueChange={(value) => setFormatFilter(value as \"all\" | \"image\" | \"video\" | \"carousel\")}>\r\n                <SelectTrigger className=\"w-[140px]\">\r\n                  <SelectValue placeholder=\"Format\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All</SelectItem>\r\n                  <SelectItem value=\"image\">Image</SelectItem>\r\n                  <SelectItem value=\"video\">Video</SelectItem>\r\n                  <SelectItem value=\"carousel\">Carousel</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n              <Select value={statusFilter} onValueChange={(value) => setStatusFilter(value as \"all\" | \"ACTIVE\" | \"PAUSED\" | \"DELETED\" | \"ARCHIVED\")}>\r\n                <SelectTrigger className=\"w-[140px]\">\r\n                  <SelectValue placeholder=\"Status\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Status</SelectItem>\r\n                  <SelectItem value=\"ACTIVE\">Active</SelectItem>\r\n                  <SelectItem value=\"PAUSED\">Paused</SelectItem>\r\n                  <SelectItem value=\"DELETED\">Deleted</SelectItem>\r\n                  <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n              <DatePickerWithRange />\r\n              \r\n              {/* Metrics Selector */}\r\n              <Sheet>\r\n                <SheetTrigger asChild>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"relative\"\r\n                  >\r\n                    <ListFilter className=\"w-4 h-4 mr-2\" />\r\n                    Metrics\r\n                    {selectedKPIs.size > 0 && selectedKPIs.size < AVAILABLE_KPIS.length && (\r\n                      <Badge \r\n                        variant=\"secondary\" \r\n                        className=\"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-[10px]\"\r\n                      >\r\n                        {selectedKPIs.size}\r\n                      </Badge>\r\n                    )}\r\n                  </Button>\r\n                </SheetTrigger>\r\n                <SheetContent className=\"w-[400px] sm:w-[540px] overflow-y-auto\">\r\n                  <SheetHeader>\r\n                    <SheetTitle>Select Metrics</SheetTitle>\r\n                    <SheetDescription>\r\n                      Choose which metrics to display on creative cards\r\n                    </SheetDescription>\r\n                  </SheetHeader>\r\n                  \r\n                  <div className=\"mt-3 space-y-3\">\r\n                    <div className=\"flex items-center justify-end gap-2\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"h-8 text-xs\"\r\n                        onClick={handleSelectAllKPIs}\r\n                      >\r\n                        Select All\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"h-8 text-xs\"\r\n                        onClick={handleDeselectAllKPIs}\r\n                      >\r\n                        Deselect All\r\n                      </Button>\r\n                    </div>\r\n                    \r\n                    <Separator />\r\n                    \r\n                    {/* Financial Metrics */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-semibold text-foreground\">\r\n                        {CATEGORY_LABELS.financial}\r\n                      </Label>\r\n                      <div className=\"space-y-2 pl-2\">\r\n                        {kpisByCategory.financial.map((kpi) => (\r\n                          <div key={kpi.key} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                              id={kpi.key}\r\n                              checked={selectedKPIs.has(kpi.key)}\r\n                              onCheckedChange={() => handleKPIToggle(kpi.key)}\r\n                            />\r\n                            <Label\r\n                              htmlFor={kpi.key}\r\n                              className=\"text-sm font-normal cursor-pointer flex-1\"\r\n                            >\r\n                              {kpi.label}\r\n                            </Label>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Separator />\r\n\r\n                    {/* Performance Metrics */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-semibold text-foreground\">\r\n                        {CATEGORY_LABELS.performance}\r\n                      </Label>\r\n                      <div className=\"space-y-2 pl-2\">\r\n                        {kpisByCategory.performance.map((kpi) => (\r\n                          <div key={kpi.key} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                              id={kpi.key}\r\n                              checked={selectedKPIs.has(kpi.key)}\r\n                              onCheckedChange={() => handleKPIToggle(kpi.key)}\r\n                            />\r\n                            <Label\r\n                              htmlFor={kpi.key}\r\n                              className=\"text-sm font-normal cursor-pointer flex-1\"\r\n                            >\r\n                              {kpi.label}\r\n                            </Label>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Separator />\r\n\r\n                    {/* Engagement Metrics */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-semibold text-foreground\">\r\n                        {CATEGORY_LABELS.engagement}\r\n                      </Label>\r\n                      <div className=\"space-y-2 pl-2\">\r\n                        {kpisByCategory.engagement.map((kpi) => (\r\n                          <div key={kpi.key} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                              id={kpi.key}\r\n                              checked={selectedKPIs.has(kpi.key)}\r\n                              onCheckedChange={() => handleKPIToggle(kpi.key)}\r\n                            />\r\n                            <Label\r\n                              htmlFor={kpi.key}\r\n                              className=\"text-sm font-normal cursor-pointer flex-1\"\r\n                            >\r\n                              {kpi.label}\r\n                            </Label>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Separator />\r\n\r\n                    {/* Video Metrics */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-semibold text-foreground\">\r\n                        {CATEGORY_LABELS.video}\r\n                      </Label>\r\n                      <div className=\"space-y-2 pl-2\">\r\n                        {kpisByCategory.video.map((kpi) => (\r\n                          <div key={kpi.key} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                              id={kpi.key}\r\n                              checked={selectedKPIs.has(kpi.key)}\r\n                              onCheckedChange={() => handleKPIToggle(kpi.key)}\r\n                            />\r\n                            <Label\r\n                              htmlFor={kpi.key}\r\n                              className=\"text-sm font-normal cursor-pointer flex-1\"\r\n                            >\r\n                              {kpi.label}\r\n                            </Label>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </SheetContent>\r\n              </Sheet>\r\n\r\n              <Button\r\n                onClick={handleRefresh}\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                disabled={loading}\r\n              >\r\n                <RefreshCw className={cn(\"w-4 h-4\", loading && \"animate-spin\")} />\r\n              </Button>   \r\n            </div>\r\n          </div>\r\n      \r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <Card className=\"border-destructive\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-2 text-destructive\">\r\n              <AlertCircle className=\"w-5 h-5\" />\r\n              <p>{error}</p>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Creatives Grid */}\r\n      {creatives.length > 0 ? (\r\n        <>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-fr\">\r\n            {filteredCreatives.map((creative, index) => {\r\n              // Attach ref to last FILTERED card for infinite scroll\r\n              // This allows infinite scroll to work even when filters are active\r\n              const isLastFilteredCreative = index === filteredCreatives.length - 1;\r\n              const shouldAttachRef = isLastFilteredCreative && hasMore && !loading;\r\n              \r\n              return (\r\n                <div\r\n                  key={creative.ad_id}\r\n                  ref={shouldAttachRef ? lastCardRef : null}\r\n                  className=\"h-full\"\r\n                >\r\n                  <CreativeCard creative={creative} selectedKPIs={selectedKPIs} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Loading Indicator for Infinite Scroll */}\r\n          {loading && !initialLoading && (\r\n            <div className=\"flex justify-center py-8\">\r\n              <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                <RefreshCw className=\"w-5 h-5 animate-spin\" />\r\n                <span>Loading more creatives...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Info message when filtering */}\r\n          {(searchTerm || formatFilter !== \"all\" || statusFilter !== \"all\") && (\r\n            <div className=\"text-center py-4\">\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Showing {filteredCreatives.length} of {creatives.length} loaded ads\r\n                {searchTerm && ` matching \"${searchTerm}\"`}\r\n                {formatFilter !== \"all\" && ` (${formatFilter} format)`}\r\n                {statusFilter !== \"all\" && ` (${statusFilter.toLowerCase()} status)`}\r\n                {hasMore && \". Keep scrolling to load more!\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Info message when no filters */}\r\n          {!searchTerm && formatFilter === \"all\" && statusFilter === \"all\" && (\r\n            <div className=\"text-center py-4\">\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Showing {creatives.length} loaded ads. Keep scrolling to load more!\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* End Message */}\r\n          {!hasMore && creatives.length > 0 && (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-muted-foreground\">\r\n                 You've reached the end! \r\n                {searchTerm || formatFilter !== \"all\" || statusFilter !== \"all\"\r\n                  ? ` Showing ${filteredCreatives.length} of ${creatives.length} loaded ads.`\r\n                  : ` All ${creatives.length} ads loaded.`}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* No results message when filters are active */}\r\n          {filteredCreatives.length === 0 && (searchTerm || formatFilter !== \"all\" || statusFilter !== \"all\") && (\r\n            <Card>\r\n              <CardContent className=\"pt-6\">\r\n                <div className=\"flex flex-col items-center justify-center py-12\">\r\n                  <Film className=\"w-16 h-16 text-muted-foreground mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold mb-2\">No Creatives Found</h3>\r\n                  <p className=\"text-muted-foreground text-center max-w-md\">\r\n                    {searchTerm && (formatFilter !== \"all\" || statusFilter !== \"all\")\r\n                      ? `No creatives found matching \"${searchTerm}\"${formatFilter !== \"all\" ? ` (${formatFilter} format)` : \"\"}${statusFilter !== \"all\" ? ` (${statusFilter.toLowerCase()} status)` : \"\"}. Try adjusting your filters.`\r\n                      : searchTerm\r\n                      ? `No creatives found matching \"${searchTerm}\". Try adjusting your search.`\r\n                      : formatFilter !== \"all\" && statusFilter !== \"all\"\r\n                      ? `No ${formatFilter} creatives with ${statusFilter.toLowerCase()} status found. Try selecting different filters.`\r\n                      : formatFilter !== \"all\"\r\n                      ? `No ${formatFilter} creatives found. Try selecting a different format.`\r\n                      : `No ${statusFilter.toLowerCase()} creatives found. Try selecting a different status.`}\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <Film className=\"w-16 h-16 text-muted-foreground mb-4\" />\r\n              <h3 className=\"text-xl font-semibold mb-2\">No Creatives Found</h3>\r\n              <p className=\"text-muted-foreground text-center max-w-md\">\r\n                {searchTerm \r\n                  ? \"Try adjusting your search \"\r\n                  : \"No creatives available for the selected date range\"}\r\n              </p>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n      </>\r\n    )}\r\n    </div>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default CreativesLibrary;\r\n\r\n","import * as React from \"react\"\r\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { ChevronDownIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst Accordion = AccordionPrimitive.Root\r\n\r\nconst AccordionItem = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <AccordionPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\"border-b\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAccordionItem.displayName = \"AccordionItem\"\r\n\r\nconst AccordionTrigger = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Header className=\"flex\">\r\n    <AccordionPrimitive.Trigger\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <ChevronDownIcon className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\r\n    </AccordionPrimitive.Trigger>\r\n  </AccordionPrimitive.Header>\r\n))\r\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\r\n\r\nconst AccordionContent = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Content\r\n    ref={ref}\r\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\r\n    {...props}\r\n  >\r\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\r\n  </AccordionPrimitive.Content>\r\n))\r\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\r\n\r\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\r\n","import axios, { AxiosInstance, AxiosError } from 'axios';\r\nimport { store } from '@/store';\r\nimport { clearUser } from '@/store/slices/UserSlice';\r\nimport { resetBrand } from '@/store/slices/BrandSlice';\r\nimport { baseURL } from '@/data/constant';\r\n\r\n// Create global axios instance with auto logout functionality\r\nconst axiosInstance: AxiosInstance = axios.create({\r\n  baseURL: import.meta.env.PROD\r\n    ? import.meta.env.VITE_API_URL as string\r\n    : import.meta.env.VITE_LOCAL_API_URL as string,\r\n  withCredentials: true,\r\n});\r\n\r\n// Response interceptor to handle 401 errors and auto logout\r\naxiosInstance.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error: AxiosError) => {\r\n    if (error.response?.status === 401) {\r\n      console.log('401 Unauthorized - Token expired or invalid');\r\n      \r\n      // Clear Redux state\r\n      store.dispatch(clearUser());\r\n      store.dispatch(resetBrand());\r\n      \r\n      // Call logout API\r\n      axios.post(`${baseURL}/api/auth/logout`, {}, { withCredentials: true })\r\n        .catch(() => {\r\n          // Ignore logout API errors\r\n        });\r\n      \r\n      // Redirect to login page\r\n      window.location.href = '/login';\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Export both the configured instance and the original axios\r\nexport { axios as defaultAxios };\r\nexport default axiosInstance; ","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { RefreshCw } from 'lucide-react';\r\nimport axiosInstance from '@/services/axiosConfig';\r\nimport { baseURL } from '@/data/constant';\r\nimport { format } from 'date-fns';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface EbidtaMetrics {\r\n  revenue: number;\r\n  cogs: number;\r\n  grossProfit: number;\r\n  sellingMarketingExpense: number;\r\n  fulfillmentLogistics: number;\r\n  otherOperatingExpense: number;\r\n  totalOperatingExpenses: number;\r\n  operatingIncome: number;\r\n  currency: string;\r\n}\r\n\r\ninterface EbidtaCalculatorProps {\r\n  date: {\r\n    from: Date | undefined;\r\n    to: Date | undefined;\r\n  };\r\n}\r\n\r\nconst EbidtaCalculator: React.FC<EbidtaCalculatorProps> = ({ date }) => {\r\n  const { brandId } = useParams<{ brandId: string }>();\r\n  const { toast } = useToast();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [revenueLoading, setRevenueLoading] = useState(false);\r\n  const [revenue, setRevenue] = useState<number>(0);\r\n  const [currency, setCurrency] = useState<string>('USD');\r\n  const [metrics, setMetrics] = useState<EbidtaMetrics | null>(null);\r\n  \r\n  // User inputs\r\n  const [cogs, setCogs] = useState<string>('');\r\n  const [sellingMarketingExpense, setSellingMarketingExpense] = useState<string>('');\r\n  const [fulfillmentLogistics, setFulfillmentLogistics] = useState<string>('');\r\n  const [otherOperatingExpense, setOtherOperatingExpense] = useState<string>('');\r\n\r\n  // Calculate metrics on server (sends stored revenue, no Shopify API call)\r\n  const calculateMetrics = useCallback(async () => {\r\n    if (!brandId || revenue === 0) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please fetch revenue first\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(\r\n        `${baseURL}/api/d2c-calculator/ebidta-calculate/${brandId}`,\r\n        {\r\n          revenue: revenue,\r\n          currency: currency,\r\n          cogs: cogs || 0,\r\n          sellingMarketingExpense: sellingMarketingExpense || 0,\r\n          fulfillmentLogistics: fulfillmentLogistics || 0,\r\n          otherOperatingExpense: otherOperatingExpense || 0,\r\n        },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.data.success) {\r\n        setMetrics(response.data.data);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Metrics calculated successfully\",\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error calculating metrics:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.response?.data?.error || \"Failed to calculate metrics\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [brandId, revenue, currency, cogs, sellingMarketingExpense, fulfillmentLogistics, otherOperatingExpense, toast]);\r\n\r\n  // Fetch revenue from API (only when date range changes)\r\n  const fetchRevenue = useCallback(async () => {\r\n    if (!brandId || !date.from || !date.to) {\r\n      return;\r\n    }\r\n\r\n    setRevenueLoading(true);\r\n    try {\r\n      const response = await axiosInstance.post(\r\n        `${baseURL}/api/d2c-calculator/revenue/${brandId}`,\r\n        {\r\n          startDate: format(date.from, 'yyyy-MM-dd'),\r\n          endDate: format(date.to, 'yyyy-MM-dd'),\r\n        },\r\n        { withCredentials: true }\r\n      );\r\n\r\n      if (response.data.success) {\r\n        setRevenue(response.data.data.revenue);\r\n        setCurrency(response.data.data.currency || 'USD');\r\n        // Clear old metrics - user needs to click Calculate button to recalculate\r\n        setMetrics(null);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Revenue fetched successfully\",\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching revenue:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.response?.data?.error || \"Failed to fetch revenue\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setRevenueLoading(false);\r\n    }\r\n  }, [brandId, date.from, date.to, toast]);\r\n\r\n  // Fetch revenue when date range changes\r\n  useEffect(() => {\r\n    if (brandId && date.from && date.to) {\r\n      fetchRevenue();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [brandId, date.from, date.to]);\r\n\r\n  const formatCurrency = (value: number) => {\r\n    const currencyCode = currency || 'USD';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currencyCode,\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full p-6\">\r\n      <div className=\"w-full\">\r\n        {/* Gross Profit Calculation - Inline */}\r\n        <Card className=\"mb-4\">\r\n          <CardContent className=\"pt-4\">\r\n            <Label className=\"text-xs text-gray-500 mb-2 block\">Gross Profit Calculation</Label>\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"revenue\" className=\"text-xs text-gray-600 mb-1 block\">Revenue</Label>\r\n                      <Input\r\n                        id=\"revenue\"\r\n                        type=\"text\"\r\n                        value={formatCurrency(revenue)}\r\n                        readOnly\r\n                  className=\"bg-gray-50 font-semibold text-sm h-9\"\r\n                      />\r\n                    </div>\r\n              <div className=\"text-2xl font-bold text-gray-400 mt-6\"></div>\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"cogs\" className=\"text-xs text-gray-600 mb-1 block\">COGS</Label>\r\n                      <Input\r\n                        id=\"cogs\"\r\n                        type=\"number\"\r\n                  placeholder=\"0\"\r\n                        value={cogs}\r\n                        onChange={(e) => setCogs(e.target.value)}\r\n                  className=\"font-semibold text-sm h-9\"\r\n                      />\r\n                    </div>\r\n              <div className=\"text-2xl font-bold text-gray-400 mt-6\">=</div>\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"grossProfit\" className=\"text-xs text-green-700 mb-1 block font-medium\">Gross Profit</Label>\r\n                      <Input\r\n                        id=\"grossProfit\"\r\n                        type=\"text\"\r\n                        value={metrics ? formatCurrency(metrics.grossProfit) : formatCurrency(0)}\r\n                        readOnly\r\n                  className=\"bg-green-50 border-green-200 font-bold text-sm text-green-900 h-9\"\r\n                      />\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n        {/* Operating Expenses - Compact Grid */}\r\n        <Card className=\"mb-4\">\r\n          <CardContent className=\"pt-4\">\r\n            <Label className=\"text-xs text-gray-500 mb-3 block\">Operating Expenses</Label>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                  <div>\r\n                <Label htmlFor=\"sellingMarketing\" className=\"text-xs text-gray-600 mb-1 block\">Selling & Marketing</Label>\r\n                      <Input\r\n                        id=\"sellingMarketing\"\r\n                        type=\"number\"\r\n                  placeholder=\"0\"\r\n                        value={sellingMarketingExpense}\r\n                        onChange={(e) => setSellingMarketingExpense(e.target.value)}\r\n                  className=\"text-sm h-9\"\r\n                      />\r\n                  </div>\r\n                  <div>\r\n                <Label htmlFor=\"fulfillment\" className=\"text-xs text-gray-600 mb-1 block\">Fulfillment & Logistics</Label>\r\n                      <Input\r\n                        id=\"fulfillment\"\r\n                        type=\"number\"\r\n                  placeholder=\"0\"\r\n                        value={fulfillmentLogistics}\r\n                        onChange={(e) => setFulfillmentLogistics(e.target.value)}\r\n                  className=\"text-sm h-9\"\r\n                      />\r\n                  </div>\r\n                  <div>\r\n                <Label htmlFor=\"otherOperating\" className=\"text-xs text-gray-600 mb-1 block\">Other Operating</Label>\r\n                      <Input\r\n                        id=\"otherOperating\"\r\n                        type=\"number\"\r\n                  placeholder=\"0\"\r\n                        value={otherOperatingExpense}\r\n                        onChange={(e) => setOtherOperatingExpense(e.target.value)}\r\n                  className=\"text-sm h-9\"\r\n                      />\r\n                  </div>\r\n                </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <Button\r\n              onClick={fetchRevenue}\r\n              disabled={revenueLoading || !date.from || !date.to}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n            >\r\n              <RefreshCw className={`h-4 w-4 mr-2 ${revenueLoading ? 'animate-spin' : ''}`} />\r\n              {revenueLoading ? 'Loading...' : 'Refresh Revenue'}\r\n            </Button>\r\n            <Button\r\n              onClick={calculateMetrics}\r\n              disabled={loading || revenue === 0}\r\n              variant=\"default\"\r\n              size=\"sm\"\r\n            >\r\n              <RefreshCw className={`h-4 w-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n              {loading ? 'Calculating...' : 'Calculate'}\r\n            </Button>\r\n          </div>\r\n\r\n        {/* Operating Income Calculation - Inline */}\r\n        <Card className=\"mb-4 border-blue-200 bg-blue-50/30\">\r\n          <CardContent className=\"pt-4\">\r\n            <Label className=\"text-xs text-blue-700 mb-2 block font-medium\">Operating Income Calculation</Label>\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"grossProfitDisplay\" className=\"text-xs text-gray-600 mb-1 block\">Gross Profit</Label>\r\n                <Input\r\n                  id=\"grossProfitDisplay\"\r\n                  type=\"text\"\r\n                  value={metrics ? formatCurrency(metrics.grossProfit) : formatCurrency(0)}\r\n                  readOnly\r\n                  className=\"bg-white font-semibold text-sm h-9\"\r\n                />\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-400 mt-6\"></div>\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"totalExpenses\" className=\"text-xs text-gray-600 mb-1 block\">Total Operating Expenses</Label>\r\n                <Input\r\n                  id=\"totalExpenses\"\r\n                  type=\"text\"\r\n                  value={metrics ? formatCurrency(metrics.totalOperatingExpenses) : formatCurrency(0)}\r\n                  readOnly\r\n                  className=\"bg-white font-semibold text-sm h-9\"\r\n                />\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-400 mt-6\">=</div>\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"operatingIncome\" className=\"text-xs text-blue-700 mb-1 block font-medium\">Operating Income</Label>\r\n                      <Input\r\n                        id=\"operatingIncome\"\r\n                        type=\"text\"\r\n                        value={metrics ? formatCurrency(metrics.operatingIncome) : formatCurrency(0)}\r\n                        readOnly\r\n                  className=\"bg-blue-100 border-blue-200 font-bold text-sm text-blue-900 h-9\"\r\n                      />\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n        {/* Compact Summary */}\r\n        <Card className=\"bg-gray-50 border-gray-200\">\r\n          <CardContent className=\"pt-4\">\r\n            <Label className=\"text-xs text-gray-500 mb-3 block font-medium\">Summary</Label>\r\n            <div className=\"grid grid-cols-4 gap-4 text-sm\">\r\n              <div>\r\n                <div className=\"text-xs text-gray-500 mb-1\">Revenue</div>\r\n                <div className=\"font-semibold text-gray-900\">{metrics ? formatCurrency(metrics.revenue) : formatCurrency(0)}</div>\r\n                  </div>\r\n              <div>\r\n                <div className=\"text-xs text-gray-500 mb-1\">COGS</div>\r\n                <div className=\"font-semibold text-gray-900\">{metrics ? formatCurrency(metrics.cogs) : formatCurrency(0)}</div>\r\n                  </div>\r\n              <div>\r\n                <div className=\"text-xs text-gray-500 mb-1\">Gross Profit</div>\r\n                <div className=\"font-bold text-green-700\">{metrics ? formatCurrency(metrics.grossProfit) : formatCurrency(0)}</div>\r\n                  </div>\r\n              <div>\r\n                <div className=\"text-xs text-gray-500 mb-1\">Operating Income</div>\r\n                <div className=\"font-bold text-blue-700\">{metrics ? formatCurrency(metrics.operatingIncome) : formatCurrency(0)}</div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EbidtaCalculator;\r\n\r\n","\r\nimport type React from \"react\"\r\nimport { useMemo } from \"react\"\r\nimport { Accordion, AccordionItem, AccordionTrigger, AccordionContent } from \"@/components/ui/accordion\"\r\nimport { Calculator } from \"lucide-react\"\r\nimport EbidtaCalculator from \"./components/EbidtaCalculator\"\r\nimport CollapsibleSidebar from \"@/components/dashboard_component/CollapsibleSidebar\"\r\nimport { DatePickerWithRange } from \"@/components/dashboard_component/DatePickerWithRange\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { RootState } from \"@/store\"\r\n\r\nconst CalculatorsPage: React.FC = () => {\r\n  const dateFrom = useSelector((state: RootState) => state.date.from);\r\n  const dateTo = useSelector((state: RootState) => state.date.to);\r\n  \r\n  const date = useMemo(() => ({\r\n    from: dateFrom ? new Date(dateFrom) : undefined,\r\n    to: dateTo ? new Date(dateTo) : undefined\r\n  }), [dateFrom, dateTo]);\r\n  const calculators = [\r\n    {\r\n      id: \"ebidta\",\r\n      title: \"EBIDTA Calculator\",\r\n      description: \"Calculate your EBIDTA for your business\",\r\n      icon: Calculator,\r\n    },\r\n    {\r\n      id: \"cpa\",\r\n      title: \"Breakeven CPA Calculator\",\r\n      description: \"Calculate the breakeven CPA for your business\",\r\n      icon: Calculator,\r\n    },\r\n    {\r\n      id: \"selling-price\",\r\n      title: \"Selling Price Calculator\",\r\n      description: \"Calculate the selling price for your business\",\r\n      icon: Calculator,\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-50\">\r\n      <CollapsibleSidebar />\r\n      \r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {/* Header */}\r\n          <div className=\"flex justify-between items-start\">\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Business Calculators</h1>\r\n            <p className=\"text-gray-600\">Manage all your financial calculations in one place</p>\r\n          </div>\r\n          <DatePickerWithRange />   \r\n          </div>\r\n        \r\n\r\n          {/* Accordion with Calculators */}\r\n          <Accordion type=\"single\" collapsible defaultValue=\"ebidta\" className=\"w-full space-y-4\">\r\n            {calculators.map((calc) => (\r\n              <AccordionItem key={calc.id} value={calc.id} className=\"border border-gray-200 rounded-lg overflow-hidden w-full\">\r\n                <AccordionTrigger className=\"px-6 hover:bg-gray-50\">\r\n                  <div className=\"flex items-center gap-3 text-left\">\r\n                    <calc.icon className=\"h-5 w-5 text-gray-700\" />\r\n                    <div>\r\n                      <h2 className=\"font-semibold text-gray-900\">{calc.title}</h2>\r\n                      <p className=\"text-sm text-gray-500\">{calc.description}</p>\r\n                    </div>\r\n                  </div>\r\n                </AccordionTrigger>\r\n\r\n                <AccordionContent className=\"px-0 py-0 border-t border-gray-200 w-full\">\r\n                  <div className=\"w-full\">\r\n                    {calc.id === \"ebidta\" && <EbidtaCalculator date={date} />}\r\n                    {calc.id === \"cpa\" && (\r\n                      <div className=\"text-center py-12\">\r\n                        <p className=\"text-gray-500\">Breakeven CPA Calculator coming soon</p>\r\n                      </div>\r\n                    )}\r\n                    {calc.id === \"selling-price\" && (\r\n                      <div className=\"text-center py-12\">\r\n                        <p className=\"text-gray-500\">Selling Price Calculator coming soon</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </AccordionContent>\r\n              </AccordionItem>\r\n            ))}\r\n          </Accordion>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CalculatorsPage\r\n","import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\r\nimport AuthForm from \"./Auth/AuthForm.tsx\";\r\nimport { Toaster } from \"@/components/ui/toaster\"\r\nimport AnalyticsDashboard from './pages/AnalyticsDashboard/AnalyticsDashboard.tsx';\r\nimport GeneralDashboard from './pages/GeneralisedDashboard/GeneralDashboard.tsx'\r\nimport { ExcelMetricsPage } from './pages/MonthlyAdMetrics/ExcelMetrics.tsx';\r\nimport PerformanceDashboard from './pages/BrandPerformanceDashboard/PerformanceDashboard.tsx';\r\nimport SegmentDashboard from './pages/SegmentDashboard/SegmentDashboard.tsx';\r\nimport GoogleCallback from './Auth/OauthSucces.tsx';\r\nimport ReportsPage from './pages/ReportPage/ReportsPage.tsx';\r\nimport { TokenErrorProvider } from './context/TokenErrorContext.tsx';\r\nimport GoogleAdsDashboard from './pages/GoogleAdsHub/Dashboard.tsx';\r\nimport FbReportPage from './pages/Meta/FbReports/FbReportPage';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { store, persistor } from './store';\r\nimport ProfilePage from './pages/Profile Page/ProfilePage.tsx';\r\nimport BrandSetupDashboard from './pages/GeneralisedDashboard/BrandSetUpDashboard.tsx';\r\nimport TutorialManager from './components/Tutorial/TutorialManager.tsx';\r\nimport TutorialDriver from './components/Tutorial/TutorialDriver.tsx';\r\nimport LandingPage from './pages/LandingPage/page.tsx';\r\nimport PrivacyPolicy from './pages/LandingPage/components/PrivacyPolicy.tsx';\r\nimport TermsAndConditions from './pages/LandingPage/components/TermsAndConditions.tsx';\r\nimport ConversionLens from './pages/ConversionReportPage/ConversionLens.tsx';\r\nimport CampaignPage from './pages/Meta/Campaign Reports/CampaignPage.tsx';\r\nimport InterestPage from './pages/Meta/Interest Reports/InterestReportPage.tsx';\r\nimport ShopifyAuth from \"./Auth/Shopify.tsx\";\r\nimport PricingCallback from './Auth/PricingSuccess.tsx';\r\nimport AddBrandDashboard from './pages/GeneralisedDashboard/AddBrandDashboard.tsx';\r\nimport AutoLogout from './components/dashboard_component/AutoLogout.tsx';\r\nimport CreativesLibrary from './pages/CreativesLibrary/CreativesLibrary.tsx';\r\nimport D2CCalculator from './pages/D2CCalculator/D2CCalculator.tsx';\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <TokenErrorProvider>\r\n          <Router>\r\n            <AutoLogout>\r\n              <TutorialManager>\r\n                <TutorialDriver />\r\n                <Toaster />\r\n                <Routes>\r\n                <Route path='/' element={<LandingPage />} />\r\n                <Route path=\"/login\" element={<AuthForm />} />\r\n                <Route path=\"/dashboard\" element={<GeneralDashboard />} />\r\n                <Route path=\"/admetrics/:brandId\" element={<AnalyticsDashboard />} />\r\n                <Route path='/ecommerce-reports/:brandId' element={<ReportsPage />} />\r\n                <Route path=\"/marketing-insights/:brandId\" element={<ExcelMetricsPage />} />\r\n                <Route path='/performance-metrics' element={<PerformanceDashboard />} />\r\n                <Route path='/segment-dashboard/:brandId' element={<SegmentDashboard />} />\r\n                <Route path='/meta-reports/:brandId' element={<FbReportPage />} />\r\n                <Route path='/google-reports/:brandId' element={<GoogleAdsDashboard />} />\r\n                <Route path=\"/conversion-reports/:brandId\" element={<ConversionLens />} />\r\n                <Route path=\"/callback\" element={<GoogleCallback />} />\r\n                <Route path =\"/profile\" element = {<ProfilePage />} />\r\n                <Route path =\"/shopify\" element = {<ShopifyAuth />} />\r\n                <Route path =\"/brand-setup\" element = {<AddBrandDashboard />} />\r\n                <Route path =\"/privacy-policy\" element={<PrivacyPolicy />} />\r\n                <Route path =\"/terms-and-conditions\" element={<TermsAndConditions />} />\r\n                <Route path = \"/meta-campaigns/:brandId\" element={<CampaignPage />} />\r\n                <Route path = \"/meta-interest/:brandId\" element={<InterestPage />} />\r\n                <Route path = \"/creatives-library/:brandId\" element={<CreativesLibrary />} />\r\n                <Route path = \"/pricing_callback\" element={<PricingCallback />} />\r\n                <Route path = \"/first-time-brand-setup\" element={<BrandSetupDashboard />} />\r\n                <Route path = \"/d2c-calculator/:brandId\" element={<D2CCalculator />} />\r\n              </Routes>\r\n            </TutorialManager>\r\n            </AutoLogout>\r\n          </Router>\r\n        </TokenErrorProvider>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { StrictMode } from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\n\r\n\r\ncreateRoot(document.getElementById('root')!).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>,\r\n)\r\n"],"names":["cn","inputs","twMerge","clsx","Input","React.forwardRef","className","type","props","ref","jsx","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","labelVariants","Label","LabelPrimitive.Root","TooltipProvider","TooltipPrimitive.Provider","Tooltip","TooltipPrimitive.Root","TooltipTrigger","TooltipPrimitive.Trigger","TooltipContent","sideOffset","TooltipPrimitive.Portal","TooltipPrimitive.Content","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","t","toast","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","initialState","userSlice","createSlice","brandId","setUser","clearUser","removeBrandFromUser","addBrandToUser","userReducer","baseURL","apphandle","pricingPlans","setupSteps","Settings","LayoutDashboard","privacyPolicySections","termsAndConditionsSections","metricConfigs","AuthForm","isLogin","setIsLogin","useState","username","setUsername","email","setEmail","password","setPassword","showPassword","setShowPassword","shop","setShop","isShopifyLogin","setIsShopifyLogin","navigate","useNavigate","errors","setErrors","user","useSelector","useDispatch","useEffect","toggleForm","toggleShopifyLogin","validateForm","newErrors","isValid","handleSubmit","e","handleShopifyLogin","response","axios","userData","error","handleGoogleLogin","authUrl","prev","jsxs","HelpCircle","Store","Fragment","User","Mail","Lock","Eye","EyeOff","FcGoogle","ToastProvider","ToastPrimitives.Provider","ToastViewport","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","Cross2Icon","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","brandSlice","brand","setSelectedBrandId","setBrands","deleteBrand","resetBrand","brandReducer","Logo","ScrollArea","children","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","orientation","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","Ga4Logo","width","height","ShopifyLogo","FacebookLogo","GoogleLogo","WhiteGoogleAdsLogo","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Skeleton","PricingModal","onOpenChange","selectedBrandId","brands","subscription","setSubscription","loading","setLoading","selectedBrand","shopifyStoreName","_b","_a","handle","fetchSubscriptionDetails","err","currentPlanId","planName","Clock","format","Calendar","plan","isCurrentPlan","Star","feature","Check","CollapsibleSidebar","isExpanded","setIsExpanded","isPricingOpen","setIsPricingOpen","isInitialLoad","setIsInitialLoad","location","useLocation","sidebarRef","useRef","fetchBrands","useCallback","toggleSidebar","handleLogout","pathParts","getCurrentPathType","handleBrandChange","currentPathType","handlePricing","allDashboards","Home","CalendarRange","Calculator","Clapperboard","LineChart","ShoppingCart","Target","FaMeta","isItemDisabled","item","currentBrand","b","ChevronLeft","ChevronRight","SidebarItem","ChevronUp","ChevronDown","SidebarChild","Plus","isAnySubItemSelected","subItem","isMainItemActive","subIndex","disabled","PricingButton","UserProfile","LogoutButton","path","text","onClick","isSelected","isOpen","setIsOpen","hasChildren","React","handleToggle","isChildSelected","child","isActive","baseClasses","content","childItem","NavLink","icon","openIcon","closeIcon","tooltipContent","autoOpenOnSelect","grandchild","userProfileContent","User2Icon","logoutContent","LogOut","pricingContent","Crown","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","MetricCardSkeleton","MetricCard","label","value","date","formatDate","dateValue","AdAccountMetricsCard","metrics","isLoading","errorMessage","_","metric","classNames","showOutsideDays","DayPicker","ChevronLeftIcon","ChevronRightIcon","Popover","PopoverPrimitive.Root","PopoverTrigger","PopoverPrimitive.Trigger","PopoverContent","align","PopoverPrimitive.Portal","PopoverPrimitive.Content","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","dateSlice","setDate","clearDate","dateReducer","selectDateRange","createSelector","from","to","DatePickerWithRange","defaultDate","resetToFirstPage","dateRange","initialDate","useMemo","tempDate","setTempDate","compareDate","setCompareDate","setOpen","selectedPreset","setSelectedPreset","isCompareEnabled","setIsCompareEnabled","calendarMode","setCalendarMode","manualFromDate","setManualFromDate","manualToDate","setManualToDate","manualCompareFromDate","setManualCompareFromDate","manualCompareToDate","setManualCompareToDate","dates","today","daysSinceSunday","startOfThisWeek","subDays","endOfThisWeek","addDays","startOfThisMonth","endOfThisMonth","startOfLastWeek","endOfLastWeek","quarter","startOfThisQuarter","endOfThisQuarter","lastQuarter","lastQuarterYear","startOfLastQuarter","endOfLastQuarter","parseManualDate","dateString","parsedDate","parse","handleManualDateInput","fromDate","toDate","handleManualCompareDateInput","setPresetRange","presets","startOfMonth","subMonths","endOfMonth","subYears","startOfYear","endOfYear","handleCalendarSelect","range","formatDateRange","clearDateRange","handleUpdate","CalendarIcon","preset","localeSlice","setLocale","localReducer","notificationSlice","newNotification","notification","n","addNotification","markAsRead","markAllAsRead","removeNotification","clearAllNotifications","toggleSound","setSoundEnabled","notificationReducer","badgeVariants","Badge","HeaderNotificationDropdown","dropdownRef","notifications","unreadCount","isSoundEnabled","handleClickOutside","event","handleNotificationClick","notificationId","handleRemoveNotification","handleMarkAllAsRead","handleClearAll","handleToggleSound","getNotificationIcon","getNotificationColor","Bell","Volume2","VolumeX","X","conversionFiltersSlice","componentId","column","filter","conversionFiltersReducer","defaultAccountState","initializeAccountState","accountId","campaignGroupsSlice","name","campaigns","color","newGroup","groupId","group","campaignName","g","c","expandedGroups","isCreating","campaignGroupsReducer","campaignLabelsSlice","campaignId","l","sourceCampaignId","targetCampaignId","addLabelToCampaign","removeLabelFromCampaign","toggleAddingLabel","clearAccountLabels","copyLabels","deleteLabel","campaignLabelsReducer","tutorialSlice","newTutorials","setFirstTimeLogin","queueTutorials","startTutorial","nextTutorial","setTutorialStep","stopTutorial","completeFirstTimeLogin","resetTutorial","resetAllTutorials","tutorialsReducer","tokenErrorSlice","setFbTokenError","setGoogleAnalyticsTokenError","setGoogleAdsTokenError","resetAllTokenErrors","selectFbTokenError","selectGoogleAnalyticsTokenError","selectGoogleAdsTokenError","tokenErrorReducer","interestFilterSlice","tableId","currentFilters","i","f","addFilter","removeFilter","updateFilter","clearFilters","interestFilterReducer","brandFormSlice","setBrandFormData","clearBrandFormData","brandFormReducer","rootReducer","combineReducers","persistConfig","storage","oneWeekAgo","filteredNotifications","persistedReducer","persistReducer","store","configureStore","getDefaultMiddleware","persistor","persistStore","socket","isConnecting","isConnected","currentUserId","currentBrandId","reconnectAttempts","maxReconnectAttempts","reconnectTimer","initializeSocket","userId","handleRoomChanges","createSocketConnection","io","handleConnectionError","reason","attemptReconnection","setupEventListeners","_c","_d","_e","delay","data","handleNotification","notificationData","notificationType","message","playNotificationSound","audioContext","oscillator","gainNode","joinBrandRoom","leaveBrandRoom","disconnectSocket","isSocketConnected","useSocketConnection","previousBrandId","previousUserId","isInitializedRef","isInitializingRef","userChanged","isFirstTime","socketNotConnected","shouldInitialize","resetInitializingFlag","brandChanged","Header","Icon","showDatePicker","showSettings","showRefresh","handleManualRefresh","locale","RefreshCw","Loader","progress","setProgress","messageIndex","setMessageIndex","isComplete","setIsComplete","loadingMessages","progressInterval","messageInterval","CheckCircle","createAxiosInstance","axiosInstance","_f","_h","_g","PlatformModal","platform","onSuccess","searchTerm","setSearchTerm","googleAdsAccounts","setGoogleAdsAccounts","googleAnalyticsAccounts","setGoogleAnalyticsAccounts","facebookAdsAccounts","setFacebookAdsAccounts","showLoginButton","setShowLoginButton","connectedAccounts","setConnectedAccounts","selectedAccounts","setSelectedAccounts","params","modalToOpen","newUrl","connectedIds","endpoint","accountsSetter","account","handleError","axiosError","status","code","updateBrandWithAccount","accountIds","accountNames","managerIds","updateData","existingFbAccounts","currentBrandForGoogle","existingGoogleAccounts","newGoogleAccounts","mergedGoogleAccounts","newAccount","existing","currentBrandForGA","updatedBrand","updatedBrands","handleAccountSelection","handleConnectSelected","selectedAccountData","filteredAccounts","acc","displayName","managerId","handleGoogleAdLogin","handleGoogleAnalyticsLogin","handleFbLogin","searchLower","Search","filtered","isGoogleAds","isFacebook","accountName","uniqueKey","platformLogo","displayText","TicketForm","onClose","form","setForm","departments","setDepartments","submitting","setSubmitting","zohoNotConfigured","setZohoNotConfigured","brandName","handleChange","finalBrandName","submitData","MessageSquare","AlertCircle","Building","Briefcase","dept","Loader2","Send","ConversionFunnelCard","onNavigate","startDate","endDate","funnelData","setFunnelData","apiStartDate","apiEndDate","now","start","end","year","month","day","chartData","CustomTooltip","active","payload","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Legend","Area","MarketingInsightsCard","setMetrics","formatCurrency","DashboardCard","TrendingUp","columns","excludeFields","key","formatColumnHeader","formatCellValue","getCellColorClass","idx","PerformanceTable","performanceData","apiStatus","onRefresh","periodLabels","metricLabels","getPlatformLogo","metricKey","allMetrics","metricsSet","period","getMetricData","formatMetricValue","periods","DEFAULT_VISIBLE_ROWS","visibleMetrics","hasMoreRows","Minimize2","Maximize2","metricIdx","ArrowUpIcon","ArrowDownIcon","PaymentOrdersCard","paymentData","setPaymentData","totalCOD","sum","totalPrepaid","totalOrders","percentage","renderLabel","entry","PieChart","Pie","Cell","d","ConnectPlatformCard","PlusCircle","SummaryDashboard","userName","setPerformanceData","setApiStatus","platformModalOpen","setPlatformModalOpen","selectedPlatform","setSelectedPlatform","bannerVisible","setBannerVisible","helpDeskModalOpen","setHelpDeskModalOpen","platformToOpen","fetchPerformanceData","metaPromise","googlePromise","analyticsPromise","metaResponse","googleResponse","analyticsResponse","handleConnectPlatform","handlePlatformModalSuccess","allConnected","ConnectAccountsPage","isPlatformModalOpen","setIsPlatformModalOpen","useParams","Dashboard","setIsLoading","fbAdAccountsMetrics","setFbAdAccountsMetrics","googleAdMetrics","setGoogleAdMetrics","dateFrom","dateTo","rawMetrics","setRawMetrics","hasGoogleAdAccount","hasFbAdAccount","hasAnyAdAccounts","fetchFacebookData","fbError","fetchGoogleData","googleError","fetchAdData","fbData","googleData","calculateAggregatedMetrics","intervalId","calculateFacebookMetrics","totalSpent","totalRevenue","totalPurchases","totalClicks","totalImpressions","calculateGoogleMetrics","fbMetrics","googleMetrics","formattedMetrics","_i","_j","Blend","accountMetrics","fbmetrics","HelpDeskModal","isModalOpen","setIsModalOpen","FaHeadset","AnalyticsDashboard","GeneralDashboard","DataBuilding","loadingText","setLoadingText","interval","nextIndex","Link","BarChart3","ArrowRight","amount","currencyCode","TooltipHeader","tooltip","colSpan","rowSpan","isSubHeader","isImportant","isFirstInSection","isNumeric","isHeader","isSticky","ExcelMetricsPage","metricsData","setMetricsData","setError","isFullScreen","setIsFullScreen","currency","setCurrency","expandedMonths","setExpandedMonths","toggleFullScreen","getTableHeight","queryParams","currencyResponse","toggleMonth","monthYear","m","formatCurrencyUtil","formatPercentage","processedData","safeDivide","numerator","denominator","monthData","processedDailyMetrics","daily","metaSales","googleSales","totalAdSales","totalSales","totalSpend","totalROI","metaSpend","googleSpend","metaROAS","googleROAS","renderTable","renderContent","Minimize","Maximize","Download","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","ChevronDownIcon","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUpIcon","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","position","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","BrandPerformanceDashboard","selectedBrands","setSelectedBrands","newBrand","setNewBrand","editingBrand","setEditingBrand","editData","setEditData","achievedMetrics","setAchievedMetrics","getMetaMetrics","getGoogleAdMetrics","fetchMetricsData","handleInputChange","handleSourceChange","handleAddBrand","brandToAdd","newBrandTarget","handleEdit","brandToEdit","handleSaveEdit","handleCancelEdit","handleDelete","calculateMetrics","source","achievedSpend","achievedSales","remainingSales","achievedROAS","targetDate","remainingDays","requiredSalesPerDay","metaMetrics","metaBrands","googleBrands","isEditing","Edit2","Trash2","BarChart","Bar","PerformanceDashboard","ProductTab","tabs","setTabs","activeTab","setActiveTab","currentPage","setCurrentPage","expandedCategories","setExpandedCategories","filterApplied","setFilterApplied","rowsPerPage","filterData","setFilterData","cacheRef","POLL_INTERVAL","sortColumn","setSortColumn","sortOrder","setSortOrder","handleTabChange","newTabId","fetchTabData","tabId","body","isFilterApplied","tab","updatedBody","cacheKey","cachedData","prevTabs","requestBody","handleRowClick","currentTab","rowData","tabColumnMapping","bodyKeyMapping","columnToFetch","bodyKey","valueToSend","filterPayload","toggleCategory","categoryPath","newSet","renderCategoryRow","category","depth","currentPath","subCategory","handleSort","columnId","prevOrder","getCurrentTabData","sortedData","a","aValue","bValue","stringA","stringB","startIndex","endIndex","totalPages","categoryColumns","TableSkeleton","Package","Layers","Tag","BarChart2","Filter","ArrowUp","ArrowDown","ArrowUpDown","row","isIssuesColumn","isProductColumn","isStatusColumn","isNoIssues","getStatusColor","renderCell","statusValue","colorClass","rowIndex","cellIndex","SearchTermTable","searchTerms","setSearchTerms","hasMoreData","setHasMoreData","totalRecords","setTotalRecords","setTotalPages","campaignAdGroupPairs","setCampaignAdGroupPairs","selectedCampaign","setSelectedCampaign","statusOptions","setStatusOptions","selectedAdGroup","setSelectedAdGroup","selectedStatus","setSelectedStatus","Zap","Megaphone","Users","DollarSign","Percent","MousePointer","CreditCard","sortedSearchTerms","fetchData","handleCampaignChange","handleAdGroupChange","handleStatusChange","filteredAdGroups","pair","adGroup","isSearchTermColumn","searchTermValue","performance","isPerformingWell","SegmentDashboard","useBrandRefresh","GoogleCallback","refreshBrands","googletoken","fbToken","googleAdRefreshToken","googleAnalyticsRefreshToken","zohoRefreshToken","appToken","updateToken","url","token","sourcePage","login","getUser","allColumns","clamp","min","max","getColumnLogo","ReportTable","rows","initialPageSize","visibleColumns","columnOrder","React.useMemo","columnNameToKey","filteredColumns","col","columnKey","foundColumn","finalColumns","widths","setWidths","containerRef","React.useRef","containerWidth","setContainerWidth","columnsKeyRef","hasInitializedRef","measureContainer","currentColumnsKey","defaultWidths","minWidths","totalDefaultWidth","w","totalMinWidth","scaleFactor","scaledWidths","scaled","minWidth","totalScaled","excess","flexibleIndices","flexibleTotal","remaining","perColumn","finalTotal","adjustment","safeWidths","totalTableWidth","dragRef","resizingIndex","setResizingIndex","pageSize","setPageSize","page","setPage","totalRows","perPage","p","currentRows","onMove","drag","delta","def","next","onUp","startDrag","codCount","prepaidCount","total","v","isFirst","columnLogo","rIdx","cIdx","alignClass","EcommerceMetricsPage","propDateRange","refreshTrigger","compareFrom","compareTo","setData","compareStartDate","compareEndDate","transformedData","fetchMetrics","dateRanges","fetchedRanges","isConsolidatedData","platformConfigs","AlertTriangle","Facebook","ConnectPlatform","config","handleConnect","benefit","DaywiseMetricsPage","fetchedData","MissingDateWarning","NoAccessPage","loginOptions","handleLogin","provider","context","option","Sheet","SheetPrimitive.Root","SheetTrigger","SheetPrimitive.Trigger","SheetPortal","SheetPrimitive.Portal","SheetOverlay","SheetPrimitive.Overlay","sheetVariants","SheetContent","side","SheetPrimitive.Content","SheetPrimitive.Close","SheetHeader","SheetTitle","SheetPrimitive.Title","SheetDescription","SheetPrimitive.Description","ColumnManagementSheet","availableColumns","frozenColumns","onVisibilityChange","onOrderChange","onFrozenChange","viewPresets","showViewPresets","activeViewPreset","draggedColumn","setDraggedColumn","dropTargetColumn","setDropTargetColumn","handleDragStart","handleDragOver","handleDrop","targetColumn","newOrder","draggedIdx","targetIdx","toggleColumnVisibility","newVisibleColumns","toggleColumnFreeze","newFrozenColumns","Columns3","GripVertical","Pin","PinOff","MonthlyMetricsPage","aovData","setAovData","paymentOrdersData","setPaymentOrdersData","apiErrors","setApiErrors","aovMap","avgItemsMap","aovItem","monthKey","monthName","codOrderMap","prepaidOrderMap","paymentItem","aov","averageItemsPerOrder","codOrderCount","prepaidOrderCount","promises","results","aovResponse","paymentOrdersResponse","ReportsPage","hasGA4Account","googleAnalyticsTokenError","memoizedDateRange","baseColumns","getColumnsForTab","setVisibleColumns","setColumnOrder","setActiveViewPreset","getViewPresets","timeColumn","columnsForTab","newColumns","currentColumnsString","newColumnsString","setRefreshTrigger","handleVisibilityChange","matchingPreset","handleOrderChange","ChartBar","TokenErrorContext","createContext","TokenErrorProvider","tokenError","setTokenError","useTokenError","useContext","NewConversionTable","primaryColumn","secondaryColumns","monthlyDataKey","setRowsPerPage","getMonths","getMonthName","monthNumber","allMonths","monthlyData","monthNum","monthA","yearA","monthB","yearB","months","monthIndexA","monthIndexB","cols","filteredData","primaryValue","thresholds","totalSessions","totalConvRate","totalMonths","totalCostG","totalConvValueCostG","handleRowsPerPageChange","newRowsPerPage","renderMonthCell","sessions","convRate","purchases","cost","clicks","ConvValueCost","renderSummaryCell","columnIndex","getLeftPosition","conversionValue","renderDataRow","absoluteIndex","getMonthNumber","monthFormat","displayData","goToPage","pageNumber","renderColumnHeader","thresholdValue","monthIndex","ChevronsLeft","ChevronsRight","SearchTerm","onDataUpdate","currentFilter","apiResponse","setApiResponse","shallowEqual","filters","transformedFilters","apiColumnName","Age","googleAdsTokenError","Gender","Keyword","Product","SideTab","onTabChange","collapsible","mobileBreakpoint","isCollapsed","setIsCollapsed","isMobile","setIsMobile","isMobileOpen","setIsMobileOpen","checkMobile","toggleCollapse","toggleMobile","handleTabClick","PerformanceSummary","metricConfig","onCategoryFilter","filteredCategory","setFilteredCategory","primaryMonthlyKey","secondaryMonthlyKey","primaryMetric","secondaryMetric","categories","categorizedItems","isHighPrimary","isHighSecondary","handleCategoryClick","categoryName","handleRemoveFilter","NumberFormatSelector","iconSize","defaultStyles","calculateThresholds","getCellStyle","styles","isHighSessions","isGoodConversion","applyExcelStyles","worksheet","monthlyMetrics","XLSX.utils","C","headerCell","dataIndex","metricIndex","actualRow","startCol","endCol","cellRef","cellStyle","fillStyle","ExcelDownload","fileName","buttonClassName","handleDownload","workbook","sheetData","headerRow","colWidths","XLSX.writeFile","FileDown","GoogleAdsDashboard","tabData","setTabData","setCurrentFilter","handleTabDataUpdate","tabType","Keyboard","getPrimaryColumnForTab","handleCategoryFilter","items","getFileNameForTab","getSecondaryColumnsForTab","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","DropdownMenuPrimitive.SubTrigger","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","DotFilledIcon","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","MetaReportTable","totalPurchaseROAS","spend","purchaseROAS","purchaseConversionValue","totalPCV","AudienceFbReport","fullScreenAccount","setFullScreenAccount","blendedFilter","setBlendedFilter","accountFilters","setAccountFilters","selectedAccount","setSelectedAccount","handleBlendedCategoryFilter","handleAccountCategoryFilter","blendedAudienceData","currentData","singleAccountFilter","accountFilter","currentFilterHandler","PlacementFbReport","dateForm","blendedPlacementData","PlatformFbReport","blendedPlatformData","CountryFbReport","blendedCountryData","DeviceFbReport","blendedDeviceData","GenderFbReport","blendedGenderData","AgeFbReport","blendedAgeData","FbReportPage","fbTokenError","SquareUser","MapPin","Computer","Smartphone","Monitor","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","BrandIntegrationModal","brandData","platformIcons","platforms","handleAddAccount","platformKey","Building2","XCircle","ShoppingBag","BrandCards","userBrands","setSelectedBrand","selectedBrandData","setSelectedBrandData","userBrandDetails","handleOpenModal","handleCloseModal","handleDeleteBrand","ProfilePage","handleZohoLogin","Shield","ShopifyModalContent","onConnect","storeName","setStoreName","setIsConnecting","accessToken","shopName","OtherPlatformModalContent","connectedId","onRemove","fetchGoogleAdsAccounts","fetchGoogleAnalyticsAccounts","fetchFacebookAdsAccounts","request","authCode","googleAdsErrorMessage","errText","BrandSetup","openModal","setOpenModal","formData","setBrandName","googleAdsConnections","setGoogleAdsConnections","ga4Id","setGa4Id","fbAdId","setFBAdId","shopifyAccessToken","setShopifyAccessToken","isCreatingBrand","setIsCreatingBrand","newlyCreatedBrandId","setNewlyCreatedBrandId","getConnectedId","platformName","conn","canCreateBrand","canSubmit","handleCreateBrand","newBrandId","updatedUser","brandIdToUpdate","connection","accounts","Separator","decorative","SeparatorPrimitive.Root","BrandSetupDashboard","Sparkles","step","CircleCheckBig","availableTutorials","tutorialStepsMap","getTutorialsForPath","tutorial","getTutorialSteps","tutorialId","getTutorialById","getRelatedTutorials","getAllTutorialsForPath","sortedTutorials","tutorialMap","processTutorial","relatedId","relatedTutorial","result","tutorialRouteMap","TutorialManager","isFirstTimeLogin","isTutorialActive","tutorialQueue","activeTutorial","hasStartedTutorialsRef","isFirstLogin","shouldQueueTutorials","timer","allTutorials","tutorialIds","TutorialDriver","driverInstanceRef","activeTutorialStep","steps","allElementsExist","driverInstance","driverJS","element","currentStepIndex","relatedTutorials","CTA","Feature","PlatformFeatures","Folder","Features","Footer","generateLast30Days","baseValue","fluctuation","HeroSection","Navbar","LandingPage","PrivacyPolicy","section","para","TermsAndConditions","DeviceTypeConversion","GenderConversion","AgeConversion","InterestConversion","OperatingSystemConversion","BrowserConversion","SourceConversion","PageTitleConversion","PagePathConversion","LandingPageConversion","RegionConversion","CityTypeConversion","CountryConversion","CampaignConversion","ChannelConversion","ConversionLens","Globe","FileText","LABEL_COLORS","DEFAULT_COLUMN_WIDTH","MetaCampaignTable","blendedSummary","draggedCampaign","setDraggedCampaign","dragOverCampaign","setDragOverCampaign","dragOverColumn","setDragOverColumn","editingLabel","setEditingLabel","editLabelValue","setEditLabelValue","isEditMode","setIsEditMode","setFrozenColumns","scrollLeft","setScrollLeft","scrollTimeoutRef","isGroupingEnabled","setIsGroupingEnabled","groupedCampaigns","setGroupedCampaigns","ungroupedCampaigns","setUngroupedCampaigns","statusFilter","setStatusFilter","tableRef","columnRefs","newLabelInputRef","labels","currentAccountData","accountLabels","PREDEFINED_LABELS","allUniqueLabels","uniqueLabels","labelArray","hasAnyLabels","filterCampaignsByStatus","campaign","filteredCampaigns","firstAccount","initialColumns","initialVisibleColumns","orderedColumns","labelMap","unGrouped","currentCampaignLabels","grouped","labelColorMap","map","colorIndex","visibleOrderedColumns","currentColumn","shouldShowSeparator","frozenVisibleColumns","lastFrozenColumn","getSeparatorClass","handleAddLabel","handleRemoveLabel","handleCreateNewLabel","getColumnStyle","handleDragEnd","handleColumnDragStart","columnName","handleColumnDragOver","handleColumnDrop","targetColumnName","draggedIndex","targetIndex","newColumnOrder","handleColumnDragEnd","toggleGroupExpansion","labelIndex","updatedGroups","calculateGroupSummary","summary","summaryColumns","calculationMethods","totalLinkClicks","totalreach","totaloutboundctr","totalFrequency","totalUniqueClicks","totalAddToCart","totalCheckoutInitiated","totalLandingPageView","threeSecondsView","totalimpressions","values","val","calculateMethod","renderLabelDropdown","campaignLabels","Edit","LayoutGrid","currentScrollLeft","isFrozen","leftPos","columnStyle","el","SlidersHorizontal","groupIndex","CampaignPage","metaCampaign","setMetaCampaign","accountData","InterestFilter","newFilter","setNewFilter","handleAddFilter","handleClearFilters","InterestTable","showAccounts","draggedInterest","setDraggedInterest","dragOverInterest","setDragOverInterest","applyFilters","interest","filterValue","interestData","filteredInterestData","columnElement","interestId","targetInterestId","formatRoas","formatAccounts","renderCellContent","colIndex","InterestPage","metaInterest","setMetaInterest","accountKeys","hasInterests","tableHeight","baseHeight","hasBlendedData","hasAccountData","hasAnyData","ShopifyAuth","handleShopifyRedirect","searchParams","PricingCallback","chargeId","AddBrandDashboard","useTokenExpire","intervalRef","checkTokenValidity","checkTokenStatus","tokenResponse","AutoLogout","CreativeCard","creative","selectedKPIs","shouldShowKPI","kpiKey","isPlaying","setIsPlaying","showFullImage","setShowFullImage","carouselIndex","setCarouselIndex","videoRef","carouselImages","hasCarousel","handleVideoToggle","handleCarouselNext","handleCarouselPrev","handleShowFullImage","num","formatNumber","decimals","formatRatio","img","Pause","Play","ImageIcon","ExternalLink","AVAILABLE_KPIS","CATEGORY_LABELS","CreativesLibrary","creatives","setCreatives","initialLoading","setInitialLoading","nextCursor","setNextCursor","hasMore","setHasMore","formatFilter","setFormatFilter","setSelectedKPIs","kpi","observerRef","lastCardRef","fetchCreatives","cursor","reset","observer","entries","currentLastCard","handleRefresh","filteredCreatives","matchesSearch","matchesFormat","matchesStatus","handleKPIToggle","handleSelectAllKPIs","handleDeselectAllKPIs","kpisByCategory","ListFilter","shouldAttachRef","Film","Accordion","AccordionPrimitive.Root","AccordionItem","AccordionPrimitive.Item","AccordionTrigger","AccordionPrimitive.Header","AccordionPrimitive.Trigger","AccordionContent","AccordionPrimitive.Content","EbidtaCalculator","revenueLoading","setRevenueLoading","revenue","setRevenue","cogs","setCogs","sellingMarketingExpense","setSellingMarketingExpense","fulfillmentLogistics","setFulfillmentLogistics","otherOperatingExpense","setOtherOperatingExpense","fetchRevenue","CalculatorsPage","calculators","calc","App","Provider","PersistGate","Router","Routes","Route","D2CCalculator","createRoot","StrictMode"],"mappings":"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S,UAAAC,GAAW,oBAAAC,GAAqB,eAAAC,IAAmBN,GAAU,QACtEO,GAAAP,GAAU,QC9CZQ,GAAiC,gCAEjCC,GAAY,sBAmDZC,GAAe,CAC1B,CACI,GAAI,OACJ,MAAO,YACP,MAAO,OACP,YAAa,6CACb,SAAU,CACN,4BACA,sBACA,qBACA,gBACA,eACJ,EACA,WAAY,aAChB,EACA,CACI,GAAI,UACJ,MAAO,eACP,MAAO,MACP,OAAQ,SACR,YAAa,+BACb,SAAU,CACN,0BACA,sBACA,oBACA,mBACA,wBACJ,EACA,UAAW,GACX,WAAY,eAChB,EACA,CACI,GAAI,SACJ,MAAO,cACP,MAAO,MACP,OAAQ,SACR,YAAa,gCACb,SAAU,CACN,6BACA,sBACA,sBACA,sBACA,oBACJ,EACA,WAAY,eAChB,CACF,EAEaC,GAAa,CACxB,CACE,GAAI,EACJ,MAAO,cACP,YAAa,4CACb,KAAMC,EACR,EACA,CACE,GAAI,EACJ,MAAO,oBACP,YAAa,6CACb,KAAMC,EACR,CACF,EAIaC,GAAwB,CACnC,CACE,MAAO,kBACP,QAAS,CACP,2MACF,CACF,EACA,CACE,MAAO,4BACP,QAAS,CACP,uFACA,CACE,8EACA,mFACA,wGACF,CACF,CACF,EACA,CACE,MAAO,0CACP,QAAS,CACP,CACE,iDACA,6DACA,sCACA,4DACF,CACF,CACF,EACA,CACE,MAAO,+BACP,QAAS,CACP,6FACA,CACE,0FACA,2CACA,oBACF,CACF,CACF,EACA,CACE,MAAO,+BACP,QAAS,CACP,qBACA,CACE,+DACA,mCACA,kEACF,CACF,CACF,EACA,CACE,MAAO,mBACP,QAAS,CACP,0GACF,CACF,EACA,CACE,MAAO,2BACP,QAAS,CACP,yBACA,CACE,gEACA,yDACA,wDACA,2CACF,CACF,CACF,EACA,CACE,MAAO,sEACP,QAAS,CACP,mGACA,wJACF,CACF,EACA,CACE,MAAO,0BACP,QAAS,CACP,wEACA,CACE,qDACA,iCACA,qDACF,CACF,CACF,EACA,CACE,MAAO,qCACP,QAAS,CACP,mIACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,4CACA,yBACF,CACF,CACF,EAEaC,GAA6B,CACxC,CACE,MAAO,WACP,QAAS,CACP,6WACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,oRACA,CACE,gCACA,uGACA,oGACA,kFACA,wFACF,EACA,0TACF,CACF,EACA,CACE,MAAO,gBACP,QAAS,CACP,kqBACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,upBACF,CACF,EACA,CACE,MAAO,2BACP,QAAS,CACP,8aACF,CACF,EACA,CACE,MAAO,WACP,QAAS,CACP,+UACF,CACF,EACA,CACE,MAAO,qCACP,QAAS,CACP,gOACF,CACF,EACA,CACE,MAAO,mBACP,QAAS,CACP,kMACF,CACF,EACA,CACE,MAAO,aACP,QAAS,CACP,uCACF,CACF,EACA,CACE,MAAO,iBACP,QAAS,CACP,oFACA,yBACF,CACF,CACF,EAEaC,GAAgB,CACzB,sBAAuB,CACrB,QAAS,CACP,IAAK,iBACL,KAAM,UACR,EACA,UAAW,CACT,IAAK,iBACL,KAAM,YACR,CACF,EACA,aAAc,CACZ,QAAS,CACP,IAAK,cACL,KAAM,OACR,EACA,UAAW,CACT,IAAK,sBACL,KAAM,eACR,CACF,EACA,UAAW,CACT,QAAS,CACP,IAAK,aACL,KAAM,UACR,EACA,UAAW,CACT,IAAK,qBACL,KAAM,YACR,CACF,CACF,ECrTF,SAAwBC,IAAW,CACjC,KAAM,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAI,EACrC,CAACC,EAAUC,CAAW,EAAIF,WAAS,EAAE,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,WAAS,EAAE,EAC/B,CAACK,EAAUC,CAAW,EAAIN,WAAS,EAAE,EACrC,CAACO,EAAcC,CAAe,EAAIR,WAAS,EAAK,EAChD,CAACS,EAAMC,CAAO,EAAIV,WAAS,EAAE,EAC7B,CAACW,EAAgBC,CAAiB,EAAIZ,WAAS,EAAK,EACpD,CAAE,MAAAlC,GAAUQ,KACZuC,EAAWC,KACX,CAACC,EAAQC,CAAS,EAAIhB,WAAS,CAAE,SAAU,GAAI,MA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"}